var wp=Object.create;var fu=Object.defineProperty;var bp=Object.getOwnPropertyDescriptor;var mp=Object.getOwnPropertyNames;var vp=Object.getPrototypeOf,Ep=Object.prototype.hasOwnProperty;var xp=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ft=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _p=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of mp(t))!Ep.call(e,i)&&i!==r&&fu(e,i,{get:()=>t[i],enumerable:!(n=bp(t,i))||n.enumerable});return e};var du=(e,t,r)=>(r=e!=null?wp(vp(e)):{},_p(t||!e||!e.__esModule?fu(r,"default",{value:e,enumerable:!0}):r,e));var gu=Ft(xi=>{"use strict";me();xi.byteLength=kp;xi.toByteArray=Tp;xi.fromByteArray=Cp;var xt=[],at=[],Ap=typeof Uint8Array<"u"?Uint8Array:Array,Ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(_r=0,pu=Ko.length;_r<pu;++_r)xt[_r]=Ko[_r],at[Ko.charCodeAt(_r)]=_r;var _r,pu;at["-".charCodeAt(0)]=62;at["_".charCodeAt(0)]=63;function yu(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function kp(e){var t=yu(e),r=t[0],n=t[1];return(r+n)*3/4-n}function Sp(e,t,r){return(t+r)*3/4-r}function Tp(e){var t,r=yu(e),n=r[0],i=r[1],o=new Ap(Sp(e,n,i)),s=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)t=at[e.charCodeAt(u)]<<18|at[e.charCodeAt(u+1)]<<12|at[e.charCodeAt(u+2)]<<6|at[e.charCodeAt(u+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=t&255;return i===2&&(t=at[e.charCodeAt(u)]<<2|at[e.charCodeAt(u+1)]>>4,o[s++]=t&255),i===1&&(t=at[e.charCodeAt(u)]<<10|at[e.charCodeAt(u+1)]<<4|at[e.charCodeAt(u+2)]>>2,o[s++]=t>>8&255,o[s++]=t&255),o}function Ip(e){return xt[e>>18&63]+xt[e>>12&63]+xt[e>>6&63]+xt[e&63]}function Bp(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(Ip(n));return i.join("")}function Cp(e){for(var t,r=e.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(Bp(e,s,s+o>a?a:s+o));return n===1?(t=e[r-1],i.push(xt[t>>2]+xt[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(xt[t>>10]+xt[t>>4&63]+xt[t<<2&63]+"=")),i.join("")}});var wu=Ft(Wo=>{me();Wo.read=function(e,t,r,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,h=-7,p=r?i-1:0,g=r?-1:1,d=e[t+p];for(p+=g,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=o*256+e[t+p],p+=g,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=s*256+e[t+p],p+=g,h-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(d?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(d?-1:1)*s*Math.pow(2,o-n)};Wo.write=function(e,t,r,n,i,o){var s,a,u,c=o*8-i-1,h=(1<<c)-1,p=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,w=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+p>=1?t+=g/u:t+=g*Math.pow(2,1-p),t*u>=2&&(s++,u/=2),s+p>=h?(a=0,s=h):s+p>=1?(a=(t*u-1)*Math.pow(2,i),s=s+p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=a&255,d+=w,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=s&255,d+=w,s/=256,c-=8);e[r+d-w]|=y*128}});var Nu=Ft(Jr=>{"use strict";me();var Ho=gu(),Hr=wu(),bu=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Jr.Buffer=N;Jr.SlowBuffer=$p;Jr.INSPECT_MAX_BYTES=50;var _i=2147483647;Jr.kMaxLength=_i;N.TYPED_ARRAY_SUPPORT=Op();!N.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Op(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(N.prototype,"parent",{enumerable:!0,get:function(){if(!!N.isBuffer(this))return this.buffer}});Object.defineProperty(N.prototype,"offset",{enumerable:!0,get:function(){if(!!N.isBuffer(this))return this.byteOffset}});function jt(e){if(e>_i)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,N.prototype),t}function N(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Qo(e)}return xu(e,t,r)}N.poolSize=8192;function xu(e,t,r){if(typeof e=="string")return Fp(e,t);if(ArrayBuffer.isView(e))return Np(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(_t(e,ArrayBuffer)||e&&_t(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_t(e,SharedArrayBuffer)||e&&_t(e.buffer,SharedArrayBuffer)))return Jo(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return N.from(n,t,r);let i=Rp(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return N.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}N.from=function(e,t,r){return xu(e,t,r)};Object.setPrototypeOf(N.prototype,Uint8Array.prototype);Object.setPrototypeOf(N,Uint8Array);function _u(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Lp(e,t,r){return _u(e),e<=0?jt(e):t!==void 0?typeof r=="string"?jt(e).fill(t,r):jt(e).fill(t):jt(e)}N.alloc=function(e,t,r){return Lp(e,t,r)};function Qo(e){return _u(e),jt(e<0?0:Zo(e)|0)}N.allocUnsafe=function(e){return Qo(e)};N.allocUnsafeSlow=function(e){return Qo(e)};function Fp(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!N.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=Au(e,t)|0,n=jt(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function Go(e){let t=e.length<0?0:Zo(e.length)|0,r=jt(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function Np(e){if(_t(e,Uint8Array)){let t=new Uint8Array(e);return Jo(t.buffer,t.byteOffset,t.byteLength)}return Go(e)}function Jo(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,N.prototype),n}function Rp(e){if(N.isBuffer(e)){let t=Zo(e.length)|0,r=jt(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||es(e.length)?jt(0):Go(e);if(e.type==="Buffer"&&Array.isArray(e.data))return Go(e.data)}function Zo(e){if(e>=_i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_i.toString(16)+" bytes");return e|0}function $p(e){return+e!=e&&(e=0),N.alloc(+e)}N.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==N.prototype};N.compare=function(t,r){if(_t(t,Uint8Array)&&(t=N.from(t,t.offset,t.byteLength)),_t(r,Uint8Array)&&(r=N.from(r,r.offset,r.byteLength)),!N.isBuffer(t)||!N.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};N.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};N.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return N.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let i=N.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){let s=t[n];if(_t(s,Uint8Array))o+s.length>i.length?(N.isBuffer(s)||(s=N.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(N.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Au(e,t){if(N.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||_t(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Yo(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Fu(e).length;default:if(i)return n?-1:Yo(e).length;t=(""+t).toLowerCase(),i=!0}}N.byteLength=Au;function Up(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Hp(this,t,r);case"utf8":case"utf-8":return Su(this,t,r);case"ascii":return Kp(this,t,r);case"latin1":case"binary":return Wp(this,t,r);case"base64":return qp(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gp(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}N.prototype._isBuffer=!0;function Ar(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}N.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)Ar(this,r,r+1);return this};N.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)Ar(this,r,r+3),Ar(this,r+1,r+2);return this};N.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)Ar(this,r,r+7),Ar(this,r+1,r+6),Ar(this,r+2,r+5),Ar(this,r+3,r+4);return this};N.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?Su(this,0,t):Up.apply(this,arguments)};N.prototype.toLocaleString=N.prototype.toString;N.prototype.equals=function(t){if(!N.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:N.compare(this,t)===0};N.prototype.inspect=function(){let t="",r=Jr.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};bu&&(N.prototype[bu]=N.prototype.inspect);N.prototype.compare=function(t,r,n,i,o){if(_t(t,Uint8Array)&&(t=N.from(t,t.offset,t.byteLength)),!N.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;let s=o-i,a=n-r,u=Math.min(s,a),c=this.slice(i,o),h=t.slice(r,n);for(let p=0;p<u;++p)if(c[p]!==h[p]){s=c[p],a=h[p];break}return s<a?-1:a<s?1:0};function ku(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,es(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=N.from(t,n)),N.isBuffer(t))return t.length===0?-1:mu(e,t,r,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):mu(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function mu(e,t,r,n,i){let o=1,s=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,r/=2}function u(h,p){return o===1?h[p]:h.readUInt16BE(p*o)}let c;if(i){let h=-1;for(c=r;c<s;c++)if(u(e,c)===u(t,h===-1?0:c-h)){if(h===-1&&(h=c),c-h+1===a)return h*o}else h!==-1&&(c-=c-h),h=-1}else for(r+a>s&&(r=s-a),c=r;c>=0;c--){let h=!0;for(let p=0;p<a;p++)if(u(e,c+p)!==u(t,p)){h=!1;break}if(h)return c}return-1}N.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};N.prototype.indexOf=function(t,r,n){return ku(this,t,r,n,!0)};N.prototype.lastIndexOf=function(t,r,n){return ku(this,t,r,n,!1)};function jp(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=t.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(t.substr(s*2,2),16);if(es(a))return s;e[r+s]=a}return s}function Pp(e,t,r,n){return Ai(Yo(t,e.length-r),e,r,n)}function Dp(e,t,r,n){return Ai(Zp(t),e,r,n)}function Mp(e,t,r,n){return Ai(Fu(t),e,r,n)}function zp(e,t,r,n){return Ai(Xp(t,e.length-r),e,r,n)}N.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return jp(this,t,r,n);case"utf8":case"utf-8":return Pp(this,t,r,n);case"ascii":case"latin1":case"binary":return Dp(this,t,r,n);case"base64":return Mp(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zp(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};N.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function qp(e,t,r){return t===0&&r===e.length?Ho.fromByteArray(e):Ho.fromByteArray(e.slice(t,r))}function Su(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let u,c,h,p;switch(a){case 1:o<128&&(s=o);break;case 2:u=e[i+1],(u&192)===128&&(p=(o&31)<<6|u&63,p>127&&(s=p));break;case 3:u=e[i+1],c=e[i+2],(u&192)===128&&(c&192)===128&&(p=(o&15)<<12|(u&63)<<6|c&63,p>2047&&(p<55296||p>57343)&&(s=p));break;case 4:u=e[i+1],c=e[i+2],h=e[i+3],(u&192)===128&&(c&192)===128&&(h&192)===128&&(p=(o&15)<<18|(u&63)<<12|(c&63)<<6|h&63,p>65535&&p<1114112&&(s=p))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return Vp(n)}var vu=4096;function Vp(e){let t=e.length;if(t<=vu)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=vu));return r}function Kp(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function Wp(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Hp(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=ey[e[o]];return i}function Gp(e,t,r){let n=e.slice(t,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}N.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let i=this.subarray(t,r);return Object.setPrototypeOf(i,N.prototype),i};function Fe(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}N.prototype.readUintLE=N.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Fe(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return i};N.prototype.readUintBE=N.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Fe(t,r,this.length);let i=this[t+--r],o=1;for(;r>0&&(o*=256);)i+=this[t+--r]*o;return i};N.prototype.readUint8=N.prototype.readUInt8=function(t,r){return t=t>>>0,r||Fe(t,1,this.length),this[t]};N.prototype.readUint16LE=N.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Fe(t,2,this.length),this[t]|this[t+1]<<8};N.prototype.readUint16BE=N.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Fe(t,2,this.length),this[t]<<8|this[t+1]};N.prototype.readUint32LE=N.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Fe(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};N.prototype.readUint32BE=N.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Fe(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};N.prototype.readBigUInt64LE=nr(function(t){t=t>>>0,Gr(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Bn(t,this.length-8);let i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});N.prototype.readBigUInt64BE=nr(function(t){t=t>>>0,Gr(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Bn(t,this.length-8);let i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});N.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Fe(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};N.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Fe(t,r,this.length);let i=r,o=1,s=this[t+--i];for(;i>0&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};N.prototype.readInt8=function(t,r){return t=t>>>0,r||Fe(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};N.prototype.readInt16LE=function(t,r){t=t>>>0,r||Fe(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};N.prototype.readInt16BE=function(t,r){t=t>>>0,r||Fe(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};N.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Fe(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};N.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Fe(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};N.prototype.readBigInt64LE=nr(function(t){t=t>>>0,Gr(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Bn(t,this.length-8);let i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});N.prototype.readBigInt64BE=nr(function(t){t=t>>>0,Gr(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Bn(t,this.length-8);let i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});N.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Fe(t,4,this.length),Hr.read(this,t,!0,23,4)};N.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Fe(t,4,this.length),Hr.read(this,t,!1,23,4)};N.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Fe(t,8,this.length),Hr.read(this,t,!0,52,8)};N.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Fe(t,8,this.length),Hr.read(this,t,!1,52,8)};function Ye(e,t,r,n,i,o){if(!N.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}N.prototype.writeUintLE=N.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ye(this,t,r,n,a,0)}let o=1,s=0;for(this[r]=t&255;++s<n&&(o*=256);)this[r+s]=t/o&255;return r+n};N.prototype.writeUintBE=N.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ye(this,t,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=t&255;--o>=0&&(s*=256);)this[r+o]=t/s&255;return r+n};N.prototype.writeUint8=N.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,1,255,0),this[r]=t&255,r+1};N.prototype.writeUint16LE=N.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};N.prototype.writeUint16BE=N.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};N.prototype.writeUint32LE=N.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};N.prototype.writeUint32BE=N.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function Tu(e,t,r,n,i){Lu(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,r}function Iu(e,t,r,n,i){Lu(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o=o>>8,e[r+6]=o,o=o>>8,e[r+5]=o,o=o>>8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s=s>>8,e[r+2]=s,s=s>>8,e[r+1]=s,s=s>>8,e[r]=s,r+8}N.prototype.writeBigUInt64LE=nr(function(t,r=0){return Tu(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});N.prototype.writeBigUInt64BE=nr(function(t,r=0){return Iu(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});N.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let u=Math.pow(2,8*n-1);Ye(this,t,r,n,u-1,-u)}let o=0,s=1,a=0;for(this[r]=t&255;++o<n&&(s*=256);)t<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};N.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let u=Math.pow(2,8*n-1);Ye(this,t,r,n,u-1,-u)}let o=n-1,s=1,a=0;for(this[r+o]=t&255;--o>=0&&(s*=256);)t<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};N.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};N.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};N.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};N.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};N.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Ye(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};N.prototype.writeBigInt64LE=nr(function(t,r=0){return Tu(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});N.prototype.writeBigInt64BE=nr(function(t,r=0){return Iu(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Bu(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Cu(e,t,r,n,i){return t=+t,r=r>>>0,i||Bu(e,t,r,4,34028234663852886e22,-34028234663852886e22),Hr.write(e,t,r,n,23,4),r+4}N.prototype.writeFloatLE=function(t,r,n){return Cu(this,t,r,!0,n)};N.prototype.writeFloatBE=function(t,r,n){return Cu(this,t,r,!1,n)};function Ou(e,t,r,n,i){return t=+t,r=r>>>0,i||Bu(e,t,r,8,17976931348623157e292,-17976931348623157e292),Hr.write(e,t,r,n,52,8),r+8}N.prototype.writeDoubleLE=function(t,r,n){return Ou(this,t,r,!0,n)};N.prototype.writeDoubleBE=function(t,r,n){return Ou(this,t,r,!1,n)};N.prototype.copy=function(t,r,n,i){if(!N.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);let o=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),r),o};N.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!N.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){let s=t.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let o;if(typeof t=="number")for(o=r;o<n;++o)this[o]=t;else{let s=N.isBuffer(t)?t:N.from(t,i),a=s.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var Wr={};function Xo(e,t,r){Wr[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}Xo("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Xo("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);Xo("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Eu(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Eu(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function Eu(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Jp(e,t,r){Gr(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&Bn(t,e.length-(r+1))}function Lu(e,t,r,n,i,o){if(e>r||e<t){let s=typeof t=="bigint"?"n":"",a;throw o>3?t===0||t===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${t}${s} and <= ${r}${s}`,new Wr.ERR_OUT_OF_RANGE("value",a,e)}Jp(n,i,o)}function Gr(e,t){if(typeof e!="number")throw new Wr.ERR_INVALID_ARG_TYPE(t,"number",e)}function Bn(e,t,r){throw Math.floor(e)!==e?(Gr(e,r),new Wr.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new Wr.ERR_BUFFER_OUT_OF_BOUNDS:new Wr.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var Yp=/[^+/0-9A-Za-z-_]/g;function Qp(e){if(e=e.split("=")[0],e=e.trim().replace(Yp,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Yo(e,t){t=t||1/0;let r,n=e.length,i=null,o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Zp(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function Xp(e,t){let r,n,i,o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function Fu(e){return Ho.toByteArray(Qp(e))}function Ai(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function _t(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function es(e){return e!==e}var ey=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function nr(e){return typeof BigInt>"u"?ty:e}function ty(){throw new Error("BigInt not supported")}});var Pu=Ft((Q2,ju)=>{me();var ke=ju.exports={},At,kt;function ts(){throw new Error("setTimeout has not been defined")}function rs(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?At=setTimeout:At=ts}catch{At=ts}try{typeof clearTimeout=="function"?kt=clearTimeout:kt=rs}catch{kt=rs}})();function Ru(e){if(At===setTimeout)return setTimeout(e,0);if((At===ts||!At)&&setTimeout)return At=setTimeout,setTimeout(e,0);try{return At(e,0)}catch{try{return At.call(null,e,0)}catch{return At.call(this,e,0)}}}function ry(e){if(kt===clearTimeout)return clearTimeout(e);if((kt===rs||!kt)&&clearTimeout)return kt=clearTimeout,clearTimeout(e);try{return kt(e)}catch{try{return kt.call(null,e)}catch{return kt.call(this,e)}}}var Pt=[],Yr=!1,kr,ki=-1;function ny(){!Yr||!kr||(Yr=!1,kr.length?Pt=kr.concat(Pt):ki=-1,Pt.length&&$u())}function $u(){if(!Yr){var e=Ru(ny);Yr=!0;for(var t=Pt.length;t;){for(kr=Pt,Pt=[];++ki<t;)kr&&kr[ki].run();ki=-1,t=Pt.length}kr=null,Yr=!1,ry(e)}}ke.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Pt.push(new Uu(e,t)),Pt.length===1&&!Yr&&Ru($u)};function Uu(e,t){this.fun=e,this.array=t}Uu.prototype.run=function(){this.fun.apply(null,this.array)};ke.title="browser";ke.browser=!0;ke.env={};ke.argv=[];ke.version="";ke.versions={};function Dt(){}ke.on=Dt;ke.addListener=Dt;ke.once=Dt;ke.off=Dt;ke.removeListener=Dt;ke.removeAllListeners=Dt;ke.emit=Dt;ke.prependListener=Dt;ke.prependOnceListener=Dt;ke.listeners=function(e){return[]};ke.binding=function(e){throw new Error("process.binding is not supported")};ke.cwd=function(){return"/"};ke.chdir=function(e){throw new Error("process.chdir is not supported")};ke.umask=function(){return 0}});var Nt,Rt,me=xp(()=>{"use strict";Nt=Nu().Buffer,Rt=Pu();globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)});var Po=Ft(er=>{"use strict";me();Object.defineProperty(er,"__esModule",{value:!0});er.log=er.Log=er.LOGS=void 0;var wi;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.ARWEAVE=2]="ARWEAVE"})(wi=er.LOGS||(er.LOGS={}));var jo=class{constructor(){this.logs=wi.ARWEAVE}init(t=wi.ARWEAVE,r){return this.logs=t,this.arweave=r,this}show(t,r="log"){(this.logs===wi.YES||this.logs===wi.ARWEAVE&&this.arweave.getConfig().api.logging)&&console[r](t)}};er.Log=jo;er.log=new jo});var rp=Ft(nu=>{"use strict";me();Object.defineProperty(nu,"__esModule",{value:!0});var Do=Po(),ru=class{constructor(t){this._id=t.id,this._timestamp=t.timestamp,this._height=t.height,this._previous=t.previous}get id(){return this._id||Do.log.show("ID wasn't defined, make sure you have selected to return it."),this._id}get timestamp(){return this._timestamp||Do.log.show("Timestamp wasn't defined, make sure you have selected to return it."),this._timestamp}get height(){return this._height||Do.log.show("Height wasn't defined, make sure you have selected to return it."),this._height}get previous(){return this._previous||Do.log.show("Previous wasn't defined, make sure you have selected to return it."),this._previous}};nu.default=ru});var np=Ft(ou=>{"use strict";me();Object.defineProperty(ou,"__esModule",{value:!0});var vt=Po(),iu=class{constructor(t,r){this._id=t.id,this._anchor=t.anchor,this._signature=t.signature,this._recipient=t.recipient,this._owner=t.owner,this._fee=t.fee,this._quantity=t.quantity,this._data=t.data,this._tags=t.tags,this._block=t.block,t.parent&&t.parent.id&&(this._parent=t.parent),this.arweave=r}get id(){return this._id||vt.log.show("ID wasn't defined, make sure you have selected to return it."),this._id}get anchor(){return this._anchor||vt.log.show("Anchor wasn't defined, make sure you have selected to return it."),this._anchor}get signature(){return this._signature||vt.log.show("Signature wasn't defined, make sure you have selected to return it."),this._signature}get recipient(){return this._recipient||vt.log.show("Recipient wasn't defined, make sure you have selected to return it."),this._recipient}get owner(){return this._owner||vt.log.show("Owner wasn't defined, make sure you have selected to return it."),this._owner}get fee(){return this._fee||vt.log.show("Fee wasn't defined, make sure you have selected to return it."),this._fee}get quantity(){return this._quantity||vt.log.show("Quantity wasn't defined, make sure you have selected to return it."),this._quantity}get data(){return this._data||vt.log.show("Data wasn't defined, make sure you have selected to return it."),this._data}get tags(){return this._tags||vt.log.show("Tags wasn't defined, make sure you have selected to return it."),this._tags}get block(){return this._block||vt.log.show("Block wasn't defined, make sure you have selected to return it."),this._block}get parent(){return(!this._parent||!this._parent.id)&&vt.log.show("Parent wasn't defined, make sure you have selected to return it."),this._parent}};ou.default=iu});var op=Ft(Vr=>{"use strict";me();var qr=Vr&&Vr.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{c(n.next(h))}catch(p){s(p)}}function u(h){try{c(n.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,u)}c((n=n.apply(e,t||[])).next())})},ip=Vr&&Vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vr,"__esModule",{value:!0});var Mo=ip(rp()),zo=ip(np()),tr=Po(),su=class{constructor(t,r=tr.LOGS.ARWEAVE){this.reqType="transactions",this.options={},this.after="",this.afterRegex=/after: *"([^"]*)"/gi,this.emptyLinesRegex=/^\s*[\r\n]/gm,this.fields=["id","anchor","signature","recipient","owner","owner.address","owner.key","fee","fee.winston","fee.ar","quantity","quantity.winston","quantity.ar","data","data.size","data.type","tags","tags.name","tags.value","block","block.id","block.timestamp","block.height","block.previous","parent","parent.id"],this.includes=new Set,this.arweave=t,tr.log.init(r,t),this.includes=new Set(this.fields)}getCursor(){return this.after}search(t="transactions"){return this.reqType=t,this.options={},this.after="",this}id(t){return this.checkSearchType(),this.options.id=t,this.options.ids=[t],this}ids(t){return this.checkSearchType(),this.options.ids=t,this.options.id=t[0],this}appName(t){return this.checkSearchType(),this.tag("App-Name",[t]),this}type(t){return this.checkSearchType(),this.tag("Content-Type",[t]),this}tags(t){this.checkSearchType();let r=[];for(let i of t){let o=typeof i.values=="string"?[i.values]:i.values;r.push({name:i.name,values:o})}let n=this.options.tags&&this.options.tags.length?this.options.tags:[];return this.options.tags=[...r,...n],this}tag(t,r){return this.checkSearchType(),this.options.tags||(this.options.tags=[]),typeof r=="string"&&(r=[r]),this.options.tags.push({name:t,values:r}),this}from(t){return this.checkSearchType(),typeof t=="string"&&(t=[t]),this.options.owners=t,this}to(t){return this.checkSearchType(),typeof t=="string"&&(t=[t]),this.options.recipients=t,this}min(t){return this.checkSearchType(),this.options.block||(this.options.block={}),this.options.block.min=t,this}max(t){return this.checkSearchType(),this.options.block||(this.options.block={}),this.options.block.max=t,this}limit(t){return this.checkSearchType(),t<1?(console.warn("Limit cannot be less than 1, setting it to 1."),t=1):t>100&&console.warn("Arweave GQL won't return more than 100 entries at once."),this.options.first=t,this}sort(t){return this.options.sort=t,this}cursor(t){return this.checkSearchType(),this.options.after=t,this}only(t){if(this.includes=new Set,typeof t=="string"&&this.fields.indexOf(t)!==-1)return this.includes.add(t),this.validateIncludes(),this;let r=[];for(let n of t)this.fields.indexOf(n)!==-1&&r.push(n);return r.length&&(this.includes=new Set(r)),this.validateIncludes(),this}exclude(t){if(this.includes=new Set(this.fields),typeof t=="string")return this.includes.delete(t),this.validateIncludes(),this;for(let r of t)this.includes.delete(r);return this.validateIncludes(),this}find(t={}){return qr(this,void 0,void 0,function*(){this.checkSearchType();for(let n of Object.keys(t))this.options[n]=t[n];this.options.first||(this.options.first=10);let r=this.construct();return this.run(r)})}findOne(t={}){return qr(this,void 0,void 0,function*(){this.checkSearchType();for(let i of Object.keys(t))this.options[i]=t[i];this.options.first=1;let r=this.construct(),n=yield this.run(r);return n.length?n[0]:null})}findAll(t={}){return qr(this,void 0,void 0,function*(){this.checkSearchType();for(let n of Object.keys(t))this.options[n]=t[n];this.options.first=100;let r=this.construct();return this.runAll(r)})}next(){return qr(this,void 0,void 0,function*(){if(!this.after||!this.after.length){tr.log.show("next(): Nothing more to search.");return}let t=this.construct().replace(this.afterRegex,`after: "${this.after}"`),r=yield this.run(t);return this.options.first===1?r.length?r[0]:null:r})}run(t){return qr(this,void 0,void 0,function*(){tr.log.show("Running query:"),tr.log.show(t);let r=yield this.get(t);if(!r)return[];if(r.transaction)return[new zo.default(r.transaction,this.arweave)];if(r.block)return[new Mo.default(r.block)];if(r.transactions){let n=r.transactions.edges;return n&&n.length?this.after=n[n.length-1].cursor:this.after="",n.map(i=>new zo.default(i.node,this.arweave))}else if(r.blocks){let n=r.blocks.edges;return n&&n.length?this.after=n[n.length-1].cursor:this.after="",n.map(i=>new Mo.default(i.node))}})}runAll(t){return qr(this,void 0,void 0,function*(){let r=!0,n=[],i=this.options.after||"",o=!0;for(;r;){tr.log.show("Running query:"),tr.log.show(t);let s=yield this.get(t);if(!s)return[];if(s.transaction)return[new zo.default(s.transaction,this.arweave)];if(s.block)return[new Mo.default(s.block)];if(s.transactions){let a=s.transactions;a.edges&&a.edges.length&&(n=n.concat(a.edges),i=a.edges[a.edges.length-1].cursor,t=t.replace(this.afterRegex,`after: "${i}"`)),r=a.pageInfo.hasNextPage}else if(s.blocks){o=!1;let a=s.blocks;a.edges&&a.edges.length&&(n=n.concat(a.edges),i=a.edges[a.edges.length-1].cursor,t=t.replace(this.afterRegex,`after: "${i}"`)),r=a.pageInfo.hasNextPage}}return o?n.map(s=>new zo.default(s.node,this.arweave)):n.map(s=>new Mo.default(s.node))})}checkSearchType(){if(!this.reqType||this.reqType!=="transaction"&&this.reqType!=="block"&&this.reqType!=="transactions"&&this.reqType!=="blocks")throw new Error('Invalid search type. Must provide one and it must be either "transaction", "transactions", "block" or "blocks"')}get(t){return qr(this,void 0,void 0,function*(){let r=yield this.arweave.api.post("graphql",{query:t},{headers:{"content-type":"application/json"}});return tr.log.show("Returned result: "),tr.log.show(r.data.data),r.data.data})}construct(){this.reqType==="transactions"||this.reqType==="blocks"?(delete this.options.id,this.reqType==="transactions"?delete this.options.height:(delete this.options.owners,delete this.options.recipients,delete this.options.tags,delete this.options.block),this.options.after||(this.options.after="")):this.options={id:this.options.id};let t=JSON.stringify(this.options,null,2).replace(/"([^"]+)":/gm,"$1: ").replace('"HEIGHT_DESC"',"HEIGHT_DESC").replace('"HEIGHT_ASC"',"HEIGHT_ASC");t=t.substring(1,t.length-1);let r="";if(this.reqType==="transaction"||this.reqType==="transactions"){let n="";this.includes.has("owner")&&(n=`owner {
          ${this.includes.has("owner.address")?"address":""}
          ${this.includes.has("owner.key")?"key":""}
        }`);let i="";this.includes.has("fee")&&(i=`fee {
          ${this.includes.has("fee.winston")?"winston":""}
          ${this.includes.has("fee.ar")?"ar":""}
        }`);let o="";this.includes.has("quantity")&&(o=`quantity {
          ${this.includes.has("quantity.winston")?"winston":""}
          ${this.includes.has("quantity.ar")?"ar":""}
        }`);let s="";this.includes.has("data")&&(s=`data {
          ${this.includes.has("data.size")?"size":""}
          ${this.includes.has("data.type")?"type":""}
        }`);let a="";this.includes.has("tags")&&(a=`tags {
          ${this.includes.has("tags.name")?"name":""}
          ${this.includes.has("tags.value")?"value":""}
        }`);let u="";this.includes.has("block")&&(u=`block {
          ${this.includes.has("block.id")?"id":""}
          ${this.includes.has("block.timestamp")?"timestamp":""}
          ${this.includes.has("block.height")?"height":""}
          ${this.includes.has("block.previous")?"previous":""}
        }`);let c="";(this.includes.has("parent")||this.includes.has("parent.id"))&&(c=`parent {
          id
        }`),r=`
      ${this.includes.has("id")?"id":""}
      ${this.includes.has("anchor")?"anchor":""}
      ${this.includes.has("signature")?"signature":""}
      ${this.includes.has("recipient")?"recipient":""}
      ${n}
      ${i}
      ${o}
      ${s}
      ${a}
      ${u}
      ${c}
      `,r=r.replace(this.emptyLinesRegex,"").trim(),r.length||(r=`
        id
        anchor
        signature
        recipient
        owner {
          address
          key
        }
        fee {
          winston
          ar
        }
        quantity {
          winston
          ar
        }
        data {
          size
          type
        }
        tags {
          name
          value
        }
        block {
          id
          timestamp
          height
          previous
        }
        parent {
          id
        }`)}else r=`
      ${this.includes.has("block.id")?"id":""}
      ${this.includes.has("block.timestamp")?"timestamp":""}
      ${this.includes.has("block.height")?"height":""}
      ${this.includes.has("block.previous")?"previous":""}
      `,r=r.replace(this.emptyLinesRegex,"").trim(),r.length||(r=`
        id
        timestamp
        height
        previous`);if((this.reqType==="transactions"||this.reqType==="blocks")&&(r=`
      pageInfo {
        hasNextPage
      }
      edges { 
        cursor
        node { 
          ${r}
        } 
      }`),!this.reqType||!t)throw new Error("Invalid options. You need to first set your options!");return`query {
      ${this.reqType}(
        ${t}
      ){
        ${r}
      }
    }`.replace(/(\r\n|\n|\r)/gm,"")}validateIncludes(){this.includes.has("owner")&&!this.includes.has("owner.address")&&!this.includes.has("owner.key")&&(this.includes.add("owner.address"),this.includes.add("owner.key")),this.includes.has("fee")&&!this.includes.has("fee.winston")&&!this.includes.has("fee.ar")&&(this.includes.add("fee.winston"),this.includes.add("fee.ar")),this.includes.has("quantity")&&!this.includes.has("quantity.winston")&&!this.includes.has("quantity.ar")&&(this.includes.add("quantity.winston"),this.includes.add("quantity.ar")),this.includes.has("data")&&!this.includes.has("data.size")&&!this.includes.has("data.type")&&(this.includes.add("data.size"),this.includes.add("data.type")),this.includes.has("tags")&&!this.includes.has("tags.name")&&!this.includes.has("tags.value")&&(this.includes.add("tags.name"),this.includes.add("tags.value")),this.includes.has("block")&&!this.includes.has("block.timestamp")&&!this.includes.has("block.height")&&!this.includes.has("block.previous")&&(this.includes.add("block.id"),this.includes.add("block.timestamp"),this.includes.add("block.height"),this.includes.add("block.previous")),!this.includes.has("owner")&&(this.includes.has("owner.address")||this.includes.has("owner.key"))&&this.includes.add("owner"),!this.includes.has("fee")&&(this.includes.has("fee.winston")||this.includes.has("fee.ar"))&&this.includes.add("fee"),!this.includes.has("quantity")&&(this.includes.has("quantity.winston")||this.includes.has("quantity.ar"))&&this.includes.add("quantity"),!this.includes.has("data")&&(this.includes.has("data.size")||this.includes.has("data.type"))&&this.includes.add("data"),!this.includes.has("tags")&&(this.includes.has("tags.name")||this.includes.has("tags.value"))&&this.includes.add("tags"),!this.includes.has("block")&&(this.includes.has("block.timestamp")||this.includes.has("block.height")||this.includes.has("block.previous"))&&this.includes.add("block")}};Vr.default=su});var up=Ft(ot=>{"use strict";me();var R2=ot&&ot.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ot,"__esModule",{value:!0});var Ce=256,au=function(){function e(t){t===void 0&&(t="="),this._paddingCharacter=t}return e.prototype.encodedLength=function(t){return this._paddingCharacter?(t+2)/3*4|0:(t*8+5)/6|0},e.prototype.encode=function(t){for(var r="",n=0;n<t.length-2;n+=3){var i=t[n]<<16|t[n+1]<<8|t[n+2];r+=this._encodeByte(i>>>3*6&63),r+=this._encodeByte(i>>>2*6&63),r+=this._encodeByte(i>>>1*6&63),r+=this._encodeByte(i>>>0*6&63)}var o=t.length-n;if(o>0){var i=t[n]<<16|(o===2?t[n+1]<<8:0);r+=this._encodeByte(i>>>3*6&63),r+=this._encodeByte(i>>>2*6&63),o===2?r+=this._encodeByte(i>>>1*6&63):r+=this._paddingCharacter||"",r+=this._paddingCharacter||""}return r},e.prototype.maxDecodedLength=function(t){return this._paddingCharacter?t/4*3|0:(t*6+7)/8|0},e.prototype.decodedLength=function(t){return this.maxDecodedLength(t.length-this._getPaddingLength(t))},e.prototype.decode=function(t){if(t.length===0)return new Uint8Array(0);for(var r=this._getPaddingLength(t),n=t.length-r,i=new Uint8Array(this.maxDecodedLength(n)),o=0,s=0,a=0,u=0,c=0,h=0,p=0;s<n-4;s+=4)u=this._decodeChar(t.charCodeAt(s+0)),c=this._decodeChar(t.charCodeAt(s+1)),h=this._decodeChar(t.charCodeAt(s+2)),p=this._decodeChar(t.charCodeAt(s+3)),i[o++]=u<<2|c>>>4,i[o++]=c<<4|h>>>2,i[o++]=h<<6|p,a|=u&Ce,a|=c&Ce,a|=h&Ce,a|=p&Ce;if(s<n-1&&(u=this._decodeChar(t.charCodeAt(s)),c=this._decodeChar(t.charCodeAt(s+1)),i[o++]=u<<2|c>>>4,a|=u&Ce,a|=c&Ce),s<n-2&&(h=this._decodeChar(t.charCodeAt(s+2)),i[o++]=c<<4|h>>>2,a|=h&Ce),s<n-3&&(p=this._decodeChar(t.charCodeAt(s+3)),i[o++]=h<<6|p,a|=p&Ce),a!==0)throw new Error("Base64Coder: incorrect characters for decoding");return i},e.prototype._encodeByte=function(t){var r=t;return r+=65,r+=25-t>>>8&0-65-26+97,r+=51-t>>>8&26-97-52+48,r+=61-t>>>8&52-48-62+43,r+=62-t>>>8&62-43-63+47,String.fromCharCode(r)},e.prototype._decodeChar=function(t){var r=Ce;return r+=(42-t&t-44)>>>8&-Ce+t-43+62,r+=(46-t&t-48)>>>8&-Ce+t-47+63,r+=(47-t&t-58)>>>8&-Ce+t-48+52,r+=(64-t&t-91)>>>8&-Ce+t-65+0,r+=(96-t&t-123)>>>8&-Ce+t-97+26,r},e.prototype._getPaddingLength=function(t){var r=0;if(this._paddingCharacter){for(var n=t.length-1;n>=0&&t[n]===this._paddingCharacter;n--)r++;if(t.length<4||r>2)throw new Error("Base64Coder: incorrect padding")}return r},e}();ot.Coder=au;var bi=new au;function $2(e){return bi.encode(e)}ot.encode=$2;function U2(e){return bi.decode(e)}ot.decode=U2;var sp=function(e){R2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._encodeByte=function(r){var n=r;return n+=65,n+=25-r>>>8&0-65-26+97,n+=51-r>>>8&26-97-52+48,n+=61-r>>>8&52-48-62+45,n+=62-r>>>8&62-45-63+95,String.fromCharCode(n)},t.prototype._decodeChar=function(r){var n=Ce;return n+=(44-r&r-46)>>>8&-Ce+r-45+62,n+=(94-r&r-96)>>>8&-Ce+r-95+63,n+=(47-r&r-58)>>>8&-Ce+r-48+52,n+=(64-r&r-91)>>>8&-Ce+r-65+0,n+=(96-r&r-123)>>>8&-Ce+r-97+26,n},t}(au);ot.URLSafeCoder=sp;var ap=new sp;function j2(e){return ap.encode(e)}ot.encodeURLSafe=j2;function P2(e){return ap.decode(e)}ot.decodeURLSafe=P2;ot.encodedLength=function(e){return bi.encodedLength(e)};ot.maxDecodedLength=function(e){return bi.maxDecodedLength(e)};ot.decodedLength=function(e){return bi.decodedLength(e)}});me();me();var iy=Object.create,ho=Object.defineProperty,oy=Object.getOwnPropertyDescriptor,sy=Object.getOwnPropertyNames,ay=Object.getPrototypeOf,uy=Object.prototype.hasOwnProperty,se=(e,t)=>()=>(e&&(t=e(e=0)),t),P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pe=(e,t)=>{for(var r in t)ho(e,r,{get:t[r],enumerable:!0})},eh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of sy(t))!uy.call(e,i)&&i!==r&&ho(e,i,{get:()=>t[i],enumerable:!(n=oy(t,i))||n.enumerable});return e},z=(e,t,r)=>(r=e!=null?iy(ay(e)):{},eh(t||!e||!e.__esModule?ho(r,"default",{value:e,enumerable:!0}):r,e)),Ze=e=>eh(ho({},"__esModule",{value:!0}),e),ly=P(e=>{"use strict";v(),e.byteLength=u,e.toByteArray=h,e.fromByteArray=d;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,s=i.length;o<s;++o)t[o]=i[o],r[i.charCodeAt(o)]=o;var o,s;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function a(w){var y=w.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=w.indexOf("=");b===-1&&(b=y);var x=b===y?0:4-b%4;return[b,x]}function u(w){var y=a(w),b=y[0],x=y[1];return(b+x)*3/4-x}function c(w,y,b){return(y+b)*3/4-b}function h(w){var y,b=a(w),x=b[0],E=b[1],S=new n(c(w,x,E)),O=0,U=E>0?x-4:x,_;for(_=0;_<U;_+=4)y=r[w.charCodeAt(_)]<<18|r[w.charCodeAt(_+1)]<<12|r[w.charCodeAt(_+2)]<<6|r[w.charCodeAt(_+3)],S[O++]=y>>16&255,S[O++]=y>>8&255,S[O++]=y&255;return E===2&&(y=r[w.charCodeAt(_)]<<2|r[w.charCodeAt(_+1)]>>4,S[O++]=y&255),E===1&&(y=r[w.charCodeAt(_)]<<10|r[w.charCodeAt(_+1)]<<4|r[w.charCodeAt(_+2)]>>2,S[O++]=y>>8&255,S[O++]=y&255),S}function p(w){return t[w>>18&63]+t[w>>12&63]+t[w>>6&63]+t[w&63]}function g(w,y,b){for(var x,E=[],S=y;S<b;S+=3)x=(w[S]<<16&16711680)+(w[S+1]<<8&65280)+(w[S+2]&255),E.push(p(x));return E.join("")}function d(w){for(var y,b=w.length,x=b%3,E=[],S=16383,O=0,U=b-x;O<U;O+=S)E.push(g(w,O,O+S>U?U:O+S));return x===1?(y=w[b-1],E.push(t[y>>2]+t[y<<4&63]+"==")):x===2&&(y=(w[b-2]<<8)+w[b-1],E.push(t[y>>10]+t[y>>4&63]+t[y<<2&63]+"=")),E.join("")}}),cy=P(e=>{v(),e.read=function(t,r,n,i,o){var s,a,u=o*8-i-1,c=(1<<u)-1,h=c>>1,p=-7,g=n?o-1:0,d=n?-1:1,w=t[r+g];for(g+=d,s=w&(1<<-p)-1,w>>=-p,p+=u;p>0;s=s*256+t[r+g],g+=d,p-=8);for(a=s&(1<<-p)-1,s>>=-p,p+=i;p>0;a=a*256+t[r+g],g+=d,p-=8);if(s===0)s=1-h;else{if(s===c)return a?NaN:(w?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-h}return(w?-1:1)*a*Math.pow(2,s-i)},e.write=function(t,r,n,i,o,s){var a,u,c,h=s*8-o-1,p=(1<<h)-1,g=p>>1,d=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=i?0:s-1,y=i?1:-1,b=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,a=p):(a=Math.floor(Math.log(r)/Math.LN2),r*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+g>=1?r+=d/c:r+=d*Math.pow(2,1-g),r*c>=2&&(a++,c/=2),a+g>=p?(u=0,a=p):a+g>=1?(u=(r*c-1)*Math.pow(2,o),a=a+g):(u=r*Math.pow(2,g-1)*Math.pow(2,o),a=0));o>=8;t[n+w]=u&255,w+=y,u/=256,o-=8);for(a=a<<o|u,h+=o;h>0;t[n+w]=a&255,w+=y,a/=256,h-=8);t[n+w-y]|=b*128}}),fo=P(e=>{"use strict";v();var t=ly(),r=cy(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let l=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(l,f),l.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(l){if(l>i)throw new RangeError('The value "'+l+'" is invalid for option "size"');let f=new Uint8Array(l);return Object.setPrototypeOf(f,a.prototype),f}function a(l,f,m){if(typeof l=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(l)}return u(l,f,m)}a.poolSize=8192;function u(l,f,m){if(typeof l=="string")return g(l,f);if(ArrayBuffer.isView(l))return w(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(Et(l,ArrayBuffer)||l&&Et(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Et(l,SharedArrayBuffer)||l&&Et(l.buffer,SharedArrayBuffer)))return y(l,f,m);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let I=l.valueOf&&l.valueOf();if(I!=null&&I!==l)return a.from(I,f,m);let F=b(l);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return a.from(l[Symbol.toPrimitive]("string"),f,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}a.from=function(l,f,m){return u(l,f,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function h(l,f,m){return c(l),l<=0?s(l):f!==void 0?typeof m=="string"?s(l).fill(f,m):s(l).fill(f):s(l)}a.alloc=function(l,f,m){return h(l,f,m)};function p(l){return c(l),s(l<0?0:x(l)|0)}a.allocUnsafe=function(l){return p(l)},a.allocUnsafeSlow=function(l){return p(l)};function g(l,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let m=S(l,f)|0,I=s(m),F=I.write(l,f);return F!==m&&(I=I.slice(0,F)),I}function d(l){let f=l.length<0?0:x(l.length)|0,m=s(f);for(let I=0;I<f;I+=1)m[I]=l[I]&255;return m}function w(l){if(Et(l,Uint8Array)){let f=new Uint8Array(l);return y(f.buffer,f.byteOffset,f.byteLength)}return d(l)}function y(l,f,m){if(f<0||l.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<f+(m||0))throw new RangeError('"length" is outside of buffer bounds');let I;return f===void 0&&m===void 0?I=new Uint8Array(l):m===void 0?I=new Uint8Array(l,f):I=new Uint8Array(l,f,m),Object.setPrototypeOf(I,a.prototype),I}function b(l){if(a.isBuffer(l)){let f=x(l.length)|0,m=s(f);return m.length===0||l.copy(m,0,0,f),m}if(l.length!==void 0)return typeof l.length!="number"||Vo(l.length)?s(0):d(l);if(l.type==="Buffer"&&Array.isArray(l.data))return d(l.data)}function x(l){if(l>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return l|0}function E(l){return+l!=l&&(l=0),a.alloc(+l)}a.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==a.prototype},a.compare=function(l,f){if(Et(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),Et(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(l)||!a.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===f)return 0;let m=l.length,I=f.length;for(let F=0,R=Math.min(m,I);F<R;++F)if(l[F]!==f[F]){m=l[F],I=f[F];break}return m<I?-1:I<m?1:0},a.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(l,f){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return a.alloc(0);let m;if(f===void 0)for(f=0,m=0;m<l.length;++m)f+=l[m].length;let I=a.allocUnsafe(f),F=0;for(m=0;m<l.length;++m){let R=l[m];if(Et(R,Uint8Array))F+R.length>I.length?(a.isBuffer(R)||(R=a.from(R)),R.copy(I,F)):Uint8Array.prototype.set.call(I,R,F);else if(a.isBuffer(R))R.copy(I,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=R.length}return I};function S(l,f){if(a.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||Et(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);let m=l.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&m===0)return 0;let F=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return qo(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return hu(l).length;default:if(F)return I?-1:qo(l).length;f=(""+f).toLowerCase(),F=!0}}a.byteLength=S;function O(l,f,m){let I=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,f>>>=0,m<=f))return"";for(l||(l="utf8");;)switch(l){case"hex":return L(this,f,m);case"utf8":case"utf-8":return qe(this,f,m);case"ascii":return D(this,f,m);case"latin1":case"binary":return k(this,f,m);case"base64":return ae(this,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,f,m);default:if(I)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),I=!0}}a.prototype._isBuffer=!0;function U(l,f,m){let I=l[f];l[f]=l[m],l[m]=I}a.prototype.swap16=function(){let l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<l;f+=2)U(this,f,f+1);return this},a.prototype.swap32=function(){let l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<l;f+=4)U(this,f,f+3),U(this,f+1,f+2);return this},a.prototype.swap64=function(){let l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<l;f+=8)U(this,f,f+7),U(this,f+1,f+6),U(this,f+2,f+5),U(this,f+3,f+4);return this},a.prototype.toString=function(){let l=this.length;return l===0?"":arguments.length===0?qe(this,0,l):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(l){if(!a.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:a.compare(this,l)===0},a.prototype.inspect=function(){let l="",f=e.INSPECT_MAX_BYTES;return l=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(l+=" ... "),"<Buffer "+l+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(l,f,m,I,F){if(Et(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(f===void 0&&(f=0),m===void 0&&(m=l?l.length:0),I===void 0&&(I=0),F===void 0&&(F=this.length),f<0||m>l.length||I<0||F>this.length)throw new RangeError("out of range index");if(I>=F&&f>=m)return 0;if(I>=F)return-1;if(f>=m)return 1;if(f>>>=0,m>>>=0,I>>>=0,F>>>=0,this===l)return 0;let R=F-I,q=m-f,fe=Math.min(R,q),je=this.slice(I,F),ge=l.slice(f,m);for(let de=0;de<fe;++de)if(je[de]!==ge[de]){R=je[de],q=ge[de];break}return R<q?-1:q<R?1:0};function _(l,f,m,I,F){if(l.length===0)return-1;if(typeof m=="string"?(I=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Vo(m)&&(m=F?0:l.length-1),m<0&&(m=l.length+m),m>=l.length){if(F)return-1;m=l.length-1}else if(m<0)if(F)m=0;else return-1;if(typeof f=="string"&&(f=a.from(f,I)),a.isBuffer(f))return f.length===0?-1:T(l,f,m,I,F);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(l,f,m):Uint8Array.prototype.lastIndexOf.call(l,f,m):T(l,[f],m,I,F);throw new TypeError("val must be string, number or Buffer")}function T(l,f,m,I,F){let R=1,q=l.length,fe=f.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(l.length<2||f.length<2)return-1;R=2,q/=2,fe/=2,m/=2}function je(de,Te){return R===1?de[Te]:de.readUInt16BE(Te*R)}let ge;if(F){let de=-1;for(ge=m;ge<q;ge++)if(je(l,ge)===je(f,de===-1?0:ge-de)){if(de===-1&&(de=ge),ge-de+1===fe)return de*R}else de!==-1&&(ge-=ge-de),de=-1}else for(m+fe>q&&(m=q-fe),ge=m;ge>=0;ge--){let de=!0;for(let Te=0;Te<fe;Te++)if(je(l,ge+Te)!==je(f,Te)){de=!1;break}if(de)return ge}return-1}a.prototype.includes=function(l,f,m){return this.indexOf(l,f,m)!==-1},a.prototype.indexOf=function(l,f,m){return _(this,l,f,m,!0)},a.prototype.lastIndexOf=function(l,f,m){return _(this,l,f,m,!1)};function A(l,f,m,I){m=Number(m)||0;let F=l.length-m;I?(I=Number(I),I>F&&(I=F)):I=F;let R=f.length;I>R/2&&(I=R/2);let q;for(q=0;q<I;++q){let fe=parseInt(f.substr(q*2,2),16);if(Vo(fe))return q;l[m+q]=fe}return q}function B(l,f,m,I){return Ei(qo(f,l.length-m),l,m,I)}function j(l,f,m,I){return Ei(dp(f),l,m,I)}function K(l,f,m,I){return Ei(hu(f),l,m,I)}function J(l,f,m,I){return Ei(pp(f,l.length-m),l,m,I)}a.prototype.write=function(l,f,m,I){if(f===void 0)I="utf8",m=this.length,f=0;else if(m===void 0&&typeof f=="string")I=f,m=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(m)?(m=m>>>0,I===void 0&&(I="utf8")):(I=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let F=this.length-f;if((m===void 0||m>F)&&(m=F),l.length>0&&(m<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let R=!1;for(;;)switch(I){case"hex":return A(this,l,f,m);case"utf8":case"utf-8":return B(this,l,f,m);case"ascii":case"latin1":case"binary":return j(this,l,f,m);case"base64":return K(this,l,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,l,f,m);default:if(R)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),R=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(l,f,m){return f===0&&m===l.length?t.fromByteArray(l):t.fromByteArray(l.slice(f,m))}function qe(l,f,m){m=Math.min(l.length,m);let I=[],F=f;for(;F<m;){let R=l[F],q=null,fe=R>239?4:R>223?3:R>191?2:1;if(F+fe<=m){let je,ge,de,Te;switch(fe){case 1:R<128&&(q=R);break;case 2:je=l[F+1],(je&192)===128&&(Te=(R&31)<<6|je&63,Te>127&&(q=Te));break;case 3:je=l[F+1],ge=l[F+2],(je&192)===128&&(ge&192)===128&&(Te=(R&15)<<12|(je&63)<<6|ge&63,Te>2047&&(Te<55296||Te>57343)&&(q=Te));break;case 4:je=l[F+1],ge=l[F+2],de=l[F+3],(je&192)===128&&(ge&192)===128&&(de&192)===128&&(Te=(R&15)<<18|(je&63)<<12|(ge&63)<<6|de&63,Te>65535&&Te<1114112&&(q=Te))}}q===null?(q=65533,fe=1):q>65535&&(q-=65536,I.push(q>>>10&1023|55296),q=56320|q&1023),I.push(q),F+=fe}return Le(I)}var st=4096;function Le(l){let f=l.length;if(f<=st)return String.fromCharCode.apply(String,l);let m="",I=0;for(;I<f;)m+=String.fromCharCode.apply(String,l.slice(I,I+=st));return m}function D(l,f,m){let I="";m=Math.min(l.length,m);for(let F=f;F<m;++F)I+=String.fromCharCode(l[F]&127);return I}function k(l,f,m){let I="";m=Math.min(l.length,m);for(let F=f;F<m;++F)I+=String.fromCharCode(l[F]);return I}function L(l,f,m){let I=l.length;(!f||f<0)&&(f=0),(!m||m<0||m>I)&&(m=I);let F="";for(let R=f;R<m;++R)F+=yp[l[R]];return F}function C(l,f,m){let I=l.slice(f,m),F="";for(let R=0;R<I.length-1;R+=2)F+=String.fromCharCode(I[R]+I[R+1]*256);return F}a.prototype.slice=function(l,f){let m=this.length;l=~~l,f=f===void 0?m:~~f,l<0?(l+=m,l<0&&(l=0)):l>m&&(l=m),f<0?(f+=m,f<0&&(f=0)):f>m&&(f=m),f<l&&(f=l);let I=this.subarray(l,f);return Object.setPrototypeOf(I,a.prototype),I};function M(l,f,m){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+f>m)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(l,f,m){l=l>>>0,f=f>>>0,m||M(l,f,this.length);let I=this[l],F=1,R=0;for(;++R<f&&(F*=256);)I+=this[l+R]*F;return I},a.prototype.readUintBE=a.prototype.readUIntBE=function(l,f,m){l=l>>>0,f=f>>>0,m||M(l,f,this.length);let I=this[l+--f],F=1;for(;f>0&&(F*=256);)I+=this[l+--f]*F;return I},a.prototype.readUint8=a.prototype.readUInt8=function(l,f){return l=l>>>0,f||M(l,1,this.length),this[l]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(l,f){return l=l>>>0,f||M(l,2,this.length),this[l]|this[l+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(l,f){return l=l>>>0,f||M(l,2,this.length),this[l]<<8|this[l+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(l,f){return l=l>>>0,f||M(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(l,f){return l=l>>>0,f||M(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},a.prototype.readBigUInt64LE=rr(function(l){l=l>>>0,Kr(l,"offset");let f=this[l],m=this[l+7];(f===void 0||m===void 0)&&In(l,this.length-8);let I=f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,F=this[++l]+this[++l]*2**8+this[++l]*2**16+m*2**24;return BigInt(I)+(BigInt(F)<<BigInt(32))}),a.prototype.readBigUInt64BE=rr(function(l){l=l>>>0,Kr(l,"offset");let f=this[l],m=this[l+7];(f===void 0||m===void 0)&&In(l,this.length-8);let I=f*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],F=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+m;return(BigInt(I)<<BigInt(32))+BigInt(F)}),a.prototype.readIntLE=function(l,f,m){l=l>>>0,f=f>>>0,m||M(l,f,this.length);let I=this[l],F=1,R=0;for(;++R<f&&(F*=256);)I+=this[l+R]*F;return F*=128,I>=F&&(I-=Math.pow(2,8*f)),I},a.prototype.readIntBE=function(l,f,m){l=l>>>0,f=f>>>0,m||M(l,f,this.length);let I=f,F=1,R=this[l+--I];for(;I>0&&(F*=256);)R+=this[l+--I]*F;return F*=128,R>=F&&(R-=Math.pow(2,8*f)),R},a.prototype.readInt8=function(l,f){return l=l>>>0,f||M(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},a.prototype.readInt16LE=function(l,f){l=l>>>0,f||M(l,2,this.length);let m=this[l]|this[l+1]<<8;return m&32768?m|4294901760:m},a.prototype.readInt16BE=function(l,f){l=l>>>0,f||M(l,2,this.length);let m=this[l+1]|this[l]<<8;return m&32768?m|4294901760:m},a.prototype.readInt32LE=function(l,f){return l=l>>>0,f||M(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},a.prototype.readInt32BE=function(l,f){return l=l>>>0,f||M(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},a.prototype.readBigInt64LE=rr(function(l){l=l>>>0,Kr(l,"offset");let f=this[l],m=this[l+7];(f===void 0||m===void 0)&&In(l,this.length-8);let I=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(m<<24);return(BigInt(I)<<BigInt(32))+BigInt(f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),a.prototype.readBigInt64BE=rr(function(l){l=l>>>0,Kr(l,"offset");let f=this[l],m=this[l+7];(f===void 0||m===void 0)&&In(l,this.length-8);let I=(f<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(I)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+m)}),a.prototype.readFloatLE=function(l,f){return l=l>>>0,f||M(l,4,this.length),r.read(this,l,!0,23,4)},a.prototype.readFloatBE=function(l,f){return l=l>>>0,f||M(l,4,this.length),r.read(this,l,!1,23,4)},a.prototype.readDoubleLE=function(l,f){return l=l>>>0,f||M(l,8,this.length),r.read(this,l,!0,52,8)},a.prototype.readDoubleBE=function(l,f){return l=l>>>0,f||M(l,8,this.length),r.read(this,l,!1,52,8)};function Q(l,f,m,I,F,R){if(!a.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>F||f<R)throw new RangeError('"value" argument is out of bounds');if(m+I>l.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(l,f,m,I){if(l=+l,f=f>>>0,m=m>>>0,!I){let q=Math.pow(2,8*m)-1;Q(this,l,f,m,q,0)}let F=1,R=0;for(this[f]=l&255;++R<m&&(F*=256);)this[f+R]=l/F&255;return f+m},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(l,f,m,I){if(l=+l,f=f>>>0,m=m>>>0,!I){let q=Math.pow(2,8*m)-1;Q(this,l,f,m,q,0)}let F=m-1,R=1;for(this[f+F]=l&255;--F>=0&&(R*=256);)this[f+F]=l/R&255;return f+m},a.prototype.writeUint8=a.prototype.writeUInt8=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,1,255,0),this[f]=l&255,f+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,2,65535,0),this[f]=l&255,this[f+1]=l>>>8,f+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,2,65535,0),this[f]=l>>>8,this[f+1]=l&255,f+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,4,4294967295,0),this[f+3]=l>>>24,this[f+2]=l>>>16,this[f+1]=l>>>8,this[f]=l&255,f+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,4,4294967295,0),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4};function ne(l,f,m,I,F){Tn(f,I,F,l,m,7);let R=Number(f&BigInt(4294967295));l[m++]=R,R=R>>8,l[m++]=R,R=R>>8,l[m++]=R,R=R>>8,l[m++]=R;let q=Number(f>>BigInt(32)&BigInt(4294967295));return l[m++]=q,q=q>>8,l[m++]=q,q=q>>8,l[m++]=q,q=q>>8,l[m++]=q,m}function le(l,f,m,I,F){Tn(f,I,F,l,m,7);let R=Number(f&BigInt(4294967295));l[m+7]=R,R=R>>8,l[m+6]=R,R=R>>8,l[m+5]=R,R=R>>8,l[m+4]=R;let q=Number(f>>BigInt(32)&BigInt(4294967295));return l[m+3]=q,q=q>>8,l[m+2]=q,q=q>>8,l[m+1]=q,q=q>>8,l[m]=q,m+8}a.prototype.writeBigUInt64LE=rr(function(l,f=0){return ne(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=rr(function(l,f=0){return le(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(l,f,m,I){if(l=+l,f=f>>>0,!I){let fe=Math.pow(2,8*m-1);Q(this,l,f,m,fe-1,-fe)}let F=0,R=1,q=0;for(this[f]=l&255;++F<m&&(R*=256);)l<0&&q===0&&this[f+F-1]!==0&&(q=1),this[f+F]=(l/R>>0)-q&255;return f+m},a.prototype.writeIntBE=function(l,f,m,I){if(l=+l,f=f>>>0,!I){let fe=Math.pow(2,8*m-1);Q(this,l,f,m,fe-1,-fe)}let F=m-1,R=1,q=0;for(this[f+F]=l&255;--F>=0&&(R*=256);)l<0&&q===0&&this[f+F+1]!==0&&(q=1),this[f+F]=(l/R>>0)-q&255;return f+m},a.prototype.writeInt8=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,1,127,-128),l<0&&(l=255+l+1),this[f]=l&255,f+1},a.prototype.writeInt16LE=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,2,32767,-32768),this[f]=l&255,this[f+1]=l>>>8,f+2},a.prototype.writeInt16BE=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,2,32767,-32768),this[f]=l>>>8,this[f+1]=l&255,f+2},a.prototype.writeInt32LE=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,4,2147483647,-2147483648),this[f]=l&255,this[f+1]=l>>>8,this[f+2]=l>>>16,this[f+3]=l>>>24,f+4},a.prototype.writeInt32BE=function(l,f,m){return l=+l,f=f>>>0,m||Q(this,l,f,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4},a.prototype.writeBigInt64LE=rr(function(l,f=0){return ne(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=rr(function(l,f=0){return le(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xe(l,f,m,I,F,R){if(m+I>l.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Z(l,f,m,I,F){return f=+f,m=m>>>0,F||xe(l,f,m,4,34028234663852886e22,-34028234663852886e22),r.write(l,f,m,I,23,4),m+4}a.prototype.writeFloatLE=function(l,f,m){return Z(this,l,f,!0,m)},a.prototype.writeFloatBE=function(l,f,m){return Z(this,l,f,!1,m)};function Ae(l,f,m,I,F){return f=+f,m=m>>>0,F||xe(l,f,m,8,17976931348623157e292,-17976931348623157e292),r.write(l,f,m,I,52,8),m+8}a.prototype.writeDoubleLE=function(l,f,m){return Ae(this,l,f,!0,m)},a.prototype.writeDoubleBE=function(l,f,m){return Ae(this,l,f,!1,m)},a.prototype.copy=function(l,f,m,I){if(!a.isBuffer(l))throw new TypeError("argument should be a Buffer");if(m||(m=0),!I&&I!==0&&(I=this.length),f>=l.length&&(f=l.length),f||(f=0),I>0&&I<m&&(I=m),I===m||l.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),l.length-f<I-m&&(I=l.length-f+m);let F=I-m;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,m,I):Uint8Array.prototype.set.call(l,this.subarray(m,I),f),F},a.prototype.fill=function(l,f,m,I){if(typeof l=="string"){if(typeof f=="string"?(I=f,f=0,m=this.length):typeof m=="string"&&(I=m,m=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!a.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(l.length===1){let R=l.charCodeAt(0);(I==="utf8"&&R<128||I==="latin1")&&(l=R)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(f<0||this.length<f||this.length<m)throw new RangeError("Out of range index");if(m<=f)return this;f=f>>>0,m=m===void 0?this.length:m>>>0,l||(l=0);let F;if(typeof l=="number")for(F=f;F<m;++F)this[F]=l;else{let R=a.isBuffer(l)?l:a.from(l,I),q=R.length;if(q===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(F=0;F<m-f;++F)this[F+f]=R[F%q]}return this};var he={};function Lt(l,f,m){he[l]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}Lt("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Lt("ERR_INVALID_ARG_TYPE",function(l,f){return`The "${l}" argument must be of type number. Received type ${typeof f}`},TypeError),Lt("ERR_OUT_OF_RANGE",function(l,f,m){let I=`The value of "${l}" is out of range.`,F=m;return Number.isInteger(m)&&Math.abs(m)>2**32?F=Sn(String(m)):typeof m=="bigint"&&(F=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(F=Sn(F)),F+="n"),I+=` It must be ${f}. Received ${F}`,I},RangeError);function Sn(l){let f="",m=l.length,I=l[0]==="-"?1:0;for(;m>=I+4;m-=3)f=`_${l.slice(m-3,m)}${f}`;return`${l.slice(0,m)}${f}`}function vi(l,f,m){Kr(f,"offset"),(l[f]===void 0||l[f+m]===void 0)&&In(f,l.length-(m+1))}function Tn(l,f,m,I,F,R){if(l>m||l<f){let q=typeof f=="bigint"?"n":"",fe;throw R>3?f===0||f===BigInt(0)?fe=`>= 0${q} and < 2${q} ** ${(R+1)*8}${q}`:fe=`>= -(2${q} ** ${(R+1)*8-1}${q}) and < 2 ** ${(R+1)*8-1}${q}`:fe=`>= ${f}${q} and <= ${m}${q}`,new he.ERR_OUT_OF_RANGE("value",fe,l)}vi(I,F,R)}function Kr(l,f){if(typeof l!="number")throw new he.ERR_INVALID_ARG_TYPE(f,"number",l)}function In(l,f,m){throw Math.floor(l)!==l?(Kr(l,m),new he.ERR_OUT_OF_RANGE(m||"offset","an integer",l)):f<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(m||"offset",`>= ${m?1:0} and <= ${f}`,l)}var hp=/[^+/0-9A-Za-z-_]/g;function fp(l){if(l=l.split("=")[0],l=l.trim().replace(hp,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function qo(l,f){f=f||1/0;let m,I=l.length,F=null,R=[];for(let q=0;q<I;++q){if(m=l.charCodeAt(q),m>55295&&m<57344){if(!F){if(m>56319){(f-=3)>-1&&R.push(239,191,189);continue}else if(q+1===I){(f-=3)>-1&&R.push(239,191,189);continue}F=m;continue}if(m<56320){(f-=3)>-1&&R.push(239,191,189),F=m;continue}m=(F-55296<<10|m-56320)+65536}else F&&(f-=3)>-1&&R.push(239,191,189);if(F=null,m<128){if((f-=1)<0)break;R.push(m)}else if(m<2048){if((f-=2)<0)break;R.push(m>>6|192,m&63|128)}else if(m<65536){if((f-=3)<0)break;R.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((f-=4)<0)break;R.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return R}function dp(l){let f=[];for(let m=0;m<l.length;++m)f.push(l.charCodeAt(m)&255);return f}function pp(l,f){let m,I,F,R=[];for(let q=0;q<l.length&&!((f-=2)<0);++q)m=l.charCodeAt(q),I=m>>8,F=m%256,R.push(F),R.push(I);return R}function hu(l){return t.toByteArray(fp(l))}function Ei(l,f,m,I){let F;for(F=0;F<I&&!(F+m>=f.length||F>=l.length);++F)f[F+m]=l[F];return F}function Et(l,f){return l instanceof f||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===f.name}function Vo(l){return l!==l}var yp=function(){let l="0123456789abcdef",f=new Array(256);for(let m=0;m<16;++m){let I=m*16;for(let F=0;F<16;++F)f[I+F]=l[m]+l[F]}return f}();function rr(l){return typeof BigInt>"u"?gp:l}function gp(){throw new Error("BigInt not supported")}}),hy=P((e,t)=>{v();var r=t.exports={},n,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=o}catch{n=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function a(x){if(n===setTimeout)return setTimeout(x,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(x,0);try{return n(x,0)}catch{try{return n.call(null,x,0)}catch{return n.call(this,x,0)}}}function u(x){if(i===clearTimeout)return clearTimeout(x);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(x);try{return i(x)}catch{try{return i.call(null,x)}catch{return i.call(this,x)}}}var c=[],h=!1,p,g=-1;function d(){!h||!p||(h=!1,p.length?c=p.concat(c):g=-1,c.length&&w())}function w(){if(!h){var x=a(d);h=!0;for(var E=c.length;E;){for(p=c,c=[];++g<E;)p&&p[g].run();g=-1,E=c.length}p=null,h=!1,u(x)}}r.nextTick=function(x){var E=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)E[S-1]=arguments[S];c.push(new y(x,E)),c.length===1&&!h&&a(w)};function y(x,E){this.fun=x,this.array=E}y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(x){return[]},r.binding=function(x){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(x){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),fy,Ki,St,Tt,v=se(()=>{"use strict";fy=fo().Buffer,Ki=hy(),St=typeof St<"u"?St:typeof globalThis<"u"?globalThis:typeof Tt<"u"?Tt:typeof window<"u"?window:{},Tt=globalThis,globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)}),dy=P((e,t)=>{v(),t.exports=s;var r=128,n=127,i=~n,o=Math.pow(2,31);function s(a,u,c){if(Number.MAX_SAFE_INTEGER&&a>Number.MAX_SAFE_INTEGER)throw s.bytes=0,new RangeError("Could not encode varint");u=u||[],c=c||0;for(var h=c;a>=o;)u[c++]=a&255|r,a/=128;for(;a&i;)u[c++]=a&255|r,a>>>=7;return u[c]=a|0,s.bytes=c-h+1,u}}),py=P((e,t)=>{v(),t.exports=i;var r=128,n=127;function i(o,u){var a=0,u=u||0,c=0,h=u,p,g=o.length;do{if(h>=g||c>49)throw i.bytes=0,new RangeError("Could not decode varint");p=o[h++],a+=c<28?(p&n)<<c:(p&n)*Math.pow(2,c),c+=7}while(p>=r);return i.bytes=h-u,a}}),yy=P((e,t)=>{v();var r=Math.pow(2,7),n=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),s=Math.pow(2,35),a=Math.pow(2,42),u=Math.pow(2,49),c=Math.pow(2,56),h=Math.pow(2,63);t.exports=function(p){return p<r?1:p<n?2:p<i?3:p<o?4:p<s?5:p<a?6:p<u?7:p<c?8:p<h?9:10}}),nt=P((e,t)=>{v(),t.exports={encode:dy(),decode:py(),encodingLength:yy()}});function th(e,t,r){t=t||[],r=r||0;for(var n=r;e>=nh;)t[r++]=e&255|Fs,e/=128;for(;e&rh;)t[r++]=e&255|Fs,e>>>=7;return t[r]=e|0,th.bytes=r-n+1,t}function Ls(e,n){var r=0,n=n||0,i=0,o=n,s,a=e.length;do{if(o>=a)throw Ls.bytes=0,new RangeError("Could not decode varint");s=e[o++],r+=i<28?(s&Ns)<<i:(s&Ns)*Math.pow(2,i),i+=7}while(s>=ih);return Ls.bytes=o-n,r}var Du,Fs,Mu,rh,nh,zu,ih,Ns,qu,Vu,Ku,Wu,Hu,Gu,Ju,Yu,Qu,Zu,Xu,el,Rn,gy=se(()=>{v(),Du=th,Fs=128,Mu=127,rh=~Mu,nh=Math.pow(2,31),zu=Ls,ih=128,Ns=127,qu=Math.pow(2,7),Vu=Math.pow(2,14),Ku=Math.pow(2,21),Wu=Math.pow(2,28),Hu=Math.pow(2,35),Gu=Math.pow(2,42),Ju=Math.pow(2,49),Yu=Math.pow(2,56),Qu=Math.pow(2,63),Zu=function(e){return e<qu?1:e<Vu?2:e<Ku?3:e<Wu?4:e<Hu?5:e<Gu?6:e<Ju?7:e<Yu?8:e<Qu?9:10},Xu={encode:Du,decode:zu,encodingLength:Zu},el=Xu,Rn=el}),Xi,Hn,Gn,Xs=se(()=>{v(),gy(),Xi=(e,t=0)=>[Rn.decode(e,t),Rn.decode.bytes],Hn=(e,t,r=0)=>(Rn.encode(e,t,r),t),Gn=e=>Rn.encodingLength(e)}),ea={};pe(ea,{coerce:()=>br,empty:()=>Rs,equals:()=>ta,fromHex:()=>sh,fromString:()=>ra,isBinary:()=>ah,toHex:()=>oh,toString:()=>na});var Rs,oh,sh,ta,br,ah,ra,na,Nr=se(()=>{v(),Rs=new Uint8Array(0),oh=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),""),sh=e=>{let t=e.match(/../g);return t?new Uint8Array(t.map(r=>parseInt(r,16))):Rs},ta=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},br=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},ah=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),ra=e=>new TextEncoder().encode(e),na=e=>new TextDecoder().decode(e)}),uh={};pe(uh,{Digest:()=>jn,create:()=>cn,decode:()=>Xe,equals:()=>ia});var cn,Xe,ia,jn,He=se(()=>{v(),Nr(),Xs(),cn=(e,t)=>{let r=t.byteLength,n=Gn(e),i=n+Gn(r),o=new Uint8Array(i+r);return Hn(e,o,0),Hn(r,o,n),o.set(t,i),new jn(e,r,t,o)},Xe=e=>{let t=br(e),[r,n]=Xi(t),[i,o]=Xi(t.subarray(n)),s=t.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new jn(r,i,s,t)},ia=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&ta(e.bytes,t.bytes),jn=class{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}});function wy(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function p(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var y=0,b=0,x=0,E=w.length;x!==E&&w[x]===0;)x++,y++;for(var S=(E-x)*h+1>>>0,O=new Uint8Array(S);x!==E;){for(var U=w[x],_=0,T=S-1;(U!==0||_<b)&&T!==-1;T--,_++)U+=256*O[T]>>>0,O[T]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");b=_,x++}for(var A=S-b;A!==S&&O[A]===0;)A++;for(var B=u.repeat(y);A<S;++A)B+=e.charAt(O[A]);return B}function g(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var y=0;if(w[y]!==" "){for(var b=0,x=0;w[y]===u;)b++,y++;for(var E=(w.length-y)*c+1>>>0,S=new Uint8Array(E);w[y];){var O=r[w.charCodeAt(y)];if(O===255)return;for(var U=0,_=E-1;(O!==0||U<x)&&_!==-1;_--,U++)O+=a*S[_]>>>0,S[_]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");x=U,y++}if(w[y]!==" "){for(var T=E-x;T!==E&&S[T]===0;)T++;for(var A=new Uint8Array(b+(E-T)),B=b;T!==E;)A[B++]=S[T++];return A}}}function d(w){var y=g(w);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:p,decodeUnsafe:g,decode:d}}var tl,rl,lh,by=se(()=>{v(),tl=wy,rl=tl,lh=rl}),nl,il,ol,ns,sl,Pn,hn,al,ul,Re,Bt=se(()=>{v(),by(),Nr(),nl=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},il=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ns(this,e)}},ol=class{constructor(e){this.decoders=e}or(e){return ns(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ns=(e,t)=>new ol({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),sl=class{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new nl(e,t,r),this.decoder=new il(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Pn=({name:e,prefix:t,encode:r,decode:n})=>new sl(e,t,r,n),hn=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=lh(r,t);return Pn({prefix:e,name:t,encode:n,decode:o=>br(i(o))})},al=(e,t,r,n)=>{let i={};for(let h=0;h<t.length;++h)i[t[h]]=h;let o=e.length;for(;e[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,c=0;for(let h=0;h<o;++h){let p=i[e[h]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,a+=r,a>=8&&(a-=8,s[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},ul=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Re=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Pn({prefix:t,name:e,encode(i){return ul(i,n,r)},decode(i){return al(i,n,r,e)}})}),po={};pe(po,{base58btc:()=>Oe,base58flickr:()=>ch});var Oe,ch,it=se(()=>{v(),Bt(),Oe=hn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ch=hn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),oa={};pe(oa,{base32:()=>ie,base32hex:()=>dh,base32hexpad:()=>yh,base32hexpadupper:()=>gh,base32hexupper:()=>ph,base32pad:()=>sa,base32padupper:()=>fh,base32upper:()=>hh,base32z:()=>wh});var ie,hh,sa,fh,dh,ph,yh,gh,wh,Ge=se(()=>{v(),Bt(),ie=Re({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hh=Re({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sa=Re({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fh=Re({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dh=Re({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ph=Re({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),yh=Re({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gh=Re({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wh=Re({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),aa={};pe(aa,{CID:()=>G});var G,ll,cl,hl,Qr,fl,is,os,Cn,On,dl,pl,yl,ce=se(()=>{v(),Xs(),He(),it(),Ge(),Nr(),G=class{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:On,byteLength:On,code:Cn,version:Cn,multihash:Cn,bytes:Cn,_baseCache:On,asCID:On})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Qr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==fl)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return G.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=cn(e,t);return G.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ia(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return cl(t,n,e||Oe.encoder);default:return hl(t,n,e||ie.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return pl(/^0\.0/,yl),!!(e&&(e[os]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof G)return e;if(e!=null&&e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new G(t,r,n,i||is(t,r,n.bytes))}else if(e!=null&&e[os]===!0){let{version:t,multihash:r,code:n}=e,i=Xe(r);return G.create(t,n,i)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Qr)throw new Error(`Version 0 CID must use dag-pb (code: ${Qr}) block encoding`);return new G(e,t,r,r.bytes)}case 1:{let n=is(e,t,r.bytes);return new G(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return G.create(0,Qr,e)}static createV1(e,t){return G.create(1,e,t)}static decode(e){let[t,r]=G.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=G.inspectBytes(e),r=t.size-t.multihashSize,n=br(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),o=new jn(t.multihashCode,t.digestSize,i,n);return[t.version===0?G.createV0(o):G.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[h,p]=Xi(e.subarray(t));return t+=p,h},n=r(),i=Qr;if(n===18?(n=0,t=0):n===1&&(i=r()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let o=t,s=r(),a=r(),u=t+a,c=u-o;return{version:n,codec:i,multihashCode:s,digestSize:a,multihashSize:c,size:u}}static parse(e,t){let[r,n]=ll(e,t),i=G.decode(n);return i._baseCache.set(r,e),i}},ll=(e,t)=>{switch(e[0]){case"Q":{let r=t||Oe;return[Oe.prefix,r.decode(`${Oe.prefix}${e}`)]}case Oe.prefix:{let r=t||Oe;return[Oe.prefix,r.decode(e)]}case ie.prefix:{let r=t||ie;return[ie.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},cl=(e,t,r)=>{let{prefix:n}=r;if(n!==Oe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let o=r.encode(e).slice(1);return t.set(n,o),o}else return i},hl=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let o=r.encode(e);return t.set(n,o),o}else return i},Qr=112,fl=18,is=(e,t,r)=>{let n=Gn(e),i=n+Gn(t),o=new Uint8Array(i+r.byteLength);return Hn(e,o,0),Hn(t,o,n),o.set(r,i),o},os=Symbol.for("@ipld/js-cid/CID"),Cn={writable:!1,configurable:!1,enumerable:!0},On={writable:!1,enumerable:!1,configurable:!1},dl="0.0.0-dev",pl=(e,t)=>{if(e.test(dl))console.warn(t);else throw new Error(t)},yl=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`}),$s,gl,bh=se(()=>{v(),He(),$s=({name:e,code:t,encode:r})=>new gl(e,t,r),gl=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?cn(this.code,t):t.then(r=>cn(this.code,r))}else throw Error("Unknown type, must be binary type")}}}),ai=se(()=>{v(),ce(),Xs(),Nr(),bh(),He()}),yo={};pe(yo,{code:()=>Or,decode:()=>Eh,encode:()=>vh,name:()=>mh});var mh,Or,vh,Eh,xr=se(()=>{v(),Nr(),mh="raw",Or=85,vh=e=>br(e),Eh=e=>br(e)}),xh={};pe(xh,{sha256:()=>mr,sha512:()=>_h});var ss,mr,_h,ui=se(()=>{v(),bh(),ss=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),mr=$s({name:"sha2-256",code:18,encode:ss("SHA-256")}),_h=$s({name:"sha2-512",code:19,encode:ss("SHA-512")})}),my=P((e,t)=>{v();var r=1e3,n=r*60,i=n*60,o=i*24,s=o*7,a=o*365.25;t.exports=function(g,d){d=d||{};var w=typeof g;if(w==="string"&&g.length>0)return u(g);if(w==="number"&&isFinite(g))return d.long?h(g):c(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function u(g){if(g=String(g),!(g.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(d){var w=parseFloat(d[1]),y=(d[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return w*a;case"weeks":case"week":case"w":return w*s;case"days":case"day":case"d":return w*o;case"hours":case"hour":case"hrs":case"hr":case"h":return w*i;case"minutes":case"minute":case"mins":case"min":case"m":return w*n;case"seconds":case"second":case"secs":case"sec":case"s":return w*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}function c(g){var d=Math.abs(g);return d>=o?Math.round(g/o)+"d":d>=i?Math.round(g/i)+"h":d>=n?Math.round(g/n)+"m":d>=r?Math.round(g/r)+"s":g+"ms"}function h(g){var d=Math.abs(g);return d>=o?p(g,d,o,"day"):d>=i?p(g,d,i,"hour"):d>=n?p(g,d,n,"minute"):d>=r?p(g,d,r,"second"):g+" ms"}function p(g,d,w,y){var b=d>=w*1.5;return Math.round(g/w)+" "+y+(b?"s":"")}}),vy=P((e,t)=>{v();function r(n){o.debug=o,o.default=o,o.coerce=p,o.disable=u,o.enable=a,o.enabled=c,o.humanize=my(),o.destroy=g,Object.keys(n).forEach(d=>{o[d]=n[d]}),o.names=[],o.skips=[],o.formatters={};function i(d){let w=0;for(let y=0;y<d.length;y++)w=(w<<5)-w+d.charCodeAt(y),w|=0;return o.colors[Math.abs(w)%o.colors.length]}o.selectColor=i;function o(d){let w,y=null,b,x;function E(...S){if(!E.enabled)return;let O=E,U=Number(new Date),_=U-(w||U);O.diff=_,O.prev=w,O.curr=U,w=U,S[0]=o.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let T=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(A,B)=>{if(A==="%%")return"%";T++;let j=o.formatters[B];if(typeof j=="function"){let K=S[T];A=j.call(O,K),S.splice(T,1),T--}return A}),o.formatArgs.call(O,S),(O.log||o.log).apply(O,S)}return E.namespace=d,E.useColors=o.useColors(),E.color=o.selectColor(d),E.extend=s,E.destroy=o.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(b!==o.namespaces&&(b=o.namespaces,x=o.enabled(d)),x),set:S=>{y=S}}),typeof o.init=="function"&&o.init(E),E}function s(d,w){let y=o(this.namespace+(typeof w>"u"?":":w)+d);return y.log=this.log,y}function a(d){o.save(d),o.namespaces=d,o.names=[],o.skips=[];let w,y=(typeof d=="string"?d:"").split(/[\s,]+/),b=y.length;for(w=0;w<b;w++)!y[w]||(d=y[w].replace(/\*/g,".*?"),d[0]==="-"?o.skips.push(new RegExp("^"+d.slice(1)+"$")):o.names.push(new RegExp("^"+d+"$")))}function u(){let d=[...o.names.map(h),...o.skips.map(h).map(w=>"-"+w)].join(",");return o.enable(""),d}function c(d){if(d[d.length-1]==="*")return!0;let w,y;for(w=0,y=o.skips.length;w<y;w++)if(o.skips[w].test(d))return!1;for(w=0,y=o.names.length;w<y;w++)if(o.names[w].test(d))return!0;return!1}function h(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function p(d){return d instanceof Error?d.stack||d.message:d}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}t.exports=r}),mt=P((e,t)=>{v(),e.formatArgs=n,e.save=i,e.load=o,e.useColors=r,e.storage=s(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;u.splice(1,0,c,"color: inherit");let h=0,p=0;u[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(h++,g==="%c"&&(p=h))}),u.splice(p,0,c)}e.log=console.debug||console.log||(()=>{});function i(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function o(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof Ki<"u"&&"env"in Ki&&(u=Ki.env.DEBUG),u}function s(){try{return localStorage}catch{}}t.exports=vy()(e);var{formatters:a}=t.exports;a.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}),Je=P((e,t)=>{"use strict";v();function r(i,o){for(let s in o)Object.defineProperty(i,s,{value:o[s],enumerable:!0,configurable:!0});return i}function n(i,o,s){if(!i||typeof i=="string")throw new TypeError("Please pass an Error to err-code");s||(s={}),typeof o=="object"&&(s=o,o=""),o&&(s.code=o);try{return r(i,s)}catch{s.message=i.message,s.stack=i.stack;let a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(i)),r(new a,s)}}t.exports=n}),Ah={};pe(Ah,{identity:()=>kh});var kh,Ey=se(()=>{v(),Bt(),Nr(),kh=Pn({prefix:"\0",name:"identity",encode:e=>na(e),decode:e=>ra(e)})}),Sh={};pe(Sh,{base2:()=>Th});var Th,xy=se(()=>{v(),Bt(),Th=Re({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),Ih={};pe(Ih,{base8:()=>Bh});var Bh,_y=se(()=>{v(),Bt(),Bh=Re({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),Ch={};pe(Ch,{base10:()=>Oh});var Oh,Ay=se(()=>{v(),Bt(),Oh=hn({prefix:"9",name:"base10",alphabet:"0123456789"})}),Lh={};pe(Lh,{base16:()=>Fh,base16upper:()=>Nh});var Fh,Nh,ky=se(()=>{v(),Bt(),Fh=Re({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nh=Re({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),Rh={};pe(Rh,{base36:()=>$h,base36upper:()=>Uh});var $h,Uh,Sy=se(()=>{v(),Bt(),$h=hn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Uh=hn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),jh={};pe(jh,{base64:()=>go,base64pad:()=>Ph,base64url:()=>wo,base64urlpad:()=>Dh});var go,Ph,wo,Dh,bo=se(()=>{v(),Bt(),go=Re({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ph=Re({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wo=Re({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Dh=Re({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}),Mh={};pe(Mh,{base256emoji:()=>Vh});function Ty(e){return e.reduce((t,r)=>(t+=zh[r],t),"")}function Iy(e){let t=[];for(let r of e){let n=qh[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var as,zh,qh,Vh,By=se(()=>{v(),Bt(),as=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),zh=as.reduce((e,t,r)=>(e[r]=t,e),[]),qh=as.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),Vh=Pn({prefix:"\u{1F680}",name:"base256emoji",encode:Ty,decode:Iy})}),Kh={};pe(Kh,{identity:()=>Jn});var us,wl,ls,bl,Jn,ua=se(()=>{v(),Nr(),He(),us=0,wl="identity",ls=br,bl=e=>cn(us,ls(e)),Jn={code:us,name:wl,encode:ls,digest:bl}}),Wh={};pe(Wh,{code:()=>la,decode:()=>Jh,encode:()=>Gh,name:()=>Hh});var ml,vl,Hh,la,Gh,Jh,Yh=se(()=>{v(),ml=new TextEncoder,vl=new TextDecoder,Hh="json",la=512,Gh=e=>ml.encode(JSON.stringify(e)),Jh=e=>JSON.parse(vl.decode(e))}),Yn,Qh,Zh,mo=se(()=>{v(),Ey(),xy(),_y(),Ay(),ky(),Ge(),Sy(),it(),bo(),By(),ui(),ua(),xr(),Yh(),ai(),Yn={...Ah,...Sh,...Ih,...Ch,...Lh,...oa,...Rh,...po,...jh,...Mh},Qh={...xh,...Kh},Zh={raw:yo,json:Wh}});function Xh(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}var ef=se(()=>{v()});function El(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var cs,Si,xl,ca,tf=se(()=>{v(),mo(),ef(),cs=El("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),Si=El("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Xh(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),xl={utf8:cs,"utf-8":cs,hex:Yn.base16,latin1:Si,ascii:Si,binary:Si,...Yn},ca=xl}),li={};pe(li,{toString:()=>re});function re(e,t="utf8"){let r=ca[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var ye=se(()=>{v(),tf()}),rf={};pe(rf,{fromString:()=>Ue});function Ue(e,t="utf8"){let r=ca[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}var Ve=se(()=>{v(),tf()}),nf=P((e,t)=>{"use strict";v();var r=async n=>{let i=0;for await(let o of n)i++;return i};t.exports=r}),Cy=P((e,t)=>{"use strict";v(),t.exports=r;function r(n,i){for(var o=new Array(arguments.length-1),s=0,a=2,u=!0;a<arguments.length;)o[s++]=arguments[a++];return new Promise(function(c,h){o[s]=function(p){if(u)if(u=!1,p)h(p);else{for(var g=new Array(arguments.length-1),d=0;d<g.length;)g[d++]=arguments[d];c.apply(null,g)}};try{n.apply(i||null,o)}catch(p){u&&(u=!1,h(p))}})}}),Oy=P(e=>{"use strict";v();var t=e;t.length=function(s){var a=s.length;if(!a)return 0;for(var u=0;--a%4>1&&s.charAt(a)==="=";)++u;return Math.ceil(s.length*3)/4-u};var r=new Array(64),n=new Array(123);for(i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;var i;t.encode=function(s,a,u){for(var c=null,h=[],p=0,g=0,d;a<u;){var w=s[a++];switch(g){case 0:h[p++]=r[w>>2],d=(w&3)<<4,g=1;break;case 1:h[p++]=r[d|w>>4],d=(w&15)<<2,g=2;break;case 2:h[p++]=r[d|w>>6],h[p++]=r[w&63],g=0;break}p>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,h)),p=0)}return g&&(h[p++]=r[d],h[p++]=61,g===1&&(h[p++]=61)),c?(p&&c.push(String.fromCharCode.apply(String,h.slice(0,p))),c.join("")):String.fromCharCode.apply(String,h.slice(0,p))};var o="invalid encoding";t.decode=function(s,a,u){for(var c=u,h=0,p,g=0;g<s.length;){var d=s.charCodeAt(g++);if(d===61&&h>1)break;if((d=n[d])===void 0)throw Error(o);switch(h){case 0:p=d,h=1;break;case 1:a[u++]=p<<2|(d&48)>>4,p=d,h=2;break;case 2:a[u++]=(p&15)<<4|(d&60)>>2,p=d,h=3;break;case 3:a[u++]=(p&3)<<6|d,h=0;break}}if(h===1)throw Error(o);return u-c},t.test=function(s){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(s)}}),Ly=P((e,t)=>{"use strict";v(),t.exports=r;function r(){this._listeners={}}r.prototype.on=function(n,i,o){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:i,ctx:o||this}),this},r.prototype.off=function(n,i){if(n===void 0)this._listeners={};else if(i===void 0)this._listeners[n]=[];else for(var o=this._listeners[n],s=0;s<o.length;)o[s].fn===i?o.splice(s,1):++s;return this},r.prototype.emit=function(n){var i=this._listeners[n];if(i){for(var o=[],s=1;s<arguments.length;)o.push(arguments[s++]);for(s=0;s<i.length;)i[s].fn.apply(i[s++].ctx,o)}return this}}),Fy=P((e,t)=>{"use strict";v(),t.exports=r(r);function r(a){return typeof Float32Array<"u"?function(){var u=new Float32Array([-0]),c=new Uint8Array(u.buffer),h=c[3]===128;function p(y,b,x){u[0]=y,b[x]=c[0],b[x+1]=c[1],b[x+2]=c[2],b[x+3]=c[3]}function g(y,b,x){u[0]=y,b[x]=c[3],b[x+1]=c[2],b[x+2]=c[1],b[x+3]=c[0]}a.writeFloatLE=h?p:g,a.writeFloatBE=h?g:p;function d(y,b){return c[0]=y[b],c[1]=y[b+1],c[2]=y[b+2],c[3]=y[b+3],u[0]}function w(y,b){return c[3]=y[b],c[2]=y[b+1],c[1]=y[b+2],c[0]=y[b+3],u[0]}a.readFloatLE=h?d:w,a.readFloatBE=h?w:d}():function(){function u(h,p,g,d){var w=p<0?1:0;if(w&&(p=-p),p===0)h(1/p>0?0:2147483648,g,d);else if(isNaN(p))h(2143289344,g,d);else if(p>34028234663852886e22)h((w<<31|2139095040)>>>0,g,d);else if(p<11754943508222875e-54)h((w<<31|Math.round(p/1401298464324817e-60))>>>0,g,d);else{var y=Math.floor(Math.log(p)/Math.LN2),b=Math.round(p*Math.pow(2,-y)*8388608)&8388607;h((w<<31|y+127<<23|b)>>>0,g,d)}}a.writeFloatLE=u.bind(null,n),a.writeFloatBE=u.bind(null,i);function c(h,p,g){var d=h(p,g),w=(d>>31)*2+1,y=d>>>23&255,b=d&8388607;return y===255?b?NaN:w*(1/0):y===0?w*1401298464324817e-60*b:w*Math.pow(2,y-150)*(b+8388608)}a.readFloatLE=c.bind(null,o),a.readFloatBE=c.bind(null,s)}(),typeof Float64Array<"u"?function(){var u=new Float64Array([-0]),c=new Uint8Array(u.buffer),h=c[7]===128;function p(y,b,x){u[0]=y,b[x]=c[0],b[x+1]=c[1],b[x+2]=c[2],b[x+3]=c[3],b[x+4]=c[4],b[x+5]=c[5],b[x+6]=c[6],b[x+7]=c[7]}function g(y,b,x){u[0]=y,b[x]=c[7],b[x+1]=c[6],b[x+2]=c[5],b[x+3]=c[4],b[x+4]=c[3],b[x+5]=c[2],b[x+6]=c[1],b[x+7]=c[0]}a.writeDoubleLE=h?p:g,a.writeDoubleBE=h?g:p;function d(y,b){return c[0]=y[b],c[1]=y[b+1],c[2]=y[b+2],c[3]=y[b+3],c[4]=y[b+4],c[5]=y[b+5],c[6]=y[b+6],c[7]=y[b+7],u[0]}function w(y,b){return c[7]=y[b],c[6]=y[b+1],c[5]=y[b+2],c[4]=y[b+3],c[3]=y[b+4],c[2]=y[b+5],c[1]=y[b+6],c[0]=y[b+7],u[0]}a.readDoubleLE=h?d:w,a.readDoubleBE=h?w:d}():function(){function u(h,p,g,d,w,y){var b=d<0?1:0;if(b&&(d=-d),d===0)h(0,w,y+p),h(1/d>0?0:2147483648,w,y+g);else if(isNaN(d))h(0,w,y+p),h(2146959360,w,y+g);else if(d>17976931348623157e292)h(0,w,y+p),h((b<<31|2146435072)>>>0,w,y+g);else{var x;if(d<22250738585072014e-324)x=d/5e-324,h(x>>>0,w,y+p),h((b<<31|x/4294967296)>>>0,w,y+g);else{var E=Math.floor(Math.log(d)/Math.LN2);E===1024&&(E=1023),x=d*Math.pow(2,-E),h(x*4503599627370496>>>0,w,y+p),h((b<<31|E+1023<<20|x*1048576&1048575)>>>0,w,y+g)}}}a.writeDoubleLE=u.bind(null,n,0,4),a.writeDoubleBE=u.bind(null,i,4,0);function c(h,p,g,d,w){var y=h(d,w+p),b=h(d,w+g),x=(b>>31)*2+1,E=b>>>20&2047,S=4294967296*(b&1048575)+y;return E===2047?S?NaN:x*(1/0):E===0?x*5e-324*S:x*Math.pow(2,E-1075)*(S+4503599627370496)}a.readDoubleLE=c.bind(null,o,0,4),a.readDoubleBE=c.bind(null,s,4,0)}(),a}function n(a,u,c){u[c]=a&255,u[c+1]=a>>>8&255,u[c+2]=a>>>16&255,u[c+3]=a>>>24}function i(a,u,c){u[c]=a>>>24,u[c+1]=a>>>16&255,u[c+2]=a>>>8&255,u[c+3]=a&255}function o(a,u){return(a[u]|a[u+1]<<8|a[u+2]<<16|a[u+3]<<24)>>>0}function s(a,u){return(a[u]<<24|a[u+1]<<16|a[u+2]<<8|a[u+3])>>>0}}),Ny=P((exports,module)=>{"use strict";v(),module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}}),Ry=P(e=>{"use strict";v();var t=e;t.length=function(r){for(var n=0,i=0,o=0;o<r.length;++o)i=r.charCodeAt(o),i<128?n+=1:i<2048?n+=2:(i&64512)===55296&&(r.charCodeAt(o+1)&64512)===56320?(++o,n+=4):n+=3;return n},t.read=function(r,n,i){var o=i-n;if(o<1)return"";for(var s=null,a=[],u=0,c;n<i;)c=r[n++],c<128?a[u++]=c:c>191&&c<224?a[u++]=(c&31)<<6|r[n++]&63:c>239&&c<365?(c=((c&7)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,a[u++]=55296+(c>>10),a[u++]=56320+(c&1023)):a[u++]=(c&15)<<12|(r[n++]&63)<<6|r[n++]&63,u>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),u=0);return s?(u&&s.push(String.fromCharCode.apply(String,a.slice(0,u))),s.join("")):String.fromCharCode.apply(String,a.slice(0,u))},t.write=function(r,n,i){for(var o=i,s,a,u=0;u<r.length;++u)s=r.charCodeAt(u),s<128?n[i++]=s:s<2048?(n[i++]=s>>6|192,n[i++]=s&63|128):(s&64512)===55296&&((a=r.charCodeAt(u+1))&64512)===56320?(s=65536+((s&1023)<<10)+(a&1023),++u,n[i++]=s>>18|240,n[i++]=s>>12&63|128,n[i++]=s>>6&63|128,n[i++]=s&63|128):(n[i++]=s>>12|224,n[i++]=s>>6&63|128,n[i++]=s&63|128);return i-o}}),$y=P((e,t)=>{"use strict";v(),t.exports=r;function r(n,i,o){var s=o||8192,a=s>>>1,u=null,c=s;return function(h){if(h<1||h>a)return n(h);c+h>s&&(u=n(s),c=0);var p=i.call(u,c,c+=h);return c&7&&(c=(c|7)+1),p}}}),Uy=P((e,t)=>{"use strict";v(),t.exports=n;var r=Rr();function n(a,u){this.lo=a>>>0,this.hi=u>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(a){if(a===0)return i;var u=a<0;u&&(a=-a);var c=a>>>0,h=(a-c)/4294967296>>>0;return u&&(h=~h>>>0,c=~c>>>0,++c>4294967295&&(c=0,++h>4294967295&&(h=0))),new n(c,h)},n.from=function(a){if(typeof a=="number")return n.fromNumber(a);if(r.isString(a))if(r.Long)a=r.Long.fromString(a);else return n.fromNumber(parseInt(a,10));return a.low||a.high?new n(a.low>>>0,a.high>>>0):i},n.prototype.toNumber=function(a){if(!a&&this.hi>>>31){var u=~this.lo+1>>>0,c=~this.hi>>>0;return u||(c=c+1>>>0),-(u+c*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(a){return r.Long?new r.Long(this.lo|0,this.hi|0,Boolean(a)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(a)}};var s=String.prototype.charCodeAt;n.fromHash=function(a){return a===o?i:new n((s.call(a,0)|s.call(a,1)<<8|s.call(a,2)<<16|s.call(a,3)<<24)>>>0,(s.call(a,4)|s.call(a,5)<<8|s.call(a,6)<<16|s.call(a,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var a=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^a)>>>0,this.lo=(this.lo<<1^a)>>>0,this},n.prototype.zzDecode=function(){var a=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^a)>>>0,this.hi=(this.hi>>>1^a)>>>0,this},n.prototype.length=function(){var a=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return c===0?u===0?a<16384?a<128?1:2:a<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:c<128?9:10}}),Rr=P(e=>{"use strict";v();var t=e;t.asPromise=Cy(),t.base64=Oy(),t.EventEmitter=Ly(),t.float=Fy(),t.inquire=Ny(),t.utf8=Ry(),t.pool=$y(),t.LongBits=Uy(),t.isNode=Boolean(typeof St<"u"&&St&&St.process&&St.process.versions&&St.process.versions.node),t.global=t.isNode&&St||typeof window<"u"&&window||typeof Tt<"u"&&Tt||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i},t.isString=function(i){return typeof i=="string"||i instanceof String},t.isObject=function(i){return i&&typeof i=="object"},t.isset=t.isSet=function(i,o){var s=i[o];return s!=null&&i.hasOwnProperty(o)?typeof s!="object"||(Array.isArray(s)?s.length:Object.keys(s).length)>0:!1},t.Buffer=function(){try{var i=t.inquire("buffer").Buffer;return i.prototype.utf8Write?i:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(i){return typeof i=="number"?t.Buffer?t._Buffer_allocUnsafe(i):new t.Array(i):t.Buffer?t._Buffer_from(i):typeof Uint8Array>"u"?i:new Uint8Array(i)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(i){return i?t.LongBits.from(i).toHash():t.LongBits.zeroHash},t.longFromHash=function(i,o){var s=t.LongBits.fromHash(i);return t.Long?t.Long.fromBits(s.lo,s.hi,o):s.toNumber(Boolean(o))};function r(i,o,s){for(var a=Object.keys(o),u=0;u<a.length;++u)(i[a[u]]===void 0||!s)&&(i[a[u]]=o[a[u]]);return i}t.merge=r,t.lcFirst=function(i){return i.charAt(0).toLowerCase()+i.substring(1)};function n(i){function o(s,a){if(!(this instanceof o))return new o(s,a);Object.defineProperty(this,"message",{get:function(){return s}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),a&&r(this,a)}return o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get(){return i},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),o}t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(i){for(var o={},s=0;s<i.length;++s)o[i[s]]=1;return function(){for(var a=Object.keys(this),u=a.length-1;u>-1;--u)if(o[a[u]]===1&&this[a[u]]!==void 0&&this[a[u]]!==null)return a[u]}},t.oneOfSetter=function(i){return function(o){for(var s=0;s<i.length;++s)i[s]!==o&&delete this[i[s]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var i=t.Buffer;if(!i){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=i.from!==Uint8Array.from&&i.from||function(o,s){return new i(o,s)},t._Buffer_allocUnsafe=i.allocUnsafe||function(o){return new i(o)}}}),of=P((e,t)=>{"use strict";v(),t.exports=h;var r=Rr(),n,i=r.LongBits,o=r.base64,s=r.utf8;function a(E,S,O){this.fn=E,this.len=S,this.next=void 0,this.val=O}function u(){}function c(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}function h(){this.len=0,this.head=new a(u,0,0),this.tail=this.head,this.states=null}var p=function(){return r.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};h.create=p(),h.alloc=function(E){return new r.Array(E)},r.Array!==Array&&(h.alloc=r.pool(h.alloc,r.Array.prototype.subarray)),h.prototype._push=function(E,S,O){return this.tail=this.tail.next=new a(E,S,O),this.len+=S,this};function g(E,S,O){S[O]=E&255}function d(E,S,O){for(;E>127;)S[O++]=E&127|128,E>>>=7;S[O]=E}function w(E,S){this.len=E,this.next=void 0,this.val=S}w.prototype=Object.create(a.prototype),w.prototype.fn=d,h.prototype.uint32=function(E){return this.len+=(this.tail=this.tail.next=new w((E=E>>>0)<128?1:E<16384?2:E<2097152?3:E<268435456?4:5,E)).len,this},h.prototype.int32=function(E){return E<0?this._push(y,10,i.fromNumber(E)):this.uint32(E)},h.prototype.sint32=function(E){return this.uint32((E<<1^E>>31)>>>0)};function y(E,S,O){for(;E.hi;)S[O++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)S[O++]=E.lo&127|128,E.lo=E.lo>>>7;S[O++]=E.lo}h.prototype.uint64=function(E){var S=i.from(E);return this._push(y,S.length(),S)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(E){var S=i.from(E).zzEncode();return this._push(y,S.length(),S)},h.prototype.bool=function(E){return this._push(g,1,E?1:0)};function b(E,S,O){S[O]=E&255,S[O+1]=E>>>8&255,S[O+2]=E>>>16&255,S[O+3]=E>>>24}h.prototype.fixed32=function(E){return this._push(b,4,E>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(E){var S=i.from(E);return this._push(b,4,S.lo)._push(b,4,S.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(E){return this._push(r.float.writeFloatLE,4,E)},h.prototype.double=function(E){return this._push(r.float.writeDoubleLE,8,E)};var x=r.Array.prototype.set?function(E,S,O){S.set(E,O)}:function(E,S,O){for(var U=0;U<E.length;++U)S[O+U]=E[U]};h.prototype.bytes=function(E){var S=E.length>>>0;if(!S)return this._push(g,1,0);if(r.isString(E)){var O=h.alloc(S=o.length(E));o.decode(E,O,0),E=O}return this.uint32(S)._push(x,S,E)},h.prototype.string=function(E){var S=s.length(E);return S?this.uint32(S)._push(s.write,S,E):this._push(g,1,0)},h.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new a(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var E=this.head,S=this.tail,O=this.len;return this.reset().uint32(O),O&&(this.tail.next=E.next,this.tail=S,this.len+=O),this},h.prototype.finish=function(){for(var E=this.head.next,S=this.constructor.alloc(this.len),O=0;E;)E.fn(E.val,S,O),O+=E.len,E=E.next;return S},h._configure=function(E){n=E,h.create=p(),n._configure()}}),jy=P((e,t)=>{"use strict";v(),t.exports=i;var r=of();(i.prototype=Object.create(r.prototype)).constructor=i;var n=Rr();function i(){r.call(this)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&n.Buffer.prototype.set.name==="set"?function(s,a,u){a.set(s,u)}:function(s,a,u){if(s.copy)s.copy(a,u,0,s.length);else for(var c=0;c<s.length;)a[u++]=s[c++]}},i.prototype.bytes=function(s){n.isString(s)&&(s=n._Buffer_from(s,"base64"));var a=s.length>>>0;return this.uint32(a),a&&this._push(i.writeBytesBuffer,a,s),this};function o(s,a,u){s.length<40?n.utf8.write(s,a,u):a.utf8Write?a.utf8Write(s,u):a.write(s,u)}i.prototype.string=function(s){var a=n.Buffer.byteLength(s);return this.uint32(a),a&&this._push(o,a,s),this},i._configure()}),sf=P((e,t)=>{"use strict";v(),t.exports=a;var r=Rr(),n,i=r.LongBits,o=r.utf8;function s(d,w){return RangeError("index out of range: "+d.pos+" + "+(w||1)+" > "+d.len)}function a(d){this.buf=d,this.pos=0,this.len=d.length}var u=typeof Uint8Array<"u"?function(d){if(d instanceof Uint8Array||Array.isArray(d))return new a(d);throw Error("illegal buffer")}:function(d){if(Array.isArray(d))return new a(d);throw Error("illegal buffer")},c=function(){return r.Buffer?function(d){return(a.create=function(w){return r.Buffer.isBuffer(w)?new n(w):u(w)})(d)}:u};a.create=c(),a.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,a.prototype.uint32=function(){var d=4294967295;return function(){if(d=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(d=(d|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(d=(d|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(d=(d|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(d=(d|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return d;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return d}}(),a.prototype.int32=function(){return this.uint32()|0},a.prototype.sint32=function(){var d=this.uint32();return d>>>1^-(d&1)|0};function h(){var d=new i(0,0),w=0;if(this.len-this.pos>4){for(;w<4;++w)if(d.lo=(d.lo|(this.buf[this.pos]&127)<<w*7)>>>0,this.buf[this.pos++]<128)return d;if(d.lo=(d.lo|(this.buf[this.pos]&127)<<28)>>>0,d.hi=(d.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return d;w=0}else{for(;w<3;++w){if(this.pos>=this.len)throw s(this);if(d.lo=(d.lo|(this.buf[this.pos]&127)<<w*7)>>>0,this.buf[this.pos++]<128)return d}return d.lo=(d.lo|(this.buf[this.pos++]&127)<<w*7)>>>0,d}if(this.len-this.pos>4){for(;w<5;++w)if(d.hi=(d.hi|(this.buf[this.pos]&127)<<w*7+3)>>>0,this.buf[this.pos++]<128)return d}else for(;w<5;++w){if(this.pos>=this.len)throw s(this);if(d.hi=(d.hi|(this.buf[this.pos]&127)<<w*7+3)>>>0,this.buf[this.pos++]<128)return d}throw Error("invalid varint encoding")}a.prototype.bool=function(){return this.uint32()!==0};function p(d,w){return(d[w-4]|d[w-3]<<8|d[w-2]<<16|d[w-1]<<24)>>>0}a.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)|0};function g(){if(this.pos+8>this.len)throw s(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}a.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var d=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,d},a.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var d=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,d},a.prototype.bytes=function(){var d=this.uint32(),w=this.pos,y=this.pos+d;if(y>this.len)throw s(this,d);return this.pos+=d,Array.isArray(this.buf)?this.buf.slice(w,y):w===y?new this.buf.constructor(0):this._slice.call(this.buf,w,y)},a.prototype.string=function(){var d=this.bytes();return o.read(d,0,d.length)},a.prototype.skip=function(d){if(typeof d=="number"){if(this.pos+d>this.len)throw s(this,d);this.pos+=d}else do if(this.pos>=this.len)throw s(this);while(this.buf[this.pos++]&128);return this},a.prototype.skipType=function(d){switch(d){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(d=this.uint32()&7)!==4;)this.skipType(d);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+d+" at offset "+this.pos)}return this},a._configure=function(d){n=d,a.create=c(),n._configure();var w=r.Long?"toLong":"toNumber";r.merge(a.prototype,{int64:function(){return h.call(this)[w](!1)},uint64:function(){return h.call(this)[w](!0)},sint64:function(){return h.call(this).zzDecode()[w](!1)},fixed64:function(){return g.call(this)[w](!0)},sfixed64:function(){return g.call(this)[w](!1)}})}}),Py=P((e,t)=>{"use strict";v(),t.exports=i;var r=sf();(i.prototype=Object.create(r.prototype)).constructor=i;var n=Rr();function i(o){r.call(this,o)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var o=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+o,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+o,this.len))},i._configure()}),Dy=P((e,t)=>{"use strict";v(),t.exports=n;var r=Rr();(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n;function n(i,o,s){if(typeof i!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=Boolean(o),this.responseDelimited=Boolean(s)}n.prototype.rpcCall=function i(o,s,a,u,c){if(!u)throw TypeError("request must be specified");var h=this;if(!c)return r.asPromise(i,h,o,s,a,u);if(!h.rpcImpl){setTimeout(function(){c(Error("already ended"))},0);return}try{return h.rpcImpl(o,s[h.requestDelimited?"encodeDelimited":"encode"](u).finish(),function(p,g){if(p)return h.emit("error",p,o),c(p);if(g===null){h.end(!0);return}if(!(g instanceof a))try{g=a[h.responseDelimited?"decodeDelimited":"decode"](g)}catch(d){return h.emit("error",d,o),c(d)}return h.emit("data",g,o),c(null,g)})}catch(p){h.emit("error",p,o),setTimeout(function(){c(p)},0);return}},n.prototype.end=function(i){return this.rpcImpl&&(i||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),My=P(e=>{"use strict";v();var t=e;t.Service=Dy()}),zy=P((e,t)=>{"use strict";v(),t.exports={}}),qy=P(e=>{"use strict";v();var t=e;t.build="minimal",t.Writer=of(),t.BufferWriter=jy(),t.Reader=sf(),t.BufferReader=Py(),t.util=Rr(),t.rpc=My(),t.roots=zy(),t.configure=r;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}r()}),$r=P((e,t)=>{"use strict";v(),t.exports=qy()}),Vy=P((e,t)=>{"use strict";v(),Object.defineProperty(e,"__esModule",{value:!0}),r.BASE=2166136261;function r(n,i=r.BASE){let o=n.length;for(let s=0;s<o;s++)i^=n.charCodeAt(s),i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24);return i>>>0}e.default=r,t.exports=r}),ha={};pe(ha,{concat:()=>$e});function $e(e,t){t||(t=e.reduce((i,o)=>i+o.length,0));let r=Xh(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return r}var Ur=se(()=>{v(),ef()}),Ky=P((e,t)=>{"use strict";v();var r="[a-fA-F\\d:]",n=p=>p&&p.includeBoundaries?`(?:(?<=\\s|^)(?=${r})|(?<=${r})(?=\\s|$))`:"",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",o="[a-fA-F\\d]{1,4}",s=`
(?:
(?:${o}:){7}(?:${o}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${o}:){6}(?:${i}|:${o}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${o}:){5}(?::${i}|(?::${o}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${o}:){4}(?:(?::${o}){0,1}:${i}|(?::${o}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${o}:){3}(?:(?::${o}){0,2}:${i}|(?::${o}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${o}:){2}(?:(?::${o}){0,3}:${i}|(?::${o}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${o}:){1}(?:(?::${o}){0,4}:${i}|(?::${o}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${o}){0,5}:${i}|(?::${o}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp(`(?:^${i}$)|(?:^${s}$)`),u=new RegExp(`^${i}$`),c=new RegExp(`^${s}$`),h=p=>p&&p.exact?a:new RegExp(`(?:${n(p)}${i}${n(p)})|(?:${n(p)}${s}${n(p)})`,"g");h.v4=p=>p&&p.exact?u:new RegExp(`${n(p)}${i}${n(p)}`,"g"),h.v6=p=>p&&p.exact?c:new RegExp(`${n(p)}${s}${n(p)}`,"g"),t.exports=h}),Wy=P((e,t)=>{"use strict";v();var r=Ky(),n=i=>r({exact:!0}).test(i);n.v4=i=>r.v4({exact:!0}).test(i),n.v6=i=>r.v6({exact:!0}).test(i),n.version=i=>n(i)?n.v4(i)?4:6:void 0,t.exports=n}),Hy=P((e,t)=>{"use strict";v();var r=Wy(),{toString:n}=(ye(),Ze(li)),i=r,o=r.v4,s=r.v6,a=function(c,h,p){p=~~p;let g;if(o(c))g=h||new Uint8Array(p+4),c.split(/\./g).map(function(d){g[p++]=parseInt(d,10)&255});else if(s(c)){let d=c.split(":",8),w;for(w=0;w<d.length;w++){let y=o(d[w]),b;y&&(b=a(d[w]),d[w]=n(b.slice(0,2),"base16")),b&&++w<8&&d.splice(w,0,n(b.slice(2,4),"base16"))}if(d[0]==="")for(;d.length<8;)d.unshift("0");else if(d[d.length-1]==="")for(;d.length<8;)d.push("0");else if(d.length<8){for(w=0;w<d.length&&d[w]!=="";w++);let y=[w,"1"];for(w=9-d.length;w>0;w--)y.push("0");d.splice.apply(d,y)}for(g=h||new Uint8Array(p+16),w=0;w<d.length;w++){let y=parseInt(d[w],16);g[p++]=y>>8&255,g[p++]=y&255}}if(!g)throw Error("Invalid ip address: "+c);return g},u=function(c,h,p){h=~~h,p=p||c.length-h;let g=[],d,w=new DataView(c.buffer);if(p===4){for(let y=0;y<p;y++)g.push(c[h+y]);d=g.join(".")}else if(p===16){for(let y=0;y<p;y+=2)g.push(w.getUint16(h+y).toString(16));d=g.join(":"),d=d.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),d=d.replace(/:{3,4}/,"::")}return d};t.exports={isIP:i,isV4:o,isV6:s,toBytes:a,toString:u}}),fa=P((e,t)=>{"use strict";v();function r(o){if(typeof o=="number"){if(r.codes[o])return r.codes[o];throw new Error("no protocol with code: "+o)}else if(typeof o=="string"){if(r.names[o])return r.names[o];throw new Error("no protocol with name: "+o)}throw new Error("invalid protocol id type: "+o)}var n=-1;r.lengthPrefixedVarSize=n,r.V=n,r.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns","resolvable"],[54,n,"dns4","resolvable"],[55,n,"dns6","resolvable"],[56,n,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,"path"],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]],r.names={},r.codes={},r.table.map(o=>{let s=i.apply(null,o);return r.codes[s.code]=s,r.names[s.name]=s,null}),r.object=i;function i(o,s,a,u,c){return{code:o,size:s,name:a,resolvable:Boolean(u),path:Boolean(c)}}t.exports=r}),Gy=P((e,t)=>{"use strict";v();var r=Hy(),n=fa(),{CID:i}=(ce(),Ze(aa)),{base32:o}=(Ge(),Ze(oa)),{base58btc:s}=(it(),Ze(po)),a=(He(),Ze(uh)),u=nt(),{toString:c}=(ye(),Ze(li)),{fromString:h}=(Ve(),Ze(rf)),{concat:p}=(Ur(),Ze(ha));t.exports=g;function g(A,B){return B instanceof Uint8Array?g.toString(A,B):g.toBytes(A,B)}g.toString=function(A,B){switch(n(A).code){case 4:case 41:return w(B);case 6:case 273:case 33:case 132:return b(B).toString();case 53:case 54:case 55:case 56:case 400:case 777:return E(B);case 421:return O(B);case 444:return T(B);case 445:return T(B);default:return c(B,"base16")}},g.toBytes=function(A,B){switch(n(A).code){case 4:return d(B);case 41:return d(B);case 6:case 273:case 33:case 132:return y(parseInt(B,10));case 53:case 54:case 55:case 56:case 400:case 777:return x(B);case 421:return S(B);case 444:return U(B);case 445:return _(B);default:return h(B,"base16")}};function d(A){if(!r.isIP(A))throw new Error("invalid ip address");return r.toBytes(A)}function w(A){let B=r.toString(A);if(!B||!r.isIP(B))throw new Error("invalid ip address");return B}function y(A){let B=new ArrayBuffer(2);return new DataView(B).setUint16(0,A),new Uint8Array(B)}function b(A){return new DataView(A.buffer).getUint16(A.byteOffset)}function x(A){let B=h(A),j=Uint8Array.from(u.encode(B.length));return p([j,B],j.length+B.length)}function E(A){let B=u.decode(A);if(A=A.slice(u.decode.bytes),A.length!==B)throw new Error("inconsistent lengths");return c(A)}function S(A){let B;A[0]==="Q"||A[0]==="1"?B=a.decode(s.decode(`z${A}`)).bytes:B=i.parse(A).multihash.bytes;let j=Uint8Array.from(u.encode(B.length));return p([j,B],j.length+B.length)}function O(A){let B=u.decode(A),j=A.slice(u.decode.bytes);if(j.length!==B)throw new Error("inconsistent lengths");return c(j,"base58btc")}function U(A){let B=A.split(":");if(B.length!==2)throw new Error("failed to parse onion addr: "+B+" does not contain a port number");if(B[0].length!==16)throw new Error("failed to parse onion addr: "+B[0]+" not a Tor onion address.");let j=o.decode("b"+B[0]),K=parseInt(B[1],10);if(K<1||K>65536)throw new Error("Port number is not in range(1, 65536)");let J=y(K);return p([j,J],j.length+J.length)}function _(A){let B=A.split(":");if(B.length!==2)throw new Error("failed to parse onion addr: "+B+" does not contain a port number");if(B[0].length!==56)throw new Error("failed to parse onion addr: "+B[0]+" not a Tor onion3 address.");let j=o.decode("b"+B[0]),K=parseInt(B[1],10);if(K<1||K>65536)throw new Error("Port number is not in range(1, 65536)");let J=y(K);return p([j,J],j.length+J.length)}function T(A){let B=A.slice(0,A.length-2),j=A.slice(A.length-2),K=c(B,"base32"),J=b(j);return K+":"+J}}),Jy=P((e,t)=>{"use strict";v();var r=Gy(),n=fa(),i=nt(),{concat:o}=(Ur(),Ze(ha)),{toString:s}=(ye(),Ze(li));t.exports={stringToStringTuples:a,stringTuplesToString:u,tuplesToStringTuples:h,stringTuplesToTuples:c,bytesToTuples:d,tuplesToBytes:p,bytesToString:w,stringToBytes:y,fromString:b,fromBytes:x,validateBytes:E,isValidBytes:S,cleanPath:O,ParseError:U,protoFromTuple:_,sizeForAddr:g};function a(T){let A=[],B=T.split("/").slice(1);if(B.length===1&&B[0]==="")return[];for(let j=0;j<B.length;j++){let K=B[j],J=n(K);if(J.size===0){A.push([K]);continue}if(j++,j>=B.length)throw U("invalid address: "+T);if(J.path){A.push([K,O(B.slice(j).join("/"))]);break}A.push([K,B[j]])}return A}function u(T){let A=[];return T.map(B=>{let j=_(B);return A.push(j.name),B.length>1&&A.push(B[1]),null}),O(A.join("/"))}function c(T){return T.map(A=>{Array.isArray(A)||(A=[A]);let B=_(A);return A.length>1?[B.code,r.toBytes(B.code,A[1])]:[B.code]})}function h(T){return T.map(A=>{let B=_(A);return A[1]?[B.code,r.toString(B.code,A[1])]:[B.code]})}function p(T){return x(o(T.map(A=>{let B=_(A),j=Uint8Array.from(i.encode(B.code));return A.length>1&&(j=o([j,A[1]])),j})))}function g(T,A){return T.size>0?T.size/8:T.size===0?0:i.decode(A)+i.decode.bytes}function d(T){let A=[],B=0;for(;B<T.length;){let j=i.decode(T,B),K=i.decode.bytes,J=n(j),ae=g(J,T.slice(B+K));if(ae===0){A.push([j]),B+=K;continue}let qe=T.slice(B+K,B+K+ae);if(B+=ae+K,B>T.length)throw U("Invalid address Uint8Array: "+s(T,"base16"));A.push([j,qe])}return A}function w(T){let A=d(T),B=h(A);return u(B)}function y(T){T=O(T);let A=a(T),B=c(A);return p(B)}function b(T){return y(T)}function x(T){let A=E(T);if(A)throw A;return Uint8Array.from(T)}function E(T){try{d(T)}catch(A){return A}}function S(T){return E(T)===void 0}function O(T){return"/"+T.trim().split("/").filter(A=>A).join("/")}function U(T){return new Error("Error parsing address: "+T)}function _(T){return n(T[0])}}),af={};pe(af,{equals:()=>da});function da(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var pa=se(()=>{v()}),Yy=P((e,t)=>{"use strict";v();var r=Jy(),n=fa(),i=nt(),{CID:o}=(ce(),Ze(aa)),{base58btc:s}=(it(),Ze(po)),a=Je(),u=Symbol.for("nodejs.util.inspect.custom"),{toString:c}=(ye(),Ze(li)),{equals:h}=(pa(),Ze(af)),p=new Map,g=Symbol.for("@multiformats/js-multiaddr/multiaddr"),d=class{constructor(y){if(y==null&&(y=""),Object.defineProperty(this,g,{value:!0}),y instanceof Uint8Array)this.bytes=r.fromBytes(y);else if(typeof y=="string"){if(y.length>0&&y.charAt(0)!=="/")throw new Error(`multiaddr "${y}" must start with a "/"`);this.bytes=r.fromString(y)}else if(d.isMultiaddr(y))this.bytes=r.fromBytes(y.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return r.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let y={},b=this.toString().split("/");return y.family=b[1]==="ip4"?4:6,y.host=b[2],y.transport=b[3],y.port=parseInt(b[4]),y}protos(){return this.protoCodes().map(y=>Object.assign({},n(y)))}protoCodes(){let y=[],b=this.bytes,x=0;for(;x<b.length;){let E=i.decode(b,x),S=i.decode.bytes,O=n(E);x+=r.sizeForAddr(O,b.slice(x+S))+S,y.push(E)}return y}protoNames(){return this.protos().map(y=>y.name)}tuples(){return r.bytesToTuples(this.bytes)}stringTuples(){let y=r.bytesToTuples(this.bytes);return r.tuplesToStringTuples(y)}encapsulate(y){return y=new d(y),new d(this.toString()+y.toString())}decapsulate(y){let b=y.toString(),x=this.toString(),E=x.lastIndexOf(b);if(E<0)throw new Error("Address "+this+" does not contain subaddress: "+y);return new d(x.slice(0,E))}decapsulateCode(y){let b=this.tuples();for(let x=b.length-1;x>=0;x--)if(b[x][0]===y)return new d(r.tuplesToBytes(b.slice(0,x)));return this}getPeerId(){try{let y=this.stringTuples().filter(b=>b[0]===n.names.ipfs.code).pop();if(y&&y[1]){let b=y[1];return b[0]==="Q"||b[0]==="1"?c(s.decode(`z${b}`),"base58btc"):c(o.parse(b).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let y=null;try{y=this.stringTuples().filter(b=>!!n(b[0]).path)[0][1],y||(y=null)}catch{y=null}return y}equals(y){return h(this.bytes,y.bytes)}async resolve(){let y=this.protos().find(x=>x.resolvable);if(!y)return[this];let b=p.get(y.name);if(!b)throw a(new Error(`no available resolver for ${y.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await b(this)).map(x=>new d(x))}nodeAddress(){let y=this.protoCodes(),b=this.protoNames(),x=this.toString().split("/").slice(1);if(x.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(y[0]!==4&&y[0]!==41&&y[0]!==54&&y[0]!==55)throw new Error(`no protocol with name: "'${b[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(x[2]!=="tcp"&&x[2]!=="udp")throw new Error(`no protocol with name: "'${b[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:y[0]===41||y[0]===55?6:4,address:x[1],port:parseInt(x[3])}}isThinWaistAddress(y){let b=(y||this).protos();return!(b.length!==2||b[0].code!==4&&b[0].code!==41||b[1].code!==6&&b[1].code!==273)}static fromNodeAddress(y,b){if(!y)throw new Error("requires node address object");if(!b)throw new Error("requires transport protocol");let x;switch(y.family){case 4:x="ip4";break;case 6:x="ip6";break;default:throw Error(`Invalid addr family. Got '${y.family}' instead of 4 or 6`)}return new d("/"+[x,y.address,b,y.port].join("/"))}static isName(y){return d.isMultiaddr(y)?y.protos().some(b=>b.resolvable):!1}static isMultiaddr(y){return y instanceof d||Boolean(y&&y[g])}[u](){return"<Multiaddr "+c(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+c(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}};d.protocols=n,d.resolvers=p;function w(y){return new d(y)}t.exports={Multiaddr:d,multiaddr:w,protocols:n,resolvers:p}}),Qy=P((e,t)=>{"use strict";v(),t.exports=s,t.exports.format=a,t.exports.parse=u;var r=/\B(?=(\d{3})+(?!\d))/g,n=/(?:\.0*|(\.[^0]+)0+)$/,i={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(c,h){return typeof c=="string"?u(c):typeof c=="number"?a(c,h):null}function a(c,h){if(!Number.isFinite(c))return null;var p=Math.abs(c),g=h&&h.thousandsSeparator||"",d=h&&h.unitSeparator||"",w=h&&h.decimalPlaces!==void 0?h.decimalPlaces:2,y=Boolean(h&&h.fixedDecimals),b=h&&h.unit||"";(!b||!i[b.toLowerCase()])&&(p>=i.pb?b="PB":p>=i.tb?b="TB":p>=i.gb?b="GB":p>=i.mb?b="MB":p>=i.kb?b="KB":b="B");var x=c/i[b.toLowerCase()],E=x.toFixed(w);return y||(E=E.replace(n,"$1")),g&&(E=E.split(".").map(function(S,O){return O===0?S.replace(r,g):S}).join(".")),E+d+b}function u(c){if(typeof c=="number"&&!isNaN(c))return c;if(typeof c!="string")return null;var h=o.exec(c),p,g="b";return h?(p=parseFloat(h[1]),g=h[4].toLowerCase()):(p=parseInt(c,10),g="b"),isNaN(p)?null:Math.floor(i[g]*p)}}),Zy=P((e,t)=>{"use strict";v(),t.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let n=Object.getPrototypeOf(r);return n===null||n===Object.prototype}}),Xy=P((e,t)=>{"use strict";v();var r=Zy(),{hasOwnProperty:n}=Object.prototype,{propertyIsEnumerable:i}=Object,o=(y,b,x)=>Object.defineProperty(y,b,{value:x,writable:!0,enumerable:!0,configurable:!0}),s=e,a={concatArrays:!1,ignoreUndefined:!1},u=y=>{let b=[];for(let x in y)n.call(y,x)&&b.push(x);if(Object.getOwnPropertySymbols){let x=Object.getOwnPropertySymbols(y);for(let E of x)i.call(y,E)&&b.push(E)}return b};function c(y){return Array.isArray(y)?h(y):r(y)?p(y):y}function h(y){let b=y.slice(0,0);return u(y).forEach(x=>{o(b,x,c(y[x]))}),b}function p(y){let b=Object.getPrototypeOf(y)===null?Object.create(null):{};return u(y).forEach(x=>{o(b,x,c(y[x]))}),b}var g=(y,b,x,E)=>(x.forEach(S=>{typeof b[S]>"u"&&E.ignoreUndefined||(S in y&&y[S]!==Object.getPrototypeOf(y)?o(y,S,w(y[S],b[S],E)):o(y,S,c(b[S])))}),y),d=(y,b,x)=>{let E=y.slice(0,0),S=0;return[y,b].forEach(O=>{let U=[];for(let _=0;_<O.length;_++)!n.call(O,_)||(U.push(String(_)),O===y?o(E,S++,O[_]):o(E,S++,c(O[_])));E=g(E,O,u(O).filter(_=>!U.includes(_)),x)}),E};function w(y,b,x){return x.concatArrays&&Array.isArray(y)&&Array.isArray(b)?d(y,b,x):!r(b)||!r(y)?c(b):g(y,b,u(b),x)}t.exports=function(...y){let b=w(c(a),this!==s&&this||{},a),x={_:{}};for(let E of y)if(E!==void 0){if(!r(E))throw new TypeError("`"+E+"` is not an Option Object");x=w(x,{_:E},b)}return x._}}),eg=P((e,t)=>{"use strict";v();var r=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function o(c,h,p){this.fn=c,this.context=h,this.once=p||!1}function s(c,h,p,g,d){if(typeof p!="function")throw new TypeError("The listener must be a function");var w=new o(p,g||c,d),y=n?n+h:h;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],w]:c._events[y].push(w):(c._events[y]=w,c._eventsCount++),c}function a(c,h){--c._eventsCount===0?c._events=new i:delete c._events[h]}function u(){this._events=new i,this._eventsCount=0}u.prototype.eventNames=function(){var c=[],h,p;if(this._eventsCount===0)return c;for(p in h=this._events)r.call(h,p)&&c.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},u.prototype.listeners=function(c){var h=n?n+c:c,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,d=p.length,w=new Array(d);g<d;g++)w[g]=p[g].fn;return w},u.prototype.listenerCount=function(c){var h=n?n+c:c,p=this._events[h];return p?p.fn?1:p.length:0},u.prototype.emit=function(c,h,p,g,d,w){var y=n?n+c:c;if(!this._events[y])return!1;var b=this._events[y],x=arguments.length,E,S;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,p),!0;case 4:return b.fn.call(b.context,h,p,g),!0;case 5:return b.fn.call(b.context,h,p,g,d),!0;case 6:return b.fn.call(b.context,h,p,g,d,w),!0}for(S=1,E=new Array(x-1);S<x;S++)E[S-1]=arguments[S];b.fn.apply(b.context,E)}else{var O=b.length,U;for(S=0;S<O;S++)switch(b[S].once&&this.removeListener(c,b[S].fn,void 0,!0),x){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,h);break;case 3:b[S].fn.call(b[S].context,h,p);break;case 4:b[S].fn.call(b[S].context,h,p,g);break;default:if(!E)for(U=1,E=new Array(x-1);U<x;U++)E[U-1]=arguments[U];b[S].fn.apply(b[S].context,E)}}return!0},u.prototype.on=function(c,h,p){return s(this,c,h,p,!1)},u.prototype.once=function(c,h,p){return s(this,c,h,p,!0)},u.prototype.removeListener=function(c,h,p,g){var d=n?n+c:c;if(!this._events[d])return this;if(!h)return a(this,d),this;var w=this._events[d];if(w.fn)w.fn===h&&(!g||w.once)&&(!p||w.context===p)&&a(this,d);else{for(var y=0,b=[],x=w.length;y<x;y++)(w[y].fn!==h||g&&!w[y].once||p&&w[y].context!==p)&&b.push(w[y]);b.length?this._events[d]=b.length===1?b[0]:b:a(this,d)}return this},u.prototype.removeAllListeners=function(c){var h;return c?(h=n?n+c:c,this._events[h]&&a(this,h)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,typeof t<"u"&&(t.exports=u)}),wn=P((e,t)=>{"use strict";v();var r=async function*(n,i){for await(let o of n)await i(o)&&(yield o)};t.exports=r}),bn=P((e,t)=>{"use strict";v();var r=async n=>{for await(let i of n);};t.exports=r}),uf=P((e,t)=>{"use strict";v();var r=async n=>{for await(let i of n)return i};t.exports=r}),ci=P((e,t)=>{"use strict";v();var r=async function*(n,i){for await(let o of n)yield i(o)};t.exports=r}),tg=P((e,t)=>{"use strict";v();async function*r(n,i=1){let o=[];i<1&&(i=1);for await(let s of n)for(o.push(s);o.length>=i;)yield o.slice(0,i),o=o.slice(i);for(;o.length;)yield o.slice(0,i),o=o.slice(i)}t.exports=r}),rg=P((e,t)=>{"use strict";v();var r=tg();async function*n(i,o=1){for await(let s of r(i,o)){let a=s.map(u=>u().then(c=>({ok:!0,value:c}),c=>({ok:!1,err:c})));for(let u=0;u<a.length;u++){let c=await a[u];if(c.ok)yield c.value;else throw c.err}}}t.exports=n}),ng=P((e,t)=>{v(),t.exports=class{constructor(r){if(!(r>0)||(r-1&r)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(r),this.mask=r-1,this.top=0,this.btm=0,this.next=null}push(r){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=r,this.top=this.top+1&this.mask,!0)}shift(){let r=this.buffer[this.btm];if(r!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,r}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}}),ig=P((e,t)=>{v();var r=ng();t.exports=class{constructor(n){this.hwm=n||16,this.head=new r(this.hwm),this.tail=this.head}push(n){if(!this.head.push(n)){let i=this.head;this.head=i.next=new r(2*this.head.buffer.length),this.head.push(n)}}shift(){let n=this.tail.shift();if(n===void 0&&this.tail.next){let i=this.tail.next;return this.tail.next=null,this.tail=i,this.tail.shift()}return n}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}}),og=P((e,t)=>{v();var r=ig();t.exports=n=>{n=n||{};let i;typeof n=="function"?(i=n,n={}):i=n.onEnd;let o=new r,s,a,u,c=()=>{if(!o.isEmpty()){if(n.writev){let E,S=[];for(;!o.isEmpty();){if(E=o.shift(),E.error)throw E.error;S.push(E.value)}return{done:E.done,value:S}}let x=o.shift();if(x.error)throw x.error;return x}return u?{done:!0}:new Promise((x,E)=>{a=S=>(a=null,S.error?E(S.error):n.writev&&!S.done?x({done:S.done,value:[S.value]}):x(S),s)})},h=x=>a?a(x):(o.push(x),s),p=x=>(o=new r,a?a({error:x}):(o.push({error:x}),s)),g=x=>u?s:h({done:!1,value:x}),d=x=>u?s:(u=!0,x?p(x):h({done:!0})),w=()=>(o=new r,d(),{done:!0}),y=x=>(d(x),{done:!0});if(s={[Symbol.asyncIterator](){return this},next:c,return:w,throw:y,push:g,end:d},!i)return s;let b=s;return s={[Symbol.asyncIterator](){return this},next(){return b.next()},throw(x){return b.throw(x),i&&(i(x),i=null),{done:!0}},return(){return b.return(),i&&(i(),i=null),{done:!0}},push:g,end(x){return b.end(x),i&&(i(x),i=null),s}},s}}),ya=P((e,t)=>{"use strict";v();var r=og(),n=async function*(...i){let o=r();setTimeout(async()=>{try{await Promise.all(i.map(async s=>{for await(let a of s)o.push(a)})),o.end()}catch(s){o.end(s)}},0),yield*o};t.exports=n}),vo=P((e,t)=>{"use strict";v();var r=async n=>{let i=[];for await(let o of n)i.push(o);return i};t.exports=r}),Eo=P((e,t)=>{"use strict";v();var r=async function*(n,i){let o=0;if(!(i<1)){for await(let s of n)if(yield s,o++,o===i)return}};t.exports=r}),sg=P((e,t)=>{"use strict";v();var r=vo(),n=async function*(i,o){yield*(await r(i)).sort(o)};t.exports=n}),ag=P(e=>{"use strict";v(),e.supports=function(...t){let r=t.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}}),Ct=P((e,t)=>{"use strict";v(),t.exports=class extends Error{constructor(r,n){super(r||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}),lf=P((e,t)=>{"use strict";v();var r=null;t.exports=function(){return r===null&&(r={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),r}}),cf=P(e=>{"use strict";v();var t=Ct(),r=new Set(["buffer","view","utf8"]),n=class{constructor(i){if(this.encode=i.encode||this.encode,this.decode=i.decode||this.decode,this.name=i.name||this.name,this.format=i.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!r.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");i.createViewTranscoder&&(this.createViewTranscoder=i.createViewTranscoder),i.createBufferTranscoder&&(this.createBufferTranscoder=i.createBufferTranscoder),i.createUTF8Transcoder&&(this.createUTF8Transcoder=i.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};e.Encoding=n}),hf=P(e=>{"use strict";v();var{Buffer:t}=fo()||{},{Encoding:r}=cf(),n=lf(),i=class extends r{constructor(a){super({...a,format:"buffer"})}createViewTranscoder(){return new o({encode:this.encode,decode:a=>this.decode(t.from(a.buffer,a.byteOffset,a.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},o=class extends r{constructor(a){super({...a,format:"view"})}createBufferTranscoder(){return new i({encode:a=>{let u=this.encode(a);return t.from(u.buffer,u.byteOffset,u.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},s=class extends r{constructor(a){super({...a,format:"utf8"})}createBufferTranscoder(){return new i({encode:a=>t.from(this.encode(a),"utf8"),decode:a=>this.decode(a.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:a,textDecoder:u}=n();return new o({encode:c=>a.encode(this.encode(c)),decode:c=>this.decode(u.decode(c)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};e.BufferFormat=i,e.ViewFormat=o,e.UTF8Format=s}),ug=P(e=>{"use strict";v();var{Buffer:t}=fo()||{Buffer:{isBuffer:()=>!1}},{textEncoder:r,textDecoder:n}=lf()(),{BufferFormat:i,ViewFormat:o,UTF8Format:s}=hf(),a=u=>u;e.utf8=new s({encode:function(u){return t.isBuffer(u)?u.toString("utf8"):ArrayBuffer.isView(u)?n.decode(u):String(u)},decode:a,name:"utf8",createViewTranscoder(){return new o({encode:function(u){return ArrayBuffer.isView(u)?u:r.encode(u)},decode:function(u){return n.decode(u)},name:`${this.name}+view`})},createBufferTranscoder(){return new i({encode:function(u){return t.isBuffer(u)?u:ArrayBuffer.isView(u)?t.from(u.buffer,u.byteOffset,u.byteLength):t.from(String(u),"utf8")},decode:function(u){return u.toString("utf8")},name:`${this.name}+buffer`})}}),e.json=new s({encode:JSON.stringify,decode:JSON.parse,name:"json"}),e.buffer=new i({encode:function(u){return t.isBuffer(u)?u:ArrayBuffer.isView(u)?t.from(u.buffer,u.byteOffset,u.byteLength):t.from(String(u),"utf8")},decode:a,name:"buffer",createViewTranscoder(){return new o({encode:function(u){return ArrayBuffer.isView(u)?u:t.from(String(u),"utf8")},decode:function(u){return t.from(u.buffer,u.byteOffset,u.byteLength)},name:`${this.name}+view`})}}),e.view=new o({encode:function(u){return ArrayBuffer.isView(u)?u:r.encode(u)},decode:a,name:"view",createBufferTranscoder(){return new i({encode:function(u){return t.isBuffer(u)?u:ArrayBuffer.isView(u)?t.from(u.buffer,u.byteOffset,u.byteLength):t.from(String(u),"utf8")},decode:a,name:`${this.name}+buffer`})}}),e.hex=new i({encode:function(u){return t.isBuffer(u)?u:t.from(String(u),"hex")},decode:function(u){return u.toString("hex")},name:"hex"}),e.base64=new i({encode:function(u){return t.isBuffer(u)?u:t.from(String(u),"base64")},decode:function(u){return u.toString("base64")},name:"base64"})}),lg=P(e=>{"use strict";v();var t=Ct(),r=ug(),{Encoding:n}=cf(),{BufferFormat:i,ViewFormat:o,UTF8Format:s}=hf(),a=Symbol("formats"),u=Symbol("encodings"),c=new Set(["buffer","view","utf8"]),h=class{constructor(b){if(Array.isArray(b)){if(!b.every(x=>c.has(x)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[u]=new Map,this[a]=new Set(b);for(let x in r)try{this.encoding(x)}catch(E){if(E.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw E}}encodings(){return Array.from(new Set(this[u].values()))}encoding(b){let x=this[u].get(b);if(x===void 0){if(typeof b=="string"&&b!==""){if(x=w[b],!x)throw new t(`Encoding '${b}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof b!="object"||b===null)throw new TypeError("First argument 'encoding' must be a string or object");x=p(b)}let{name:E,format:S}=x;if(!this[a].has(S))if(this[a].has("view"))x=x.createViewTranscoder();else if(this[a].has("buffer"))x=x.createBufferTranscoder();else if(this[a].has("utf8"))x=x.createUTF8Transcoder();else throw new t(`Encoding '${E}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let O of[b,E,x.name,x.commonName])this[u].set(O,x)}return x}};e.Transcoder=h;function p(b){if(b instanceof n)return b;let x="type"in b&&typeof b.type=="string"?b.type:void 0,E=b.name||x||`anonymous-${y++}`;switch(g(b)){case"view":return new o({...b,name:E});case"utf8":return new s({...b,name:E});case"buffer":return new i({...b,name:E});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function g(b){return"format"in b&&b.format!==void 0?b.format:"buffer"in b&&typeof b.buffer=="boolean"?b.buffer?"buffer":"utf8":"code"in b&&Number.isInteger(b.code)?"view":"buffer"}var d={binary:r.buffer,"utf-8":r.utf8},w={...r,...d},y=0}),cg=P((e,t)=>{"use strict";v();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(_,T,A){return Function.prototype.apply.call(_,T,A)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:i=function(_){return Object.getOwnPropertyNames(_)};function o(_){console&&console.warn&&console.warn(_)}var s=Number.isNaN||function(_){return _!==_};function a(){a.init.call(this)}t.exports=a,t.exports.once=S,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(_){if(typeof _!="number"||_<0||s(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");u=_}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||s(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function h(_){return _._maxListeners===void 0?a.defaultMaxListeners:_._maxListeners}a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(_){for(var T=[],A=1;A<arguments.length;A++)T.push(arguments[A]);var B=_==="error",j=this._events;if(j!==void 0)B=B&&j.error===void 0;else if(!B)return!1;if(B){var K;if(T.length>0&&(K=T[0]),K instanceof Error)throw K;var J=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw J.context=K,J}var ae=j[_];if(ae===void 0)return!1;if(typeof ae=="function")n(ae,this,T);else for(var qe=ae.length,st=b(ae,qe),A=0;A<qe;++A)n(st[A],this,T);return!0};function p(_,T,A,B){var j,K,J;if(c(A),K=_._events,K===void 0?(K=_._events=Object.create(null),_._eventsCount=0):(K.newListener!==void 0&&(_.emit("newListener",T,A.listener?A.listener:A),K=_._events),J=K[T]),J===void 0)J=K[T]=A,++_._eventsCount;else if(typeof J=="function"?J=K[T]=B?[A,J]:[J,A]:B?J.unshift(A):J.push(A),j=h(_),j>0&&J.length>j&&!J.warned){J.warned=!0;var ae=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");ae.name="MaxListenersExceededWarning",ae.emitter=_,ae.type=T,ae.count=J.length,o(ae)}return _}a.prototype.addListener=function(_,T){return p(this,_,T,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(_,T){return p(this,_,T,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(_,T,A){var B={fired:!1,wrapFn:void 0,target:_,type:T,listener:A},j=g.bind(B);return j.listener=A,B.wrapFn=j,j}a.prototype.once=function(_,T){return c(T),this.on(_,d(this,_,T)),this},a.prototype.prependOnceListener=function(_,T){return c(T),this.prependListener(_,d(this,_,T)),this},a.prototype.removeListener=function(_,T){var A,B,j,K,J;if(c(T),B=this._events,B===void 0)return this;if(A=B[_],A===void 0)return this;if(A===T||A.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete B[_],B.removeListener&&this.emit("removeListener",_,A.listener||T));else if(typeof A!="function"){for(j=-1,K=A.length-1;K>=0;K--)if(A[K]===T||A[K].listener===T){J=A[K].listener,j=K;break}if(j<0)return this;j===0?A.shift():x(A,j),A.length===1&&(B[_]=A[0]),B.removeListener!==void 0&&this.emit("removeListener",_,J||T)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(_){var T,A,B;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[_]),this;if(arguments.length===0){var j=Object.keys(A),K;for(B=0;B<j.length;++B)K=j[B],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=A[_],typeof T=="function")this.removeListener(_,T);else if(T!==void 0)for(B=T.length-1;B>=0;B--)this.removeListener(_,T[B]);return this};function w(_,T,A){var B=_._events;if(B===void 0)return[];var j=B[T];return j===void 0?[]:typeof j=="function"?A?[j.listener||j]:[j]:A?E(j):b(j,j.length)}a.prototype.listeners=function(_){return w(this,_,!0)},a.prototype.rawListeners=function(_){return w(this,_,!1)},a.listenerCount=function(_,T){return typeof _.listenerCount=="function"?_.listenerCount(T):y.call(_,T)},a.prototype.listenerCount=y;function y(_){var T=this._events;if(T!==void 0){var A=T[_];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function b(_,T){for(var A=new Array(T),B=0;B<T;++B)A[B]=_[B];return A}function x(_,T){for(;T+1<_.length;T++)_[T]=_[T+1];_.pop()}function E(_){for(var T=new Array(_.length),A=0;A<T.length;++A)T[A]=_[A].listener||_[A];return T}function S(_,T){return new Promise(function(A,B){function j(J){_.removeListener(T,K),B(J)}function K(){typeof _.removeListener=="function"&&_.removeListener("error",j),A([].slice.call(arguments))}U(_,T,K,{once:!0}),T!=="error"&&O(_,j,{once:!0})})}function O(_,T,A){typeof _.on=="function"&&U(_,"error",T,A)}function U(_,T,A,B){if(typeof _.on=="function")B.once?_.once(T,A):_.on(T,A);else if(typeof _.addEventListener=="function")_.addEventListener(T,function j(K){B.once&&_.removeEventListener(T,j),A(K)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}}),hg=P((e,t)=>{v(),t.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)}),xo=P(e=>{"use strict";v();var t=hg();e.fromCallback=function(r,n){if(r===void 0){var i=new Promise(function(o,s){r=function(a,u){a?s(a):o(u)}});r[n!==void 0?n:"promise"]=i}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r},e.fromPromise=function(r,n){if(n===void 0)return r;r.then(function(i){t(()=>n(null,i))}).catch(function(i){t(()=>n(i))})}}),ga=P(e=>{"use strict";v(),e.getCallback=function(t,r){return typeof t=="function"?t:r},e.getOptions=function(t,r){return typeof t=="object"&&t!==null?t:r!==void 0?r:{}}}),Cr=P(e=>{"use strict";v();var{fromCallback:t}=xo(),r=Ct(),{getOptions:n,getCallback:i}=ga(),o=Symbol("promise"),s=Symbol("callback"),a=Symbol("working"),u=Symbol("handleOne"),c=Symbol("handleMany"),h=Symbol("autoClose"),p=Symbol("finishWork"),g=Symbol("returnMany"),d=Symbol("closing"),w=Symbol("handleClose"),y=Symbol("closed"),b=Symbol("closeCallbacks"),x=Symbol("keyEncoding"),E=Symbol("valueEncoding"),S=Symbol("abortOnClose"),O=Symbol("legacy"),U=Symbol("keys"),_=Symbol("values"),T=Symbol("limit"),A=Symbol("count"),B=Object.freeze({}),j=()=>{},K=!1,J=class{constructor(D,k,L){if(typeof D!="object"||D===null){let C=D===null?"null":typeof D;throw new TypeError(`The first argument must be an abstract-level database, received ${C}`)}if(typeof k!="object"||k===null)throw new TypeError("The second argument must be an options object");this[y]=!1,this[b]=[],this[a]=!1,this[d]=!1,this[h]=!1,this[s]=null,this[u]=this[u].bind(this),this[c]=this[c].bind(this),this[w]=this[w].bind(this),this[x]=k[x],this[E]=k[E],this[O]=L,this[T]=Number.isInteger(k.limit)&&k.limit>=0?k.limit:1/0,this[A]=0,this[S]=!!k.abortOnClose,this.db=D,this.db.attachResource(this),this.nextTick=D.nextTick}get count(){return this[A]}get limit(){return this[T]}next(D){let k;if(D===void 0)k=new Promise((L,C)=>{D=(M,Q,ne)=>{M?C(M):this[O]?Q===void 0&&ne===void 0?L():L([Q,ne]):L(Q)}});else if(typeof D!="function")throw new TypeError("Callback must be a function");return this[d]?this.nextTick(D,new r("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(D,new r("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[s]=D,this[A]>=this[T]?this.nextTick(this[u],null):this._next(this[u])),k}_next(D){this.nextTick(D)}nextv(D,k,L){return L=i(k,L),L=t(L,o),k=n(k,B),Number.isInteger(D)?(this[d]?this.nextTick(L,new r("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(L,new r("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(D<1&&(D=1),this[T]<1/0&&(D=Math.min(D,this[T]-this[A])),this[a]=!0,this[s]=L,D<=0?this.nextTick(this[c],null,[]):this._nextv(D,k,this[c])),L[o]):(this.nextTick(L,new TypeError("The first argument 'size' must be an integer")),L[o])}_nextv(D,k,L){let C=[],M=(Q,ne,le)=>{if(Q)return L(Q);if(this[O]?ne===void 0&&le===void 0:ne===void 0)return L(null,C);C.push(this[O]?[ne,le]:ne),C.length===D?L(null,C):this._next(M)};this._next(M)}all(D,k){return k=i(D,k),k=t(k,o),D=n(D,B),this[d]?this.nextTick(k,new r("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(k,new r("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[s]=k,this[h]=!0,this[A]>=this[T]?this.nextTick(this[c],null,[]):this._all(D,this[c])),k[o]}_all(D,k){let L=this[A],C=[],M=()=>{let ne=this[T]<1/0?Math.min(1e3,this[T]-L):1e3;ne<=0?this.nextTick(k,null,C):this._nextv(ne,B,Q)},Q=(ne,le)=>{ne?k(ne):le.length===0?k(null,C):(C.push.apply(C,le),L+=le.length,M())};M()}[p](){let D=this[s];return this[S]&&D===null?j:(this[a]=!1,this[s]=null,this[d]&&this._close(this[w]),D)}[g](D,k,L){this[h]?this.close(D.bind(null,k,L)):D(k,L)}seek(D,k){if(k=n(k,B),!this[d]){if(this[a])throw new r("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let L=this.db.keyEncoding(k.keyEncoding||this[x]),C=L.format;k.keyEncoding!==C&&(k={...k,keyEncoding:C});let M=this.db.prefixKey(L.encode(D),C);this._seek(M,k)}}}_seek(D,k){throw new r("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(D){return D=t(D,o),this[y]?this.nextTick(D):this[d]?this[b].push(D):(this[d]=!0,this[b].push(D),this[a]?this[S]&&this[p]()(new r("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[w])),D[o]}_close(D){this.nextTick(D)}[w](){this[y]=!0,this.db.detachResource(this);let D=this[b];this[b]=[];for(let k of D)k()}async*[Symbol.asyncIterator](){try{let D;for(;(D=await this.next())!==void 0;)yield D}finally{this[y]||await this.close()}}},ae=class extends J{constructor(D,k){super(D,k,!0),this[U]=k.keys!==!1,this[_]=k.values!==!1}[u](D,k,L){let C=this[p]();if(D)return C(D);try{k=this[U]&&k!==void 0?this[x].decode(k):void 0,L=this[_]&&L!==void 0?this[E].decode(L):void 0}catch(M){return C(new Le("entry",M))}k===void 0&&L===void 0||this[A]++,C(null,k,L)}[c](D,k){let L=this[p]();if(D)return this[g](L,D);try{for(let C of k){let M=C[0],Q=C[1];C[0]=this[U]&&M!==void 0?this[x].decode(M):void 0,C[1]=this[_]&&Q!==void 0?this[E].decode(Q):void 0}}catch(C){return this[g](L,new Le("entries",C))}this[A]+=k.length,this[g](L,null,k)}end(D){return!K&&typeof console<"u"&&(K=!0,console.warn(new r("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(D)}},qe=class extends J{constructor(D,k){super(D,k,!1)}[u](D,k){let L=this[p]();if(D)return L(D);try{k=k!==void 0?this[x].decode(k):void 0}catch(C){return L(new Le("key",C))}k!==void 0&&this[A]++,L(null,k)}[c](D,k){let L=this[p]();if(D)return this[g](L,D);try{for(let C=0;C<k.length;C++){let M=k[C];k[C]=M!==void 0?this[x].decode(M):void 0}}catch(C){return this[g](L,new Le("keys",C))}this[A]+=k.length,this[g](L,null,k)}},st=class extends J{constructor(D,k){super(D,k,!1)}[u](D,k){let L=this[p]();if(D)return L(D);try{k=k!==void 0?this[E].decode(k):void 0}catch(C){return L(new Le("value",C))}k!==void 0&&this[A]++,L(null,k)}[c](D,k){let L=this[p]();if(D)return this[g](L,D);try{for(let C=0;C<k.length;C++){let M=k[C];k[C]=M!==void 0?this[E].decode(M):void 0}}catch(C){return this[g](L,new Le("values",C))}this[A]+=k.length,this[g](L,null,k)}},Le=class extends r{constructor(D,k){super(`Iterator could not decode ${D}`,{code:"LEVEL_DECODE_ERROR",cause:k})}};for(let D of["_ended property","_nexting property","_end method"])Object.defineProperty(ae.prototype,D.split(" ")[0],{get(){throw new r(`The ${D} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new r(`The ${D} has been removed`,{code:"LEVEL_LEGACY"})}});ae.keyEncoding=x,ae.valueEncoding=E,e.AbstractIterator=ae,e.AbstractKeyIterator=qe,e.AbstractValueIterator=st}),fg=P(e=>{"use strict";v();var{AbstractKeyIterator:t,AbstractValueIterator:r}=Cr(),n=Symbol("iterator"),i=Symbol("callback"),o=Symbol("handleOne"),s=Symbol("handleMany"),a=class extends t{constructor(c,h){super(c,h),this[n]=c.iterator({...h,keys:!0,values:!1}),this[o]=this[o].bind(this),this[s]=this[s].bind(this)}},u=class extends r{constructor(c,h){super(c,h),this[n]=c.iterator({...h,keys:!1,values:!0}),this[o]=this[o].bind(this),this[s]=this[s].bind(this)}};for(let c of[a,u]){let h=c===a,p=h?g=>g[0]:g=>g[1];c.prototype._next=function(g){this[i]=g,this[n].next(this[o])},c.prototype[o]=function(g,d,w){let y=this[i];g?y(g):y(null,h?d:w)},c.prototype._nextv=function(g,d,w){this[i]=w,this[n].nextv(g,d,this[s])},c.prototype._all=function(g,d){this[i]=d,this[n].all(g,this[s])},c.prototype[s]=function(g,d){let w=this[i];g?w(g):w(null,d.map(p))},c.prototype._seek=function(g,d){this[n].seek(g,d)},c.prototype._close=function(g){this[n].close(g)}}e.DefaultKeyIterator=a,e.DefaultValueIterator=u}),dg=P(e=>{"use strict";v();var{AbstractIterator:t,AbstractKeyIterator:r,AbstractValueIterator:n}=Cr(),i=Ct(),o=Symbol("nut"),s=Symbol("undefer"),a=Symbol("factory"),u=class extends t{constructor(p,g){super(p,g),this[o]=null,this[a]=()=>p.iterator(g),this.db.defer(()=>this[s]())}},c=class extends r{constructor(p,g){super(p,g),this[o]=null,this[a]=()=>p.keys(g),this.db.defer(()=>this[s]())}},h=class extends n{constructor(p,g){super(p,g),this[o]=null,this[a]=()=>p.values(g),this.db.defer(()=>this[s]())}};for(let p of[u,c,h])p.prototype[s]=function(){this.db.status==="open"&&(this[o]=this[a]())},p.prototype._next=function(g){this[o]!==null?this[o].next(g):this.db.status==="opening"?this.db.defer(()=>this._next(g)):this.nextTick(g,new i("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},p.prototype._nextv=function(g,d,w){this[o]!==null?this[o].nextv(g,d,w):this.db.status==="opening"?this.db.defer(()=>this._nextv(g,d,w)):this.nextTick(w,new i("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},p.prototype._all=function(g,d){this[o]!==null?this[o].all(d):this.db.status==="opening"?this.db.defer(()=>this._all(g,d)):this.nextTick(d,new i("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},p.prototype._seek=function(g,d){this[o]!==null?this[o]._seek(g,d):this.db.status==="opening"&&this.db.defer(()=>this._seek(g,d))},p.prototype._close=function(g){this[o]!==null?this[o].close(g):this.db.status==="opening"?this.db.defer(()=>this._close(g)):this.nextTick(g)};e.DeferredIterator=u,e.DeferredKeyIterator=c,e.DeferredValueIterator=h}),ff=P(e=>{"use strict";v();var{fromCallback:t}=xo(),r=Ct(),{getCallback:n,getOptions:i}=ga(),o=Symbol("promise"),s=Symbol("status"),a=Symbol("operations"),u=Symbol("finishClose"),c=Symbol("closeCallbacks"),h=class{constructor(p){if(typeof p!="object"||p===null){let g=p===null?"null":typeof p;throw new TypeError(`The first argument must be an abstract-level database, received ${g}`)}this[a]=[],this[c]=[],this[s]="open",this[u]=this[u].bind(this),this.db=p,this.db.attachResource(this),this.nextTick=p.nextTick}get length(){return this[a].length}put(p,g,d){if(this[s]!=="open")throw new r("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let w=this.db._checkKey(p)||this.db._checkValue(g);if(w)throw w;let y=d&&d.sublevel!=null?d.sublevel:this.db,b=d,x=y.keyEncoding(d&&d.keyEncoding),E=y.valueEncoding(d&&d.valueEncoding),S=x.format;d={...d,keyEncoding:S,valueEncoding:E.format},y!==this.db&&(d.sublevel=null);let O=y.prefixKey(x.encode(p),S),U=E.encode(g);return this._put(O,U,d),this[a].push({...b,type:"put",key:p,value:g}),this}_put(p,g,d){}del(p,g){if(this[s]!=="open")throw new r("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let d=this.db._checkKey(p);if(d)throw d;let w=g&&g.sublevel!=null?g.sublevel:this.db,y=g,b=w.keyEncoding(g&&g.keyEncoding),x=b.format;return g={...g,keyEncoding:x},w!==this.db&&(g.sublevel=null),this._del(w.prefixKey(b.encode(p),x),g),this[a].push({...y,type:"del",key:p}),this}_del(p,g){}clear(){if(this[s]!=="open")throw new r("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[a]=[],this}_clear(){}write(p,g){return g=n(p,g),g=t(g,o),p=i(p),this[s]!=="open"?this.nextTick(g,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(g):(this[s]="writing",this._write(p,d=>{this[s]="closing",this[c].push(()=>g(d)),d||this.db.emit("batch",this[a]),this._close(this[u])})),g[o]}_write(p,g){}close(p){return p=t(p,o),this[s]==="closing"?this[c].push(p):this[s]==="closed"?this.nextTick(p):(this[c].push(p),this[s]!=="writing"&&(this[s]="closing",this._close(this[u]))),p[o]}_close(p){this.nextTick(p)}[u](){this[s]="closed",this.db.detachResource(this);let p=this[c];this[c]=[];for(let g of p)g()}};e.AbstractChainedBatch=h}),pg=P(e=>{"use strict";v();var{AbstractChainedBatch:t}=ff(),r=Ct(),n=Symbol("encoded"),i=class extends t{constructor(o){super(o),this[n]=[]}_put(o,s,a){this[n].push({...a,type:"put",key:o,value:s})}_del(o,s){this[n].push({...s,type:"del",key:o})}_clear(){this[n]=[]}_write(o,s){this.db.status==="opening"?this.db.defer(()=>this._write(o,s)):this.db.status==="open"?this[n].length===0?this.nextTick(s):this.db._batch(this[n],o,s):this.nextTick(s,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};e.DefaultChainedBatch=i}),yg=P((e,t)=>{"use strict";v();var r=Ct(),n=Object.prototype.hasOwnProperty,i=new Set(["lt","lte","gt","gte"]);t.exports=function(o,s){let a={};for(let u in o)if(!!n.call(o,u)&&!(u==="keyEncoding"||u==="valueEncoding")){if(u==="start"||u==="end")throw new r(`The legacy range option '${u}' has been removed`,{code:"LEVEL_LEGACY"});if(u==="encoding")throw new r("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});i.has(u)?a[u]=s.encode(o[u]):a[u]=o[u]}return a.reverse=!!a.reverse,a.limit=Number.isInteger(a.limit)&&a.limit>=0?a.limit:-1,a}}),df=P((e,t)=>{v();var r;t.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:St):n=>(r||(r=Promise.resolve())).then(n).catch(i=>setTimeout(()=>{throw i},0))}),gg=P((e,t)=>{"use strict";v();var r=df();t.exports=function(n,...i){i.length===0?r(n):r(()=>n(...i))}}),wg=P(e=>{"use strict";v();var{AbstractIterator:t,AbstractKeyIterator:r,AbstractValueIterator:n}=Cr(),i=Symbol("unfix"),o=Symbol("iterator"),s=Symbol("handleOne"),a=Symbol("handleMany"),u=Symbol("callback"),c=class extends t{constructor(g,d,w,y){super(g,d),this[o]=w,this[i]=y,this[s]=this[s].bind(this),this[a]=this[a].bind(this),this[u]=null}[s](g,d,w){let y=this[u];if(g)return y(g);d!==void 0&&(d=this[i](d)),y(g,d,w)}[a](g,d){let w=this[u];if(g)return w(g);for(let y of d){let b=y[0];b!==void 0&&(y[0]=this[i](b))}w(g,d)}},h=class extends r{constructor(g,d,w,y){super(g,d),this[o]=w,this[i]=y,this[s]=this[s].bind(this),this[a]=this[a].bind(this),this[u]=null}[s](g,d){let w=this[u];if(g)return w(g);d!==void 0&&(d=this[i](d)),w(g,d)}[a](g,d){let w=this[u];if(g)return w(g);for(let y=0;y<d.length;y++){let b=d[y];b!==void 0&&(d[y]=this[i](b))}w(g,d)}},p=class extends n{constructor(g,d,w){super(g,d),this[o]=w}};for(let g of[c,h])g.prototype._next=function(d){this[u]=d,this[o].next(this[s])},g.prototype._nextv=function(d,w,y){this[u]=y,this[o].nextv(d,w,this[a])},g.prototype._all=function(d,w){this[u]=w,this[o].all(d,this[a])};for(let g of[p])g.prototype._next=function(d){this[o].next(d)},g.prototype._nextv=function(d,w,y){this[o].nextv(d,w,y)},g.prototype._all=function(d,w){this[o].all(d,w)};for(let g of[c,h,p])g.prototype._seek=function(d,w){this[o].seek(d,w)},g.prototype._close=function(d){this[o].close(d)};e.AbstractSublevelIterator=c,e.AbstractSublevelKeyIterator=h,e.AbstractSublevelValueIterator=p}),bg=P((e,t)=>{"use strict";v();var r=Ct(),{Buffer:n}=fo()||{},{AbstractSublevelIterator:i,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:s}=wg(),a=Symbol("prefix"),u=Symbol("upperBound"),c=Symbol("prefixRange"),h=Symbol("parent"),p=Symbol("unfix"),g=new TextEncoder,d={separator:"!"};t.exports=function({AbstractLevel:S}){class O extends S{static defaults(_){if(typeof _=="string")throw new r("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(_&&_.open)throw new r("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return _==null?d:_.separator?_:{..._,separator:"!"}}constructor(_,T,A){let{separator:B,manifest:j,...K}=O.defaults(A);T=E(T,B);let J=B.charCodeAt(0)+1,ae=_[h]||_;if(!g.encode(T).every(Le=>Le>J&&Le<127))throw new r(`Prefix must use bytes > ${J} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(w(ae,j),K);let qe=(_.prefix||"")+B+T+B,st=qe.slice(0,-1)+String.fromCharCode(J);this[h]=ae,this[a]=new b(qe),this[u]=new b(st),this[p]=new x,this.nextTick=ae.nextTick}prefixKey(_,T){if(T==="utf8")return this[a].utf8+_;if(_.byteLength===0)return this[a][T];if(T==="view"){let A=this[a].view,B=new Uint8Array(A.byteLength+_.byteLength);return B.set(A,0),B.set(_,A.byteLength),B}else{let A=this[a].buffer;return n.concat([A,_],A.byteLength+_.byteLength)}}[c](_,T){_.gte!==void 0?_.gte=this.prefixKey(_.gte,T):_.gt!==void 0?_.gt=this.prefixKey(_.gt,T):_.gte=this[a][T],_.lte!==void 0?_.lte=this.prefixKey(_.lte,T):_.lt!==void 0?_.lt=this.prefixKey(_.lt,T):_.lte=this[u][T]}get prefix(){return this[a].utf8}get db(){return this[h]}_open(_,T){this[h].open({passive:!0},T)}_put(_,T,A,B){this[h].put(_,T,A,B)}_get(_,T,A){this[h].get(_,T,A)}_getMany(_,T,A){this[h].getMany(_,T,A)}_del(_,T,A){this[h].del(_,T,A)}_batch(_,T,A){this[h].batch(_,T,A)}_clear(_,T){this[c](_,_.keyEncoding),this[h].clear(_,T)}_iterator(_){this[c](_,_.keyEncoding);let T=this[h].iterator(_),A=this[p].get(this[a].utf8.length,_.keyEncoding);return new i(this,_,T,A)}_keys(_){this[c](_,_.keyEncoding);let T=this[h].keys(_),A=this[p].get(this[a].utf8.length,_.keyEncoding);return new o(this,_,T,A)}_values(_){this[c](_,_.keyEncoding);let T=this[h].values(_);return new s(this,_,T)}}return{AbstractSublevel:O}};var w=function(S,O){return{...S.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...O,encodings:{utf8:y(S,"utf8"),buffer:y(S,"buffer"),view:y(S,"view")}}},y=function(S,O){return S.supports.encodings[O]?S.keyEncoding(O).name===O:!1},b=class{constructor(S){this.utf8=S,this.view=g.encode(S),this.buffer=n?n.from(this.view.buffer,0,this.view.byteLength):{}}},x=class{constructor(){this.cache=new Map}get(S,O){let U=this.cache.get(O);return U===void 0&&(O==="view"?U=function(_,T){return T.subarray(_)}.bind(null,S):U=function(_,T){return T.slice(_)}.bind(null,S),this.cache.set(O,U)),U}},E=function(S,O){let U=0,_=S.length;for(;U<_&&S[U]===O;)U++;for(;_>U&&S[_-1]===O;)_--;return S.slice(U,_)}}),_l=P(e=>{"use strict";v();var{supports:t}=ag(),{Transcoder:r}=lg(),{EventEmitter:n}=cg(),{fromCallback:i}=xo(),o=Ct(),{AbstractIterator:s}=Cr(),{DefaultKeyIterator:a,DefaultValueIterator:u}=fg(),{DeferredIterator:c,DeferredKeyIterator:h,DeferredValueIterator:p}=dg(),{DefaultChainedBatch:g}=pg(),{getCallback:d,getOptions:w}=ga(),y=yg(),b=Symbol("promise"),x=Symbol("landed"),E=Symbol("resources"),S=Symbol("closeResources"),O=Symbol("operations"),U=Symbol("undefer"),_=Symbol("deferOpen"),T=Symbol("options"),A=Symbol("status"),B=Symbol("defaultOptions"),j=Symbol("transcoder"),K=Symbol("keyEncoding"),J=Symbol("valueEncoding"),ae=()=>{},qe=class extends n{constructor(k,L){if(super(),typeof k!="object"||k===null)throw new TypeError("The first argument 'manifest' must be an object");L=w(L);let{keyEncoding:C,valueEncoding:M,passive:Q,...ne}=L;this[E]=new Set,this[O]=[],this[_]=!0,this[T]=ne,this[A]="opening",this.supports=t(k,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:k.snapshots!==!1,permanence:k.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:k.encodings||{},events:Object.assign({},k.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[j]=new r(D(this)),this[K]=this[j].encoding(C||"utf8"),this[J]=this[j].encoding(M||"utf8");for(let le of this[j].encodings())this.supports.encodings[le.commonName]||(this.supports.encodings[le.commonName]=!0);this[B]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[K].commonName,valueEncoding:this[J].commonName}),key:Object.freeze({keyEncoding:this[K].commonName})},this.nextTick(()=>{this[_]&&this.open({passive:!1},ae)})}get status(){return this[A]}keyEncoding(k){return this[j].encoding(k??this[K])}valueEncoding(k){return this[j].encoding(k??this[J])}open(k,L){L=d(k,L),L=i(L,b),k={...this[T],...w(k)},k.createIfMissing=k.createIfMissing!==!1,k.errorIfExists=!!k.errorIfExists;let C=M=>{this[A]==="closing"||this[A]==="opening"?this.once(x,M?()=>C(M):C):this[A]!=="open"?L(new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:M})):L()};return k.passive?this[A]==="opening"?this.once(x,C):this.nextTick(C):this[A]==="closed"||this[_]?(this[_]=!1,this[A]="opening",this.emit("opening"),this._open(k,M=>{if(M){this[A]="closed",this[S](()=>{this.emit(x),C(M)}),this[U]();return}this[A]="open",this[U](),this.emit(x),this[A]==="open"&&this.emit("open"),this[A]==="open"&&this.emit("ready"),C()})):this[A]==="open"?this.nextTick(C):this.once(x,()=>this.open(k,L)),L[b]}_open(k,L){this.nextTick(L)}close(k){k=i(k,b);let L=C=>{this[A]==="opening"||this[A]==="closing"?this.once(x,C?L(C):L):this[A]!=="closed"?k(new o("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:C})):k()};if(this[A]==="open"){this[A]="closing",this.emit("closing");let C=M=>{this[A]="open",this[U](),this.emit(x),L(M)};this[S](()=>{this._close(M=>{if(M)return C(M);this[A]="closed",this[U](),this.emit(x),this[A]==="closed"&&this.emit("closed"),L()})})}else this[A]==="closed"?this.nextTick(L):this.once(x,()=>this.close(k));return k[b]}[S](k){if(this[E].size===0)return this.nextTick(k);let L=this[E].size,C=!0,M=()=>{--L===0&&(C?this.nextTick(k):k())};for(let Q of this[E])Q.close(M);C=!1,this[E].clear()}_close(k){this.nextTick(k)}get(k,L,C){if(C=d(L,C),C=i(C,b),L=w(L,this[B].entry),this[A]==="opening")return this.defer(()=>this.get(k,L,C)),C[b];if(Le(this,C))return C[b];let M=this._checkKey(k);if(M)return this.nextTick(C,M),C[b];let Q=this.keyEncoding(L.keyEncoding),ne=this.valueEncoding(L.valueEncoding),le=Q.format,xe=ne.format;return(L.keyEncoding!==le||L.valueEncoding!==xe)&&(L=Object.assign({},L,{keyEncoding:le,valueEncoding:xe})),this._get(this.prefixKey(Q.encode(k),le),L,(Z,Ae)=>{if(Z)return(Z.code==="LEVEL_NOT_FOUND"||Z.notFound||/NotFound/i.test(Z))&&(Z.code||(Z.code="LEVEL_NOT_FOUND"),Z.notFound||(Z.notFound=!0),Z.status||(Z.status=404)),C(Z);try{Ae=ne.decode(Ae)}catch(he){return C(new o("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:he}))}C(null,Ae)}),C[b]}_get(k,L,C){this.nextTick(C,new Error("NotFound"))}getMany(k,L,C){if(C=d(L,C),C=i(C,b),L=w(L,this[B].entry),this[A]==="opening")return this.defer(()=>this.getMany(k,L,C)),C[b];if(Le(this,C))return C[b];if(!Array.isArray(k))return this.nextTick(C,new TypeError("The first argument 'keys' must be an array")),C[b];if(k.length===0)return this.nextTick(C,null,[]),C[b];let M=this.keyEncoding(L.keyEncoding),Q=this.valueEncoding(L.valueEncoding),ne=M.format,le=Q.format;(L.keyEncoding!==ne||L.valueEncoding!==le)&&(L=Object.assign({},L,{keyEncoding:ne,valueEncoding:le}));let xe=new Array(k.length);for(let Z=0;Z<k.length;Z++){let Ae=k[Z],he=this._checkKey(Ae);if(he)return this.nextTick(C,he),C[b];xe[Z]=this.prefixKey(M.encode(Ae),ne)}return this._getMany(xe,L,(Z,Ae)=>{if(Z)return C(Z);try{for(let he=0;he<Ae.length;he++)Ae[he]!==void 0&&(Ae[he]=Q.decode(Ae[he]))}catch(he){return C(new o(`Could not decode one or more of ${Ae.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:he}))}C(null,Ae)}),C[b]}_getMany(k,L,C){this.nextTick(C,null,new Array(k.length).fill(void 0))}put(k,L,C,M){if(M=d(C,M),M=i(M,b),C=w(C,this[B].entry),this[A]==="opening")return this.defer(()=>this.put(k,L,C,M)),M[b];if(Le(this,M))return M[b];let Q=this._checkKey(k)||this._checkValue(L);if(Q)return this.nextTick(M,Q),M[b];let ne=this.keyEncoding(C.keyEncoding),le=this.valueEncoding(C.valueEncoding),xe=ne.format,Z=le.format;(C.keyEncoding!==xe||C.valueEncoding!==Z)&&(C=Object.assign({},C,{keyEncoding:xe,valueEncoding:Z}));let Ae=this.prefixKey(ne.encode(k),xe),he=le.encode(L);return this._put(Ae,he,C,Lt=>{if(Lt)return M(Lt);this.emit("put",k,L),M()}),M[b]}_put(k,L,C,M){this.nextTick(M)}del(k,L,C){if(C=d(L,C),C=i(C,b),L=w(L,this[B].key),this[A]==="opening")return this.defer(()=>this.del(k,L,C)),C[b];if(Le(this,C))return C[b];let M=this._checkKey(k);if(M)return this.nextTick(C,M),C[b];let Q=this.keyEncoding(L.keyEncoding),ne=Q.format;return L.keyEncoding!==ne&&(L=Object.assign({},L,{keyEncoding:ne})),this._del(this.prefixKey(Q.encode(k),ne),L,le=>{if(le)return C(le);this.emit("del",k),C()}),C[b]}_del(k,L,C){this.nextTick(C)}batch(k,L,C){if(!arguments.length){if(this[A]==="opening")return new g(this);if(this[A]!=="open")throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof k=="function"?C=k:C=d(L,C),C=i(C,b),L=w(L,this[B].empty),this[A]==="opening")return this.defer(()=>this.batch(k,L,C)),C[b];if(Le(this,C))return C[b];if(!Array.isArray(k))return this.nextTick(C,new TypeError("The first argument 'operations' must be an array")),C[b];if(k.length===0)return this.nextTick(C),C[b];let M=new Array(k.length),{keyEncoding:Q,valueEncoding:ne,...le}=L;for(let xe=0;xe<k.length;xe++){if(typeof k[xe]!="object"||k[xe]===null)return this.nextTick(C,new TypeError("A batch operation must be an object")),C[b];let Z=Object.assign({},k[xe]);if(Z.type!=="put"&&Z.type!=="del")return this.nextTick(C,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),C[b];let Ae=this._checkKey(Z.key);if(Ae)return this.nextTick(C,Ae),C[b];let he=Z.sublevel!=null?Z.sublevel:this,Lt=he.keyEncoding(Z.keyEncoding||Q),Sn=Lt.format;if(Z.key=he.prefixKey(Lt.encode(Z.key),Sn),Z.keyEncoding=Sn,Z.type==="put"){let vi=this._checkValue(Z.value);if(vi)return this.nextTick(C,vi),C[b];let Tn=he.valueEncoding(Z.valueEncoding||ne);Z.value=Tn.encode(Z.value),Z.valueEncoding=Tn.format}he!==this&&(Z.sublevel=null),M[xe]=Z}return this._batch(M,le,xe=>{if(xe)return C(xe);this.emit("batch",k),C()}),C[b]}_batch(k,L,C){this.nextTick(C)}sublevel(k,L){return this._sublevel(k,st.defaults(L))}_sublevel(k,L){return new st(this,k,L)}prefixKey(k,L){return k}clear(k,L){if(L=d(k,L),L=i(L,b),k=w(k,this[B].empty),this[A]==="opening")return this.defer(()=>this.clear(k,L)),L[b];if(Le(this,L))return L[b];let C=k,M=this.keyEncoding(k.keyEncoding);return k=y(k,M),k.keyEncoding=M.format,k.limit===0?this.nextTick(L):this._clear(k,Q=>{if(Q)return L(Q);this.emit("clear",C),L()}),L[b]}_clear(k,L){this.nextTick(L)}iterator(k){let L=this.keyEncoding(k&&k.keyEncoding),C=this.valueEncoding(k&&k.valueEncoding);if(k=y(k,L),k.keys=k.keys!==!1,k.values=k.values!==!1,k[s.keyEncoding]=L,k[s.valueEncoding]=C,k.keyEncoding=L.format,k.valueEncoding=C.format,this[A]==="opening")return new c(this,k);if(this[A]!=="open")throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(k)}_iterator(k){return new s(this,k)}keys(k){let L=this.keyEncoding(k&&k.keyEncoding),C=this.valueEncoding(k&&k.valueEncoding);if(k=y(k,L),k[s.keyEncoding]=L,k[s.valueEncoding]=C,k.keyEncoding=L.format,k.valueEncoding=C.format,this[A]==="opening")return new h(this,k);if(this[A]!=="open")throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(k)}_keys(k){return new a(this,k)}values(k){let L=this.keyEncoding(k&&k.keyEncoding),C=this.valueEncoding(k&&k.valueEncoding);if(k=y(k,L),k[s.keyEncoding]=L,k[s.valueEncoding]=C,k.keyEncoding=L.format,k.valueEncoding=C.format,this[A]==="opening")return new p(this,k);if(this[A]!=="open")throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(k)}_values(k){return new u(this,k)}defer(k){if(typeof k!="function")throw new TypeError("The first argument must be a function");this[O].push(k)}[U](){if(this[O].length===0)return;let k=this[O];this[O]=[];for(let L of k)L()}attachResource(k){if(typeof k!="object"||k===null||typeof k.close!="function")throw new TypeError("The first argument must be a resource object");this[E].add(k)}detachResource(k){this[E].delete(k)}_chainedBatch(){return new g(this)}_checkKey(k){if(k==null)return new o("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(k){if(k==null)return new o("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};qe.prototype.nextTick=gg();var{AbstractSublevel:st}=bg()({AbstractLevel:qe});e.AbstractLevel=qe,e.AbstractSublevel=st;var Le=function(k,L){return k[A]!=="open"?(k.nextTick(L,new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},D=function(k){return Object.keys(k.supports.encodings).filter(L=>!!k.supports.encodings[L])}}),pf=P(e=>{"use strict";v(),e.AbstractLevel=_l().AbstractLevel,e.AbstractSublevel=_l().AbstractSublevel,e.AbstractIterator=Cr().AbstractIterator,e.AbstractKeyIterator=Cr().AbstractKeyIterator,e.AbstractValueIterator=Cr().AbstractValueIterator,e.AbstractChainedBatch=ff().AbstractChainedBatch}),mg=P((e,t)=>{v(),t.exports=n;var r=df();function n(i,o,s){if(typeof o!="number")throw new Error("second argument must be a Number");let a,u,c,h,p,g=!0,d;Array.isArray(i)?(a=[],c=u=i.length):(h=Object.keys(i),a={},c=u=h.length);function w(b){function x(){s&&s(b,a),s=null}g?r(x):x()}function y(b,x,E){if(a[b]=E,x&&(p=!0),--c===0||x)w(x);else if(!p&&d<u){let S;h?(S=h[d],d+=1,i[S](function(O,U){y(S,O,U)})):(S=d,d+=1,i[S](function(O,U){y(S,O,U)}))}}d=o,c?h?h.some(function(b,x){return i[b](function(E,S){y(b,E,S)}),x===o-1}):i.some(function(b,x){return b(function(E,S){y(x,E,S)}),x===o-1}):w(null),g=!1}}),yf=P((e,t)=>{"use strict";v(),t.exports=function(r){let n=r.gte!==void 0?r.gte:r.gt!==void 0?r.gt:void 0,i=r.lte!==void 0?r.lte:r.lt!==void 0?r.lt:void 0,o=r.gte===void 0,s=r.lte===void 0;return n!==void 0&&i!==void 0?IDBKeyRange.bound(n,i,o,s):n!==void 0?IDBKeyRange.lowerBound(n,o):i!==void 0?IDBKeyRange.upperBound(i,s):null}}),gf=P((e,t)=>{"use strict";v();var r=new TextEncoder;t.exports=function(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):r.encode(n)}}),vg=P(e=>{"use strict";v();var{AbstractIterator:t}=pf(),r=yf(),n=gf(),i=Symbol("cache"),o=Symbol("finished"),s=Symbol("options"),a=Symbol("currentOptions"),u=Symbol("position"),c=Symbol("location"),h=Symbol("first"),p={},g=class extends t{constructor(w,y,b){super(w,b),this[i]=[],this[o]=this.limit===0,this[s]=b,this[a]={...b},this[u]=void 0,this[c]=y,this[h]=!0}_nextv(w,y,b){if(this[h]=!1,this[o])return this.nextTick(b,null,[]);if(this[i].length>0)return w=Math.min(w,this[i].length),this.nextTick(b,null,this[i].splice(0,w));this[u]!==void 0&&(this[s].reverse?(this[a].lt=this[u],this[a].lte=void 0):(this[a].gt=this[u],this[a].gte=void 0));let x;try{x=r(this[a])}catch{return this[o]=!0,this.nextTick(b,null,[])}let E=this.db.db.transaction([this[c]],"readonly"),S=E.objectStore(this[c]),O=[];if(this[s].reverse){let U=!this[s].values&&S.openKeyCursor?"openKeyCursor":"openCursor";S[U](x,"prev").onsuccess=_=>{let T=_.target.result;if(T){let{key:A,value:B}=T;this[u]=A,O.push([this[s].keys&&A!==void 0?n(A):void 0,this[s].values&&B!==void 0?n(B):void 0]),O.length<w?T.continue():d(E)}else this[o]=!0}}else{let U,_,T=()=>{if(U===void 0||_===void 0)return;let A=Math.max(U.length,_.length);A===0||w===1/0?this[o]=!0:this[u]=U[A-1],O.length=A;for(let B=0;B<A;B++){let j=U[B],K=_[B];O[B]=[this[s].keys&&j!==void 0?n(j):void 0,this[s].values&&K!==void 0?n(K):void 0]}d(E)};this[s].keys||w<1/0?S.getAllKeys(x,w<1/0?w:void 0).onsuccess=A=>{U=A.target.result,T()}:(U=[],this.nextTick(T)),this[s].values?S.getAll(x,w<1/0?w:void 0).onsuccess=A=>{_=A.target.result,T()}:(_=[],this.nextTick(T))}E.onabort=()=>{b(E.error||new Error("aborted by user")),b=null},E.oncomplete=()=>{b(null,O),b=null}}_next(w){if(this[i].length>0){let[y,b]=this[i].shift();this.nextTick(w,null,y,b)}else if(this[o])this.nextTick(w);else{let y=Math.min(100,this.limit-this.count);this[h]&&(this[h]=!1,y=1),this._nextv(y,p,(b,x)=>{if(b)return w(b);this[i]=x,this._next(w)})}}_all(w,y){this[h]=!1;let b=this[i].splice(0,this[i].length),x=this.limit-this.count-b.length;if(x<=0)return this.nextTick(y,null,b);this._nextv(x,p,(E,S)=>{if(E)return y(E);b.length>0&&(S=b.concat(S)),y(null,S)})}_seek(w,y){this[h]=!0,this[i]=[],this[o]=!1,this[u]=void 0,this[a]={...this[s]};let b;try{b=r(this[s])}catch{this[o]=!0;return}b!==null&&!b.includes(w)?this[o]=!0:this[s].reverse?this[a].lte=w:this[a].gte=w}};e.Iterator=g;function d(w){typeof w.commit=="function"&&w.commit()}}),Eg=P((e,t)=>{"use strict";v(),t.exports=function(r,n,i,o,s){if(o.limit===0)return r.nextTick(s);let a=r.db.transaction([n],"readwrite"),u=a.objectStore(n),c=0;a.oncomplete=function(){s()},a.onabort=function(){s(a.error||new Error("aborted by user"))};let h=u.openKeyCursor?"openKeyCursor":"openCursor",p=o.reverse?"prev":"next";u[h](i,p).onsuccess=function(g){let d=g.target.result;d&&(u.delete(d.key).onsuccess=function(){(o.limit<=0||++c<o.limit)&&d.continue()})}}}),xg=P(e=>{"use strict";v();var{AbstractLevel:t}=pf(),r=Ct(),n=mg(),{fromCallback:i}=xo(),{Iterator:o}=vg(),s=gf(),a=Eg(),u=yf(),c="level-js-",h=Symbol("idb"),p=Symbol("namePrefix"),g=Symbol("location"),d=Symbol("version"),w=Symbol("store"),y=Symbol("onComplete"),b=Symbol("promise"),x=class extends t{constructor(E,S,O){if(typeof S=="function"||typeof O=="function")throw new r("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:U,version:_,...T}=S||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},T),typeof E!="string")throw new Error("constructor requires a location string argument");this[g]=E,this[p]=U??c,this[d]=parseInt(_||1,10),this[h]=null}get location(){return this[g]}get namePrefix(){return this[p]}get version(){return this[d]}get db(){return this[h]}get type(){return"browser-level"}_open(E,S){let O=indexedDB.open(this[p]+this[g],this[d]);O.onerror=function(){S(O.error||new Error("unknown error"))},O.onsuccess=()=>{this[h]=O.result,S()},O.onupgradeneeded=U=>{let _=U.target.result;_.objectStoreNames.contains(this[g])||_.createObjectStore(this[g])}}[w](E){return this[h].transaction([this[g]],E).objectStore(this[g])}[y](E,S){let O=E.transaction;O.onabort=function(){S(O.error||new Error("aborted by user"))},O.oncomplete=function(){S(null,E.result)}}_get(E,S,O){let U=this[w]("readonly"),_;try{_=U.get(E)}catch(T){return this.nextTick(O,T)}this[y](_,function(T,A){if(T)return O(T);if(A===void 0)return O(new r("Entry not found",{code:"LEVEL_NOT_FOUND"}));O(null,s(A))})}_getMany(E,S,O){let U=this[w]("readonly"),_=E.map(T=>A=>{let B;try{B=U.get(T)}catch(j){return A(j)}B.onsuccess=()=>{let j=B.result;A(null,j===void 0?j:s(j))},B.onerror=j=>{j.stopPropagation(),A(B.error)}});n(_,16,O)}_del(E,S,O){let U=this[w]("readwrite"),_;try{_=U.delete(E)}catch(T){return this.nextTick(O,T)}this[y](_,O)}_put(E,S,O,U){let _=this[w]("readwrite"),T;try{T=_.put(S,E)}catch(A){return this.nextTick(U,A)}this[y](T,U)}_iterator(E){return new o(this,this[g],E)}_batch(E,S,O){let U=this[w]("readwrite"),_=U.transaction,T=0,A;_.onabort=function(){O(A||_.error||new Error("aborted by user"))},_.oncomplete=function(){O()};function B(){let j=E[T++],K=j.key,J;try{J=j.type==="del"?U.delete(K):U.put(j.value,K)}catch(ae){A=ae,_.abort();return}T<E.length?J.onsuccess=B:typeof _.commit=="function"&&_.commit()}B()}_clear(E,S){let O,U;try{O=u(E)}catch{return this.nextTick(S)}if(E.limit>=0)return a(this,this[g],O,E,S);try{let _=this[w]("readwrite");U=O?_.delete(O):_.clear()}catch(_){return this.nextTick(S,_)}this[y](U,S)}_close(E){this[h].close(),this.nextTick(E)}};x.destroy=function(E,S,O){typeof S=="function"&&(O=S,S=c),O=i(O,b);let U=indexedDB.deleteDatabase(S+E);return U.onsuccess=function(){O()},U.onerror=function(_){O(_)},O[b]},e.BrowserLevel=x}),_g=P(e=>{v(),e.Level=xg().BrowserLevel}),Ag=P((e,t)=>{"use strict";v(),t.exports=function(){return Date.now()}}),kg=P((e,t)=>{"use strict";v();var r=Ag(),n=class{constructor(o,s,a){let u=this;this._started=r(),this._rescheduled=0,this._scheduled=s,this._args=a,this._triggered=!1,this._timerWrapper=()=>{u._rescheduled>0?(u._scheduled=u._rescheduled-(r()-u._started),u._schedule(u._scheduled)):(u._triggered=!0,o.apply(null,u._args))},this._timer=setTimeout(this._timerWrapper,s)}reschedule(o){o||(o=this._scheduled);let s=r();s+o-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(o)):this._triggered?this._schedule(o):(this._started=s,this._rescheduled=o)}_schedule(o){this._triggered=!1,this._started=r(),this._rescheduled=0,this._scheduled=o,this._timer=setTimeout(this._timerWrapper,o)}clear(){clearTimeout(this._timer)}};function i(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let o;if(arguments.length>0){o=new Array(arguments.length-2);for(var s=0;s<o.length;s++)o[s]=arguments[s+2]}return new n(arguments[0],arguments[1],o)}t.exports=i}),Sg=P((e,t)=>{"use strict";v();var{AbortController:r}=globalThis,n=kg(),i=class extends r{constructor(o){super(),this._ms=o,this._timer=n(()=>this.abort(),o),Object.setPrototypeOf(this,i.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=n(()=>this.abort(),this._ms)}};t.exports={TimeoutController:i}}),Tg=P((e,t)=>{v();function r(n){let i=new globalThis.AbortController;function o(){i.abort();for(let s of n)!s||!s.removeEventListener||s.removeEventListener("abort",o)}for(let s of n)if(!(!s||!s.addEventListener)){if(s.aborted){o();break}s.addEventListener("abort",o)}return i.signal}t.exports=r,t.exports.anySignal=r}),Ig=P((e,t)=>{"use strict";v();var r=async n=>{let i;for await(let o of n)i=o;return i};t.exports=r}),wf=P((e,t)=>{"use strict";v();var r=typeof navigator<"u"&&navigator.product==="ReactNative";function n(){return r?"http://localhost":Tt.location?Tt.location.protocol+"//"+Tt.location.host:""}var i=Tt.URL,o=n(),s=class{constructor(u="",c=o){this.super=new i(u,c),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(u){this.super.hash=u}set host(u){this.super.host=u}set hostname(u){this.super.hostname=u}set href(u){this.super.href=u}set password(u){this.super.password=u}set pathname(u){this.super.pathname=u}set port(u){this.super.port=u}set protocol(u){this.super.protocol=u}set search(u){this.super.search=u}set username(u){this.super.username=u}static createObjectURL(u){return i.createObjectURL(u)}static revokeObjectURL(u){i.revokeObjectURL(u)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function a(u){if(typeof u=="string")return new i(u).toString();if(!(u instanceof i)){let c=u.username&&u.password?`${u.username}:${u.password}@`:"",h=u.auth?u.auth+"@":"",p=u.port?":"+u.port:"",g=u.protocol?u.protocol+"//":"",d=u.host||"",w=u.hostname||"",y=u.search||(u.query?"?"+u.query:""),b=u.hash||"",x=u.pathname||"",E=u.path||x+y;return`${g}${c||h}${d||w+p}${E}${b}`}}t.exports={URLWithLegacySupport:s,URLSearchParams:Tt.URLSearchParams,defaultBase:o,format:a}}),Bg=P((e,t)=>{"use strict";v();var{URLWithLegacySupport:r,format:n}=wf();t.exports=(i,o={},s={},a)=>{let u=o.protocol?o.protocol.replace(":",""):"http";u=(s[u]||a||u)+":";let c;try{c=new r(i)}catch{c={}}let h=Object.assign({},o,{protocol:u||c.protocol,host:o.host||c.host});return new r(i,n(h)).toString()}}),Cg=P((e,t)=>{"use strict";v();var{URLWithLegacySupport:r,format:n,URLSearchParams:i,defaultBase:o}=wf(),s=Bg();t.exports={URL:r,URLSearchParams:i,format:n,relative:s,defaultBase:o}}),Og=P((e,t)=>{"use strict";v();function r(n){let[i,o]=n[Symbol.asyncIterator]?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],s=[];return{peek:()=>i.next(),push:a=>{s.push(a)},next:()=>s.length?{done:!1,value:s.shift()}:i.next(),[o](){return this}}}t.exports=r});v();v();v();var _o=z(nt(),1);v();v();v();var Lg=["string","number","bigint","symbol"],Fg=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Ng(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;return Lg.includes(t)?t:t==="function"?"Function":Array.isArray(e)?"Array":Rg(e)?"Buffer":$g(e)||"Object"}function Rg(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function $g(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Fg.includes(t))return t}v();var $=class{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};$.uint=new $(0,"uint",!0);$.negint=new $(1,"negint",!0);$.bytes=new $(2,"bytes",!0);$.string=new $(3,"string",!0);$.array=new $(4,"array",!1);$.map=new $(5,"map",!1);$.tag=new $(6,"tag",!1);$.float=new $(7,"float",!0);$.false=new $(7,"false",!0);$.true=new $(7,"true",!0);$.null=new $(7,"null",!0);$.undefined=new $(7,"undefined",!0);$.break=new $(7,"break",!0);var W=class{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};v();v();var mn=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Ug=new TextDecoder,jg=new TextEncoder;function eo(e){return mn&&globalThis.Buffer.isBuffer(e)}function bf(e){return e instanceof Uint8Array?eo(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var Pg=mn?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):kl(e,t,r):(e,t,r)=>r-t>64?Ug.decode(e.subarray(t,r)):kl(e,t,r),Dg=mn?e=>e.length>64?globalThis.Buffer.from(e):Al(e):e=>e.length>64?jg.encode(e):Al(e),Mt=e=>Uint8Array.from(e),wa=mn?(e,t,r)=>eo(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),Mg=mn?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),bf(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let i of e)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},zg=mn?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function qg(e,t){if(eo(e)&&eo(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Al(e,t=1/0){let r,n=e.length,i=null,o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function kl(e,t,r){let n=[];for(;t<r;){let i=e[t],o=null,s=i>239?4:i>223?3:i>191?2:1;if(t+s<=r){let a,u,c,h;switch(s){case 1:i<128&&(o=i);break;case 2:a=e[t+1],(a&192)===128&&(h=(i&31)<<6|a&63,h>127&&(o=h));break;case 3:a=e[t+1],u=e[t+2],(a&192)===128&&(u&192)===128&&(h=(i&15)<<12|(a&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:a=e[t+1],u=e[t+2],c=e[t+3],(a&192)===128&&(u&192)===128&&(c&192)===128&&(h=(i&15)<<18|(a&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),t+=s}return Vg(n)}var Sl=4096;function Vg(e){let t=e.length;if(t<=Sl)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Sl));return r}var Kg=256,mf=class{constructor(e=Kg){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){let r=t.length-(this.maxCursor-this.cursor)-1;r<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,r),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=zg(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=wa(r,0,this.cursor)}else t=Mg(this.chunks,this.cursor);return e&&this.reset(),t}};v();var te="CBOR decode error:",vf="CBOR encode error:",hi=[];hi[23]=1;hi[24]=2;hi[25]=3;hi[26]=5;hi[27]=9;function vn(e,t,r){if(e.length-t<r)throw new Error(`${te} not enough data for type`)}v();v();var ze=[24,256,65536,4294967296,BigInt("18446744073709551616")];function jr(e,t,r){vn(e,t,1);let n=e[t];if(r.strict===!0&&n<ze[0])throw new Error(`${te} integer encoded in more bytes than necessary (strict decode)`);return n}function Pr(e,t,r){vn(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<ze[1])throw new Error(`${te} integer encoded in more bytes than necessary (strict decode)`);return n}function Dr(e,t,r){vn(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<ze[2])throw new Error(`${te} integer encoded in more bytes than necessary (strict decode)`);return n}function Mr(e,t,r){vn(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],i=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<ze[3])throw new Error(`${te} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${te} integers outside of the safe integer range are not supported`)}function Wg(e,t,r,n){return new W($.uint,jr(e,t+1,n),2)}function Hg(e,t,r,n){return new W($.uint,Pr(e,t+1,n),3)}function Gg(e,t,r,n){return new W($.uint,Dr(e,t+1,n),5)}function Jg(e,t,r,n){return new W($.uint,Mr(e,t+1,n),9)}function zr(e,t){return dt(e,0,t.value)}function dt(e,t,r){if(r<ze[0]){let n=Number(r);e.push([t|n])}else if(r<ze[1]){let n=Number(r);e.push([t|24,n])}else if(r<ze[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<ze[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<ze[4]){let i=[t|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,e.push(i)}else throw new Error(`${te} encountered BigInt larger than allowable range`)}}zr.encodedSize=function(e){return dt.encodedSize(e.value)};dt.encodedSize=function(e){return e<ze[0]?1:e<ze[1]?2:e<ze[2]?3:e<ze[3]?5:9};zr.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};v();function Yg(e,t,r,n){return new W($.negint,-1-jr(e,t+1,n),2)}function Qg(e,t,r,n){return new W($.negint,-1-Pr(e,t+1,n),3)}function Zg(e,t,r,n){return new W($.negint,-1-Dr(e,t+1,n),5)}var ba=BigInt(-1),Ef=BigInt(1);function Xg(e,t,r,n){let i=Mr(e,t+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new W($.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${te} integers outside of the safe integer range are not supported`);return new W($.negint,ba-BigInt(i),9)}function ma(e,t){let r=t.value,n=typeof r=="bigint"?r*ba-Ef:r*-1-1;dt(e,t.type.majorEncoded,n)}ma.encodedSize=function(e){let t=e.value,r=typeof t=="bigint"?t*ba-Ef:t*-1-1;return r<ze[0]?1:r<ze[1]?2:r<ze[2]?3:r<ze[3]?5:9};ma.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};v();function fi(e,t,r,n){vn(e,t,r+n);let i=wa(e,t+r,t+r+n);return new W($.bytes,i,r+n)}function e0(e,t,r,n){return fi(e,t,1,r)}function t0(e,t,r,n){return fi(e,t,2,jr(e,t+1,n))}function r0(e,t,r,n){return fi(e,t,3,Pr(e,t+1,n))}function n0(e,t,r,n){return fi(e,t,5,Dr(e,t+1,n))}function i0(e,t,r,n){let i=Mr(e,t+1,n);if(typeof i=="bigint")throw new Error(`${te} 64-bit integer bytes lengths not supported`);return fi(e,t,9,i)}function to(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===$.string?Dg(e.value):e.value),e.encodedBytes}function Ao(e,t){let r=to(t);dt(e,t.type.majorEncoded,r.length),e.push(r)}Ao.encodedSize=function(e){let t=to(e);return dt.encodedSize(t.length)+t.length};Ao.compareTokens=function(e,t){return o0(to(e),to(t))};function o0(e,t){return e.length<t.length?-1:e.length>t.length?1:qg(e,t)}v();function di(e,t,r,n,i){let o=r+n;vn(e,t,o);let s=new W($.string,Pg(e,t+r,t+o),o);return i.retainStringBytes===!0&&(s.byteValue=wa(e,t+r,t+o)),s}function s0(e,t,r,n){return di(e,t,1,r,n)}function a0(e,t,r,n){return di(e,t,2,jr(e,t+1,n),n)}function u0(e,t,r,n){return di(e,t,3,Pr(e,t+1,n),n)}function l0(e,t,r,n){return di(e,t,5,Dr(e,t+1,n),n)}function c0(e,t,r,n){let i=Mr(e,t+1,n);if(typeof i=="bigint")throw new Error(`${te} 64-bit integer string lengths not supported`);return di(e,t,9,i,n)}var h0=Ao;v();function En(e,t,r,n){return new W($.array,n,r)}function f0(e,t,r,n){return En(e,t,1,r)}function d0(e,t,r,n){return En(e,t,2,jr(e,t+1,n))}function p0(e,t,r,n){return En(e,t,3,Pr(e,t+1,n))}function y0(e,t,r,n){return En(e,t,5,Dr(e,t+1,n))}function g0(e,t,r,n){let i=Mr(e,t+1,n);if(typeof i=="bigint")throw new Error(`${te} 64-bit integer array lengths not supported`);return En(e,t,9,i)}function w0(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${te} indefinite length items not allowed`);return En(e,t,1,1/0)}function va(e,t){dt(e,$.array.majorEncoded,t.value)}va.compareTokens=zr.compareTokens;va.encodedSize=function(e){return dt.encodedSize(e.value)};v();function xn(e,t,r,n){return new W($.map,n,r)}function b0(e,t,r,n){return xn(e,t,1,r)}function m0(e,t,r,n){return xn(e,t,2,jr(e,t+1,n))}function v0(e,t,r,n){return xn(e,t,3,Pr(e,t+1,n))}function E0(e,t,r,n){return xn(e,t,5,Dr(e,t+1,n))}function x0(e,t,r,n){let i=Mr(e,t+1,n);if(typeof i=="bigint")throw new Error(`${te} 64-bit integer map lengths not supported`);return xn(e,t,9,i)}function _0(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${te} indefinite length items not allowed`);return xn(e,t,1,1/0)}function Ea(e,t){dt(e,$.map.majorEncoded,t.value)}Ea.compareTokens=zr.compareTokens;Ea.encodedSize=function(e){return dt.encodedSize(e.value)};v();function A0(e,t,r,n){return new W($.tag,r,1)}function k0(e,t,r,n){return new W($.tag,jr(e,t+1,n),2)}function S0(e,t,r,n){return new W($.tag,Pr(e,t+1,n),3)}function T0(e,t,r,n){return new W($.tag,Dr(e,t+1,n),5)}function I0(e,t,r,n){return new W($.tag,Mr(e,t+1,n),9)}function xa(e,t){dt(e,$.tag.majorEncoded,t.value)}xa.compareTokens=zr.compareTokens;xa.encodedSize=function(e){return dt.encodedSize(e.value)};v();var B0=20,C0=21,O0=22,L0=23;function F0(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${te} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new W($.null,null,1):new W($.undefined,void 0,1)}function N0(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${te} indefinite length items not allowed`);return new W($.break,void 0,1)}function _a(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${te} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${te} Infinity values are not supported`)}return new W($.float,e,t)}function R0(e,t,r,n){return _a(ka(e,t+1),3,n)}function $0(e,t,r,n){return _a(Sa(e,t+1),5,n)}function U0(e,t,r,n){return _a(kf(e,t+1),9,n)}function Aa(e,t,r){let n=t.value;if(n===!1)e.push([$.float.majorEncoded|B0]);else if(n===!0)e.push([$.float.majorEncoded|C0]);else if(n===null)e.push([$.float.majorEncoded|O0]);else if(n===void 0)e.push([$.float.majorEncoded|L0]);else{let i,o=!1;(!r||r.float64!==!0)&&(_f(n),i=ka(gt,1),n===i||Number.isNaN(n)?(gt[0]=249,e.push(gt.slice(0,3)),o=!0):(Af(n),i=Sa(gt,1),n===i&&(gt[0]=250,e.push(gt.slice(0,5)),o=!0))),o||(j0(n),i=kf(gt,1),gt[0]=251,e.push(gt.slice(0,9)))}}Aa.encodedSize=function(e,t){let r=e.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!t||t.float64!==!0){_f(r);let n=ka(gt,1);if(r===n||Number.isNaN(r))return 3;if(Af(r),n=Sa(gt,1),r===n)return 5}return 9};var xf=new ArrayBuffer(9),ht=new DataView(xf,1),gt=new Uint8Array(xf,0);function _f(e){if(e===1/0)ht.setUint16(0,31744,!1);else if(e===-1/0)ht.setUint16(0,64512,!1);else if(Number.isNaN(e))ht.setUint16(0,32256,!1);else{ht.setFloat32(0,e);let t=ht.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)ht.setUint16(0,31744,!1);else if(r===0)ht.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?ht.setUint16(0,0):i<-14?ht.setUint16(0,(t&2147483648)>>16|1<<24+i,!1):ht.setUint16(0,(t&2147483648)>>16|i+15<<10|n>>13,!1)}}}function ka(e,t){if(e.length-t<2)throw new Error(`${te} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function Af(e){ht.setFloat32(0,e,!1)}function Sa(e,t){if(e.length-t<4)throw new Error(`${te} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function j0(e){ht.setFloat64(0,e,!1)}function kf(e,t){if(e.length-t<8)throw new Error(`${te} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}Aa.compareTokens=zr.compareTokens;function oe(e,t,r){throw new Error(`${te} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function ko(e){return()=>{throw new Error(`${te} ${e}`)}}var V=[];for(let e=0;e<=23;e++)V[e]=oe;V[24]=Wg;V[25]=Hg;V[26]=Gg;V[27]=Jg;V[28]=oe;V[29]=oe;V[30]=oe;V[31]=oe;for(let e=32;e<=55;e++)V[e]=oe;V[56]=Yg;V[57]=Qg;V[58]=Zg;V[59]=Xg;V[60]=oe;V[61]=oe;V[62]=oe;V[63]=oe;for(let e=64;e<=87;e++)V[e]=e0;V[88]=t0;V[89]=r0;V[90]=n0;V[91]=i0;V[92]=oe;V[93]=oe;V[94]=oe;V[95]=ko("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)V[e]=s0;V[120]=a0;V[121]=u0;V[122]=l0;V[123]=c0;V[124]=oe;V[125]=oe;V[126]=oe;V[127]=ko("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)V[e]=f0;V[152]=d0;V[153]=p0;V[154]=y0;V[155]=g0;V[156]=oe;V[157]=oe;V[158]=oe;V[159]=w0;for(let e=160;e<=183;e++)V[e]=b0;V[184]=m0;V[185]=v0;V[186]=E0;V[187]=x0;V[188]=oe;V[189]=oe;V[190]=oe;V[191]=_0;for(let e=192;e<=215;e++)V[e]=A0;V[216]=k0;V[217]=S0;V[218]=T0;V[219]=I0;V[220]=oe;V[221]=oe;V[222]=oe;V[223]=oe;for(let e=224;e<=243;e++)V[e]=ko("simple values are not supported");V[244]=oe;V[245]=oe;V[246]=oe;V[247]=F0;V[248]=ko("simple values are not supported");V[249]=R0;V[250]=$0;V[251]=U0;V[252]=oe;V[253]=oe;V[254]=oe;V[255]=N0;var Ot=[];for(let e=0;e<24;e++)Ot[e]=new W($.uint,e,1);for(let e=-1;e>=-24;e--)Ot[31-e]=new W($.negint,e,1);Ot[64]=new W($.bytes,new Uint8Array(0),1);Ot[96]=new W($.string,"",1);Ot[128]=new W($.array,0,1);Ot[160]=new W($.map,0,1);Ot[244]=new W($.false,!1,1);Ot[245]=new W($.true,!0,1);Ot[246]=new W($.null,null,1);function Sf(e){switch(e.type){case $.false:return Mt([244]);case $.true:return Mt([245]);case $.null:return Mt([246]);case $.bytes:return e.value.length?void 0:Mt([64]);case $.string:return e.value===""?Mt([96]):void 0;case $.array:return e.value===0?Mt([128]):void 0;case $.map:return e.value===0?Mt([160]):void 0;case $.uint:return e.value<24?Mt([Number(e.value)]):void 0;case $.negint:if(e.value>=-24)return Mt([31-Number(e.value)])}}var P0={float64:!1,mapSorter:M0,quickEncodeToken:Sf};function Tf(){let e=[];return e[$.uint.major]=zr,e[$.negint.major]=ma,e[$.bytes.major]=Ao,e[$.string.major]=h0,e[$.array.major]=va,e[$.map.major]=Ea,e[$.tag.major]=xa,e[$.float.major]=Aa,e}var If=Tf(),hs=new mf,Us=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${vf} object contains circular references`);return new Us(t,e)}},ir={null:new W($.null,null),undefined:new W($.undefined,void 0),true:new W($.true,!0),false:new W($.false,!1),emptyArray:new W($.array,0),emptyMap:new W($.map,0)},vr={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new W($.float,e):e>=0?new W($.uint,e):new W($.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new W($.uint,e):new W($.negint,e)},Uint8Array(e,t,r,n){return new W($.bytes,e)},string(e,t,r,n){return new W($.string,e)},boolean(e,t,r,n){return e?ir.true:ir.false},null(e,t,r,n){return ir.null},undefined(e,t,r,n){return ir.undefined},ArrayBuffer(e,t,r,n){return new W($.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new W($.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[ir.emptyArray,new W($.break)]:ir.emptyArray;n=Us.createCheck(n,e);let i=[],o=0;for(let s of e)i[o++]=Wi(s,r,n);return r.addBreakTokens?[new W($.array,e.length),i,new W($.break)]:[new W($.array,e.length),i]},Object(e,t,r,n){let i=t!=="Object",o=i?e.keys():Object.keys(e),s=i?e.size:o.length;if(!s)return r.addBreakTokens===!0?[ir.emptyMap,new W($.break)]:ir.emptyMap;n=Us.createCheck(n,e);let a=[],u=0;for(let c of o)a[u++]=[Wi(c,r,n),Wi(i?e.get(c):e[c],r,n)];return D0(a,r),r.addBreakTokens?[new W($.map,s),a,new W($.break)]:[new W($.map,s),a]}};vr.Map=vr.Object;vr.Buffer=vr.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))vr[`${e}Array`]=vr.DataView;function Wi(e,t={},r){let n=Ng(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||vr[n];if(typeof i=="function"){let s=i(e,n,t,r);if(s!=null)return s}let o=vr[n];if(!o)throw new Error(`${vf} unsupported type: ${n}`);return o(e,n,t,r)}function D0(e,t){t.mapSorter&&e.sort(t.mapSorter)}function M0(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,o=If[i].compareTokens(r,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function Bf(e,t,r,n){if(Array.isArray(t))for(let i of t)Bf(e,i,r,n);else r[t.type.major](e,t,n)}function z0(e,t,r){let n=Wi(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let o=t[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,r),a=new mf(s);if(o(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return bf(a.chunks[0])}}return hs.reset(),Bf(hs,n,t,r),hs.toBytes(!0)}function Qn(e,t){return t=Object.assign({},P0,t),z0(e,If,t)}v();var q0={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},V0=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=Ot[e];if(t===void 0){let r=V[e];if(!r)throw new Error(`${te} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let n=e&31;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}},Zn=Symbol.for("DONE"),So=Symbol.for("BREAK");function K0(e,t,r){let n=[];for(let i=0;i<e.value;i++){let o=Xn(t,r);if(o===So){if(e.value===1/0)break;throw new Error(`${te} got unexpected break to lengthed array`)}if(o===Zn)throw new Error(`${te} found array but not enough entries (got ${i}, expected ${e.value})`);n[i]=o}return n}function W0(e,t,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<e.value;s++){let a=Xn(t,r);if(a===So){if(e.value===1/0)break;throw new Error(`${te} got unexpected break to lengthed map`)}if(a===Zn)throw new Error(`${te} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${te} non-string keys not supported (got ${typeof a})`);let u=Xn(t,r);if(u===Zn)throw new Error(`${te} found map but not enough entries (got ${s} [no value], expected ${e.value})`);n?o.set(a,u):i[a]=u}return n?o:i}function Xn(e,t){if(e.done())return Zn;let r=e.next();if(r.type===$.break)return So;if(r.type.terminal)return r.value;if(r.type===$.array)return K0(r,e,t);if(r.type===$.map)return W0(r,e,t);if(r.type===$.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=Xn(e,t);return t.tags[r.value](n)}throw new Error(`${te} tag not supported (${r.value})`)}throw new Error("unsupported")}function sr(e,t){if(!(e instanceof Uint8Array))throw new Error(`${te} data to decode must be a Uint8Array`);t=Object.assign({},q0,t);let r=t.tokenizer||new V0(e,t),n=Xn(r,t);if(n===Zn)throw new Error(`${te} did not find any content to decode`);if(n===So)throw new Error(`${te} got unexpected break`);if(!r.done())throw new Error(`${te} too many terminals, data makes no sense`);return n}v();var H0=Tf(),G0={float64:!1,quickEncodeToken:Sf};function Cf(e,t=H0,r=G0){if(Array.isArray(e)){let n=0;for(let i of e)n+=Cf(i,t,r);return n}else{let n=t[e.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${e.type.name} does not have an encodedSize()`);return n.encodedSize(e,r)}}var To={};pe(To,{code:()=>tw,decode:()=>Ta,encode:()=>Io,name:()=>ew});v();ce();var Of=42;function J0(e){if(e.asCID!==e)return null;let t=G.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new W($.tag,Of),new W($.bytes,r)]}function Y0(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Q0(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Z0={float64:!0,typeEncoders:{Object:J0,undefined:Y0,number:Q0}};function X0(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return G.decode(e.subarray(1))}var Lf={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Lf.tags[Of]=X0;var ew="dag-cbor",tw=113,Io=e=>Qn(e,Z0),Ta=e=>sr(e,Lf),rw=class{constructor(e,t){this.bytes=e,this.byteOffset=t,this.roots=[],this.headerSize=t}addRoot(e,t){return nw(this,e,t),this}write(e){return iw(this,e),this}close(e){return ow(this,e)}},nw=(e,t,r={})=>{let{resize:n=!1}=r,{bytes:i,headerSize:o,byteOffset:s,roots:a}=e;e.roots.push(t);let u=ro(e);if(u>o)if(u-o+s<i.byteLength)if(n)Ff(e,u);else throw a.pop(),new RangeError(`Header of size ${o} has no capacity for new root ${t}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw a.pop(),new RangeError(`Buffer has no capacity for a new root ${t}`)},Tl=({cid:e,bytes:t})=>{let r=e.bytes.byteLength+t.byteLength;return _o.default.encodingLength(r)+r},iw=(e,{cid:t,bytes:r})=>{let n=t.bytes.byteLength+r.byteLength,i=_o.default.encode(n);if(e.byteOffset+i.length+n>e.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");fs(e,i),fs(e,t.bytes),fs(e,r)},ow=(e,t={})=>{let{resize:r=!1}=t,{roots:n,bytes:i,byteOffset:o,headerSize:s}=e,a=Io({version:1,roots:n}),u=_o.default.encode(a.length),c=u.length+a.byteLength;if(s-c===0)return Il(e,u,a),i.subarray(0,o);if(r)return Ff(e,c),Il(e,u,a),i.subarray(0,e.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},Ff=(e,t)=>{let{bytes:r,headerSize:n}=e;r.set(r.subarray(n,e.byteOffset),t),e.byteOffset+=t-n,e.headerSize=t},fs=(e,t)=>{e.bytes.set(t,e.byteOffset),e.byteOffset+=t.length},Il=({bytes:e},t,r)=>{e.set(t),e.set(r,t.length)},sw=[new W($.map,2),new W($.string,"version"),new W($.uint,1),new W($.string,"roots")],aw=new W($.tag,42),uw=e=>{let t=[...sw];t.push(new W($.array,e.length));for(let n of e)t.push(aw),t.push(new W($.bytes,{length:n+1}));let r=Cf(t);return _o.default.encodingLength(r)+r},ro=({roots:e})=>uw(e.map(t=>t.bytes.byteLength)),lw=(e,t={})=>{let{roots:r=[],byteOffset:n=0,byteLength:i=e.byteLength,headerSize:o=ro({roots:r})}=t,s=new Uint8Array(e,n,i),a=new rw(s,o);for(let u of r)a.addRoot(u);return a};v();v();v();var Br=z(nt(),1);ce();He();v();var cr={Null:e=>e===null,Int:e=>Number.isInteger(e),Float:e=>typeof e=="number"&&Number.isFinite(e),String:e=>typeof e=="string",Bool:e=>typeof e=="boolean",Bytes:e=>e instanceof Uint8Array,Link:e=>!cr.Null(e)&&typeof e=="object"&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!cr.Null(e)&&typeof e=="object"&&e.asCID!==e&&!cr.List(e)&&!cr.Bytes(e)},nn={Int:cr.Int,"CarHeader > version":e=>nn.Int(e),"CarHeader > roots (anon) > valueType (anon)":cr.Link,"CarHeader > roots (anon)":e=>cr.List(e)&&Array.prototype.every.call(e,nn["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>nn["CarHeader > roots (anon)"](e),CarHeader:e=>{let t=e&&Object.keys(e);return cr.Map(e)&&["version"].every(r=>t.includes(r))&&Object.entries(e).every(([r,n])=>nn["CarHeader > "+r]&&nn["CarHeader > "+r](n))}},cw=nn.CarHeader,ds={SHA2_256:18,LENGTH:32,DAG_PB:112},Bl=16+8+8+8;async function no(e){let t=await e.upTo(8);if(!t.length)throw new Error("Unexpected end of data");let r=Br.default.decode(t);return e.seek(Br.default.decode.bytes),r}async function hw(e){let t=await e.exactly(Bl),r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=0,i={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return e.seek(Bl),i}async function Ia(e,t){let r=await no(e);if(r===0)throw new Error("Invalid CAR header (zero length)");let n=await e.exactly(r);e.seek(r);let i=Ta(n);if(!cw(i))throw new Error("Invalid CAR header format");if(i.version!==1&&i.version!==2||t!==void 0&&i.version!==t)throw new Error(`Invalid CAR version: ${i.version}${t!==void 0?` (expected ${t})`:""}`);let o=Array.isArray(i.roots);if(i.version===1&&!o||i.version===2&&o)throw new Error("Invalid CAR header format");if(i.version===1)return i;let s=await hw(e);e.seek(s.dataOffset-e.pos);let a=await Ia(e,1);return Object.assign(a,s)}async function fw(e){let t=await e.upTo(8);Br.default.decode(t);let r=Br.default.decode.bytes,n=Br.default.decode(t.subarray(Br.default.decode.bytes)),i=Br.default.decode.bytes,o=r+i+n,s=await e.exactly(o);return e.seek(o),s}async function dw(e){let t=await e.exactly(2);if(t[0]===ds.SHA2_256&&t[1]===ds.LENGTH){let s=await e.exactly(34);e.seek(34);let a=Xe(s);return G.create(0,ds.DAG_PB,a)}let r=await no(e);if(r!==1)throw new Error(`Unexpected CID version (${r})`);let n=await no(e),i=await fw(e),o=Xe(i);return G.create(r,n,o)}async function Nf(e){let t=e.pos,r=await no(e);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=e.pos-t;let n=await dw(e),i=r-Number(e.pos-t);return{cid:n,length:r,blockLength:i}}async function pw(e){let{cid:t,blockLength:r}=await Nf(e),n=await e.exactly(r);return e.seek(r),{bytes:n,cid:t}}async function yw(e){let t=e.pos,{cid:r,length:n,blockLength:i}=await Nf(e),o={cid:r,length:n,blockLength:i,offset:t,blockOffset:e.pos};return e.seek(o.blockLength),o}function Ba(e){let t=(async()=>{let r=await Ia(e);if(r.version===2){let n=e.pos-r.dataOffset;e=ww(e,r.dataSize-n)}return r})();return{header:()=>t,async*blocks(){for(await t;(await e.upTo(8)).length>0;)yield await pw(e)},async*blocksIndex(){for(await t;(await e.upTo(8)).length>0;)yield await yw(e)}}}function Bo(e){let t=0;return{async upTo(r){return e.subarray(t,t+Math.min(r,e.length-t))},async exactly(r){if(r>e.length-t)throw new Error("Unexpected end of data");return e.subarray(t,t+r)},seek(r){t+=r},get pos(){return t}}}function gw(e){let t=0,r=0,n=0,i=new Uint8Array(0),o=async s=>{r=i.length-n;let a=[i.subarray(n)];for(;r<s;){let c=await e();if(c==null)break;r<0?c.length>r&&a.push(c.subarray(-r)):a.push(c),r+=c.length}i=new Uint8Array(a.reduce((c,h)=>c+h.length,0));let u=0;for(let c of a)i.set(c,u),u+=c.length;n=0};return{async upTo(s){return i.length-n<s&&await o(s),i.subarray(n,n+Math.min(i.length-n,s))},async exactly(s){if(i.length-n<s&&await o(s),i.length-n<s)throw new Error("Unexpected end of data");return i.subarray(n,n+s)},seek(s){t+=s,n+=s},get pos(){return t}}}function Ca(e){let t=e[Symbol.asyncIterator]();async function r(){let n=await t.next();return n.done?null:n.value}return gw(r)}function ww(e,t){let r=0;return{async upTo(n){let i=await e.upTo(n);return i.length+r>t&&(i=i.subarray(0,t-r)),i},async exactly(n){let i=await e.exactly(n);if(i.length+r>t)throw new Error("Unexpected end of data");return i},seek(n){r+=n,e.seek(n)},get pos(){return e.pos}}}var Rf=class{constructor(e,t){this._header=e,this._blocks=t,this._keys=t.map(r=>r.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){let t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(let e of this._blocks)yield e}async*cids(){for(let e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Cl(Bo(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Cl(Ca(e))}};async function Cl(e){let t=Ba(e),r=await t.header(),n=[];for await(let i of t.blocks())n.push(i);return new Rf(r,n)}v();var bw=class{constructor(e,t,r){this._version=e,this._roots=t,this._iterator=r}get version(){return this._version}async getRoots(){return this._roots}[Symbol.asyncIterator](){return this._iterator}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Ol(Bo(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Ol(Ca(e))}};async function Ol(e){let t=Ba(e),{version:r,roots:n}=await t.header();return new bw(r,n,t.blocksIndex())}v();var $f=class{constructor(e,t,r){this._version=e,this._roots=t,this._iterable=r,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},js=class extends $f{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:t,roots:r,iterator:n}=await Uf(e);return new js(t,r,n)}static async fromIterable(e){let{version:t,roots:r,iterator:n}=await jf(e);return new js(t,r,n)}},Ll=class extends $f{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;let e=this._iterable[Symbol.asyncIterator]();return{async next(){let t=await e.next();return t.done?t:{done:!1,value:t.value.cid}}}}static async fromBytes(e){let{version:t,roots:r,iterator:n}=await Uf(e);return new Ll(t,r,n)}static async fromIterable(e){let{version:t,roots:r,iterator:n}=await jf(e);return new Ll(t,r,n)}};async function Uf(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Pf(Bo(e))}async function jf(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Pf(Ca(e))}async function Pf(e){let t=Ba(e),{version:r,roots:n}=await t.header();return{version:r,roots:n,iterator:t.blocks()}}v();ce();v();var Df=z(nt(),1);function Mf(e){let t=Io({version:1,roots:e}),r=Df.default.encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n}function mw(e){return{async setRoots(t){let r=Mf(t);await e.write(r)},async writeBlock(t){let{cid:r,bytes:n}=t;await e.write(new Uint8Array(Df.default.encode(r.bytes.length+n.length))),await e.write(r.bytes),n.length&&await e.write(n)},async close(){await e.end()}}}v();function Ti(){}function vw(){let e=[],t=null,r=Ti,n=!1,i=null,o=Ti,s=()=>(t||(t=new Promise(c=>{r=()=>{t=null,r=Ti,c()}})),t),a={write(c){e.push(c);let h=s();return o(),h},async end(){n=!0;let c=s();o(),await c}},u={async next(){let c=e.shift();return c?(e.length===0&&r(),{done:!1,value:c}):n?(r(),{done:!0,value:void 0}):(i||(i=new Promise(h=>{o=()=>(i=null,o=Ti,h(u.next()))})),i)}};return{writer:a,iterator:u}}var Ps=class{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let t=G.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=Ew(e);let{encoder:t,iterator:r}=Nl(),n=new Ps(e,t),i=new Fl(r);return{writer:n,out:i}}static createAppender(){let{encoder:e,iterator:t}=Nl();e.setRoots=()=>Promise.resolve();let r=new Ps([],e),n=new Fl(t);return{writer:r,out:n}}static async updateRootsInBytes(e,t){let r=Bo(e);await Ia(r);let n=Mf(t);if(Number(r.pos)!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${r.pos} bytes, new header is ${n.length} bytes)`);return e.set(n,0),e}},Fl=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function Nl(){let e=vw(),{writer:t,iterator:r}=e;return{encoder:mw(t),iterator:r}}function Ew(e){if(e===void 0)return[];if(!Array.isArray(e)){let r=G.asCID(e);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}let t=[];for(let r of e){let n=G.asCID(r);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");t.push(n)}return t}v();ai();He();xr();ui();v();ai();var Ii=({enumerable:e=!0,configurable:t=!1}={})=>({enumerable:e,configurable:t,writable:!1}),Ds=function*(e,t){if(e!=null&&!(e instanceof Uint8Array))for(let[r,n]of Object.entries(e)){let i=[...t,r];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[o,s]of n.entries()){let a=[...i,o],u=G.asCID(s);u?yield[a.join("/"),u]:typeof s=="object"&&(yield*Ds(s,a))}else{let o=G.asCID(n);o?yield[i.join("/"),o]:yield*Ds(n,i)}}},Ms=function*(e,t){if(e!=null)for(let[r,n]of Object.entries(e)){let i=[...t,r];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!G.asCID(n))if(Array.isArray(n))for(let[o,s]of n.entries()){let a=[...i,o];yield a.join("/"),typeof s=="object"&&!G.asCID(s)&&(yield*Ms(s,a))}else yield*Ms(n,i)}},xw=(e,t)=>{let r=e;for(let[n,i]of t.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${t.slice(0,n+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);let o=G.asCID(r);if(o)return{value:o,remaining:t.slice(n+1).join("/")}}return{value:r}},zf=class{constructor({cid:e,bytes:t,value:r}){if(!e||!t||typeof r>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:Ii(),bytes:Ii(),value:Ii(),asBlock:Ii()})}links(){return Ds(this.value,[])}tree(){return Ms(this.value,[])}get(e="/"){return xw(this.value,e.split("/").filter(Boolean))}},Rl=async({value:e,codec:t,hasher:r})=>{if(typeof e>"u")throw new Error('Missing required argument "value"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");let n=t.encode(e),i=await r.digest(n),o=G.create(1,t.code,i);return new zf({value:e,bytes:n,cid:o})},Co=({bytes:e,cid:t,value:r,codec:n})=>{let i=r!==void 0?r:n&&n.decode(e);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new zf({cid:t,bytes:e,value:i})},_w=async({bytes:e,cid:t,hasher:r,codec:n})=>{if(!e)throw new Error('Missing required argument "bytes"');if(!r)throw new Error('Missing required argument "hasher"');let i=n.decode(e),o=await r.digest(e);if(!ea.equals(t.multihash.bytes,o.bytes))throw new Error("CID hash does not match bytes");return Co({bytes:e,cid:t,value:i,codec:n})};v();function qf(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}var{isBinary:Aw}=ea,Oa=e=>Aw(e)?Rl({value:e,hasher:mr,codec:yo}):Rl({value:e,hasher:mr,codec:To}),$l=({bytes:e,cid:t})=>{let r,n,{code:i}=t,o=t.multihash.code||Xe(t.multihash).code;if(o===18)r=mr;else throw new Error("Unsupported hash function: "+o);if(i===113)n=To;else if(i===85)n=yo;else throw new Error("Unsupported codec: "+i);return _w({bytes:e,cid:t,codec:n,hasher:r})},un=class{constructor(){Object.assign(this,qf()),this.blocks=[]}static create(){return new this}static async load(e){let t=await Rf.fromBytes(e),[r]=await t.getRoots();return{root:r,get:n=>t.get(n).then(i=>$l(i)).then(({value:i})=>i)}}async add(e){let t=await Oa(e);return this.last=t,this.blocks.push(t),this.emit("size",this.size),t.cid}async get(e){let{cid:t,bytes:r,value:n}=await $l(e);return{cid:t,bytes:r,value:n}}undo(){return this.blocks.pop()}async commit(){let e=this.last.cid,t=0,r=ro({roots:[e]});t+=r;for(let o of this.blocks)t+=Tl(o);let n=new Uint8Array(t),i=await lw(n,{headerSize:r});i.addRoot(e);for(let o of this.blocks)i.write(o);return await i.close(),i.bytes}get size(){if(!this?.last)return 0;let e=this.last.cid,t=0;t+=ro({roots:[e]});for(let r of this.blocks)t+=Tl(r);return t}};v();v();v();v();var La=kw;function kw(e,t,r){if(!e)return r;var n,i;if(Array.isArray(t)&&(n=t.slice(0)),typeof t=="string"&&(n=t.split(".")),typeof t=="symbol"&&(n=[t]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!e||(e=e[i],e===void 0))return r;return e}var Sw=z(mt(),1),Zr=z(Je(),1);v();v();v();ce();v();v();v();var _n=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");ye();Ve();var zt="/",Vf=new TextEncoder().encode(zt),Bi=Vf[0],Ee=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Bi)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ee(e.join(zt))}static random(){return new Ee(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ee(e):typeof e.uint8Array=="function"?new Ee(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Vf),this._buf[0]!==Bi){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Bi,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Bi;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return Ee.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(zt).slice(1)}type(){return Tw(this.baseNamespace())}name(){return Iw(this.baseNamespace())}instance(e){return new Ee(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(zt)||(e+=zt),e+=this.type(),new Ee(e)}parent(){let e=this.list();return e.length===1?new Ee(zt):new Ee(e.slice(0,-1).join(zt))}child(e){return this.toString()===zt?e:e.toString()===zt?this:new Ee(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ee.withNamespaces([...this.namespaces(),...Bw(e.map(t=>t.namespaces()))])}};function Tw(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function Iw(e){let t=e.split(":");return t[t.length-1]}function Bw(e){return[].concat(...e)}var Cw=z(mt(),1),Ow=z(nf(),1);Ge();xr();He();var Lw=(0,Cw.default)("ipfs:repo:migrator:migration-8");function Kf(e){return e.child?Kf(e.child):e}function Fw(e){try{let t=ie.decode(`b${e.toString().toLowerCase().slice(1)}`),r=G.decode(t).multihash.bytes,n=ie.encode(r).slice(1).toUpperCase();return new Ee(`/${n}`,!1)}catch{return e}}function Nw(e){try{let t=ie.decode(`b${e.toString().toLowerCase().slice(1)}`),r=Xe(t),n=ie.encode(G.createV1(Or,r).bytes).slice(1);return new Ee(`/${n.toUpperCase()}`,!1)}catch{return e}}async function Ul(e,t,r){let n=e.blocks;await n.open();let i=Kf(n),o=await(0,Ow.default)(i.queryKeys({filters:[s=>r(s).toString()!==s.toString()]}));try{let s=0;for await(let a of i.query({})){let u=r(a.key);u.toString()!==a.key.toString()&&(s+=1,Lw(`Migrating Block from ${a.key} to ${u}`,await i.has(a.key)),await i.delete(a.key),await i.put(u,a.value),t(s/o*100,`Migrated Block from ${a.key} to ${u}`))}}finally{await n.close()}}var Rw={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(e,t=()=>{})=>Ul(e,t,Fw),revert:(e,t=()=>{})=>Ul(e,t,Nw)};v();ce();v();ce();v();var $w=new TextDecoder;function Fa(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");let i=e[t++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,t]}function io(e,t){let r;[r,t]=Fa(e,t);let n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function Wf(e,t){let r;return[r,t]=Fa(e,t),[r&7,r>>3,t]}function Uw(e){let t={},r=e.length,n=0;for(;n<r;){let i,o;if([i,o,n]=Wf(e,n),o===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=io(e,n)}else if(o===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=io(e,n),t.Name=$w.decode(s)}else if(o===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[t.Tsize,n]=Fa(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function jw(e){let t=e.length,r=0,n,i=!1,o;for(;r<t;){let a,u;if([a,u,r]=Wf(e,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(u===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,r]=io(e,r),n&&(i=!0)}else if(u===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let c;[c,r]=io(e,r),n.push(Uw(c))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${u}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}v();var Hf=new TextEncoder,jl=2**32,Pw=2**31;function Dw(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=Dn(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){let n=Hf.encode(e.Name);r-=n.length,t.set(n,r),r=Dn(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=Dn(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function Mw(e){let t=qw(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=Dn(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let i=e.Links.length-1;i>=0;i--){let o=Dw(e.Links[i],r.subarray(0,n));n-=o,n=Dn(r,n,o)-1,r[n]=18}return r}function zw(e){let t=0;if(e.Hash){let r=e.Hash.length;t+=1+r+ln(r)}if(typeof e.Name=="string"){let r=Hf.encode(e.Name).length;t+=1+r+ln(r)}return typeof e.Tsize=="number"&&(t+=1+ln(e.Tsize)),t}function qw(e){let t=0;if(e.Data){let r=e.Data.length;t+=1+r+ln(r)}if(e.Links)for(let r of e.Links){let n=zw(r);t+=1+n+ln(n)}return t}function Dn(e,t,r){t-=ln(r);let n=t;for(;r>=Pw;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function ln(e){return e%2===0&&e++,Math.floor((Vw(e)+6)/7)}function Vw(e){let t=0;return e>=jl&&(e=Math.floor(e/jl),t=32),e>=1<<16&&(e>>>=16,t+=16),e>=1<<8&&(e>>>=8,t+=8),t+Kw[e]}var Kw=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];v();ce();var Ww=["Data","Links"],Hw=["Hash","Name","Tsize"],Pl=new TextEncoder;function Gw(e,t){if(e===t)return 0;let r=e.Name?Pl.encode(e.Name):[],n=t.Name?Pl.encode(t.Name):[],i=r.length,o=n.length;for(let s=0,a=Math.min(i,o);s<a;++s)if(r[s]!==n[s]){i=r[s],o=n[s];break}return i<o?-1:o<i?1:0}function Dl(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function Jw(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Dl(e,Ww))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){let r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Dl(r,Hw))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&Gw(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var hr=112;function Na(e){Jw(e);let t={};return e.Links&&(t.Links=e.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),Mw(t)}function Ra(e){let t=jw(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map(n=>{let i={};try{i.Hash=G.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),r}v();ce();v();var fn=z($r(),1),Ml=fn.default.Reader,Yw=fn.default.Writer,eE=fn.default.util,Ci=fn.default.roots.default||(fn.default.roots.default={}),Qw=Ci.ipfs=(()=>{let e={};return e.pin=function(){let t={};return t.Set=function(){function r(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(n,i){return i||(i=Yw.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&i.uint32(8).uint32(n.version),n.fanout!=null&&Object.hasOwnProperty.call(n,"fanout")&&i.uint32(16).uint32(n.fanout),n.seed!=null&&Object.hasOwnProperty.call(n,"seed")&&i.uint32(29).fixed32(n.seed),i},r.decode=function(n,i){n instanceof Ml||(n=Ml.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Ci.ipfs.pin.Set;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:s.version=n.uint32();break;case 2:s.fanout=n.uint32();break;case 3:s.seed=n.fixed32();break;default:n.skipType(a&7);break}}return s},r.fromObject=function(n){if(n instanceof Ci.ipfs.pin.Set)return n;var i=new Ci.ipfs.pin.Set;return n.version!=null&&(i.version=n.version>>>0),n.fanout!=null&&(i.fanout=n.fanout>>>0),n.seed!=null&&(i.seed=n.seed>>>0),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(o.version=0,o.fanout=0,o.seed=0),n.version!=null&&n.hasOwnProperty("version")&&(o.version=n.version),n.fanout!=null&&n.hasOwnProperty("fanout")&&(o.fanout=n.fanout),n.seed!=null&&n.hasOwnProperty("seed")&&(o.seed=n.seed),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,fn.default.util.toJSONOptions)},r}(),t}(),e})(),Zw=z(Vy(),1),zs=z(nt(),1);v();Ge();ce();var Hi=new Ee("/local/pins"),ps=256,Xw=8192,Gf=G.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),an={direct:"direct",recursive:"recursive"};function zl(e){return new Ee(`/${ie.encode(e.multihash.bytes).toUpperCase().substring(1)}`)}Ur();v();function eb(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}ye();Ve();ui();var qs=Qw.pin.Set;function tb(e){let t=e.Data;if(!t)throw new Error("No data present");let r=zs.default.decode(t),n=zs.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");let i=t.slice(n,r+n),o=qs.toObject(qs.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:t.slice(r+n)}}function rb(e,t){let r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e,!0);let n=Ue(t.toString()),i=$e([r,n],r.byteLength+n.byteLength);return(0,Zw.default)(re(i))}async function*Jf(e,t){let r=tb(t),n=0;for(let i of t.Links){if(n<r.header.fanout){let o=i.Hash;if(!Gf.equals(o)){let s=await e.get(o),a=Ra(s);yield*Jf(e,a)}}else yield i.Hash;n++}}async function*Oi(e,t,r){let n=t.Links.find(s=>s.Name===r);if(!n)throw new Error("No link found with name "+r);let i=await e.get(n.Hash),o=Ra(i);yield*Jf(e,o)}function nb(e,t){return r(t,0);async function r(n,i){let o=qs.encode({version:1,fanout:ps,seed:i}).finish(),s=zs.default.encode(o.length),a=$e([s,o]),u=[];for(let h=0;h<ps;h++)u.push({Name:"",Tsize:1,Hash:Gf});if(n.length<=Xw){let h=n.map(g=>({link:{Name:"",Tsize:1,Hash:g.key},data:g.data||new Uint8Array})).sort((g,d)=>eb(g.link.Hash.bytes,d.link.Hash.bytes)),p=u.concat(h.map(g=>g.link));return{Data:$e([a,...h.map(g=>g.data)]),Links:p}}else{let h=n.reduce((g,d)=>{let w=rb(i,d.key)%ps;return g[w]=w in g?g[w].concat([d]):[d],g},[]),p=0;for(let g of h){let d=await r(g,i+1);await c(d,p),p++}return{Data:a,Links:u}}async function c(h,p){let g=Na(h),d=await mr.digest(g),w=G.createV0(d);await e.put(w,g);let y=h.Links.reduce((b,x)=>b+(x.Tsize||0),0)+g.length;u[p]={Name:"",Tsize:y,Hash:w}}}}async function ql(e,t,r){let n=await nb(e,r.map(u=>({key:u}))),i=Na(n),o=await mr.digest(i),s=G.createV0(o);await e.put(s,i);let a=n.Links.reduce((u,c)=>u+c.Tsize,0)+i.length;return{Name:t,Tsize:a,Hash:s}}var Vs=z(nf(),1);ui();He();Ge();async function ib(e,t,r,n){if(!await t.has(Hi))return;let i=await t.get(Hi),o=G.decode(i),s=await e.get(o),a=Ra(s),u=0,c=await(0,Vs.default)(Oi(e,a,an.recursive))+await(0,Vs.default)(Oi(e,a,an.direct));for await(let h of Oi(e,a,an.recursive)){u++;let p={depth:1/0};h.version!==0&&(p.version=h.version),h.code!==hr&&(p.codec=h.code),await r.put(zl(h),Qn(p)),n(u/c*100,`Migrated recursive pin ${h}`)}for await(let h of Oi(e,a,an.direct)){u++;let p={depth:0};h.version!==0&&(p.version=h.version),h.code!==hr&&(p.codec=h.code),await r.put(zl(h),Qn(p)),n(u/c*100,`Migrated direct pin ${h}`)}await e.delete(o),await t.delete(Hi)}async function ob(e,t,r,n){let i=[],o=[],s=0,a=await(0,Vs.default)(r.queryKeys({}));for await(let{key:g,value:d}of r.query({})){s++;let w=sr(d),y=G.create(w.version||0,w.codec||hr,Xe(ie.decode("b"+g.toString().toLowerCase().split("/").pop())));w.depth===0?(n(s/a*100,`Reverted direct pin ${y}`),o.push(y)):(n(s/a*100,`Reverted recursive pin ${y}`),i.push(y))}n(100,"Updating pin root");let u={Links:[await ql(e,an.direct,o),await ql(e,an.recursive,i)]},c=Na(u),h=await mr.digest(c),p=G.createV0(h);await e.put(p,c),await t.put(Hi,p.bytes)}async function Vl(e,t,r){let n=e.blocks,i=e.datastore,o=e.pins;await n.open(),await i.open(),await o.open();try{await r(n,i,o,t)}finally{await o.close(),await i.close(),await n.close()}}var sb={version:9,description:"Migrates pins to datastore",migrate:(e,t=()=>{})=>Vl(e,t,ib),revert:(e,t=()=>{})=>Vl(e,t,ob)};v();v();var on={};pe(on,{abortedError:()=>cb,dbDeleteFailedError:()=>ub,dbOpenFailedError:()=>ab,dbWriteFailedError:()=>lb,notFoundError:()=>ei});v();var pi=z(Je(),1);function ab(e){return e=e||new Error("Cannot open database"),(0,pi.default)(e,"ERR_DB_OPEN_FAILED")}function ub(e){return e=e||new Error("Delete failed"),(0,pi.default)(e,"ERR_DB_DELETE_FAILED")}function lb(e){return e=e||new Error("Write failed"),(0,pi.default)(e,"ERR_DB_WRITE_FAILED")}function ei(e){return e=e||new Error("Not Found"),(0,pi.default)(e,"ERR_NOT_FOUND")}function cb(e){return e=e||new Error("Aborted"),(0,pi.default)(e,"ERR_ABORTED")}var hb=new Ee("/config"),$a=new Ee("/version");function Oo(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,t.type==="level-js"||t.constructor.name==="Level")return t}async function fb(e,t,r){let n=await t(e);if(n)return n;let i=Oo(r);return i?new Promise((o,s)=>{let a=i.store("readonly").get(e.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{o(Boolean(a.result))}}):!1}async function db(e,t,r,n){if(await r(e))return t(e);let i=Oo(n);if(!i)throw ei();return new Promise((o,s)=>{let a=i.store("readonly").get(e.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return o(a.result);s(ei())}})}function Li(e){let t=e.get.bind(e),r=e.has.bind(e);return e.get=n=>db(n,t,r,e),e.has=n=>fb(n,r,e),e}function Yf(e){return{...e,root:Li(e.root),datastore:Li(e.datastore),pins:Li(e.pins),keys:Li(e.keys)}}Ve();ye();async function pb(e,t,r=()=>{}){let n=Oo(t);if(!n){r(`${e} did not need an upgrade`);return}r(`Upgrading ${e}`),await Zf(n,(i,o)=>[{type:"del",key:i},{type:"put",key:Ue(i),value:o}])}async function yb(e,t,r=()=>{}){let n=Oo(t);if(!n){r(`${e} did not need a downgrade`);return}r(`Downgrading ${e}`),await Zf(n,(i,o)=>[{type:"del",key:i},{type:"put",key:re(i),value:o}])}function Qf(e){return e.child?Qf(e.child):e}async function Kl(e,t,r){let n=Object.entries(e).map(([s,a])=>({key:s,backend:Qf(a)})).filter(({key:s,backend:a})=>a.constructor.name==="LevelDatastore").map(({key:s,backend:a})=>({name:s,store:a}));t(0,`Migrating ${n.length} dbs`);let i=0,o=s=>{t(Math.round(i/n.length*100),s)};for(let{name:s,store:a}of n){await a.open();try{await r(s,a,o)}finally{i++,await a.close()}}t(100,`Migrated ${n.length} dbs`)}var gb={version:10,description:"Migrates datastore-level keys to binary",migrate:(e,t=()=>{})=>Kl(e,t,pb),revert:(e,t=()=>{})=>Kl(e,t,yb)};function Zf(e,t){function r(n,i){let o=e.store("readwrite"),s=o.transaction,a=0,u;s.onabort=()=>i(u||s.error||new Error("aborted by user")),s.oncomplete=()=>i();function c(){let h=n[a++],p=h.key,g;try{g=h.type==="del"?o.delete(p):o.put(h.value,p)}catch(d){u=d,s.abort();return}a<n.length&&(g.onsuccess=c)}c()}return new Promise((n,i)=>{let o=e.iterator(),s=u=>u;o._deserializeKey=o._deserializeValue=s,a();function a(){let u=(c,h,p)=>{if(c||h===void 0){let g=d=>{if(d){i(d);return}n()};o.end(g);return}r(t(h,p),a)};o.next(u)}})}v();var fr=new Ee("/local/filesroot");async function wb(e,t=()=>{}){if(t(100,"Migrating MFS root to repo datastore"),await e.root.open(),await e.datastore.open(),await e.root.has(fr)){let r=await e.root.get(fr);await e.datastore.put(fr,r),await e.root.delete(fr)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo datastore")}async function bb(e,t=()=>{}){if(t(100,"Migrating MFS root to repo root datastore"),await e.root.open(),await e.datastore.open(),await e.datastore.has(fr)){let r=await e.datastore.get(fr);await e.root.put(fr,r),await e.datastore.delete(fr)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo root datastore")}var mb={version:11,description:"Store mfs root in the datastore",migrate:wb,revert:bb};v();var Xf=z($r(),1);v();var dn=z($r(),1),Wl=dn.default.Reader,vb=dn.default.Writer,Eb=dn.default.util,Fi=dn.default.roots.default||(dn.default.roots.default={}),ed=Fi.Protocols=(()=>{function e(t){if(this.protocols=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.protocols=Eb.emptyArray,e.encode=function(t,r){if(r||(r=vb.create()),t.protocols!=null&&t.protocols.length)for(var n=0;n<t.protocols.length;++n)r.uint32(10).string(t.protocols[n]);return r},e.decode=function(t,r){t instanceof Wl||(t=Wl.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new Fi.Protocols;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.protocols&&i.protocols.length||(i.protocols=[]),i.protocols.push(t.string());break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof Fi.Protocols)return t;var r=new Fi.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");r.protocols=[];for(var n=0;n<t.protocols.length;++n)r.protocols[n]=String(t.protocols[n])}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.protocols=[]),t.protocols&&t.protocols.length){n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=t.protocols[i]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,dn.default.util.toJSONOptions)},e})();v();var yr=z($r(),1),Xr=yr.default.Reader,ys=yr.default.Writer,we=yr.default.util,Ne=yr.default.roots.default||(yr.default.roots.default={}),td=Ne.Addresses=(()=>{function e(t){if(this.addrs=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.addrs=we.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(t,r){if(r||(r=ys.create()),t.addrs!=null&&t.addrs.length)for(var n=0;n<t.addrs.length;++n)Ne.Addresses.Address.encode(t.addrs[n],r.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&Ne.Addresses.CertifiedRecord.encode(t.certifiedRecord,r.uint32(18).fork()).ldelim(),r},e.decode=function(t,r){t instanceof Xr||(t=Xr.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new Ne.Addresses;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.addrs&&i.addrs.length||(i.addrs=[]),i.addrs.push(Ne.Addresses.Address.decode(t,t.uint32()));break;case 2:i.certifiedRecord=Ne.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof Ne.Addresses)return t;var r=new Ne.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");r.addrs=[];for(var n=0;n<t.addrs.length;++n){if(typeof t.addrs[n]!="object")throw TypeError(".Addresses.addrs: object expected");r.addrs[n]=Ne.Addresses.Address.fromObject(t.addrs[n])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");r.certifiedRecord=Ne.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.addrs=[]),r.defaults&&(n.certifiedRecord=null),t.addrs&&t.addrs.length){n.addrs=[];for(var i=0;i<t.addrs.length;++i)n.addrs[i]=Ne.Addresses.Address.toObject(t.addrs[i],r)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=Ne.Addresses.CertifiedRecord.toObject(t.certifiedRecord,r)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,yr.default.util.toJSONOptions)},e.Address=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}t.prototype.multiaddr=we.newBuffer([]),t.prototype.isCertified=null;let r;return Object.defineProperty(t.prototype,"_isCertified",{get:we.oneOfGetter(r=["isCertified"]),set:we.oneOfSetter(r)}),t.encode=function(n,i){return i||(i=ys.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},t.decode=function(n,i){n instanceof Xr||(n=Xr.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Ne.Addresses.Address;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:s.multiaddr=n.bytes();break;case 2:s.isCertified=n.bool();break;default:n.skipType(a&7);break}}return s},t.fromObject=function(n){if(n instanceof Ne.Addresses.Address)return n;var i=new Ne.Addresses.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?we.base64.decode(n.multiaddr,i.multiaddr=we.newBuffer(we.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},t.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=we.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?we.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,yr.default.util.toJSONOptions)},t}(),e.CertifiedRecord=function(){function t(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return t.prototype.seq=we.Long?we.Long.fromBits(0,0,!0):0,t.prototype.raw=we.newBuffer([]),t.encode=function(r,n){return n||(n=ys.create()),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&n.uint32(8).uint64(r.seq),r.raw!=null&&Object.hasOwnProperty.call(r,"raw")&&n.uint32(18).bytes(r.raw),n},t.decode=function(r,n){r instanceof Xr||(r=Xr.create(r));for(var i=n===void 0?r.len:r.pos+n,o=new Ne.Addresses.CertifiedRecord;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:o.seq=r.uint64();break;case 2:o.raw=r.bytes();break;default:r.skipType(s&7);break}}return o},t.fromObject=function(r){if(r instanceof Ne.Addresses.CertifiedRecord)return r;var n=new Ne.Addresses.CertifiedRecord;return r.seq!=null&&(we.Long?(n.seq=we.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?n.seq=parseInt(r.seq,10):typeof r.seq=="number"?n.seq=r.seq:typeof r.seq=="object"&&(n.seq=new we.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.raw!=null&&(typeof r.raw=="string"?we.base64.decode(r.raw,n.raw=we.newBuffer(we.base64.length(r.raw)),0):r.raw.length&&(n.raw=r.raw)),n},t.toObject=function(r,n){n||(n={});var i={};if(n.defaults){if(we.Long){var o=new we.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;n.bytes===String?i.raw="":(i.raw=[],n.bytes!==Array&&(i.raw=we.newBuffer(i.raw)))}return r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?i.seq=n.longs===String?String(r.seq):r.seq:i.seq=n.longs===String?we.Long.prototype.toString.call(r.seq):n.longs===Number?new we.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.raw!=null&&r.hasOwnProperty("raw")&&(i.raw=n.bytes===String?we.base64.encode(r.raw,0,r.raw.length):n.bytes===Array?Array.prototype.slice.call(r.raw):r.raw),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,yr.default.util.toJSONOptions)},t}(),e})();v();var Er=z($r(),1),pn=Er.default.Reader,Ua=Er.default.Writer,ue=Er.default.util,Be=Er.default.roots.default||(Er.default.roots.default={}),rd=Be.Peer=(()=>{function e(r){if(this.addresses=[],this.protocols=[],this.metadata=[],r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}e.prototype.addresses=ue.emptyArray,e.prototype.protocols=ue.emptyArray,e.prototype.metadata=ue.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null;let t;return Object.defineProperty(e.prototype,"_pubKey",{get:ue.oneOfGetter(t=["pubKey"]),set:ue.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:ue.oneOfGetter(t=["peerRecordEnvelope"]),set:ue.oneOfSetter(t)}),e.encode=function(r,n){if(n||(n=Ua.create()),r.addresses!=null&&r.addresses.length)for(var i=0;i<r.addresses.length;++i)Be.Address.encode(r.addresses[i],n.uint32(10).fork()).ldelim();if(r.protocols!=null&&r.protocols.length)for(var i=0;i<r.protocols.length;++i)n.uint32(18).string(r.protocols[i]);if(r.metadata!=null&&r.metadata.length)for(var i=0;i<r.metadata.length;++i)Be.Metadata.encode(r.metadata[i],n.uint32(26).fork()).ldelim();return r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(34).bytes(r.pubKey),r.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(r,"peerRecordEnvelope")&&n.uint32(42).bytes(r.peerRecordEnvelope),n},e.decode=function(r,n){r instanceof pn||(r=pn.create(r));for(var i=n===void 0?r.len:r.pos+n,o=new Be.Peer;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(Be.Address.decode(r,r.uint32()));break;case 2:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(r.string());break;case 3:o.metadata&&o.metadata.length||(o.metadata=[]),o.metadata.push(Be.Metadata.decode(r,r.uint32()));break;case 4:o.pubKey=r.bytes();break;case 5:o.peerRecordEnvelope=r.bytes();break;default:r.skipType(s&7);break}}return o},e.fromObject=function(r){if(r instanceof Be.Peer)return r;var n=new Be.Peer;if(r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".Peer.addresses: array expected");n.addresses=[];for(var i=0;i<r.addresses.length;++i){if(typeof r.addresses[i]!="object")throw TypeError(".Peer.addresses: object expected");n.addresses[i]=Be.Address.fromObject(r.addresses[i])}}if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Peer.protocols: array expected");n.protocols=[];for(var i=0;i<r.protocols.length;++i)n.protocols[i]=String(r.protocols[i])}if(r.metadata){if(!Array.isArray(r.metadata))throw TypeError(".Peer.metadata: array expected");n.metadata=[];for(var i=0;i<r.metadata.length;++i){if(typeof r.metadata[i]!="object")throw TypeError(".Peer.metadata: object expected");n.metadata[i]=Be.Metadata.fromObject(r.metadata[i])}}return r.pubKey!=null&&(typeof r.pubKey=="string"?ue.base64.decode(r.pubKey,n.pubKey=ue.newBuffer(ue.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.peerRecordEnvelope!=null&&(typeof r.peerRecordEnvelope=="string"?ue.base64.decode(r.peerRecordEnvelope,n.peerRecordEnvelope=ue.newBuffer(ue.base64.length(r.peerRecordEnvelope)),0):r.peerRecordEnvelope.length&&(n.peerRecordEnvelope=r.peerRecordEnvelope)),n},e.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[],i.protocols=[],i.metadata=[]),r.addresses&&r.addresses.length){i.addresses=[];for(var o=0;o<r.addresses.length;++o)i.addresses[o]=Be.Address.toObject(r.addresses[o],n)}if(r.protocols&&r.protocols.length){i.protocols=[];for(var o=0;o<r.protocols.length;++o)i.protocols[o]=r.protocols[o]}if(r.metadata&&r.metadata.length){i.metadata=[];for(var o=0;o<r.metadata.length;++o)i.metadata[o]=Be.Metadata.toObject(r.metadata[o],n)}return r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?ue.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey,n.oneofs&&(i._pubKey="pubKey")),r.peerRecordEnvelope!=null&&r.hasOwnProperty("peerRecordEnvelope")&&(i.peerRecordEnvelope=n.bytes===String?ue.base64.encode(r.peerRecordEnvelope,0,r.peerRecordEnvelope.length):n.bytes===Array?Array.prototype.slice.call(r.peerRecordEnvelope):r.peerRecordEnvelope,n.oneofs&&(i._peerRecordEnvelope="peerRecordEnvelope")),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},e})(),tE=Be.Address=(()=>{function e(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}e.prototype.multiaddr=ue.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:ue.oneOfGetter(t=["isCertified"]),set:ue.oneOfSetter(t)}),e.encode=function(r,n){return n||(n=Ua.create()),r.multiaddr!=null&&Object.hasOwnProperty.call(r,"multiaddr")&&n.uint32(10).bytes(r.multiaddr),r.isCertified!=null&&Object.hasOwnProperty.call(r,"isCertified")&&n.uint32(16).bool(r.isCertified),n},e.decode=function(r,n){r instanceof pn||(r=pn.create(r));for(var i=n===void 0?r.len:r.pos+n,o=new Be.Address;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:o.multiaddr=r.bytes();break;case 2:o.isCertified=r.bool();break;default:r.skipType(s&7);break}}return o},e.fromObject=function(r){if(r instanceof Be.Address)return r;var n=new Be.Address;return r.multiaddr!=null&&(typeof r.multiaddr=="string"?ue.base64.decode(r.multiaddr,n.multiaddr=ue.newBuffer(ue.base64.length(r.multiaddr)),0):r.multiaddr.length&&(n.multiaddr=r.multiaddr)),r.isCertified!=null&&(n.isCertified=Boolean(r.isCertified)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.multiaddr="":(i.multiaddr=[],n.bytes!==Array&&(i.multiaddr=ue.newBuffer(i.multiaddr)))),r.multiaddr!=null&&r.hasOwnProperty("multiaddr")&&(i.multiaddr=n.bytes===String?ue.base64.encode(r.multiaddr,0,r.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(r.multiaddr):r.multiaddr),r.isCertified!=null&&r.hasOwnProperty("isCertified")&&(i.isCertified=r.isCertified,n.oneofs&&(i._isCertified="isCertified")),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},e})(),rE=Be.Metadata=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.key="",e.prototype.value=ue.newBuffer([]),e.encode=function(t,r){return r||(r=Ua.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&r.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&r.uint32(18).bytes(t.value),r},e.decode=function(t,r){t instanceof pn||(t=pn.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new Be.Metadata;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.key=t.string();break;case 2:i.value=t.bytes();break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof Be.Metadata)return t;var r=new Be.Metadata;return t.key!=null&&(r.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?ue.base64.decode(t.value,r.value=ue.newBuffer(ue.base64.length(t.value)),0):t.value.length&&(r.value=t.value)),r},e.toObject=function(t,r){r||(r={});var n={};return r.defaults&&(n.key="",r.bytes===String?n.value="":(n.value=[],r.bytes!==Array&&(n.value=ue.newBuffer(n.value)))),t.key!=null&&t.hasOwnProperty("key")&&(n.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(n.value=r.bytes===String?ue.base64.encode(t.value,0,t.value.length):r.bytes===Array?Array.prototype.slice.call(t.value):t.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},e})();v();var yn=z($r(),1),Hl=yn.default.Reader,xb=yn.default.Writer,be=yn.default.util,Ni=yn.default.roots.default||(yn.default.roots.default={}),_b=Ni.Envelope=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.publicKey=be.newBuffer([]),e.prototype.payloadType=be.newBuffer([]),e.prototype.payload=be.newBuffer([]),e.prototype.signature=be.newBuffer([]),e.encode=function(t,r){return r||(r=xb.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&r.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&r.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&r.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&r.uint32(42).bytes(t.signature),r},e.decode=function(t,r){t instanceof Hl||(t=Hl.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new Ni.Envelope;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.publicKey=t.bytes();break;case 2:i.payloadType=t.bytes();break;case 3:i.payload=t.bytes();break;case 5:i.signature=t.bytes();break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof Ni.Envelope)return t;var r=new Ni.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?be.base64.decode(t.publicKey,r.publicKey=be.newBuffer(be.base64.length(t.publicKey)),0):t.publicKey.length&&(r.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?be.base64.decode(t.payloadType,r.payloadType=be.newBuffer(be.base64.length(t.payloadType)),0):t.payloadType.length&&(r.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?be.base64.decode(t.payload,r.payload=be.newBuffer(be.base64.length(t.payload)),0):t.payload.length&&(r.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?be.base64.decode(t.signature,r.signature=be.newBuffer(be.base64.length(t.signature)),0):t.signature.length&&(r.signature=t.signature)),r},e.toObject=function(t,r){r||(r={});var n={};return r.defaults&&(r.bytes===String?n.publicKey="":(n.publicKey=[],r.bytes!==Array&&(n.publicKey=be.newBuffer(n.publicKey))),r.bytes===String?n.payloadType="":(n.payloadType=[],r.bytes!==Array&&(n.payloadType=be.newBuffer(n.payloadType))),r.bytes===String?n.payload="":(n.payload=[],r.bytes!==Array&&(n.payload=be.newBuffer(n.payload))),r.bytes===String?n.signature="":(n.signature=[],r.bytes!==Array&&(n.signature=be.newBuffer(n.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(n.publicKey=r.bytes===String?be.base64.encode(t.publicKey,0,t.publicKey.length):r.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(n.payloadType=r.bytes===String?be.base64.encode(t.payloadType,0,t.payloadType.length):r.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(n.payload=r.bytes===String?be.base64.encode(t.payload,0,t.payload.length):r.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(n.signature=r.bytes===String?be.base64.encode(t.signature,0,t.signature.length):r.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,yn.default.util.toJSONOptions)},e})();v();var Lr=z($r(),1),Ri=Lr.default.Reader,Gl=Lr.default.Writer,_e=Lr.default.util,pt=Lr.default.roots.default||(Lr.default.roots.default={}),Ab=pt.PeerRecord=(()=>{function e(t){if(this.addresses=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.peerId=_e.newBuffer([]),e.prototype.seq=_e.Long?_e.Long.fromBits(0,0,!0):0,e.prototype.addresses=_e.emptyArray,e.encode=function(t,r){if(r||(r=Gl.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&r.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&r.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var n=0;n<t.addresses.length;++n)pt.PeerRecord.AddressInfo.encode(t.addresses[n],r.uint32(26).fork()).ldelim();return r},e.decode=function(t,r){t instanceof Ri||(t=Ri.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new pt.PeerRecord;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.peerId=t.bytes();break;case 2:i.seq=t.uint64();break;case 3:i.addresses&&i.addresses.length||(i.addresses=[]),i.addresses.push(pt.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof pt.PeerRecord)return t;var r=new pt.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?_e.base64.decode(t.peerId,r.peerId=_e.newBuffer(_e.base64.length(t.peerId)),0):t.peerId.length&&(r.peerId=t.peerId)),t.seq!=null&&(_e.Long?(r.seq=_e.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?r.seq=parseInt(t.seq,10):typeof t.seq=="number"?r.seq=t.seq:typeof t.seq=="object"&&(r.seq=new _e.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");r.addresses=[];for(var n=0;n<t.addresses.length;++n){if(typeof t.addresses[n]!="object")throw TypeError(".PeerRecord.addresses: object expected");r.addresses[n]=pt.PeerRecord.AddressInfo.fromObject(t.addresses[n])}}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.addresses=[]),r.defaults)if(r.bytes===String?n.peerId="":(n.peerId=[],r.bytes!==Array&&(n.peerId=_e.newBuffer(n.peerId))),_e.Long){var i=new _e.Long(0,0,!0);n.seq=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.seq=r.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(n.peerId=r.bytes===String?_e.base64.encode(t.peerId,0,t.peerId.length):r.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?n.seq=r.longs===String?String(t.seq):t.seq:n.seq=r.longs===String?_e.Long.prototype.toString.call(t.seq):r.longs===Number?new _e.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){n.addresses=[];for(var o=0;o<t.addresses.length;++o)n.addresses[o]=pt.PeerRecord.AddressInfo.toObject(t.addresses[o],r)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Lr.default.util.toJSONOptions)},e.AddressInfo=function(){function t(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return t.prototype.multiaddr=_e.newBuffer([]),t.encode=function(r,n){return n||(n=Gl.create()),r.multiaddr!=null&&Object.hasOwnProperty.call(r,"multiaddr")&&n.uint32(10).bytes(r.multiaddr),n},t.decode=function(r,n){r instanceof Ri||(r=Ri.create(r));for(var i=n===void 0?r.len:r.pos+n,o=new pt.PeerRecord.AddressInfo;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:o.multiaddr=r.bytes();break;default:r.skipType(s&7);break}}return o},t.fromObject=function(r){if(r instanceof pt.PeerRecord.AddressInfo)return r;var n=new pt.PeerRecord.AddressInfo;return r.multiaddr!=null&&(typeof r.multiaddr=="string"?_e.base64.decode(r.multiaddr,n.multiaddr=_e.newBuffer(_e.base64.length(r.multiaddr)),0):r.multiaddr.length&&(n.multiaddr=r.multiaddr)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.multiaddr="":(i.multiaddr=[],n.bytes!==Array&&(i.multiaddr=_e.newBuffer(i.multiaddr)))),r.multiaddr!=null&&r.hasOwnProperty("multiaddr")&&(i.multiaddr=n.bytes===String?_e.base64.encode(r.multiaddr,0,r.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(r.multiaddr):r.multiaddr),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Lr.default.util.toJSONOptions)},t}(),e})(),Jl=z(Yy(),1);Xf.default.util.Long=void 0;Xf.default.configure();async function kb(e,t=()=>{}){t(0,"Storing each peerstore key under a single datastore key"),await e.datastore.open();let r={},n=[];for await(let{key:i,value:o}of e.datastore.query({prefix:"/peers"})){n.push(i);let s=i.toString(),[a,u,c,h,p]=s.split("/");if(u==="peers"&&!!["protos","addrs","metadata","keys"].includes(c)&&!!h)if(r[h]=r[h]||{addresses:[],protocols:[],metadata:[]},c==="protos"){let g=ed.decode(o);r[h].protocols=g.protocols.sort()}else if(c==="addrs"){let g=td.decode(o);r[h].addresses=g.addrs.sort((d,w)=>new Jl.Multiaddr(d.multiaddr).toString().localeCompare(new Jl.Multiaddr(w.multiaddr).toString())),g.certifiedRecord&&g.certifiedRecord.raw&&(r[h].peerRecordEnvelope=g.certifiedRecord.raw)}else c==="metadata"?r[h].metadata.push({key:p,value:o}):c==="keys"&&(r[h].pubKey=o)}t(33,"Read peer data from store");for(let i of n)await e.datastore.delete(i);t(66,"Removed existing peer data from store");for(let i of Object.keys(r)){let o=r[i];o.metadata=o.metadata.sort((a,u)=>a.key.localeCompare(u.key));let s=rd.encode(o).finish();await e.datastore.put(new Ee(`/peers/${i}`),s)}await e.datastore.close(),t(100,"Stored each peerstore key under a single datastore key")}async function Sb(e,t=()=>{}){t(0,"Storing each peerstore key under a multiple datastore keys"),await e.datastore.open();let r={},n=[];for await(let{key:i,value:o}of e.datastore.query({prefix:"/peers"})){n.push(i);let s=i.toString(),[a,u,c]=s.split("/");r[c]=rd.decode(o)}t(33,"Read peer data from store");for(let i of n)await e.datastore.delete(i);t(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(r)){if(o.protocols&&o.protocols.length>0&&await e.datastore.put(new Ee(`/peers/protos/${i}`),ed.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let s=o.peerRecordEnvelope,a;if(s){let u=_b.decode(s),c=Ab.decode(u.payload);a={raw:s,seq:c.seq}}await e.datastore.put(new Ee(`/peers/addrs/${i}`),td.encode({addrs:o.addresses,certifiedRecord:a}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:s,value:a}of o.metadata)await e.datastore.put(new Ee(`/peers/metadata/${i}/${s}`),a);o.pubKey&&await e.datastore.put(new Ee(`/peers/keys/${i}`),o.pubKey)}await e.datastore.close(),t(100,"Stored each peerstore key under multiple datastore keys")}var Tb={version:12,description:"Store each peerstore peer under a single datastore key",migrate:kb,revert:Sb},Sr={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},ja=[Object.assign({version:1},Sr),Object.assign({version:2},Sr),Object.assign({version:3},Sr),Object.assign({version:4},Sr),Object.assign({version:5},Sr),Object.assign({version:6},Sr),Object.assign({version:7},Sr),Rw,sb,gb,mb,Tb];v();v();var Ib=z(mt(),1),nd={};pe(nd,{InvalidValueError:()=>Ma,MissingRepoOptionsError:()=>yi,NonReversibleMigrationError:()=>Pa,NotInitializedRepoError:()=>Lo,RequiredParameterError:()=>Da});v();var Pa=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Pa.code,this.message=e}};Pa.code="ERR_NON_REVERSIBLE_MIGRATION";var Lo=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=Lo.code,this.message=e}};Lo.code="ERR_NOT_INITIALIZED_REPO";var Da=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=Da.code,this.message=e}};Da.code="ERR_REQUIRED_PARAMETER";var Ma=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=Ma.code,this.message=e}};Ma.code="ERR_INVALID_VALUE";var yi=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=yi.code,this.message=e}};yi.code="ERR_MISSING_REPO_OPTIONS";var gs=(0,Ib.default)("ipfs:repo:migrator:repo:init");async function Bb(e){if(!e)throw new yi("Please pass repo options when trying to open a repo");let t=e.root;try{await t.open();let r=await t.has($a),n=await t.has(hb);return!r||!n?(gs(`Version entry present: ${r}`),gs(`Config entry present: ${n}`),!1):!0}catch(r){return gs("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(t!==void 0)try{await t.close()}catch{}}}Ve();ye();async function id(e){if(!await Bb(e))throw new Lo("Repo is not initialized!");let t=e.root;await t.open();try{return parseInt(re(await t.get($a)))}finally{await t.close()}}async function oo(e,t){if(!t)throw new yi("Please pass repo options when trying to open a repo");let r=t.root;await r.open(),await r.put($a,Ue(String(e))),await r.close()}var Cb=z(mt(),1),bt=(0,Cb.default)("ipfs:repo:migrator");function Ob(e){return e=e||ja,!Array.isArray(e)||e.length===0?0:e[e.length-1].version}async function Lb(e,t,r,n,{ignoreLock:i=!1,onProgress:o,isDryRun:s=!1,migrations:a}){if(a=a||ja,!e)throw new ft.RequiredParameterError("Path argument is required!");if(!r)throw new ft.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ft.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new ft.InvalidValueError("Version has to be positive integer!");t=Yf(t);let u=await id(t);if(u===n){bt("Nothing to migrate.");return}if(u>n)throw new ft.InvalidValueError(`Current repo's version (${u}) is higher then toVersion (${n}), you probably wanted to revert it?`);od(a,u,n);let c;!s&&!i&&(c=await r.repoLock.lock(e));try{for(let h of a){if(n!==void 0&&h.version>n)break;if(!(h.version<=u)){bt(`Migrating version ${h.version}`);try{if(!s){let p=()=>{};o&&(p=(g,d)=>o(h.version,g.toFixed(2),d)),await h.migrate(t,p)}}catch(p){let g=h.version-1;throw bt(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${g}`),await oo(g,t),new Error(`During migration to version ${h.version} exception was raised: ${p.stack||p.message||p}`)}bt(`Migrating to version ${h.version} finished`)}}s||await oo(n||Ob(a),t),bt("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!s&&!i&&c&&await c.close()}}async function Fb(e,t,r,n,{ignoreLock:i=!1,onProgress:o,isDryRun:s=!1,migrations:a}){if(a=a||ja,!e)throw new ft.RequiredParameterError("Path argument is required!");if(!r)throw new ft.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ft.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new ft.InvalidValueError("Version has to be positive integer!");t=Yf(t);let u=await id(t);if(u===n){bt("Nothing to revert.");return}if(u<n)throw new ft.InvalidValueError(`Current repo's version (${u}) is lower then toVersion (${n}), you probably wanted to migrate it?`);od(a,n,u,!0);let c;!s&&!i&&(c=await r.repoLock.lock(e)),bt(`Reverting from version ${u} to ${n}`);try{let h=a.slice().reverse();for(let p of h){if(p.version<=n)break;if(!(p.version>u)){bt(`Reverting migration version ${p.version}`);try{if(!s){let g=()=>{};o&&(g=(d,w)=>o(p.version,d.toFixed(2),w)),await p.revert(t,g)}}catch(g){let d=p.version;throw bt(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${d}`),await oo(d,t),g.message=`During reversion to version ${p.version} exception was raised: ${g.message}`,g}bt(`Reverting to version ${p.version} finished`)}}s||await oo(n,t),bt(`All migrations successfully reverted to version ${n}!`)}finally{!s&&!i&&c&&await c.close()}}function od(e,t,r,n=!1){let i=0;for(let o of e){if(o.version>r)break;if(o.version>t){if(n&&!o.revert)throw new ft.NonReversibleMigrationError(`It is not possible to revert to version ${t} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==r-t)throw new ft.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${t} to ${r}`)}var ft=nd,Nb=z(Qy(),1);v();var Rb=z(Xy(),1),$b=Rb.default;v();v();v();ye();Ve();var qt="/",sd=new TextEncoder().encode(qt),$i=sd[0],Pe=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==$i)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Pe(e.join(qt))}static random(){return new Pe(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Pe(e):typeof e.uint8Array=="function"?new Pe(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=sd),this._buf[0]!==$i){let e=new Uint8Array(this._buf.byteLength+1);e.fill($i,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===$i;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return Pe.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(qt).slice(1)}type(){return Ub(this.baseNamespace())}name(){return jb(this.baseNamespace())}instance(e){return new Pe(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(qt)||(e+=qt),e+=this.type(),new Pe(e)}parent(){let e=this.list();return e.length===1?new Pe(qt):new Pe(e.slice(0,-1).join(qt))}child(e){return this.toString()===qt?e:e.toString()===qt?this:new Pe(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Pe.withNamespaces([...this.namespaces(),...Pb(e.map(t=>t.namespaces()))])}};function Ub(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function jb(e){let t=e.split(":");return t[t.length-1]}function Pb(e){return[].concat(...e)}var Db=z(mt(),1);ye();Ve();v();v();var za=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=za.code}};za.code="ERR_LOCK_EXISTS";var Fr=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=Fr.code}};Fr.code="ERR_NOT_FOUND";var qa=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=qa.code}};qa.code="ERR_INVALID_REPO_VERSION";var Ui="ERR_REPO_NOT_INITIALIZED",Mb="ERR_REPO_ALREADY_OPEN",zb="ERR_REPO_ALREADY_CLOSED";async function ad(e,t,r){let n=await t(e);if(n)return n;let i=ld(r);return i?new Promise((o,s)=>{let a=i.store("readonly").get(e.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{o(Boolean(a.result))}}):!1}async function ud(e,t,r,n){if(await r(e))return t(e);let i=ld(n);if(!i)throw new Fr;return new Promise((o,s)=>{let a=i.store("readonly").get(e.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return o(a.result);s(new Fr)}})}function ld(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,t.type==="level-js"||t.constructor.name==="Level")return t}var qb=(0,Db.default)("ipfs:repo:version"),ws=new Pe("version");function Vb(e){return{async exists(){return ad(ws,e.has.bind(e),e)},async get(){let t=await ud(ws,e.get.bind(e),e.has.bind(e),e);return parseInt(re(t),10)},set(t){return e.put(ws,Ue(String(t)))},async check(t){let r=await this.get();return qb("comparing version: %s and %s",r,t),r===t||r===6&&t===7||t===6&&r===7}}}v();v();var Kb=z(eg(),1);v();var cd=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Wb=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Yl=e=>globalThis.DOMException===void 0?new Wb(e):new DOMException(e),Ql=e=>{let t=e.reason===void 0?Yl("This operation was aborted."):e.reason;return t instanceof Error?t:Yl(t)};function Hb(e,t,r,n){let i,o=new Promise((s,a)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){s(e);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:u}=n;u.aborted&&a(Ql(u)),u.addEventListener("abort",()=>{a(Ql(u))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{s(r())}catch(h){a(h)}return}let u=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,c=r instanceof Error?r:new cd(u);typeof e.cancel=="function"&&e.cancel(),a(c)},t),(async()=>{try{s(await e)}catch(u){a(u)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}v();v();function Gb(e,t,r){let n=0,i=e.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;r(e[s],t)<=0?(n=++s,i-=o+1):i=o}return n}var Tr=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Vt,Jb=class{constructor(){Vt.set(this,[])}enqueue(e,t){t={priority:0,...t};let r={priority:t.priority,run:e};if(this.size&&Tr(this,Vt,"f")[this.size-1].priority>=t.priority){Tr(this,Vt,"f").push(r);return}let n=Gb(Tr(this,Vt,"f"),r,(i,o)=>o.priority-i.priority);Tr(this,Vt,"f").splice(n,0,r)}dequeue(){return Tr(this,Vt,"f").shift()?.run}filter(e){return Tr(this,Vt,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Tr(this,Vt,"f").length}};Vt=new WeakMap;var ve=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},H=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Se,Mn,zn,ur,so,qn,Gi,yt,$n,tt,Ji,rt,Vn,ar,Yi,Zl,Xl,hd,ec,tc,rc,Qi,bs,ms,ao,Zi,Yb=new cd,Qb=class extends Error{},Kn=class extends Kb.default{constructor(e){var t,r,n,i;if(super(),Se.add(this),Mn.set(this,void 0),zn.set(this,void 0),ur.set(this,0),so.set(this,void 0),qn.set(this,void 0),Gi.set(this,0),yt.set(this,void 0),$n.set(this,void 0),tt.set(this,void 0),Ji.set(this,void 0),rt.set(this,0),Vn.set(this,void 0),ar.set(this,void 0),Yi.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Jb,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);ve(this,Mn,e.carryoverConcurrencyCount,"f"),ve(this,zn,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),ve(this,so,e.intervalCap,"f"),ve(this,qn,e.interval,"f"),ve(this,tt,new e.queueClass,"f"),ve(this,Ji,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,ve(this,Yi,e.throwOnTimeout===!0,"f"),ve(this,ar,e.autoStart===!1,"f")}get concurrency(){return H(this,Vn,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);ve(this,Vn,e,"f"),H(this,Se,"m",ao).call(this)}async add(e,t={}){return new Promise((r,n)=>{let i=async()=>{var o,s,a;ve(this,rt,(s=H(this,rt,"f"),s++,s),"f"),ve(this,ur,(a=H(this,ur,"f"),a++,a),"f");try{if(!((o=t.signal)===null||o===void 0)&&o.aborted){n(new Qb("The task was aborted."));return}let u=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):Hb(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?H(this,Yi,"f"):t.throwOnTimeout)&&n(Yb)}));r(u),this.emit("completed",u)}catch(u){n(u),this.emit("error",u)}H(this,Se,"m",hd).call(this)};H(this,tt,"f").enqueue(i,t),H(this,Se,"m",Qi).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async r=>this.add(r,t)))}start(){return H(this,ar,"f")?(ve(this,ar,!1,"f"),H(this,Se,"m",ao).call(this),this):this}pause(){ve(this,ar,!0,"f")}clear(){ve(this,tt,new(H(this,Ji,"f")),"f")}async onEmpty(){H(this,tt,"f").size!==0&&await H(this,Se,"m",Zi).call(this,"empty")}async onSizeLessThan(e){H(this,tt,"f").size<e||await H(this,Se,"m",Zi).call(this,"next",()=>H(this,tt,"f").size<e)}async onIdle(){H(this,rt,"f")===0&&H(this,tt,"f").size===0||await H(this,Se,"m",Zi).call(this,"idle")}get size(){return H(this,tt,"f").size}sizeBy(e){return H(this,tt,"f").filter(e).length}get pending(){return H(this,rt,"f")}get isPaused(){return H(this,ar,"f")}};Mn=new WeakMap,zn=new WeakMap,ur=new WeakMap,so=new WeakMap,qn=new WeakMap,Gi=new WeakMap,yt=new WeakMap,$n=new WeakMap,tt=new WeakMap,Ji=new WeakMap,rt=new WeakMap,Vn=new WeakMap,ar=new WeakMap,Yi=new WeakMap,Se=new WeakSet,Zl=function(){return H(this,zn,"f")||H(this,ur,"f")<H(this,so,"f")},Xl=function(){return H(this,rt,"f")<H(this,Vn,"f")},hd=function(){var e;ve(this,rt,(e=H(this,rt,"f"),e--,e),"f"),H(this,Se,"m",Qi).call(this),this.emit("next")},ec=function(){this.emit("empty"),H(this,rt,"f")===0&&this.emit("idle")},tc=function(){H(this,Se,"m",ms).call(this),H(this,Se,"m",bs).call(this),ve(this,$n,void 0,"f")},rc=function(){let e=Date.now();if(H(this,yt,"f")===void 0){let t=H(this,Gi,"f")-e;if(t<0)ve(this,ur,H(this,Mn,"f")?H(this,rt,"f"):0,"f");else return H(this,$n,"f")===void 0&&ve(this,$n,setTimeout(()=>{H(this,Se,"m",tc).call(this)},t),"f"),!0}return!1},Qi=function(){if(H(this,tt,"f").size===0)return H(this,yt,"f")&&clearInterval(H(this,yt,"f")),ve(this,yt,void 0,"f"),H(this,Se,"m",ec).call(this),!1;if(!H(this,ar,"f")){let e=!H(this,Se,"a",rc);if(H(this,Se,"a",Zl)&&H(this,Se,"a",Xl)){let t=H(this,tt,"f").dequeue();return t?(this.emit("active"),t(),e&&H(this,Se,"m",bs).call(this),!0):!1}}return!1},bs=function(){H(this,zn,"f")||H(this,yt,"f")!==void 0||(ve(this,yt,setInterval(()=>{H(this,Se,"m",ms).call(this)},H(this,qn,"f")),"f"),ve(this,Gi,Date.now()+H(this,qn,"f"),"f"))},ms=function(){H(this,ur,"f")===0&&H(this,rt,"f")===0&&H(this,yt,"f")&&(clearInterval(H(this,yt,"f")),ve(this,yt,void 0,"f")),ve(this,ur,H(this,Mn,"f")?H(this,rt,"f"):0,"f"),H(this,Se,"m",ao).call(this)},ao=function(){for(;H(this,Se,"m",Qi).call(this););},Zi=async function(e,t){return new Promise(r=>{let n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)})};v();var Zb=Xb;function Xb(e,t,r){var n,i;if(Array.isArray(t)&&(n=t.slice(0)),typeof t=="string"&&(n=t.split(".")),typeof t=="symbol"&&(n=[t]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;nc(i);for(var o;o=n.shift();)if(nc(o),typeof e[o]>"u"&&(e[o]={}),e=e[o],!e||typeof e!="object")return!1;return e[i]=r,!0}function nc(e){if(e=="__proto__"||e=="constructor"||e=="prototype")throw new Error("setting of prototype values not supported")}var vs=z(Je(),1);ye();Ve();var em=Kn.default?Kn.default:Kn,Es=new Pe("config");function tm(e){let t=new em({concurrency:1}),r={async getAll(o={}){let s=await ud(Es,e.get.bind(e),e.has.bind(e),e);return JSON.parse(re(s))},async get(o,s={}){if(o==null)throw new Fr(`Key ${o} does not exist in config`);let a=await this.getAll(s),u=La(a,o);if(u===void 0)throw new Fr(`Key ${o} does not exist in config`);return u},set(o,s,a={}){if(typeof o!="string"&&!(o instanceof String))throw(0,vs.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(s===void 0||s instanceof Uint8Array)throw(0,vs.default)(new Error("Invalid value type: "+typeof s),"ERR_INVALID_VALUE");return t.add(()=>n({key:o,value:s},a.signal))},replace(o,s={}){if(!o||o instanceof Uint8Array)throw(0,vs.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return t.add(()=>n({key:void 0,value:o},s.signal))},async exists(){return ad(Es,e.has.bind(e),e)}};return r;async function n(o,s){if(s&&s.aborted)return;let a=o.key,u=o.value;if(a){let c=await r.getAll();return typeof c=="object"&&c!==null&&Zb(c,a,u),i(c)}return i(u)}function i(o){let s=Ue(JSON.stringify(o,null,2));return e.put(Es,s)}}v();v();v();v();function xs(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function rm(e,t={}){if(!xs(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");let{deep:r,compare:n}=t,i=[],o=[],s=u=>{let c=i.indexOf(u);if(c!==-1)return o[c];let h=[];return i.push(u),o.push(h),h.push(...u.map(p=>Array.isArray(p)?s(p):xs(p)?a(p):p)),h},a=u=>{let c=i.indexOf(u);if(c!==-1)return o[c];let h={},p=Object.keys(u).sort(n);i.push(u),o.push(h);for(let g of p){let d=u[g],w;r&&Array.isArray(d)?w=s(d):w=r&&xs(d)?a(d):d,Object.defineProperty(h,g,{...Object.getOwnPropertyDescriptor(u,g),value:w})}return h};return Array.isArray(e)?r?s(e):e.slice():a(e)}ye();Ve();var _s=new Pe("datastore_spec");function nm(e){return{exists(){return e.has(_s)},async get(){let t=await e.get(_s);return JSON.parse(re(t))},async set(t){return e.put(_s,Ue(JSON.stringify(rm(t,{deep:!0}))))}}}v();Ve();var As=new Pe("api");function im(e){return{async get(){let t=await e.get(As);return t&&t.toString()},set(t){return e.put(As,Ue(t.toString()))},delete(){return e.delete(As)}}}v();var om=z(wn(),1);v();v();var ic=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},ks=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new ic(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new ic(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function sm(e={}){return am(t=>{let r=t.shift();if(r==null)return{done:!0};if(r.error!=null)throw r.error;return{done:r.done===!0,value:r.value}},e)}function am(e,t){t=t??{};let r=t.onEnd,n=new ks,i,o,s,a=async()=>n.isEmpty()?s?{done:!0}:await new Promise((y,b)=>{o=x=>{o=null,n.push(x);try{y(e(n))}catch(E){b(E)}return i}}):e(n),u=y=>o!=null?o(y):(n.push(y),i),c=y=>(n=new ks,o!=null?o({error:y}):(n.push({error:y}),i)),h=y=>{if(s)return i;if(t?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:y})},p=y=>s?i:(s=!0,y!=null?c(y):u({done:!0})),g=()=>(n=new ks,p(),{done:!0}),d=y=>(p(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:g,throw:d,push:h,end:p,get readableLength(){return n.size}},r==null)return i;let w=i;return i={[Symbol.asyncIterator](){return this},next(){return w.next()},throw(y){return w.throw(y),r!=null&&(r(y),r=void 0),{done:!0}},return(){return w.return(),r!=null&&(r(),r=void 0),{done:!0}},push:h,end(y){return w.end(y),r!=null&&(r(y),r=void 0),i},get readableLength(){return w.readableLength}},i}var um=z(bn(),1);ce();var lm=z(Je(),1);ua();function cm(e){return{open(){return e.open()},close(){return e.close()},query(t,r){return e.query(t,r)},queryKeys(t,r){return e.queryKeys(t,r)},async get(t,r){let n=or(t);return n.isIdentity?Promise.resolve(n.digest):e.get(t,r)},async*getMany(t,r){for await(let n of t)yield this.get(n,r)},async put(t,r,n){let{isIdentity:i}=or(t);i||await e.put(t,r,n)},async*putMany(t,r){let n=sm({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,um.default)(e.putMany(async function*(){for await(let{key:i,value:o}of t)or(i).isIdentity||(yield{key:i,value:o}),n.push({key:i,value:o})}())),n.end()}catch(i){n.end(i)}}),yield*n},has(t,r){let{isIdentity:n}=or(t);return n?Promise.resolve(!0):e.has(t,r)},delete(t,r){let{isIdentity:n}=or(t);return n?Promise.resolve():e.delete(t,r)},deleteMany(t,r){return e.deleteMany((0,om.default)(t,n=>!or(n).isIdentity),r)},batch(){let t=e.batch();return{put(r,n){let{isIdentity:i}=or(r);i||t.put(r,n)},delete(r){let{isIdentity:n}=or(r);n||t.delete(r)},commit:r=>t.commit(r)}}}}function or(e){let t=G.asCID(e);if(t==null)throw(0,lm.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==Jn.code?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}v();v();var hm=z(mt(),1),fd=(0,hm.default)("ipfs:repo:lock:memory"),dd="repo.lock",Un={};async function fm(e){let t=e+"/"+dd;if(fd("locking %s",t),Un[t]===!0)throw new za(`Lock already being held for file: ${t}`);return Un[t]=!0,{async close(){Un[t]&&delete Un[t]}}}async function dm(e){let t=e+"/"+dd;return fd(`checking lock: ${t}`),Boolean(Un[t])}var pd={lock:fm,locked:dm},pm={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:pd};v();var yd={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};v();ce();var ym=z(Je(),1),gm=z(mt(),1),oc=z(uf(),1);v();ai();xr();var wm=z(Je(),1);Ge();He();function ji(e){let t=G.asCID(e);if(t==null)throw(0,wm.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let r=ie.encode(t.multihash.bytes);return new Pe("/"+r.slice(1).toUpperCase(),!1)}function sc(e){return Xe(ie.decode(`b${e.toString().toLowerCase().substring(1)}`))}v();var bm=z(mt(),1),mm=(0,bm.default)("ipfs:repo:utils:walk-dag");async function*uo(e,t,r,n){try{let i=await t.get(e,n),o=await r(e.code),s=Co({bytes:i,cid:e,codec:o});for(let[,a]of s.links())yield a,yield*uo(a,t,r,n)}catch(i){throw mm("Could not walk DAG for CID",e.toString(),i),i}}v();var ut={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};v();var vm=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield e)}for(let e of this.cache){let[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){let n=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:n}):this._set(e,{value:t,expiry:n})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}for(let e of this.oldCache){let[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let r=e[t],[n,i]=r;this._deleteIfExpired(n,i)===!1&&(yield[n,i.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let r=e[t],[n,i]=r;this.cache.has(n)||this._deleteIfExpired(n,i)===!1&&(yield[n,i.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[r,n]of this.entriesAscending())e.call(t,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}},Em=2048;function xm(e){let t=`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`;return(0,ym.default)(new Error(t),"ERR_INVALID_PIN_TYPE")}var _m=class{constructor({pinstore:e,blockstore:t,loadCodec:r}){this.pinstore=e,this.blockstore=t,this.loadCodec=r,this.log=(0,gm.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let r={depth:0};return e.version!==0&&(r.version=e.version),e.code!==hr&&(r.codec=e.code),t.metadata&&(r.metadata=t.metadata),this.pinstore.put(ji(e),Qn(r))}unpin(e,t){return this.pinstore.delete(ji(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let r={depth:1/0};e.version!==0&&(r.version=e.version),e.code!==hr&&(r.codec=e.code),t.metadata&&(r.metadata=t.metadata),await this.pinstore.put(ji(e),Qn(r))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[r=>sr(r.value).depth===0]})){let r=sr(t.value),n=r.version||0,i=r.codec!=null?r.codec:hr,o=sc(t.key);yield{cid:G.create(n,i,o),metadata:r.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[r=>sr(r.value).depth===1/0]})){let r=sr(t.value),n=r.version||0,i=r.codec!=null?r.codec:hr,o=sc(t.key);yield{cid:G.create(n,i,o),metadata:r.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let r of uo(t,this.blockstore,this.loadCodec,e)){let n=[ut.recursive];(await this.isPinnedWithType(r,n)).pinned||(yield r)}}async isPinnedWithType(e,t,r){Array.isArray(t)||(t=[t]);let n=t.includes(ut.all),i=t.includes(ut.direct),o=t.includes(ut.recursive),s=t.includes(ut.indirect);if(o||i||n){let c=await(0,oc.default)(this.pinstore.query({prefix:ji(e).toString(),filters:[h=>{if(n)return!0;let p=sr(h.value);return t.includes(p.depth===0?ut.direct:ut.recursive)}],limit:1}));if(c){let h=sr(c.value);return{cid:e,pinned:!0,reason:h.depth===0?ut.direct:ut.recursive,metadata:h.metadata}}}let a=this;async function*u(c,h){for await(let{cid:p}of h)for await(let g of uo(p,a.blockstore,a.loadCodec))if(g.equals(c)){yield p;return}}if(n||s){let c=await(0,oc.default)(u(e,this.recursiveKeys()));if(c)return{cid:e,pinned:!0,reason:ut.indirect,parent:c}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){let r=new vm({maxSize:t.cidCacheMaxSize??Em}),n=async(i,o)=>{if(r.has(i.toString()))return;r.set(i.toString(),!0);let s=await this.blockstore.get(i,o),a=await this.loadCodec(i.code),u=Co({bytes:s,cid:i,codec:a});await Promise.all([...u.links()].map(([,c])=>n(c,o)))};await n(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(ut).includes(e))throw xm(e);return!0}};v();var Am=z(ci(),1),km=z(Je(),1);function Sm(e,t){return{open(){return t.open()},close(){return t.close()},query(r,n){return t.query(r,n)},queryKeys(r,n){return t.queryKeys(r,n)},async get(r,n){return t.get(r,n)},async*getMany(r,n){yield*t.getMany(r,n)},async put(r,n,i){await t.put(r,n,i)},async*putMany(r,n){yield*t.putMany(r,n)},has(r,n){return t.has(r,n)},async delete(r,n){return await ac(r,e),t.delete(r,n)},deleteMany(r,n){return t.deleteMany((0,Am.default)(r,async i=>(await ac(i,e),i)),n)},batch(){return t.batch()}}}async function ac(e,t){let{pinned:r,reason:n}=await t.isPinnedWithType(e,ut.all);if(r)throw(0,km.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}v();v();var Tm=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Im=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},uc=e=>globalThis.DOMException===void 0?new Im(e):new DOMException(e),lc=e=>{let t=e.reason===void 0?uc("This operation was aborted."):e.reason;return t instanceof Error?t:uc(t)};function Bm(e,t){let{milliseconds:r,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=t,s,a=new Promise((u,c)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r===Number.POSITIVE_INFINITY){u(e);return}if(t.signal){let{signal:h}=t;h.aborted&&c(lc(h)),h.addEventListener("abort",()=>{c(lc(h))})}s=o.setTimeout.call(void 0,()=>{if(n){try{u(n())}catch(g){c(g)}return}let h=typeof i=="string"?i:`Promise timed out after ${r} milliseconds`,p=i instanceof Error?i:new Tm(h);typeof e.cancel=="function"&&e.cancel(),c(p)},r),(async()=>{try{u(await e)}catch(h){c(h)}finally{o.clearTimeout.call(void 0,s)}})()});return a.clear=()=>{o.clearTimeout.call(void 0,s),s=void 0},a}v();v();var Cm=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");v();var cc="lock:worker:request-read",hc="lock:worker:release-read",fc="lock:master:grant-read",dc="lock:worker:request-write",pc="lock:worker:release-write",yc="lock:master:grant-write";v();var gr={},gn=e=>{e.addEventListener("message",t=>{gn.dispatchEvent("message",e,t)}),e.port!=null&&e.port.addEventListener("message",t=>{gn.dispatchEvent("message",e,t)})};gn.addEventListener=(e,t)=>{gr[e]==null&&(gr[e]=[]),gr[e].push(t)};gn.removeEventListener=(e,t)=>{gr[e]!=null&&(gr[e]=gr[e].filter(r=>r===t))};gn.dispatchEvent=function(e,t,r){gr[e]!=null&&gr[e].forEach(n=>n(t,r))};var gc=gn,wc=(e,t,r,n,i)=>(o,s)=>{if(s.data.type!==r)return;let a={type:s.data.type,name:s.data.name,identifier:s.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:a.name,handler:async()=>(o.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise(u=>{let c=h=>{if(h==null||h.data==null)return;let p={type:h.data.type,name:h.data.name,identifier:h.data.identifier};p.type===n&&p.identifier===a.identifier&&(o.removeEventListener("message",c),u())};o.addEventListener("message",c)}))}}))},bc=(e,t,r,n)=>async()=>{let i=Cm();return globalThis.postMessage({type:t,identifier:i,name:e}),await new Promise(o=>{let s=a=>{if(a==null||a.data==null)return;let u={type:a.data.type,identifier:a.data.identifier};u.type===r&&u.identifier===i&&(globalThis.removeEventListener("message",s),o(()=>{globalThis.postMessage({type:n,identifier:i,name:e})}))};globalThis.addEventListener("message",s)})},Om={singleProcess:!1},Lm=e=>{if(e=Object.assign({},Om,e),Boolean(globalThis.document)||e.singleProcess){let t=new EventTarget;return gc.addEventListener("message",wc(t,"requestReadLock",cc,hc,fc)),gc.addEventListener("message",wc(t,"requestWriteLock",dc,pc,yc)),t}return{isWorker:!0,readLock:t=>bc(t,cc,fc,hc),writeLock:t=>bc(t,dc,yc,pc)}},Ir={},lr;async function Ss(e,t){let r,n=new Promise(i=>{r=i});return e.add(async()=>await Bm((async()=>await new Promise(i=>{r(()=>{i()})}))(),{milliseconds:t.timeout})),await n}var Fm=(e,t)=>{if(lr.isWorker===!0)return{readLock:lr.readLock(e,t),writeLock:lr.writeLock(e,t)};let r=new Kn({concurrency:1}),n;return{async readLock(){if(n!=null)return await Ss(n,t);n=new Kn({concurrency:t.concurrency,autoStart:!1});let i=n,o=Ss(n,t);return r.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await o},async writeLock(){return n=null,await Ss(r,t)}}},Nm={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function Rm(e){let t=Object.assign({},Nm,e);return lr==null&&(lr=Lm(t),lr.isWorker!==!0&&(lr.addEventListener("requestReadLock",r=>{Ir[r.data.name]!=null&&Ir[r.data.name].readLock().then(async n=>await r.data.handler().finally(()=>n()))}),lr.addEventListener("requestWriteLock",async r=>{Ir[r.data.name]!=null&&Ir[r.data.name].writeLock().then(async n=>await r.data.handler().finally(()=>n()))}))),Ir[t.name]==null&&(Ir[t.name]=Fm(t.name,t)),Ir[t.name]}v();ce();var $m=z(mt(),1),Um=z(rg(),1);v();v();v();var mc=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Ts=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new mc(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new mc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function jm(e={}){return Pm(t=>{let r=t.shift();if(r==null)return{done:!0};if(r.error!=null)throw r.error;return{done:r.done===!0,value:r.value}},e)}function Pm(e,t){t=t??{};let r=t.onEnd,n=new Ts,i,o,s,a=async()=>n.isEmpty()?s?{done:!0}:await new Promise((y,b)=>{o=x=>{o=null,n.push(x);try{y(e(n))}catch(E){b(E)}return i}}):e(n),u=y=>o!=null?o(y):(n.push(y),i),c=y=>(n=new Ts,o!=null?o({error:y}):(n.push({error:y}),i)),h=y=>{if(s)return i;if(t?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:y})},p=y=>s?i:(s=!0,y!=null?c(y):u({done:!0})),g=()=>(n=new Ts,p(),{done:!0}),d=y=>(p(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:g,throw:d,push:h,end:p,get readableLength(){return n.size}},r==null)return i;let w=i;return i={[Symbol.asyncIterator](){return this},next(){return w.next()},throw(y){return w.throw(y),r!=null&&(r(y),r=void 0),{done:!0}},return(){return w.return(),r!=null&&(r(),r=void 0),{done:!0}},push:h,end(y){return w.end(y),r!=null&&(r(y),r=void 0),i},get readableLength(){return w.readableLength}},i}var Dm=z(ya(),1),Mm=(...e)=>{let t;for(;e.length>0;)t=e.shift()(t);return t},gd=e=>e!=null&&(typeof e[Symbol.asyncIterator]=="function"||typeof e[Symbol.iterator]=="function"||typeof e.next=="function"),Is=e=>e!=null&&typeof e.sink=="function"&&gd(e.source),zm=e=>t=>{let r=e.sink(t);if(r.then!=null){let n=jm({objectMode:!0});return r.then(()=>{n.end()},i=>{n.end(i)}),(0,Dm.default)(n,async function*(){yield*e.source,n.end()}())}return e.source};function qm(e,...t){if(Is(e)){let n=e;e=()=>n.source}else if(gd(e)){let n=e;e=()=>n}let r=[e,...t];if(r.length>1&&Is(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)Is(r[n])&&(r[n]=zm(r[n]));return Mm(...r)}var vc=z(ya(),1),Ks=z(ci(),1),Vm=z(wn(),1);Ge();var ti=(0,$m.default)("ipfs:repo:gc"),Km=ei().code,Wm=256,Hm=new Pe("/local/filesroot");function Gm({gcLock:e,pins:t,blockstore:r,root:n,loadCodec:i}){async function*o(){let s=Date.now();ti("Creating set of marked blocks");let a=await e.writeLock();try{let u=await Jm({pins:t,blockstore:r,root:n,loadCodec:i}),c=r.queryKeys({});yield*Ym({blockstore:r},u,c),ti(`Complete (${Date.now()-s}ms)`)}finally{a()}}return o}async function Jm({pins:e,blockstore:t,loadCodec:r,root:n}){let i=async function*(){let a;try{a=await n.get(Hm)}catch(c){if(c.code===Km){ti("No blocks in MFS");return}throw c}let u=G.decode(a);yield u,yield*uo(u,t,r)}(),o=(0,vc.default)((0,Ks.default)(e.recursiveKeys(),({cid:a})=>a),e.indirectKeys(),(0,Ks.default)(e.directKeys(),({cid:a})=>a),i),s=new Set;for await(let a of(0,vc.default)(o,i))s.add(ie.encode(a.multihash.bytes));return s}async function*Ym({blockstore:e},t,r){let n=0,i=0;yield*qm((0,Um.default)((0,Ks.default)(r,async o=>async function(){n++;try{let s=ie.encode(o.multihash.bytes);if(t.has(s))return null;try{await e.delete(o),i++}catch(a){return{err:new Error(`Could not delete block with CID ${o}: ${a.message}`)}}return{cid:o}}catch(s){let a=`Could delete block with CID ${o}`;return ti(a,s),{err:new Error(a+`: ${s.message}`)}}}),Wm),o=>(0,Vm.default)(o,Boolean)),ti(`Marked set has ${t.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var Qe=(0,Sw.default)("ipfs:repo"),Qm=Number.MAX_SAFE_INTEGER,Zm="repoAutoMigrate",Xm=class{constructor(e,t,r,n){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=$b(pm,n),this.closed=!0,this.path=e,this.root=r.root,this.datastore=r.datastore,this.keys=r.keys;let i=r.blocks,o=r.pins;this.pins=new _m({pinstore:o,blockstore:i,loadCodec:t});let s=Sm(this.pins,i);this.blocks=cm(s),this.version=Vb(this.root),this.config=tm(this.root),this.spec=nm(this.root),this.apiAddr=im(this.root),this.gcLock=Rm({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=Gm({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){Qe("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(e1(e)),await this.spec.set(t1(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,Zr.default)(new Error("repo is already open"),Mb);Qe("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),Qe("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new qa("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");Qe("creating datastore"),await this.datastore.open(),Qe("creating blocks"),await this.blocks.open(),Qe("creating keystore"),await this.keys.open(),Qe("creating pins"),await this.pins.pinstore.open(),this.closed=!1,Qe("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){Qe("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,Zr.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){Qe("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,Zr.default)(new Error("repo is not initialized yet"),Ui,{path:this.path}):t}if(!e)throw(0,Zr.default)(new Error("repo is not initialized yet"),Ui,{path:this.path})}async close(){if(this.closed)throw(0,Zr.default)(new Error("repo is already closed"),zb);Qe("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==Ui&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),Qe("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,r,n,i]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),Ec(this.datastore),Ec(this.keys)]),o=t.size+n+i;return{repoPath:this.path,storageMax:e,version:r,numObjects:t.count,repoSize:o}}throw(0,Zr.default)(new Error("repo is not initialized yet"),Ui,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(Zm)}catch(t){if(t.code===Fr.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?(Qe(`reverting to version ${e}`),Fb(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(Qe(`migrating to version ${e}`),Lb(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,Nb.default)(e))}catch{return BigInt(Qm)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:r,value:n}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(n.byteLength),t+=BigInt(r.bytes.byteLength);return{count:e,size:t}}};async function Ec(e){let t=BigInt(0);for await(let r of e.query({}))t+=BigInt(r.value.byteLength),t+=BigInt(r.key.uint8Array().byteLength);return t}function wd(e,t,r,n){return new Xm(e,t,r,n)}function e1(e){return e.Datastore=Object.assign({},yd,La(e,"datastore")),e}function t1(e){let t={...yd.Spec,...La(e,"Datastore.Spec")};return{type:t.type,mounts:t.mounts.map(r=>({mountpoint:r.mountpoint,type:r.child.type,path:r.child.path,shardFunc:r.child.shardFunc}))}}v();v();v();ye();Ve();var Kt="/",bd=new TextEncoder().encode(Kt),Pi=bd[0],et=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Pi)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new et(e.join(Kt))}static random(){return new et(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new et(e):typeof e.uint8Array=="function"?new et(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=bd),this._buf[0]!==Pi){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Pi,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Pi;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return et.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Kt).slice(1)}type(){return r1(this.baseNamespace())}name(){return n1(this.baseNamespace())}instance(e){return new et(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Kt)||(e+=Kt),e+=this.type(),new et(e)}parent(){let e=this.list();return e.length===1?new et(Kt):new et(e.slice(0,-1).join(Kt))}child(e){return this.toString()===Kt?e:e.toString()===Kt?this:new et(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return et.withNamespaces([...this.namespaces(),...i1(e.map(t=>t.namespaces()))])}};function r1(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function n1(e){let t=e.split(":");return t[t.length-1]}function i1(e){return[].concat(...e)}v();v();v();ye();Ve();var Wt="/",md=new TextEncoder().encode(Wt),Di=md[0],We=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Di)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new We(e.join(Wt))}static random(){return new We(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new We(e):typeof e.uint8Array=="function"?new We(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=md),this._buf[0]!==Di){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Di,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Di;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return We.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Wt).slice(1)}type(){return o1(this.baseNamespace())}name(){return s1(this.baseNamespace())}instance(e){return new We(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Wt)||(e+=Wt),e+=this.type(),new We(e)}parent(){let e=this.list();return e.length===1?new We(Wt):new We(e.slice(0,-1).join(Wt))}child(e){return this.toString()===Wt?e:e.toString()===Wt?this:new We(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return We.withNamespaces([...this.namespaces(),...a1(e.map(t=>t.namespaces()))])}};function o1(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function s1(e){let t=e.split(":");return t[t.length-1]}function a1(e){return[].concat(...e)}v();var u1="SHARDING",l1="_README";v();v();var c1=z(vo(),1),xc=(e,t)=>async function*(){yield*(await(0,c1.default)(e)).sort(t)}(),_c=z(bn(),1),en=z(wn(),1),Ac=z(Eo(),1),vd=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(let r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(let r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(r,n){e.push({key:r,value:n})},delete(r){t.push(r)},commit:async r=>{await(0,_c.default)(this.putMany(e,r)),e=[],await(0,_c.default)(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(e.prefix!=null&&(r=(0,en.default)(r,n=>n.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>(0,en.default)(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>xc(n,i),r)),e.offset!=null){let n=0;r=(0,en.default)(r,()=>n++>=e.offset)}return e.limit!=null&&(r=(0,Ac.default)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(e.prefix!=null&&(r=(0,en.default)(r,n=>n.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>(0,en.default)(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>xc(n,i),r)),e.offset!=null){let n=0;r=(0,en.default)(r,()=>n++>=e.offset)}return e.limit!=null&&(r=(0,Ac.default)(r,e.limit)),r}};v();var Mi=class extends vd{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw ei();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new We(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new We(e))}};v();var nE=z(ci(),1);v();v();var iE=new We(u1),oE=new We(l1);v();var sE=z(wn(),1),aE=z(Eo(),1),uE=z(ya(),1);v();v();var Yt=z(mt(),1);it();Ge();bo();Yt.default.formatters.b=e=>e==null?"undefined":Oe.baseEncode(e);Yt.default.formatters.t=e=>e==null?"undefined":ie.baseEncode(e);Yt.default.formatters.m=e=>e==null?"undefined":go.baseEncode(e);Yt.default.formatters.p=e=>e==null?"undefined":e.toString();Yt.default.formatters.c=e=>e==null?"undefined":e.toString();Yt.default.formatters.k=e=>e==null?"undefined":e.toString();function h1(e){return Object.assign((0,Yt.default)(e),{error:(0,Yt.default)(`${e}:error`),trace:(0,Yt.default)(`${e}:trace`)})}v();v();var lE=z(bn(),1),cE=h1("datastore:core:tiered");v();var zi=z(wn(),1),f1=z(ci(),1),kc=z(Eo(),1),Sc=z(sg(),1),d1=z(_g(),1),Ln=class extends vd{constructor(e,t={}){super(),this.db=typeof e=="string"?new d1.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw on.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(r){throw on.dbWriteFailedError(r)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(r){throw r.notFound?on.notFoundError(r):on.dbWriteFailedError(r)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw on.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,r)=>{e.push({type:"put",key:t.toString(),value:r})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((i,o)=>(0,zi.default)(i,o),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((i,o)=>(0,Sc.default)(i,o),t));let{offset:r,limit:n}=e;if(r){let i=0;t=(0,zi.default)(t,()=>i++>=r)}return n&&(t=(0,kc.default)(t,n)),t}queryKeys(e){let t=(0,f1.default)(this._query({values:!1,prefix:e.prefix}),({key:i})=>i);Array.isArray(e.filters)&&(t=e.filters.reduce((i,o)=>(0,zi.default)(i,o),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((i,o)=>(0,Sc.default)(i,o),t));let{offset:r,limit:n}=e;if(r){let i=0;t=(0,zi.default)(t,()=>i++>=r)}return n&&(t=(0,kc.default)(t,n)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let n=e.prefix.toString();t.gte=n,t.lt=n+"\xFF"}let r=this.db.iterator(t);if(r[Symbol.asyncIterator])return p1(r);if(r.next!=null&&r.end!=null)return y1(r);throw new Error("Level returned incompatible iterator")}};async function*p1(e){for await(let[t,r]of e)yield{key:new et(t,!1),value:r};await e.close()}function y1(e){return{[Symbol.asyncIterator](){return{next:()=>new Promise((t,r)=>{e.next((n,i,o)=>{if(n)return r(n);if(i==null)return e.end(s=>{if(s)return r(s);t({done:!0,value:void 0})});t({done:!1,value:{key:new et(i,!1),value:o}})})}),return:()=>new Promise((t,r)=>{e.end(n=>{if(n)return r(n);t({done:!0,value:void 0})})})}}}}v();var Tc=z(bn(),1);v();v();var Ic=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Bs=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Ic(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new Ic(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function Bc(e={}){return g1(t=>{let r=t.shift();if(r==null)return{done:!0};if(r.error!=null)throw r.error;return{done:r.done===!0,value:r.value}},e)}function g1(e,t){t=t??{};let r=t.onEnd,n=new Bs,i,o,s,a=async()=>n.isEmpty()?s?{done:!0}:await new Promise((y,b)=>{o=x=>{o=null,n.push(x);try{y(e(n))}catch(E){b(E)}return i}}):e(n),u=y=>o!=null?o(y):(n.push(y),i),c=y=>(n=new Bs,o!=null?o({error:y}):(n.push({error:y}),i)),h=y=>{if(s)return i;if(t?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:y})},p=y=>s?i:(s=!0,y!=null?c(y):u({done:!0})),g=()=>(n=new Bs,p(),{done:!0}),d=y=>(p(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:g,throw:d,push:h,end:p,get readableLength(){return n.size}},r==null)return i;let w=i;return i={[Symbol.asyncIterator](){return this},next(){return w.next()},throw(y){return w.throw(y),r!=null&&(r(y),r=void 0),{done:!0}},return(){return w.return(),r!=null&&(r(),r=void 0),{done:!0}},push:h,end(y){return w.end(y),r!=null&&(r(y),r=void 0),i},get readableLength(){return w.readableLength}},i}v();ye();Ve();var Ht="/",Ed=new TextEncoder().encode(Ht),qi=Ed[0],lt=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==qi)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new lt(e.join(Ht))}static random(){return new lt(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new lt(e):typeof e.uint8Array=="function"?new lt(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Ed),this._buf[0]!==qi){let e=new Uint8Array(this._buf.byteLength+1);e.fill(qi,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===qi;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return lt.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Ht).slice(1)}type(){return w1(this.baseNamespace())}name(){return b1(this.baseNamespace())}instance(e){return new lt(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Ht)||(e+=Ht),e+=this.type(),new lt(e)}parent(){let e=this.list();return e.length===1?new lt(Ht):new lt(e.slice(0,-1).join(Ht))}child(e){return this.toString()===Ht?e:e.toString()===Ht?this:new lt(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return lt.withNamespaces([...this.namespaces(),...m1(e.map(t=>t.namespaces()))])}};function w1(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function b1(e){let t=e.split(":");return t[t.length-1]}function m1(e){return[].concat(...e)}ce();xr();He();Ge();it();var v1=z(Je(),1);v();var Cc=z(bn(),1),tn=z(wn(),1),Oc=z(Eo(),1),E1=z(vo(),1),Lc=(e,t)=>async function*(){yield*(await(0,E1.default)(e)).sort(t)}(),xd=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(let r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(let r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(r,n){e.push({key:r,value:n})},delete(r){t.push(r)},commit:async r=>{await(0,Cc.default)(this.putMany(e,r)),e=[],await(0,Cc.default)(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(e.prefix!=null&&(r=(0,tn.default)(r,n=>n.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>(0,tn.default)(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>Lc(n,i),r)),e.offset!=null){let n=0;r=(0,tn.default)(r,()=>n++>=(e.offset||0))}return e.limit!=null&&(r=(0,Oc.default)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(e.prefix!=null&&(r=(0,tn.default)(r,n=>n.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>(0,tn.default)(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>Lc(n,i),r)),e.offset!=null){let n=0;r=(0,tn.default)(r,()=>n++>=e.offset)}return e.limit!=null&&(r=(0,Oc.default)(r,e.limit)),r}};function rn(e){let t=G.asCID(e);if(!t)throw(0,v1.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new lt("/"+ie.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function wr(e){return G.createV1(Or,Xe(ie.decode("b"+e.toString().slice(1).toLowerCase())))}function Va(e){let t=e.substring(0,1);if(t==="/")return Va(e.substring(1));let r;t.toLowerCase()==="b"?r=o=>ie.decode(o.toLowerCase()).subarray(2):t.toLowerCase()==="c"?r=o=>sa.decode(o.toLowerCase()).subarray(2):t==="z"?r=o=>Oe.decode(o).subarray(2):t==="Q"?r=o=>Oe.decode("z"+o):r=o=>ie.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<e.length;o++)try{n=r(e.substring(0,o))}catch(s){if(s.message!=="Unexpected end of data")throw s}let i="/C";return n&&(i=`/${ie.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function x1(e){return{...e,prefix:e.prefix?Va(e.prefix):void 0,filters:e.filters?e.filters.map(t=>r=>t({key:wr(r.key),value:r.value})):void 0,orders:e.orders?e.orders.map(t=>(r,n)=>t({key:wr(r.key),value:r.value},{key:wr(n.key),value:n.value})):void 0}}function _1(e){return{...e,prefix:e.prefix?Va(e.prefix):void 0,filters:e.filters?e.filters.map(t=>r=>t(wr(r))):void 0,orders:e.orders?e.orders.map(t=>(r,n)=>t(wr(r),wr(n))):void 0}}var A1=class extends xd{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:r,value:n}of this.child.query(x1(e),t))yield{key:wr(r),value:n}}async*queryKeys(e,t){for await(let r of this.child.queryKeys(_1(e),t))yield wr(r)}async get(e,t){return this.child.get(rn(e),t)}async*getMany(e,t){for await(let r of e)yield this.get(r,t)}async put(e,t,r){await this.child.put(rn(e),t,r)}async*putMany(e,t){let r=Bc({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let n=this.child;await(0,Tc.default)(this.child.putMany(async function*(){for await(let i of e){let o=rn(i.key);await n.has(o,t)||(yield{key:o,value:i.value}),r.push(i)}}())),r.end()}catch(n){r.end(n)}}),yield*r}has(e,t){return this.child.has(rn(e),t)}delete(e,t){return this.child.delete(rn(e),t)}deleteMany(e,t){let r=Bc({objectMode:!0});return(0,Tc.default)(this.child.deleteMany(async function*(){for await(let n of e)yield rn(n),r.push(n);r.end()}(),t)).catch(n=>{r.end(n)}),r}};function k1(e,t,r){let n=r.path||"ipfs";return wd(n,i=>t.getCodec(i),{root:new Ln(n,{prefix:"",version:2}),blocks:new A1(new Ln(`${n}/blocks`,{prefix:"",version:2})),datastore:new Ln(`${n}/datastore`,{prefix:"",version:2}),keys:new Ln(`${n}/keys`,{prefix:"",version:2}),pins:new Ln(`${n}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||e,repoLock:pd})}v();v();ce();v();var S1=z(Sg(),1),T1=z(Tg(),1);v();var I1=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;ee.nanosecond=ee.ns=1/1e6;ee.\u00B5s=ee.\u03BCs=ee.us=ee.microsecond=1/1e3;ee.millisecond=ee.ms=ee[""]=1;ee.second=ee.sec=ee.s=ee.ms*1e3;ee.minute=ee.min=ee.m=ee.s*60;ee.hour=ee.hr=ee.h=ee.m*60;ee.day=ee.d=ee.h*24;ee.week=ee.wk=ee.w=ee.d*7;ee.month=ee.b=ee.d*(365.25/12);ee.year=ee.yr=ee.y=ee.d*365.25;function ee(e="",t="ms"){var r=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(I1,function(n,i,o){o=Fc(o),o&&(r=(r||0)+parseFloat(i,10)*o)}),r&&r/(Fc(t)||1)}function Fc(e){return ee[e]||ee[e.toLowerCase().replace(/s$/,"")]}var B1=ee;v();var Wn=class extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=Wn.code}};Wn.code="ERR_TIMEOUT";function An(e,t){return(...r)=>{let n=r[t??r.length-1];if(!n||!n.timeout)return e(...r);let i=typeof n.timeout=="string"?B1(n.timeout):n.timeout,o=new S1.TimeoutController(i);n.signal=(0,T1.anySignal)([n.signal,o.signal]);let s=e(...r),a=new Promise((h,p)=>{o.signal.addEventListener("abort",()=>{p(new Wn)})}),u=Date.now(),c=()=>{if(o.signal.aborted)throw new Wn;if(Date.now()-u>i)throw o.abort(),new Wn};return s[Symbol.asyncIterator]?async function*(){let h=s[Symbol.asyncIterator]();try{for(;;){let{value:p,done:g}=await Promise.race([h.next(),a]);if(g)break;c(),yield p}}catch(p){throw c(),p}finally{o.clear(),h.return&&h.return()}}():(async()=>{try{let h=await Promise.race([s,a]);return c(),h}catch(h){throw c(),h}finally{o.clear()}})()}}v();var Qt=z(mt(),1);it();Ge();bo();Qt.default.formatters.b=e=>e==null?"undefined":Oe.baseEncode(e);Qt.default.formatters.t=e=>e==null?"undefined":ie.baseEncode(e);Qt.default.formatters.m=e=>e==null?"undefined":go.baseEncode(e);Qt.default.formatters.p=e=>e==null?"undefined":e.toString();Qt.default.formatters.c=e=>e==null?"undefined":e.toString();Qt.default.formatters.k=e=>e==null?"undefined":e.toString();function _d(e){return Object.assign((0,Qt.default)(e),{error:(0,Qt.default)(`${e}:error`),trace:(0,Qt.default)(`${e}:trace`)})}xr();Yh();v();it();var Ad=async({cid:e,load:t,seen:r})=>{r=r||new Set;let n=e.toString(Oe);if(r.has(n))return;let i=await t(e);if(r.add(n),i!==null)for(let[,o]of i.links())await Ad({cid:o,load:t,seen:r})},kd=_d("ipfs:components:dag:import"),C1=[Or,la];function O1({repo:e,preload:t,codecs:r}){async function*n(i,o={}){o.preload!==!1&&t(i);let s=G.asCID(i);if(!s)throw new Error(`Unexpected error converting CID type: ${i}`);kd(`Exporting ${s} as car`);let{writer:a,out:u}=await Ps.create([s]),c=null;(async()=>{try{let h=L1(e,a,{signal:o.signal,timeout:o.timeout},r);await Ad({cid:s,load:h})}catch(h){c=h}finally{a.close()}})();for await(let h of u){if(c)break;yield h}if(c)throw c}return An(n)}function L1(e,t,r,n){return async i=>{let o=await n.getCodec(i.code);if(!o)throw new Error(`Can't decode links in block with codec 0x${i.code.toString(16)} to form complete DAG`);let s=await e.blocks.get(i,r);return kd(`Adding block ${i} to car`),await t.put({cid:i,bytes:s}),C1.includes(i.code)?null:Co({bytes:s,cid:i,codec:o})}}v();var F1=z(uf(),1),N1=z(Ig(),1);v();v();it();Ge();He();v();v();v();v();v();v();var Nc="[a-fA-F\\d:]",dr=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${Nc})|(?<=${Nc})(?=\\s|$))`:"",wt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Ie="[a-fA-F\\d]{1,4}",Fo=`
(?:
(?:${Ie}:){7}(?:${Ie}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Ie}:){6}(?:${wt}|:${Ie}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Ie}:){5}(?::${wt}|(?::${Ie}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Ie}:){4}(?:(?::${Ie}){0,1}:${wt}|(?::${Ie}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Ie}:){3}(?:(?::${Ie}){0,2}:${wt}|(?::${Ie}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Ie}:){2}(?:(?::${Ie}){0,3}:${wt}|(?::${Ie}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Ie}:){1}(?:(?::${Ie}){0,4}:${wt}|(?::${Ie}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Ie}){0,5}:${wt}|(?::${Ie}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),R1=new RegExp(`(?:^${wt}$)|(?:^${Fo}$)`),$1=new RegExp(`^${wt}$`),U1=new RegExp(`^${Fo}$`),Ka=e=>e&&e.exact?R1:new RegExp(`(?:${dr(e)}${wt}${dr(e)})|(?:${dr(e)}${Fo}${dr(e)})`,"g");Ka.v4=e=>e&&e.exact?$1:new RegExp(`${dr(e)}${wt}${dr(e)}`,"g");Ka.v6=e=>e&&e.exact?U1:new RegExp(`${dr(e)}${Fo}${dr(e)}`,"g");var Wa=Ka;v();v();function j1(e){let t=(...r)=>e(...r);return Object.defineProperty(t,"name",{value:`functionTimeout(${e.name||"<anonymous>"})`,configurable:!0}),t}function P1(){return!1}v();v();v();var{toString:D1}=Object.prototype;function M1(e){return D1.call(e)==="[object RegExp]"}var Rc={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function z1(e,t={}){if(!M1(e))throw new TypeError("Expected a RegExp instance");let r=Object.keys(Rc).map(i=>(typeof t[i]=="boolean"?t[i]:e[i])?Rc[i]:"").join(""),n=new RegExp(t.source||e.source,r);return n.lastIndex=typeof t.lastIndex=="number"?t.lastIndex:e.lastIndex,n}function Ha(e,t,{timeout:r}={}){try{return j1(()=>z1(e).test(t),{timeout:r})()}catch(n){if(P1(n))return!1;throw n}}var q1=15,Sd=45,Ga={timeout:400};function No(e){return Ha(Wa({exact:!0}),e.slice(0,Sd),Ga)}function Td(e){return Ha(Wa.v6({exact:!0}),e.slice(0,Sd),Ga)}function Id(e){return Ha(Wa.v4({exact:!0}),e.slice(0,q1),Ga)}ye();var $c=Id,V1=Td,Bd=function(e){let t=0;if(e=e.toString().trim(),$c(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(V1(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let o=$c(r[n]),s;o&&(s=Bd(r[n]),r[n]=re(s.slice(0,2),"base16")),s!=null&&++n<8&&r.splice(n,0,re(s.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}let i=new Uint8Array(t+16);for(n=0;n<r.length;n++){let o=parseInt(r[n],16);i[t++]=o>>8&255,i[t++]=o&255}return i}throw new Error("invalid ip address")},K1=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let i=[];for(let o=0;o<r;o++)i.push(e[t+o]);return i.join(".")}if(r===16){let i=[];for(let o=0;o<r;o+=2)i.push(n.getUint16(t+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};v();var lo={},Ws={},W1=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];W1.forEach(e=>{let t=H1(...e);Ws[t.code]=t,lo[t.name]=t});function H1(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}function De(e){if(typeof e=="number"){if(Ws[e]!=null)return Ws[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(lo[e]!=null)return lo[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}ce();Ge();it();mo();He();var Zt=z(nt(),1);ye();Ve();Ur();function G1(e,t){switch(De(e).code){case 4:case 41:return Q1(t);case 6:case 273:case 33:case 132:return Cd(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return X1(t);case 421:return nv(t);case 444:return jc(t);case 445:return jc(t);case 466:return rv(t);default:return re(t,"base16")}}function J1(e,t){switch(De(e).code){case 4:return Uc(t);case 41:return Uc(t);case 6:case 273:case 33:case 132:return Ja(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return Z1(t);case 421:return ev(t);case 444:return iv(t);case 445:return ov(t);case 466:return tv(t);default:return Ue(t,"base16")}}var Cs=Object.values(Yn).map(e=>e.decoder),Y1=function(){let e=Cs[0].or(Cs[1]);return Cs.slice(2).forEach(t=>e=e.or(t)),e}();function Uc(e){if(!No(e))throw new Error("invalid ip address");return Bd(e)}function Q1(e){let t=K1(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!No(t))throw new Error("invalid ip address");return t}function Ja(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Cd(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Z1(e){let t=Ue(e),r=Uint8Array.from(Zt.default.encode(t.length));return $e([r,t],r.length+t.length)}function X1(e){let t=Zt.default.decode(e);if(e=e.slice(Zt.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return re(e)}function ev(e){let t;e[0]==="Q"||e[0]==="1"?t=Xe(Oe.decode(`z${e}`)).bytes:t=G.parse(e).multihash.bytes;let r=Uint8Array.from(Zt.default.encode(t.length));return $e([r,t],r.length+t.length)}function tv(e){let t=Y1.decode(e),r=Uint8Array.from(Zt.default.encode(t.length));return $e([r,t],r.length+t.length)}function rv(e){let t=Zt.default.decode(e),r=e.slice(Zt.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+re(r,"base64url")}function nv(e){let t=Zt.default.decode(e),r=e.slice(Zt.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return re(r,"base58btc")}function iv(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=ie.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Ja(n);return $e([r,i],r.length+i.length)}function ov(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=ie.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Ja(n);return $e([r,i],r.length+i.length)}function jc(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=re(t,"base32"),i=Cd(r);return`${n}:${i}`}var ri=z(nt(),1);Ur();ye();function sv(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],o=De(i);if(o.size===0){t.push([i]);continue}if(n++,n>=r.length)throw Nd("invalid address: "+e);if(o.path===!0){t.push([i,Qa(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}function av(e){let t=[];return e.map(r=>{let n=Ro(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),Qa(t.join("/"))}function uv(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=Ro(t);return t.length>1?[r.code,J1(r.code,t[1])]:[r.code]})}function Od(e){return e.map(t=>{let r=Ro(t);return t[1]!=null?[r.code,G1(r.code,t[1])]:[r.code]})}function Ld(e){return Hs($e(e.map(t=>{let r=Ro(t),n=Uint8Array.from(ri.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=$e([n,t[1]])),n})))}function Fd(e,t){return e.size>0?e.size/8:e.size===0?0:ri.default.decode(t)+ri.default.decode.bytes}function Ya(e){let t=[],r=0;for(;r<e.length;){let n=ri.default.decode(e,r),i=ri.default.decode.bytes,o=De(n),s=Fd(o,e.slice(r+i));if(s===0){t.push([n]),r+=i;continue}let a=e.slice(r+i,r+i+s);if(r+=s+i,r>e.length)throw Nd("Invalid address Uint8Array: "+re(e,"base16"));t.push([n,a])}return t}function Pc(e){let t=Ya(e),r=Od(t);return av(r)}function lv(e){e=Qa(e);let t=sv(e),r=uv(t);return Ld(r)}function cv(e){return lv(e)}function Hs(e){let t=hv(e);if(t!=null)throw t;return Uint8Array.from(e)}function hv(e){try{Ya(e)}catch(t){return t}}function Qa(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function Nd(e){return new Error("Error parsing address: "+e)}function Ro(e){return De(e[0])}var Dc=z(nt(),1);ce();it();var fv=z(Je(),1);ye();pa();var Mc,dv=Symbol.for("nodejs.util.inspect.custom"),zc=[De("dns").code,De("dns4").code,De("dns6").code,De("dnsaddr").code],pv=[De("p2p").code,De("ipfs").code],yv=new Map,Rd=Symbol.for("@multiformats/js-multiaddr/multiaddr");function gv(e){return Boolean(e?.[Rd])}var Fn=class{constructor(e){if(this[Mc]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=Hs(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=cv(e)}else if(gv(e))this.bytes=Hs(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this._string==null&&(this._string=Pc(this.bytes)),this._string}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),r,n;if(t.length>2)zc.includes(e[0])&&pv.includes(e[1])?(r=De("tcp").name,n=443):(r=De(t[2]).name,n=parseInt(t[3]));else if(zc.includes(e[0]))r=De("tcp").name,n=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:r,port:n}}protos(){return this.protoCodes().map(e=>Object.assign({},De(e)))}protoCodes(){let e=[],t=this.bytes,r=0;for(;r<t.length;){let n=Dc.default.decode(t,r),i=Dc.default.decode.bytes,o=De(n);r+=Fd(o,t.slice(r+i))+i,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return this._tuples==null&&(this._tuples=Ya(this.bytes)),this._tuples}stringTuples(){return this._stringTuples==null&&(this._stringTuples=Od(this.tuples())),this._stringTuples}encapsulate(e){return e=new Fn(e),new Fn(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Fn(r.slice(0,n))}decapsulateCode(e){let t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new Fn(Ld(t.slice(0,r)));return this}getPeerId(){try{let e=this.stringTuples().filter(t=>t[0]===lo.ipfs.code).pop();if(e?.[1]!=null){let t=e[1];return t[0]==="Q"||t[0]==="1"?re(Oe.decode(`z${t}`),"base58btc"):re(G.parse(t).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>De(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return da(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(n=>n.resolvable);if(t==null)return[this];let r=yv.get(t.name);if(r==null)throw(0,fv.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,e)).map(n=>new Fn(n))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(Mc=Rd,dv)](){return this.inspect()}inspect(){return"<Multiaddr "+re(this.bytes,"base16")+" - "+Pc(this.bytes)+">"}};v();v();v();v();v();ye();var qc=Id,wv=Td,$d=function(e){let t=0;if(e=e.toString().trim(),qc(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(wv(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let o=qc(r[n]),s;o&&(s=$d(r[n]),r[n]=re(s.slice(0,2),"base16")),s!=null&&++n<8&&r.splice(n,0,re(s.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}let i=new Uint8Array(t+16);for(n=0;n<r.length;n++){let o=parseInt(r[n],16);i[t++]=o>>8&255,i[t++]=o&255}return i}throw new Error("invalid ip address")},bv=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let i=[];for(let o=0;o<r;o++)i.push(e[t+o]);return i.join(".")}if(r===16){let i=[];for(let o=0;o<r;o+=2)i.push(n.getUint16(t+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};v();var co={},Gs={},mv=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];mv.forEach(e=>{let t=vv(...e);Gs[t.code]=t,co[t.name]=t});function vv(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}function Me(e){if(typeof e=="number"){if(Gs[e]!=null)return Gs[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(co[e]!=null)return co[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}ce();Ge();it();mo();He();var Xt=z(nt(),1);ye();Ve();Ur();function Ev(e,t){switch(Me(e).code){case 4:case 41:return Av(t);case 6:case 273:case 33:case 132:return Ud(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return Sv(t);case 421:return Cv(t);case 444:return Kc(t);case 445:return Kc(t);case 466:return Bv(t);default:return re(t,"base16")}}function xv(e,t){switch(Me(e).code){case 4:return Vc(t);case 41:return Vc(t);case 6:case 273:case 33:case 132:return Za(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return kv(t);case 421:return Tv(t);case 444:return Ov(t);case 445:return Lv(t);case 466:return Iv(t);default:return Ue(t,"base16")}}var Os=Object.values(Yn).map(e=>e.decoder),_v=function(){let e=Os[0].or(Os[1]);return Os.slice(2).forEach(t=>e=e.or(t)),e}();function Vc(e){if(!No(e))throw new Error("invalid ip address");return $d(e)}function Av(e){let t=bv(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!No(t))throw new Error("invalid ip address");return t}function Za(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Ud(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function kv(e){let t=Ue(e),r=Uint8Array.from(Xt.default.encode(t.length));return $e([r,t],r.length+t.length)}function Sv(e){let t=Xt.default.decode(e);if(e=e.slice(Xt.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return re(e)}function Tv(e){let t;e[0]==="Q"||e[0]==="1"?t=Xe(Oe.decode(`z${e}`)).bytes:t=G.parse(e).multihash.bytes;let r=Uint8Array.from(Xt.default.encode(t.length));return $e([r,t],r.length+t.length)}function Iv(e){let t=_v.decode(e),r=Uint8Array.from(Xt.default.encode(t.length));return $e([r,t],r.length+t.length)}function Bv(e){let t=Xt.default.decode(e),r=e.slice(Xt.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+re(r,"base64url")}function Cv(e){let t=Xt.default.decode(e),r=e.slice(Xt.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return re(r,"base58btc")}function Ov(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=ie.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Za(n);return $e([r,i],r.length+i.length)}function Lv(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=ie.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Za(n);return $e([r,i],r.length+i.length)}function Kc(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=re(t,"base32"),i=Ud(r);return`${n}:${i}`}var ni=z(nt(),1);Ur();ye();function Fv(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],o=Me(i);if(o.size===0){t.push([i]);continue}if(n++,n>=r.length)throw Md("invalid address: "+e);if(o.path===!0){t.push([i,eu(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}function Nv(e){let t=[];return e.map(r=>{let n=$o(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),eu(t.join("/"))}function Rv(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=$o(t);return t.length>1?[r.code,xv(r.code,t[1])]:[r.code]})}function jd(e){return e.map(t=>{let r=$o(t);return t[1]!=null?[r.code,Ev(r.code,t[1])]:[r.code]})}function Pd(e){return Js($e(e.map(t=>{let r=$o(t),n=Uint8Array.from(ni.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=$e([n,t[1]])),n})))}function Dd(e,t){return e.size>0?e.size/8:e.size===0?0:ni.default.decode(t)+ni.default.decode.bytes}function Xa(e){let t=[],r=0;for(;r<e.length;){let n=ni.default.decode(e,r),i=ni.default.decode.bytes,o=Me(n),s=Dd(o,e.slice(r+i));if(s===0){t.push([n]),r+=i;continue}let a=e.slice(r+i,r+i+s);if(r+=s+i,r>e.length)throw Md("Invalid address Uint8Array: "+re(e,"base16"));t.push([n,a])}return t}function Wc(e){let t=Xa(e),r=jd(t);return Nv(r)}function $v(e){e=eu(e);let t=Fv(e),r=Rv(t);return Pd(r)}function Uv(e){return $v(e)}function Js(e){let t=jv(e);if(t!=null)throw t;return Uint8Array.from(e)}function jv(e){try{Xa(e)}catch(t){return t}}function eu(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function Md(e){return new Error("Error parsing address: "+e)}function $o(e){return Me(e[0])}var Hc=z(nt(),1);ce();it();var Pv=z(Je(),1);ye();pa();var Gc,Dv=Symbol.for("nodejs.util.inspect.custom"),Jc=[Me("dns").code,Me("dns4").code,Me("dns6").code,Me("dnsaddr").code],Mv=[Me("p2p").code,Me("ipfs").code],zv=new Map,zd=Symbol.for("@multiformats/js-multiaddr/multiaddr");function qv(e){return Boolean(e?.[zd])}var sn=class{constructor(e){if(this[Gc]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=Js(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Uv(e)}else if(qv(e))this.bytes=Js(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this._string==null&&(this._string=Wc(this.bytes)),this._string}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),r,n;if(t.length>2)Jc.includes(e[0])&&Mv.includes(e[1])?(r=Me("tcp").name,n=443):(r=Me(t[2]).name,n=parseInt(t[3]));else if(Jc.includes(e[0]))r=Me("tcp").name,n=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:r,port:n}}protos(){return this.protoCodes().map(e=>Object.assign({},Me(e)))}protoCodes(){let e=[],t=this.bytes,r=0;for(;r<t.length;){let n=Hc.default.decode(t,r),i=Hc.default.decode.bytes,o=Me(n);r+=Dd(o,t.slice(r+i))+i,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return this._tuples==null&&(this._tuples=Xa(this.bytes)),this._tuples}stringTuples(){return this._stringTuples==null&&(this._stringTuples=jd(this.tuples())),this._stringTuples}encapsulate(e){return e=new sn(e),new sn(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new sn(r.slice(0,n))}decapsulateCode(e){let t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new sn(Pd(t.slice(0,r)));return this}getPeerId(){try{let e=this.stringTuples().filter(t=>t[0]===co.ipfs.code).pop();if(e?.[1]!=null){let t=e[1];return t[0]==="Q"||t[0]==="1"?re(Oe.decode(`z${t}`),"base58btc"):re(G.parse(t).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>Me(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return da(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(n=>n.resolvable);if(t==null)return[this];let r=zv.get(t.name);if(r==null)throw(0,Pv.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,e)).map(n=>new sn(n))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(Gc=zd,Dv)](){return this.inspect()}inspect(){return"<Multiaddr "+re(this.bytes,"base16")+" - "+Wc(this.bytes)+">"}};function qd(e){return new sn(e)}var Vv=Y("dns4"),Kv=Y("dns6"),Wv=Y("dnsaddr"),kn=Ke(Y("dns"),Wv,Vv,Kv),Uo=Ke(Y("ip4"),Y("ip6")),gi=Ke(X(Uo,Y("tcp")),X(kn,Y("tcp"))),Vd=X(Uo,Y("udp")),Hv=X(Vd,Y("utp")),Gv=X(Vd,Y("quic")),ii=Ke(X(gi,Y("ws")),X(kn,Y("ws"))),oi=Ke(X(gi,Y("wss")),X(kn,Y("wss"))),Ys=Ke(X(gi,Y("http")),X(Uo,Y("http")),X(kn,Y("http"))),Qs=Ke(X(gi,Y("https")),X(Uo,Y("https")),X(kn,Y("https"))),Kd=Ke(X(ii,Y("p2p-webrtc-star"),Y("p2p")),X(oi,Y("p2p-webrtc-star"),Y("p2p")),X(ii,Y("p2p-webrtc-star")),X(oi,Y("p2p-webrtc-star"))),hE=Ke(X(ii,Y("p2p-websocket-star"),Y("p2p")),X(oi,Y("p2p-websocket-star"),Y("p2p")),X(ii,Y("p2p-websocket-star")),X(oi,Y("p2p-websocket-star"))),Wd=Ke(X(Ys,Y("p2p-webrtc-direct"),Y("p2p")),X(Qs,Y("p2p-webrtc-direct"),Y("p2p")),X(Ys,Y("p2p-webrtc-direct")),X(Qs,Y("p2p-webrtc-direct"))),si=Ke(ii,oi,Ys,Qs,Kd,Wd,gi,Hv,Gv,kn),fE=Ke(X(si,Y("p2p-stardust"),Y("p2p")),X(si,Y("p2p-stardust"))),pr=Ke(X(si,Y("p2p")),Kd,Wd,Y("p2p")),Yc=Ke(X(pr,Y("p2p-circuit"),pr),X(pr,Y("p2p-circuit")),X(Y("p2p-circuit"),pr),X(si,Y("p2p-circuit")),X(Y("p2p-circuit"),si),Y("p2p-circuit")),Hd=()=>Ke(X(Yc,Hd),Yc),Nn=Hd(),dE=Ke(X(Nn,pr,Nn),X(pr,Nn),X(Nn,pr),Nn,pr);function Gd(e){function t(r){let n;try{n=qd(r)}catch{return!1}let i=e(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return t}function X(...e){function t(r){if(r.length<e.length)return null;let n=r;return e.some(i=>(n=typeof i=="function"?i().partialMatch(r):i.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:Gd(t),partialMatch:t}}function Ke(...e){function t(r){let n=null;return e.some(i=>{let o=typeof i=="function"?i().partialMatch(r):i.partialMatch(r);return o!=null?(n=o,!0):!1}),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:Gd(t),partialMatch:t}}function Y(e){let t=e;function r(i){let o;try{o=qd(i)}catch{return!1}let s=o.protoNames();return s.length===1&&s[0]===t}function n(i){return i.length===0?null:i[0]===t?i.slice(1):null}return{toString:function(){return t},matches:r,partialMatch:n}}ce();var pE=z(Cg(),1);ye();ce();v();ye();Ve();var Gt="/",Jd=new TextEncoder().encode(Gt),Vi=Jd[0],ct=class{constructor(e,t){if(typeof e=="string")this._buf=Ue(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Vi)throw new Error("Invalid key")}toString(e="utf8"){return re(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new ct(e.join(Gt))}static random(){return new ct(_n().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new ct(e):typeof e.uint8Array=="function"?new ct(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Jd),this._buf[0]!==Vi){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Vi,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Vi;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return ct.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Gt).slice(1)}type(){return Jv(this.baseNamespace())}name(){return Yv(this.baseNamespace())}instance(e){return new ct(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Gt)||(e+=Gt),e+=this.type(),new ct(e)}parent(){let e=this.list();return e.length===1?new ct(Gt):new ct(e.slice(0,-1).join(Gt))}child(e){return this.toString()===Gt?e:e.toString()===Gt?this:new ct(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return ct.withNamespaces([...this.namespaces(),...Qv(e.map(t=>t.namespaces()))])}};function Jv(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function Yv(e){let t=e.split(":");return t[t.length-1]}function Qv(e){return[].concat(...e)}var Qc=z(Je(),1);v();ce();var Zc=z(Je(),1),Xc="/ipfs/";function Yd(e){if(e instanceof Uint8Array)try{e=G.decode(e)}catch(i){throw(0,Zc.default)(i,"ERR_INVALID_CID")}let t=G.asCID(e);if(t)return{cid:t,path:void 0};e=e.toString(),e.startsWith(Xc)&&(e=e.substring(Xc.length));let r=e.split("/"),n;try{t=G.parse(r.shift()||"")}catch(i){throw(0,Zc.default)(i,"ERR_INVALID_CID")}return r.length&&(n=`/${r.join("/")}`),{cid:t,path:n}}var yE=new ct("/local/filesroot"),Zv=async function(e,t,r,n={}){let{cid:i,path:o}=Yd(r);o&&(n.path=o);let s=i,a=n.path||"";if(a.startsWith("/")&&(a=a.substring(1)),n.path)try{for await(let{value:u,remainderPath:c}of Zs(i,n.path,t,e,{signal:n.signal})){if(!G.asCID(u))break;a=c,s=u}}catch(u){throw u.message.startsWith("Object has no property")&&(u.message=`no link named "${a.split("/")[0]}" under ${s}`,u.code="ERR_NO_LINK"),u}return{cid:s,remainderPath:a||""}},gE=An(async(e,t)=>await e),Zs=async function*(e,t,r,n,i){let o=async c=>{let h=await r.getCodec(c.code),p=await n.blocks.get(c,i);return h.decode(p)},s=t.split("/").filter(Boolean),a=await o(e),u=e;for(;s.length;){let c=s.shift();if(!c)throw(0,Qc.default)(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(e.code===hr&&Array.isArray(a.Links)){let h=a.Links.find(p=>p.Name===c);if(h){yield{value:h.Hash,remainderPath:s.join("/")},a=await o(h.Hash),u=h.Hash;continue}}if(Object.prototype.hasOwnProperty.call(a,c))a=a[c],yield{value:a,remainderPath:s.join("/")};else throw(0,Qc.default)(new Error(`no link named "${c}" under ${u}`),"ERR_NO_LINK");G.asCID(a)&&(u=a,a=await o(a))}yield{value:a,remainderPath:""}},Xv=z(Je(),1);function e2({codecs:e,repo:t,preload:r}){return An(async function(n,i={}){if(i.preload!==!1&&r(n),i.path){let a=i.localResolve?await(0,F1.default)(Zs(n,i.path,e,t,i)):await(0,N1.default)(Zs(n,i.path,e,t,i));if(!a)throw(0,Xv.default)(new Error("Not found"),"ERR_NOT_FOUND");return a}let o=await e.getCodec(n.code),s=await t.blocks.get(n,i);return{value:o.decode(s),remainderPath:""}})}v();var t2=z(Og(),1),r2=z(bn(),1),n2=z(ci(),1),Qd=_d("ipfs:components:dag:import");function i2({repo:e}){async function*t(r,n={}){let i=await e.gcLock.readLock();try{let o={signal:n.signal,timeout:n.timeout},s=(0,t2.default)(r),{value:a,done:u}=await s.peek();if(u)return;a&&s.push(a);let c;a instanceof Uint8Array?c=[s]:c=s;for await(let h of c){let p=await o2(e,o,h);if(n.pinRoots!==!1)for(let g of p){let d="";try{await e.blocks.has(g)?(Qd(`Pinning root ${g}`),await e.pins.pinRecursively(g)):d="blockstore: block not found"}catch(w){d=w.message}yield{root:{cid:g,pinErrorMsg:d}}}}}finally{i()}}return An(t)}async function o2(e,t,r){let n=await js.fromIterable(r),i=await n.getRoots();return await(0,r2.default)(e.blocks.putMany((0,n2.default)(n,({cid:o,bytes:s})=>(Qd(`Import block ${o}`),{key:o,value:s})),{signal:t.signal})),i}v();ce();function s2({repo:e,codecs:t,hashers:r,preload:n}){async function i(o,s={}){let a=s.pin?await e.gcLock.readLock():null;try{let u=await t.getCodec(s.storeCodec||"dag-cbor");if(!u)throw new Error(`Unknown storeCodec ${s.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(s.inputCodec){if(!(o instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");let w=await t.getCodec(s.inputCodec);if(!w)throw new Error(`Unknown inputCodec ${s.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);o=w.decode(o)}let c=s.version!=null?s.version:1,h=await r.getHasher(s.hashAlg||"sha2-256");if(!h)throw new Error(`Unknown hash algorithm ${s.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let p=u.encode(o),g=await h.digest(p),d=G.create(c,u.code,g);return await e.blocks.put(d,p,{signal:s.signal}),s.pin&&await e.pins.pinRecursively(d),s.preload!==!1&&n(d),d}finally{a&&a()}}return An(i)}v();function a2({repo:e,codecs:t,preload:r}){async function n(i,o={}){let{cid:s}=Yd(i);return o.preload!==!1&&r(s),Zv(e,t,i,o)}return An(n)}var u2=class{constructor({repo:e,codecs:t,hashers:r,preload:n}){this.export=O1({repo:e,preload:n,codecs:t}),this.get=e2({codecs:t,repo:e,preload:n}),this.import=i2({repo:e}),this.resolve=a2({repo:e,codecs:t,preload:n}),this.put=s2({repo:e,codecs:t,hashers:r,preload:n})}};xr();ui();ua();mo();var Zd={};pe(Zd,{code:()=>v2,decode:()=>A2,encode:()=>_2,name:()=>m2,toGeneral:()=>tp});v();v();v();bo();function Jt(e){return wo.encode(e).slice(1)}function It(e){return wo.decode(`u${e}`)}ce();function l2(e){let[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:G.decode(It(r))}}function c2(e){let t={signature:It(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=It(e.protected)),t}function h2(e){let t=It(e.payload);try{G.decode(t)}catch{throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(c2)}}function f2(e){let t={signature:Jt(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Jt(e.protected)),t}function d2(e){let t={payload:Jt(e.payload),signatures:e.signatures.map(f2)};return t.link=G.decode(new Uint8Array(e.payload)),t}v();function p2(e){let[t,r,n,i,o]=e,s={ciphertext:i,iv:n,protected:t,tag:o};return r&&(s.recipients=[{encrypted_key:r}]),s}function y2(e){let t={};return e.encrypted_key&&(t.encrypted_key=It(e.encrypted_key)),e.header&&(t.header=e.header),t}function g2(e){let t={ciphertext:It(e.ciphertext),protected:It(e.protected),iv:It(e.iv),tag:It(e.tag)};return e.aad&&(t.aad=It(e.aad)),e.recipients&&(t.recipients=e.recipients.map(y2)),e.unprotected&&(t.unprotected=e.unprotected),t}function w2(e){let t={};return e.encrypted_key&&(t.encrypted_key=Jt(e.encrypted_key)),e.header&&(t.header=e.header),t}function b2(e){let t={ciphertext:Jt(e.ciphertext),protected:Jt(e.protected),iv:Jt(e.iv),tag:Jt(e.tag)};return e.aad&&(t.aad=Jt(e.aad)),e.recipients&&(t.recipients=e.recipients.map(w2)),e.unprotected&&(t.unprotected=e.unprotected),t}var m2="dag-jose",v2=133;function Xd(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function E2(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function x2(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function ep(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function tp(e){if(typeof e=="string"){let t=e.split(".");if(t.length===3)return l2(t);if(t.length===5)return p2(t);throw new Error("Not a valid JOSE string")}if(Xd(e)||ep(e))return e;throw new Error("Not a valid unencoded JOSE object")}function _2(e){typeof e=="string"&&(e=tp(e));let t;if(Xd(e))t=h2(e);else if(ep(e))t=g2(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(Io(t))}function A2(e){let t;try{t=Ta(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(E2(t))return d2(t);if(x2(t))return b2(t);throw new Error("Not a valid DAG-JOSE object")}v();var k2=e=>Promise.reject(new Error(`No codec found for "${e}"`)),S2=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||k2;for(let t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let t=typeof e=="string"?this._codecsByName:this._codecsByCode;if(t[e])return t[e];let r=await this._loadCodec(e);return t[e]==null&&this.addCodec(r),r}listCodecs(){return Object.values(this._codecsByName)}};v();var T2=e=>Promise.reject(new Error(`No hasher found for "${e}"`)),I2=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||T2;for(let t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let t=typeof e=="string"?this._hashersByName:this._hashersByCode;if(t[e])return t[e];let r=await this._loadHasher(e);return t[e]==null&&this.addHasher(r),r}listHashers(){return Object.values(this._hashersByName)}};v();async function*B2(e){let t=0;for(;t<e.length;)yield e[t++]}var C2=z(vo(),1);ai();v();Ge();xr();ce();He();v();var O2=z(Je(),1);function L2(e){return e=e||new Error("Not Found"),(0,O2.default)(e,"ERR_NOT_FOUND")}var F2=class extends xd{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[ie.encode(e.multihash.bytes)]=t}async get(e){if(!await this.has(e))throw L2();return this.data[ie.encode(e.multihash.bytes)]}async has(e){return this.data[ie.encode(e.multihash.bytes)]!==void 0}async delete(e){delete this.data[ie.encode(e.multihash.bytes)]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:G.createV1(Or,Xe(ie.decode(e))),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>G.createV1(Or,Xe(ie.decode(e))))}},N2=class extends u2{constructor({repo:e,codecs:t,options:r}){let n=Object.values(Qh);(r.ipld&&r.ipld.hashers?r.ipld.hashers:[]).forEach(o=>n.push(o));let i=new I2({hashers:n,loadHasher:r.ipld&&r.ipld.loadHasher});super({repo:e,codecs:t,hashers:i,preload:o=>{}}),Object.assign(this,qf()),this.repo=e,this.rootCID,this.tx={pending:un.create(),checkSize:async o=>{let s=un.create();return await s.add(o),s.size},getExistingTx:async()=>{let o={};try{let s=this.tx.pending.last;if(!s)return;o=(await this.tx.pending.get(s)).value}catch{}return o},addData:async o=>await this.tx.pending.add(o),addTag:async(o,s)=>await this.tx.add(o,s),add:async(o,s)=>{if(!s)return;s=Object.fromEntries(Object.entries(s).map(([g,d])=>d===void 0?[g,null]:[g,d]));let a=!1,u=await this.tx.getExistingTx();if(u&&u[o])a=u[o]?u[o]:!1;else if(this.rootCID)try{let g=(await this.get(this.rootCID)).value;a=g[o]?g[o]:!1}catch{}let c=await this.tx.pending.add(s),h=Object.assign({},u,{[o]:{obj:c,prev:a}}),p=await this.tx.pending.add(h);return this.emit("added",p),p},commit:async()=>{let o=await this.tx.getExistingTx(),s={};try{this.rootCID&&(s=(await this.get(this.rootCID)).value)}catch(c){console.log({error:c})}let a=Object.assign({},s,Object.fromEntries(Object.entries(o).filter(([c,h])=>h.obj&&h.hasOwnProperty("prev"))));this.rootCID=await this.tx.pending.add(a);let u=await this.tx.pending.commit();return await this.importBuffer(u),this.tx.pending=un.create(),u}}}async latest(e){return(await this.get(this.rootCID,{path:`/${e}/obj`})).value}async importBuffers(e){let t;for(let r of e)t=await this.importBuffer(r);return t}async importBuffer(e){return tu(this,e)}};async function tu(e,t){let r=await B2([t]),[{root:n}]=await(0,C2.default)(e.import(r));return n.cid}async function wE(e={}){let t={name:Jn.name,code:Jn.code,encode:u=>u,decode:u=>u},r=Object.values(Zh);[To,Zd,t].concat(e.ipld&&e.ipld.codecs||[]).forEach(u=>r.push(u));let n=new S2({codecs:r,loadCodec:e.ipld&&e.ipld.loadCodec}),i=e.path||"ipfs",o;e?.persist?o=k1(console.log,n,{path:i,autoMigrate:!0}):o=wd(i,u=>n.getCodec(u),{blocks:new F2,datastore:new Mi,root:new Mi,keys:new Mi,pins:new Mi},e);let s={};try{await o.init(s),await o.open()}catch(u){throw u}let a=await o.config.getAll();return new N2({repo:o,codecs:n,options:{...e,repoConfig:a}})}var uu=du(op(),1),lu=du(up(),1),cu="ArDag";console.log({ArDBMod:uu});var mi=uu?.default||uu;mi=mi?.default||mi;async function lp({buffer:e=null,arweave:t=null,wallet:r=null}){if(!e)throw new Error("buffer is required");if(!t){if(!this.arweave)throw new Error("Arweave is required");t=this.arweave}r||this.wallet&&(r=this.wallet);let{root:n}=await un.load(e),{cid:i}=await Oa(e),o=await t.createTransaction({data:e}),s=[{name:"App-Name",value:[cu]},{name:"Root-CID",value:[n.toString()]},{name:"CAR-CID",value:[i.toString()]}];if(s&&s.length)for(let a of s)o.addTag(a.name.toString(),a.value.toString());return await t.transactions.sign(o,r),await this.post(o),n}async function cp({dagOwner:e,dag:t,arweave:r=null}){if(!e)throw new Error("dagOwner is required");if(!t){if(!this.dag)throw new Error("DagRepo is required");t=this.dag}if(!r){if(!this.arweave)throw new Error("Arweave is required");r=this.arweave}let n=[{name:"App-Name",values:[cu]}],o=await new mi(r).search("transactions").tags(n).from(e).findAll(),s,a=async(u,c)=>{try{let h=await r.transactions.getData(c.id),p=new Uint8Array((0,lu.decodeURLSafe)(h)),g=await tu(u,p);s||(s=g),u.hasOwnProperty("rootCID")&&!u?.rootCID&&(u.rootCID=g)}catch(h){console.log("Import failed",h)}};for(let u of o)await a(t,u);return s}async function D2({dagOwner:e,tag:t=null,arweave:r=null}){if(!e)throw new Error("dagOwner is required");if(!r){if(!this.arweave)throw new Error("Arweave is required");r=this.arweave}let n=[{name:"App-Name",values:[cu]}],o=await new mi(r).search("transactions").tags(n).from(e).findAll();if(!o)return null;let s,a;for(;!s&&o.length;){let u=await r.transactions.getData(o.shift().id);if(!u)continue;let c=new Uint8Array((0,lu.decodeURLSafe)(u));if(!c)continue;let{root:h,get:p}=await un.load(c),g=await p(h);if(!t)return g;g.hasOwnProperty(t)&&!a&&(a=g[t].obj);try{s=await p(a)}catch{}}return s}async function M2(e){return(await this.dag.get(this.rootCID,{path:`/${e}/obj`})).value}async function z2({dag:e,wallet:t=null,dagOwner:r=!1}){if(!e)throw new Error("Supply a DagRepo from https://github.com/DougAnderson444/ipld-car-txs");return r?await this.load({dag:e,dagOwner:r}):r=await this.arweave.wallets.jwkToAddress(t),{arweave:this.arweave,post:this.post,dagOwner:r,wallet:t,dag:e,load:cp,rootCID:this.rootCID||null,latest:M2,persist:lp,async save(n,i){let o=await this.dag.tx.add(n,i);this.rootCID=o;let s=await this.dag.tx.commit(),a=await this.persist({buffer:s});return o}}}function xx({arweave:e,post:t=null}){if(!e)throw new Error("Arweave instance must be provided");let n=e.transactions.post.bind(e.transactions);return{arweave:e,post:t||n,getInstance:z2,persist:lp,get:D2,load:cp}}export{D2 as get,z2 as getInstance,xx as initializeArDag,M2 as latest,cp as load,lp as persist};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=ardag.js.map
