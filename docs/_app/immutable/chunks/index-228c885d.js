var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var encode_1$3=encode$l,MSB$5=128,REST$5=127,MSBALL$3=~REST$5,INT$3=Math.pow(2,31);function encode$l(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw encode$l.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=INT$3;)e[t++]=r&255|MSB$5,r/=128;for(;r&MSBALL$3;)e[t++]=r&255|MSB$5,r>>>=7;return e[t]=r|0,encode$l.bytes=t-n+1,e}var decode$k=read$3,MSB$4=128,REST$4=127;function read$3(r,n){var t=0,n=n||0,o=0,f=n,y,h=r.length;do{if(f>=h||o>49)throw read$3.bytes=0,new RangeError("Could not decode varint");y=r[f++],t+=o<28?(y&REST$4)<<o:(y&REST$4)*Math.pow(2,o),o+=7}while(y>=MSB$4);return read$3.bytes=f-n,t}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$4=function(r){return r<N1$3?1:r<N2$3?2:r<N3$3?3:r<N4$3?4:r<N5$3?5:r<N6$3?6:r<N7$3?7:r<N8$3?8:r<N9$3?9:10},varint$3={encode:encode_1$3,decode:decode$k,encodingLength:length$4};const typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";const e=typeof r;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(isBuffer$2(r))return"Buffer";const t=getObjectType(r);return t||"Object"}function isBuffer$2(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function getObjectType(r){const e=Object.prototype.toString.call(r).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$2=new TextDecoder,textEncoder$4=new TextEncoder;function isBuffer$1(r){return useBuffer&&globalThis.Buffer.isBuffer(r)}function asU8A(r){return r instanceof Uint8Array?isBuffer$1(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}const toString$9=useBuffer?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):utf8Slice(r,e,t):(r,e,t)=>t-e>64?textDecoder$2.decode(r.subarray(e,t)):utf8Slice(r,e,t),fromString$7=useBuffer?r=>r.length>64?globalThis.Buffer.from(r):utf8ToBytes(r):r=>r.length>64?textEncoder$4.encode(r):utf8ToBytes(r),fromArray=r=>Uint8Array.from(r),slice=useBuffer?(r,e,t)=>isBuffer$1(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),concat$2=useBuffer?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),asU8A(globalThis.Buffer.concat(r,e))):(r,e)=>{const t=new Uint8Array(e);let n=0;for(let o of r)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},alloc=useBuffer?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function compare$1(r,e){if(isBuffer$1(r)&&isBuffer$1(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function utf8ToBytes(r,e=1/0){let t;const n=r.length;let o=null;const f=[];for(let y=0;y<n;++y){if(t=r.charCodeAt(y),t>55295&&t<57344){if(!o){if(t>56319){(e-=3)>-1&&f.push(239,191,189);continue}else if(y+1===n){(e-=3)>-1&&f.push(239,191,189);continue}o=t;continue}if(t<56320){(e-=3)>-1&&f.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(e-=3)>-1&&f.push(239,191,189);if(o=null,t<128){if((e-=1)<0)break;f.push(t)}else if(t<2048){if((e-=2)<0)break;f.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;f.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;f.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return f}function utf8Slice(r,e,t){const n=[];for(;e<t;){const o=r[e];let f=null,y=o>239?4:o>223?3:o>191?2:1;if(e+y<=t){let h,m,$,E;switch(y){case 1:o<128&&(f=o);break;case 2:h=r[e+1],(h&192)===128&&(E=(o&31)<<6|h&63,E>127&&(f=E));break;case 3:h=r[e+1],m=r[e+2],(h&192)===128&&(m&192)===128&&(E=(o&15)<<12|(h&63)<<6|m&63,E>2047&&(E<55296||E>57343)&&(f=E));break;case 4:h=r[e+1],m=r[e+2],$=r[e+3],(h&192)===128&&(m&192)===128&&($&192)===128&&(E=(o&15)<<18|(h&63)<<12|(m&63)<<6|$&63,E>65535&&E<1114112&&(f=E))}}f===null?(f=65533,y=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|f&1023),n.push(f),e+=y}return decodeCodePointsArray(n)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(r){const e=r.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=MAX_ARGUMENTS_LENGTH));return t}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=t.length-(this.maxCursor-this.cursor)-1;t.set(e,o)}else{if(t){const o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=alloc(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=slice(n,0,this.cursor)}else t=concat$2(this.chunks,this.cursor);return e&&this.reset(),t}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(r,e,t){if(r.length-e<t)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(r,e,t){assertEnoughData(r,e,1);const n=r[e];if(t.strict===!0&&n<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint16(r,e,t){assertEnoughData(r,e,2);const n=r[e]<<8|r[e+1];if(t.strict===!0&&n<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint32(r,e,t){assertEnoughData(r,e,4);const n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint64(r,e,t){assertEnoughData(r,e,8);const n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],o=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],f=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&f<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(f<=Number.MAX_SAFE_INTEGER)return Number(f);if(t.allowBigInt===!0)return f;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(r,e,t,n){return new Token(Type.uint,readUint8(r,e+1,n),2)}function decodeUint16(r,e,t,n){return new Token(Type.uint,readUint16(r,e+1,n),3)}function decodeUint32(r,e,t,n){return new Token(Type.uint,readUint32(r,e+1,n),5)}function decodeUint64(r,e,t,n){return new Token(Type.uint,readUint64(r,e+1,n),9)}function encodeUint(r,e){return encodeUintValue(r,0,e.value)}function encodeUintValue(r,e,t){if(t<uintBoundaries[0]){const n=Number(t);r.push([e|n])}else if(t<uintBoundaries[1]){const n=Number(t);r.push([e|24,n])}else if(t<uintBoundaries[2]){const n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<uintBoundaries[3]){const n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(t);if(n<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let f=Number(n&BigInt(4294967295)),y=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=f&255,f=f>>8,o[7]=f&255,f=f>>8,o[6]=f&255,f=f>>8,o[5]=f&255,o[4]=y&255,y=y>>8,o[3]=y&255,y=y>>8,o[2]=y&255,y=y>>8,o[1]=y&255,r.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function decodeNegint8(r,e,t,n){return new Token(Type.negint,-1-readUint8(r,e+1,n),2)}function decodeNegint16(r,e,t,n){return new Token(Type.negint,-1-readUint16(r,e+1,n),3)}function decodeNegint32(r,e,t,n){return new Token(Type.negint,-1-readUint32(r,e+1,n),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o!="bigint"){const f=-1-o;if(f>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,f,9)}if(n.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(r,e){const t=e.value,n=typeof t=="bigint"?t*neg1b-pos1b:t*-1-1;encodeUintValue(r,e.type.majorEncoded,n)}encodeNegint.encodedSize=function(e){const t=e.value,n=typeof t=="bigint"?t*neg1b-pos1b:t*-1-1;return n<uintBoundaries[0]?1:n<uintBoundaries[1]?2:n<uintBoundaries[2]?3:n<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function toToken$3(r,e,t,n){assertEnoughData(r,e,t+n);const o=slice(r,e+t,e+t+n);return new Token(Type.bytes,o,t+n)}function decodeBytesCompact(r,e,t,n){return toToken$3(r,e,1,t)}function decodeBytes8(r,e,t,n){return toToken$3(r,e,2,readUint8(r,e+1,n))}function decodeBytes16(r,e,t,n){return toToken$3(r,e,3,readUint16(r,e+1,n))}function decodeBytes32(r,e,t,n){return toToken$3(r,e,5,readUint32(r,e+1,n))}function decodeBytes64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(r,e,9,o)}function tokenBytes(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Type.string?fromString$7(r.value):r.value),r.encodedBytes}function encodeBytes(r,e){const t=tokenBytes(e);encodeUintValue(r,e.type.majorEncoded,t.length),r.push(t)}encodeBytes.encodedSize=function(e){const t=tokenBytes(e);return encodeUintValue.encodedSize(t.length)+t.length};encodeBytes.compareTokens=function(e,t){return compareBytes(tokenBytes(e),tokenBytes(t))};function compareBytes(r,e){return r.length<e.length?-1:r.length>e.length?1:compare$1(r,e)}function toToken$2(r,e,t,n,o){const f=t+n;assertEnoughData(r,e,f);const y=new Token(Type.string,toString$9(r,e+t,e+f),f);return o.retainStringBytes===!0&&(y.byteValue=slice(r,e+t,e+f)),y}function decodeStringCompact(r,e,t,n){return toToken$2(r,e,1,t,n)}function decodeString8(r,e,t,n){return toToken$2(r,e,2,readUint8(r,e+1,n),n)}function decodeString16(r,e,t,n){return toToken$2(r,e,3,readUint16(r,e+1,n),n)}function decodeString32(r,e,t,n){return toToken$2(r,e,5,readUint32(r,e+1,n),n)}function decodeString64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(r,e,9,o,n)}const encodeString=encodeBytes;function toToken$1(r,e,t,n){return new Token(Type.array,n,t)}function decodeArrayCompact(r,e,t,n){return toToken$1(r,e,1,t)}function decodeArray8(r,e,t,n){return toToken$1(r,e,2,readUint8(r,e+1,n))}function decodeArray16(r,e,t,n){return toToken$1(r,e,3,readUint16(r,e+1,n))}function decodeArray32(r,e,t,n){return toToken$1(r,e,5,readUint32(r,e+1,n))}function decodeArray64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(r,e,9,o)}function decodeArrayIndefinite(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(r,e,1,1/0)}function encodeArray(r,e){encodeUintValue(r,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(r,e,t,n){return new Token(Type.map,n,t)}function decodeMapCompact(r,e,t,n){return toToken(r,e,1,t)}function decodeMap8(r,e,t,n){return toToken(r,e,2,readUint8(r,e+1,n))}function decodeMap16(r,e,t,n){return toToken(r,e,3,readUint16(r,e+1,n))}function decodeMap32(r,e,t,n){return toToken(r,e,5,readUint32(r,e+1,n))}function decodeMap64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(r,e,9,o)}function decodeMapIndefinite(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(r,e,1,1/0)}function encodeMap(r,e){encodeUintValue(r,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(r,e,t,n){return new Token(Type.tag,t,1)}function decodeTag8(r,e,t,n){return new Token(Type.tag,readUint8(r,e+1,n),2)}function decodeTag16(r,e,t,n){return new Token(Type.tag,readUint16(r,e+1,n),3)}function decodeTag32(r,e,t,n){return new Token(Type.tag,readUint32(r,e+1,n),5)}function decodeTag64(r,e,t,n){return new Token(Type.tag,readUint64(r,e+1,n),9)}function encodeTag(r,e){encodeUintValue(r,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,r,e)}function decodeFloat16(r,e,t,n){return createToken(readFloat16(r,e+1),3,n)}function decodeFloat32(r,e,t,n){return createToken(readFloat32(r,e+1),5,n)}function decodeFloat64(r,e,t,n){return createToken(readFloat64(r,e+1),9,n)}function encodeFloat(r,e,t){const n=e.value;if(n===!1)r.push([Type.float.majorEncoded|MINOR_FALSE]);else if(n===!0)r.push([Type.float.majorEncoded|MINOR_TRUE]);else if(n===null)r.push([Type.float.majorEncoded|MINOR_NULL]);else if(n===void 0)r.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,f=!1;(!t||t.float64!==!0)&&(encodeFloat16(n),o=readFloat16(ui8a,1),n===o||Number.isNaN(n)?(ui8a[0]=249,r.push(ui8a.slice(0,3)),f=!0):(encodeFloat32(n),o=readFloat32(ui8a,1),n===o&&(ui8a[0]=250,r.push(ui8a.slice(0,5)),f=!0))),f||(encodeFloat64(n),o=readFloat64(ui8a,1),ui8a[0]=251,r.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,t){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){encodeFloat16(n);let o=readFloat16(ui8a,1);if(n===o||Number.isNaN(n))return 3;if(encodeFloat32(n),o=readFloat32(ui8a,1),n===o)return 5}return 9};const buffer$2=new ArrayBuffer(9),dataView=new DataView(buffer$2,1),ui8a=new Uint8Array(buffer$2,0);function encodeFloat16(r){if(r===1/0)dataView.setUint16(0,31744,!1);else if(r===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(r))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,r);const e=dataView.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)dataView.setUint16(0,31744,!1);else if(t===0)dataView.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{const o=t-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function readFloat16(r,e){if(r.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const n=t>>10&31,o=t&1023;let f;return n===0?f=o*2**-24:n!==31?f=(o+1024)*2**(n-25):f=o===0?1/0:NaN,t&32768?-f:f}function encodeFloat32(r){dataView.setFloat32(0,r,!1)}function readFloat32(r,e){if(r.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function encodeFloat64(r){dataView.setFloat64(0,r,!1)}function readFloat64(r,e){if(r.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(r,e,t){throw new Error(`${decodeErrPrefix} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function errorer(r){return()=>{throw new Error(`${decodeErrPrefix} ${r}`)}}const jump=[];for(let r=0;r<=23;r++)jump[r]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let r=32;r<=55;r++)jump[r]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let r=64;r<=87;r++)jump[r]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)jump[r]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)jump[r]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let r=160;r<=183;r++)jump[r]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let r=192;r<=215;r++)jump[r]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let r=224;r<=243;r++)jump[r]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let r=0;r<24;r++)quick[r]=new Token(Type.uint,r,1);for(let r=-1;r>=-24;r--)quick[31-r]=new Token(Type.negint,r,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(r){switch(r.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return r.value.length?void 0:fromArray([64]);case Type.string:return r.value===""?fromArray([96]):void 0;case Type.array:return r.value===0?fromArray([128]):void 0;case Type.map:return r.value===0?fromArray([160]):void 0;case Type.uint:return r.value<24?fromArray([Number(r.value)]):void 0;case Type.negint:if(r.value>=-24)return fromArray([31-Number(r.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const r=[];return r[Type.uint.major]=encodeUint,r[Type.negint.major]=encodeNegint,r[Type.bytes.major]=encodeBytes,r[Type.string.major]=encodeString,r[Type.array.major]=encodeArray,r[Type.map.major]=encodeMap,r[Type.tag.major]=encodeTag,r[Type.float.major]=encodeFloat,r}const cborEncoders$1=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(t,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Token(Type.float,r):r>=0?new Token(Type.uint,r):new Token(Type.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Token(Type.uint,r):new Token(Type.negint,r)},Uint8Array(r,e,t,n){return new Token(Type.bytes,r)},string(r,e,t,n){return new Token(Type.string,r)},boolean(r,e,t,n){return r?simpleTokens.true:simpleTokens.false},null(r,e,t,n){return simpleTokens.null},undefined(r,e,t,n){return simpleTokens.undefined},ArrayBuffer(r,e,t,n){return new Token(Type.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Token(Type.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;n=Ref.createCheck(n,r);const o=[];let f=0;for(const y of r)o[f++]=objectToTokens(y,t,n);return t.addBreakTokens?[new Token(Type.array,r.length),o,new Token(Type.break)]:[new Token(Type.array,r.length),o]},Object(r,e,t,n){const o=e!=="Object",f=o?r.keys():Object.keys(r),y=o?r.size:f.length;if(!y)return t.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;n=Ref.createCheck(n,r);const h=[];let m=0;for(const $ of f)h[m++]=[objectToTokens($,t,n),objectToTokens(o?r.get($):r[$],t,n)];return sortMapEntries(h,t),t.addBreakTokens?[new Token(Type.map,y),h,new Token(Type.break)]:[new Token(Type.map,y),h]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${r}Array`]=typeEncoders.DataView;function objectToTokens(r,e={},t){const n=is(r),o=e&&e.typeEncoders&&e.typeEncoders[n]||typeEncoders[n];if(typeof o=="function"){const y=o(r,n,e,t);if(y!=null)return y}const f=typeEncoders[n];if(!f)throw new Error(`${encodeErrPrefix} unsupported type: ${n}`);return f(r,n,e,t)}function sortMapEntries(r,e){e.mapSorter&&r.sort(e.mapSorter)}function mapSorter(r,e){const t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);const o=t.type.major,f=cborEncoders$1[o].compareTokens(t,n);return f===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),f}function tokensToEncoded(r,e,t,n){if(Array.isArray(e))for(const o of e)tokensToEncoded(r,o,t,n);else t[e.type.major](r,e,n)}function encodeCustom(r,e,t){const n=objectToTokens(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){const o=t.quickEncodeToken(n);if(o)return o;const f=e[n.type.major];if(f.encodedSize){const y=f.encodedSize(n,t),h=new Bl(y);if(f(h,n,t),h.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return asU8A(h.chunks[0])}}return buf.reset(),tokensToEncoded(buf,n,e,t),buf.toBytes(!0)}function encode$k(r,e){return e=Object.assign({},defaultEncodeOptions$1,e),encodeCustom(r,cborEncoders$1,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=quick[e];if(t===void 0){const n=jump[e];if(!n)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;t=n(this.data,this.pos,o,this.options)}return this.pos+=t.encodedLength,t}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(r,e,t){const n=[];for(let o=0;o<r.value;o++){const f=tokensToObject(e,t);if(f===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(f===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${r.value})`);n[o]=f}return n}function tokenToMap(r,e,t){const n=t.useMaps===!0,o=n?void 0:{},f=n?new Map:void 0;for(let y=0;y<r.value;y++){const h=tokensToObject(e,t);if(h===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(h===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${y} [no key], expected ${r.value})`);if(n!==!0&&typeof h!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof h})`);const m=tokensToObject(e,t);if(m===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${y} [no value], expected ${r.value})`);n?f.set(h,m):o[h]=m}return n?f:o}function tokensToObject(r,e){if(r.done())return DONE;const t=r.next();if(t.type===Type.break)return BREAK;if(t.type.terminal)return t.value;if(t.type===Type.array)return tokenToArray(t,r,e);if(t.type===Type.map)return tokenToMap(t,r,e);if(t.type===Type.tag){if(e.tags&&typeof e.tags[t.value]=="function"){const n=tokensToObject(r,e);return e.tags[t.value](n)}throw new Error(`${decodeErrPrefix} tag not supported (${t.value})`)}throw new Error("unsupported")}function decode$j(r,e){if(!(r instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const t=e.tokenizer||new Tokeniser(r,e),n=tokensToObject(t,e);if(n===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(n===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!t.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return n}const cborEncoders=makeCborEncoders(),defaultEncodeOptions={float64:!1,quickEncodeToken};function tokensToLength(r,e=cborEncoders,t=defaultEncodeOptions){if(Array.isArray(r)){let n=0;for(const o of r)n+=tokensToLength(o,e,t);return n}else{const n=e[r.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${r.type.name} does not have an encodedSize()`);return n.encodedSize(r,t)}}var encode_1$2=encode$j,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$j(r,e,t){e=e||[],t=t||0;for(var n=t;r>=INT$2;)e[t++]=r&255|MSB$3,r/=128;for(;r&MSBALL$2;)e[t++]=r&255|MSB$3,r>>>=7;return e[t]=r|0,encode$j.bytes=t-n+1,e}var decode$i=read$2,MSB$1$2=128,REST$1$2=127;function read$2(r,n){var t=0,n=n||0,o=0,f=n,y,h=r.length;do{if(f>=h)throw read$2.bytes=0,new RangeError("Could not decode varint");y=r[f++],t+=o<28?(y&REST$1$2)<<o:(y&REST$1$2)*Math.pow(2,o),o+=7}while(y>=MSB$1$2);return read$2.bytes=f-n,t}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$3=function(r){return r<N1$2?1:r<N2$2?2:r<N3$2?3:r<N4$2?4:r<N5$2?5:r<N6$2?6:r<N7$2?7:r<N8$2?8:r<N9$2?9:10},varint$2={encode:encode_1$2,decode:decode$i,encodingLength:length$3},_brrp_varint$2=varint$2;const decode$h=(r,e=0)=>[_brrp_varint$2.decode(r,e),_brrp_varint$2.decode.bytes],encodeTo$2=(r,e,t=0)=>(_brrp_varint$2.encode(r,e,t),e),encodingLength$2=r=>_brrp_varint$2.encodingLength(r),empty=new Uint8Array(0),toHex=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),fromHex=r=>{const e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):empty},equals$4=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},coerce$3=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},isBinary$1=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),fromString$6=r=>new TextEncoder().encode(r),toString$8=r=>new TextDecoder().decode(r),byteslib=Object.freeze(Object.defineProperty({__proto__:null,equals:equals$4,coerce:coerce$3,isBinary:isBinary$1,fromHex,toHex,fromString:fromString$6,toString:toString$8,empty},Symbol.toStringTag,{value:"Module"})),create$5=(r,e)=>{const t=e.byteLength,n=encodingLength$2(r),o=n+encodingLength$2(t),f=new Uint8Array(o+t);return encodeTo$2(r,f,0),encodeTo$2(t,f,n),f.set(e,o),new Digest$2(r,t,e,f)},decode$g=r=>{const e=coerce$3(r),[t,n]=decode$h(e),[o,f]=decode$h(e.subarray(n)),y=e.subarray(n+f);if(y.byteLength!==o)throw new Error("Incorrect length");return new Digest$2(t,o,y,e)},equals$3=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&equals$4(r.bytes,e.bytes);class Digest$2{constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}}function base$3(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var f=r.charAt(o),y=f.charCodeAt(0);if(t[y]!==255)throw new TypeError(f+" is ambiguous");t[y]=o}var h=r.length,m=r.charAt(0),$=Math.log(h)/Math.log(256),E=Math.log(256)/Math.log(h);function v(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var k=0,O=0,U=0,q=A.length;U!==q&&A[U]===0;)U++,k++;for(var j=(q-U)*E+1>>>0,P=new Uint8Array(j);U!==q;){for(var L=A[U],X=0,K=j-1;(L!==0||X<O)&&K!==-1;K--,X++)L+=256*P[K]>>>0,P[K]=L%h>>>0,L=L/h>>>0;if(L!==0)throw new Error("Non-zero carry");O=X,U++}for(var N=j-O;N!==j&&P[N]===0;)N++;for(var W=m.repeat(k);N<j;++N)W+=r.charAt(P[N]);return W}function D(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var k=0;if(A[k]!==" "){for(var O=0,U=0;A[k]===m;)O++,k++;for(var q=(A.length-k)*$+1>>>0,j=new Uint8Array(q);A[k];){var P=t[A.charCodeAt(k)];if(P===255)return;for(var L=0,X=q-1;(P!==0||L<U)&&X!==-1;X--,L++)P+=h*j[X]>>>0,j[X]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");U=L,k++}if(A[k]!==" "){for(var K=q-U;K!==q&&j[K]===0;)K++;for(var N=new Uint8Array(O+(q-K)),W=O;K!==q;)N[W++]=j[K++];return N}}}function I(A){var k=D(A);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:D,decode:I}}var src$3=base$3,_brrp__multiformats_scope_baseX$3=src$3;class Encoder$3{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$3{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$3(this,e)}}class ComposedDecoder$3{constructor(e){this.decoders=e}or(e){return or$3(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$3=(r,e)=>new ComposedDecoder$3({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Codec$3{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$3(e,t,n),this.decoder=new Decoder$3(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$7=({name:r,prefix:e,encode:t,decode:n})=>new Codec$3(r,e,t,n),baseX$3=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$3(t,e);return from$7({prefix:r,name:e,encode:n,decode:f=>coerce$3(o(f))})},decode$f=(r,e,t,n)=>{const o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let f=r.length;for(;r[f-1]==="=";)--f;const y=new Uint8Array(f*t/8|0);let h=0,m=0,$=0;for(let E=0;E<f;++E){const v=o[r[E]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<t|v,h+=t,h>=8&&(h-=8,y[$++]=255&m>>h)}if(h>=t||255&m<<8-h)throw new SyntaxError("Unexpected end of data");return y},encode$i=(r,e,t)=>{const n=e[e.length-1]==="=",o=(1<<t)-1;let f="",y=0,h=0;for(let m=0;m<r.length;++m)for(h=h<<8|r[m],y+=8;y>t;)y-=t,f+=e[o&h>>y];if(y&&(f+=e[o&h<<t-y]),n)for(;f.length*t&7;)f+="=";return f},rfc4648$3=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>from$7({prefix:e,name:r,encode(o){return encode$i(o,n,t)},decode(o){return decode$f(o,n,t,r)}}),base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$2=baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$3,base58flickr:base58flickr$2},Symbol.toStringTag,{value:"Module"})),base32$5=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$2=rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$2=rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$2=rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$2=rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$2=rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$2=rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$2=rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$2=rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$6=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$5,base32upper:base32upper$2,base32pad:base32pad$2,base32padupper:base32padupper$2,base32hex:base32hex$2,base32hexupper:base32hexupper$2,base32hexpad:base32hexpad$2,base32hexpadupper:base32hexpadupper$2,base32z:base32z$2},Symbol.toStringTag,{value:"Module"}));class CID$1{constructor(e,t,n,o){this.code=t,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$1.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=create$5(e,t);return CID$1.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$3(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:o}=this;switch(n){case 0:return toStringV0$1(t,o,e||base58btc$3.encoder);default:return toStringV1$1(t,o,e||base32$5.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol$1]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$1)return e;if(e!=null&&e.asCID===e){const{version:t,code:n,multihash:o,bytes:f}=e;return new CID$1(t,n,o,f||encodeCID$1(t,n,o.bytes))}else if(e!=null&&e[cidSymbol$1]===!0){const{version:t,multihash:n,code:o}=e,f=decode$g(n);return CID$1.create(t,o,f)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new CID$1(e,t,n,n.bytes)}case 1:{const o=encodeCID$1(e,t,n.bytes);return new CID$1(e,t,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$1.create(0,DAG_PB_CODE$1,e)}static createV1(e,t){return CID$1.create(1,e,t)}static decode(e){const[t,n]=CID$1.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID$1.inspectBytes(e),n=t.size-t.multihashSize,o=coerce$3(e.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const f=o.subarray(t.multihashSize-t.digestSize),y=new Digest$2(t.multihashCode,t.digestSize,f,o);return[t.version===0?CID$1.createV0(y):CID$1.createV1(t.codec,y),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[v,D]=decode$h(e.subarray(t));return t+=D,v};let o=n(),f=DAG_PB_CODE$1;if(o===18?(o=0,t=0):o===1&&(f=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const y=t,h=n(),m=n(),$=t+m,E=$-y;return{version:o,codec:f,multihashCode:h,digestSize:m,multihashSize:E,size:$}}static parse(e,t){const[n,o]=parseCIDtoBytes$1(e,t),f=CID$1.decode(o);return f._baseCache.set(n,e),f}}const parseCIDtoBytes$1=(r,e)=>{switch(r[0]){case"Q":{const t=e||base58btc$3;return[base58btc$3.prefix,t.decode(`${base58btc$3.prefix}${r}`)]}case base58btc$3.prefix:{const t=e||base58btc$3;return[base58btc$3.prefix,t.decode(r)]}case base32$5.prefix:{const t=e||base32$5;return[base32$5.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},toStringV0$1=(r,e,t)=>{const{prefix:n}=t;if(n!==base58btc$3.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=e.get(n);if(o==null){const f=t.encode(r).slice(1);return e.set(n,f),f}else return o},toStringV1$1=(r,e,t)=>{const{prefix:n}=t,o=e.get(n);if(o==null){const f=t.encode(r);return e.set(n,f),f}else return o},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(r,e,t)=>{const n=encodingLength$2(r),o=n+encodingLength$2(e),f=new Uint8Array(o+t.byteLength);return encodeTo$2(r,f,0),encodeTo$2(e,f,n),f.set(t,o),f},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version="0.0.0-dev",deprecate=(r,e)=>{if(r.test(version))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,CID_CBOR_TAG=42;function cidEncoder(r){if(r.asCID!==r)return null;const e=CID$1.asCID(r);if(!e)return null;const t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,t)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(r.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name$4="dag-cbor",code$6=113,encode$h=r=>encode$k(r,encodeOptions),decode$e=r=>decode$j(r,decodeOptions),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,name:name$4,code:code$6,encode:encode$h,decode:decode$e},Symbol.toStringTag,{value:"Module"}));class CarBufferWriter{constructor(e,t){this.bytes=e,this.byteOffset=t,this.roots=[],this.headerSize=t}addRoot(e,t){return addRoot(this,e,t),this}write(e){return addBlock(this,e),this}close(e){return close(this,e)}}const addRoot=(r,e,t={})=>{const{resize:n=!1}=t,{bytes:o,headerSize:f,byteOffset:y,roots:h}=r;r.roots.push(e);const m=headerLength(r);if(m>f)if(m-f+y<o.byteLength)if(n)resizeHeader(r,m);else throw h.pop(),new RangeError(`Header of size ${f} has no capacity for new root ${e}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw h.pop(),new RangeError(`Buffer has no capacity for a new root ${e}`)},blockLength=({cid:r,bytes:e})=>{const t=r.bytes.byteLength+e.byteLength;return varint$3.encodingLength(t)+t},addBlock=(r,{cid:e,bytes:t})=>{const n=e.bytes.byteLength+t.byteLength,o=varint$3.encode(n);if(r.byteOffset+o.length+n>r.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");writeBytes$1(r,o),writeBytes$1(r,e.bytes),writeBytes$1(r,t)},close=(r,e={})=>{const{resize:t=!1}=e,{roots:n,bytes:o,byteOffset:f,headerSize:y}=r,h=encode$h({version:1,roots:n}),m=varint$3.encode(h.length),$=m.length+h.byteLength;if(y-$===0)return writeHeader(r,m,h),o.subarray(0,f);if(t)return resizeHeader(r,$),writeHeader(r,m,h),o.subarray(0,r.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},resizeHeader=(r,e)=>{const{bytes:t,headerSize:n}=r;t.set(t.subarray(n,r.byteOffset),e),r.byteOffset+=e-n,r.headerSize=e},writeBytes$1=(r,e)=>{r.bytes.set(e,r.byteOffset),r.byteOffset+=e.length},writeHeader=({bytes:r},e,t)=>{r.set(e),r.set(t,e.length)},headerPreludeTokens=[new Token(Type.map,2),new Token(Type.string,"version"),new Token(Type.uint,1),new Token(Type.string,"roots")],CID_TAG=new Token(Type.tag,42),calculateHeaderLength=r=>{const e=[...headerPreludeTokens];e.push(new Token(Type.array,r.length));for(const n of r)e.push(CID_TAG),e.push(new Token(Type.bytes,{length:n+1}));const t=tokensToLength(e);return varint$3.encodingLength(t)+t},headerLength=({roots:r})=>calculateHeaderLength(r.map(e=>e.bytes.byteLength)),createWriter=(r,e={})=>{const{roots:t=[],byteOffset:n=0,byteLength:o=r.byteLength,headerSize:f=headerLength({roots:t})}=e,y=new Uint8Array(r,n,o),h=new CarBufferWriter(y,f);for(const m of t)h.addRoot(m);return h},Kinds={Null:r=>r===null,Int:r=>Number.isInteger(r),Float:r=>typeof r=="number"&&Number.isFinite(r),String:r=>typeof r=="string",Bool:r=>typeof r=="boolean",Bytes:r=>r instanceof Uint8Array,Link:r=>!Kinds.Null(r)&&typeof r=="object"&&r.asCID===r,List:r=>Array.isArray(r),Map:r=>!Kinds.Null(r)&&typeof r=="object"&&r.asCID!==r&&!Kinds.List(r)&&!Kinds.Bytes(r)},Types={Int:Kinds.Int,"CarHeader > version":r=>Types.Int(r),"CarHeader > roots (anon) > valueType (anon)":Kinds.Link,"CarHeader > roots (anon)":r=>Kinds.List(r)&&Array.prototype.every.call(r,Types["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":r=>Types["CarHeader > roots (anon)"](r),CarHeader:r=>{const e=r&&Object.keys(r);return Kinds.Map(r)&&["version"].every(t=>e.includes(t))&&Object.entries(r).every(([t,n])=>Types["CarHeader > "+t]&&Types["CarHeader > "+t](n))}},CarHeader=Types.CarHeader,CIDV0_BYTES={SHA2_256:18,LENGTH:32,DAG_PB:112},V2_HEADER_LENGTH=16+8+8+8;async function readVarint(r){const e=await r.upTo(8);if(!e.length)throw new Error("Unexpected end of data");const t=varint$3.decode(e);return r.seek(varint$3.decode.bytes),t}async function readV2Header(r){const e=await r.exactly(V2_HEADER_LENGTH),t=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;const o={version:2,characteristics:[t.getBigUint64(n,!0),t.getBigUint64(n+=8,!0)],dataOffset:Number(t.getBigUint64(n+=8,!0)),dataSize:Number(t.getBigUint64(n+=8,!0)),indexOffset:Number(t.getBigUint64(n+=8,!0))};return r.seek(V2_HEADER_LENGTH),o}async function readHeader$1(r,e){const t=await readVarint(r);if(t===0)throw new Error("Invalid CAR header (zero length)");const n=await r.exactly(t);r.seek(t);const o=decode$e(n);if(!CarHeader(o))throw new Error("Invalid CAR header format");if(o.version!==1&&o.version!==2||e!==void 0&&o.version!==e)throw new Error(`Invalid CAR version: ${o.version}${e!==void 0?` (expected ${e})`:""}`);const f=Array.isArray(o.roots);if(o.version===1&&!f||o.version===2&&f)throw new Error("Invalid CAR header format");if(o.version===1)return o;const y=await readV2Header(r);r.seek(y.dataOffset-r.pos);const h=await readHeader$1(r,1);return Object.assign(h,y)}async function readMultihash(r){const e=await r.upTo(8);varint$3.decode(e);const t=varint$3.decode.bytes,n=varint$3.decode(e.subarray(varint$3.decode.bytes)),o=varint$3.decode.bytes,f=t+o+n,y=await r.exactly(f);return r.seek(f),y}async function readCid(r){const e=await r.exactly(2);if(e[0]===CIDV0_BYTES.SHA2_256&&e[1]===CIDV0_BYTES.LENGTH){const y=await r.exactly(34);r.seek(34);const h=decode$g(y);return CID$1.create(0,CIDV0_BYTES.DAG_PB,h)}const t=await readVarint(r);if(t!==1)throw new Error(`Unexpected CID version (${t})`);const n=await readVarint(r),o=await readMultihash(r),f=decode$g(o);return CID$1.create(t,n,f)}async function readBlockHead(r){const e=r.pos;let t=await readVarint(r);if(t===0)throw new Error("Invalid CAR section (zero length)");t+=r.pos-e;const n=await readCid(r),o=t-Number(r.pos-e);return{cid:n,length:t,blockLength:o}}async function readBlock(r){const{cid:e,blockLength:t}=await readBlockHead(r),n=await r.exactly(t);return r.seek(t),{bytes:n,cid:e}}async function readBlockIndex(r){const e=r.pos,{cid:t,length:n,blockLength:o}=await readBlockHead(r),f={cid:t,length:n,blockLength:o,offset:e,blockOffset:r.pos};return r.seek(f.blockLength),f}function createDecoder(r){const e=(async()=>{const t=await readHeader$1(r);if(t.version===2){const n=r.pos-t.dataOffset;r=limitReader(r,t.dataSize-n)}return t})();return{header:()=>e,async*blocks(){for(await e;(await r.upTo(8)).length>0;)yield await readBlock(r)},async*blocksIndex(){for(await e;(await r.upTo(8)).length>0;)yield await readBlockIndex(r)}}}function bytesReader(r){let e=0;return{async upTo(t){return r.subarray(e,e+Math.min(t,r.length-e))},async exactly(t){if(t>r.length-e)throw new Error("Unexpected end of data");return r.subarray(e,e+t)},seek(t){e+=t},get pos(){return e}}}function chunkReader(r){let e=0,t=0,n=0,o=new Uint8Array(0);const f=async y=>{t=o.length-n;const h=[o.subarray(n)];for(;t<y;){const $=await r();if($==null)break;t<0?$.length>t&&h.push($.subarray(-t)):h.push($),t+=$.length}o=new Uint8Array(h.reduce(($,E)=>$+E.length,0));let m=0;for(const $ of h)o.set($,m),m+=$.length;n=0};return{async upTo(y){return o.length-n<y&&await f(y),o.subarray(n,n+Math.min(o.length-n,y))},async exactly(y){if(o.length-n<y&&await f(y),o.length-n<y)throw new Error("Unexpected end of data");return o.subarray(n,n+y)},seek(y){e+=y,n+=y},get pos(){return e}}}function asyncIterableReader(r){const e=r[Symbol.asyncIterator]();async function t(){const n=await e.next();return n.done?null:n.value}return chunkReader(t)}function limitReader(r,e){let t=0;return{async upTo(n){let o=await r.upTo(n);return o.length+t>e&&(o=o.subarray(0,e-t)),o},async exactly(n){const o=await r.exactly(n);if(o.length+t>e)throw new Error("Unexpected end of data");return o},seek(n){t+=n,r.seek(n)},get pos(){return r.pos}}}class CarReader{constructor(e,t){this._header=e,this._blocks=t,this._keys=t.map(n=>n.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){const t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(const e of this._blocks)yield e}async*cids(){for(const e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeReaderComplete(bytesReader(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeReaderComplete(asyncIterableReader(e))}}async function decodeReaderComplete(r){const e=createDecoder(r),t=await e.header(),n=[];for await(const o of e.blocks())n.push(o);return new CarReader(t,n)}const from$6=({name:r,code:e,encode:t})=>new Hasher$2(r,e,t);class Hasher$2{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create$5(this.code,t):t.then(n=>create$5(this.code,n))}else throw Error("Unknown type, must be binary type")}}const name$3="raw",code$5=85,encode$g=r=>coerce$3(r),decode$d=r=>coerce$3(r),raw=Object.freeze(Object.defineProperty({__proto__:null,name:name$3,code:code$5,encode:encode$g,decode:decode$d},Symbol.toStringTag,{value:"Module"})),sha$2=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),sha256$2=from$6({name:"sha2-256",code:18,encode:sha$2("SHA-256")}),sha512$2=from$6({name:"sha2-512",code:19,encode:sha$2("SHA-512")}),sha2$2=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$2,sha512:sha512$2},Symbol.toStringTag,{value:"Module"})),readonly=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),links=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(const[t,n]of Object.entries(r)){const o=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(const[f,y]of n.entries()){const h=[...o,f],m=CID$1.asCID(y);m?yield[h.join("/"),m]:typeof y=="object"&&(yield*links(y,h))}else{const f=CID$1.asCID(n);f?yield[o.join("/"),f]:yield*links(n,o)}}},tree=function*(r,e){if(r!=null)for(const[t,n]of Object.entries(r)){const o=[...e,t];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!CID$1.asCID(n))if(Array.isArray(n))for(const[f,y]of n.entries()){const h=[...o,f];yield h.join("/"),typeof y=="object"&&!CID$1.asCID(y)&&(yield*tree(y,h))}else yield*tree(n,o)}},get$1=(r,e)=>{let t=r;for(const[n,o]of e.entries()){if(t=t[o],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(y=>`[${JSON.stringify(y)}]`).join("")}`);const f=CID$1.asCID(t);if(f)return{value:f,remaining:e.slice(n+1).join("/")}}return{value:t}};class Block{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get$1(this.value,e.split("/").filter(Boolean))}}const encode$f=async({value:r,codec:e,hasher:t})=>{if(typeof r>"u")throw new Error('Missing required argument "value"');if(!e||!t)throw new Error("Missing required argument: codec or hasher");const n=e.encode(r),o=await t.digest(n),f=CID$1.create(1,e.code,o);return new Block({value:r,bytes:n,cid:f})},createUnsafe=({bytes:r,cid:e,value:t,codec:n})=>{const o=t!==void 0?t:n&&n.decode(r);if(o===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Block({cid:e,bytes:r,value:o})},create$4=async({bytes:r,cid:e,hasher:t,codec:n})=>{if(!r)throw new Error('Missing required argument "bytes"');if(!t)throw new Error('Missing required argument "hasher"');const o=n.decode(r),f=await t.digest(r);if(!equals$4(e.multihash.bytes,f.bytes))throw new Error("CID hash does not match bytes");return createUnsafe({bytes:r,cid:e,value:o,codec:n})};function mitt(r){return{all:r=r||new Map,on:function(e,t){var n=r.get(e);n?n.push(t):r.set(e,[t])},off:function(e,t){var n=r.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var n=r.get(e);n&&n.slice().map(function(o){o(t)}),(n=r.get("*"))&&n.slice().map(function(o){o(e,t)})}}}const{isBinary}=byteslib,encode$e=r=>isBinary(r)?encode$f({value:r,hasher:sha256$2,codec:raw}):encode$f({value:r,hasher:sha256$2,codec:dagCBOR}),decode$c=({bytes:r,cid:e})=>{let t,n;const{code:o}=e,f=e.multihash.code||decode$g(e.multihash).code;if(f===18)t=sha256$2;else throw new Error("Unsupported hash function: "+f);if(o===113)n=dagCBOR;else if(o===85)n=raw;else throw new Error("Unsupported codec: "+o);return create$4({bytes:r,cid:e,codec:n,hasher:t})};class Transaction{constructor(){Object.assign(this,mitt()),this.blocks=[]}static create(){return new this}static async load(e){const t=await CarReader.fromBytes(e),[n]=await t.getRoots();return{root:n,get:f=>t.get(f).then(y=>decode$c(y)).then(({value:y})=>y)}}async add(e){const t=await encode$e(e);return this.last=t,this.blocks.push(t),this.emit("size",this.size),t.cid}async get(e){const{cid:t,bytes:n,value:o}=await decode$c(e);return{cid:t,bytes:n,value:o}}undo(){return this.blocks.pop()}async commit(){const e=this.last.cid;let t=0,n=headerLength({roots:[e]});t+=n;for(const y of this.blocks)t+=blockLength(y);const o=new Uint8Array(t),f=await createWriter(o,{headerSize:n});f.addRoot(e);for(const y of this.blocks)f.write(y);return await f.close(),f.bytes}get size(){if(!(this!=null&&this.last))return 0;const e=this.last.cid;let t=0,n=headerLength({roots:[e]});t+=n;for(const o of this.blocks)t+=blockLength(o);return t}}var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var r=1e3,e=r*60,t=e*60,n=t*24,o=n*7,f=n*365.25;ms=function(E,v){v=v||{};var D=typeof E;if(D==="string"&&E.length>0)return y(E);if(D==="number"&&isFinite(E))return v.long?m(E):h(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))};function y(E){if(E=String(E),!(E.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(!!v){var D=parseFloat(v[1]),I=(v[2]||"ms").toLowerCase();switch(I){case"years":case"year":case"yrs":case"yr":case"y":return D*f;case"weeks":case"week":case"w":return D*o;case"days":case"day":case"d":return D*n;case"hours":case"hour":case"hrs":case"hr":case"h":return D*t;case"minutes":case"minute":case"mins":case"min":case"m":return D*e;case"seconds":case"second":case"secs":case"sec":case"s":return D*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return D;default:return}}}}function h(E){var v=Math.abs(E);return v>=n?Math.round(E/n)+"d":v>=t?Math.round(E/t)+"h":v>=e?Math.round(E/e)+"m":v>=r?Math.round(E/r)+"s":E+"ms"}function m(E){var v=Math.abs(E);return v>=n?$(E,v,n,"day"):v>=t?$(E,v,t,"hour"):v>=e?$(E,v,e,"minute"):v>=r?$(E,v,r,"second"):E+" ms"}function $(E,v,D,I){var A=v>=D*1.5;return Math.round(E/D)+" "+I+(A?"s":"")}return ms}function setup(r){t.debug=t,t.default=t,t.coerce=m,t.disable=f,t.enable=o,t.enabled=y,t.humanize=requireMs(),t.destroy=$,Object.keys(r).forEach(E=>{t[E]=r[E]}),t.names=[],t.skips=[],t.formatters={};function e(E){let v=0;for(let D=0;D<E.length;D++)v=(v<<5)-v+E.charCodeAt(D),v|=0;return t.colors[Math.abs(v)%t.colors.length]}t.selectColor=e;function t(E){let v,D=null,I,A;function k(...O){if(!k.enabled)return;const U=k,q=Number(new Date),j=q-(v||q);U.diff=j,U.prev=v,U.curr=q,v=q,O[0]=t.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let P=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(X,K)=>{if(X==="%%")return"%";P++;const N=t.formatters[K];if(typeof N=="function"){const W=O[P];X=N.call(U,W),O.splice(P,1),P--}return X}),t.formatArgs.call(U,O),(U.log||t.log).apply(U,O)}return k.namespace=E,k.useColors=t.useColors(),k.color=t.selectColor(E),k.extend=n,k.destroy=t.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>D!==null?D:(I!==t.namespaces&&(I=t.namespaces,A=t.enabled(E)),A),set:O=>{D=O}}),typeof t.init=="function"&&t.init(k),k}function n(E,v){const D=t(this.namespace+(typeof v>"u"?":":v)+E);return D.log=this.log,D}function o(E){t.save(E),t.namespaces=E,t.names=[],t.skips=[];let v;const D=(typeof E=="string"?E:"").split(/[\s,]+/),I=D.length;for(v=0;v<I;v++)!D[v]||(E=D[v].replace(/\*/g,".*?"),E[0]==="-"?t.skips.push(new RegExp("^"+E.slice(1)+"$")):t.names.push(new RegExp("^"+E+"$")))}function f(){const E=[...t.names.map(h),...t.skips.map(h).map(v=>"-"+v)].join(",");return t.enable(""),E}function y(E){if(E[E.length-1]==="*")return!0;let v,D;for(v=0,D=t.skips.length;v<D;v++)if(t.skips[v].test(E))return!1;for(v=0,D=t.names.length;v<D;v++)if(t.names[v].test(E))return!0;return!1}function h(E){return E.toString().substring(2,E.toString().length-2).replace(/\.\*\?$/,"*")}function m(E){return E instanceof Error?E.stack||E.message:E}function $(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var common$1=setup;(function(r,e){e.formatArgs=n,e.save=o,e.load=f,e.useColors=t,e.storage=y(),e.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const $="color: "+this.color;m.splice(1,0,$,"color: inherit");let E=0,v=0;m[0].replace(/%[a-zA-Z%]/g,D=>{D!=="%%"&&(E++,D==="%c"&&(v=E))}),m.splice(v,0,$)}e.log=console.debug||console.log||(()=>{});function o(m){try{m?e.storage.setItem("debug",m):e.storage.removeItem("debug")}catch{}}function f(){let m;try{m=e.storage.getItem("debug")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=process.env.DEBUG),m}function y(){try{return localStorage}catch{}}r.exports=common$1(e);const{formatters:h}=r.exports;h.j=function(m){try{return JSON.stringify(m)}catch($){return"[UnexpectedJSONParseError]: "+$.message}}})(browser,browser.exports);const debug=browser.exports;function assign(r,e){for(const t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function createError(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return assign(r,t)}catch{t.message=r.message,t.stack=r.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(r)),assign(new o,t)}}var errCode=createError;let nanoid=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function base$2(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var f=r.charAt(o),y=f.charCodeAt(0);if(t[y]!==255)throw new TypeError(f+" is ambiguous");t[y]=o}var h=r.length,m=r.charAt(0),$=Math.log(h)/Math.log(256),E=Math.log(256)/Math.log(h);function v(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var k=0,O=0,U=0,q=A.length;U!==q&&A[U]===0;)U++,k++;for(var j=(q-U)*E+1>>>0,P=new Uint8Array(j);U!==q;){for(var L=A[U],X=0,K=j-1;(L!==0||X<O)&&K!==-1;K--,X++)L+=256*P[K]>>>0,P[K]=L%h>>>0,L=L/h>>>0;if(L!==0)throw new Error("Non-zero carry");O=X,U++}for(var N=j-O;N!==j&&P[N]===0;)N++;for(var W=m.repeat(k);N<j;++N)W+=r.charAt(P[N]);return W}function D(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var k=0;if(A[k]!==" "){for(var O=0,U=0;A[k]===m;)O++,k++;for(var q=(A.length-k)*$+1>>>0,j=new Uint8Array(q);A[k];){var P=t[A.charCodeAt(k)];if(P===255)return;for(var L=0,X=q-1;(P!==0||L<U)&&X!==-1;X--,L++)P+=h*j[X]>>>0,j[X]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");U=L,k++}if(A[k]!==" "){for(var K=q-U;K!==q&&j[K]===0;)K++;for(var N=new Uint8Array(O+(q-K)),W=O;K!==q;)N[W++]=j[K++];return N}}}function I(A){var k=D(A);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:D,decode:I}}var src$2=base$2,_brrp__multiformats_scope_baseX$2=src$2;const coerce$2=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},fromString$5=r=>new TextEncoder().encode(r),toString$7=r=>new TextDecoder().decode(r);class Encoder$2{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$2{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}}class ComposedDecoder$2{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$2=(r,e)=>new ComposedDecoder$2({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Codec$2{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$2(e,t,n),this.decoder=new Decoder$2(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$5=({name:r,prefix:e,encode:t,decode:n})=>new Codec$2(r,e,t,n),baseX$2=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$2(t,e);return from$5({prefix:r,name:e,encode:n,decode:f=>coerce$2(o(f))})},decode$b=(r,e,t,n)=>{const o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let f=r.length;for(;r[f-1]==="=";)--f;const y=new Uint8Array(f*t/8|0);let h=0,m=0,$=0;for(let E=0;E<f;++E){const v=o[r[E]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<t|v,h+=t,h>=8&&(h-=8,y[$++]=255&m>>h)}if(h>=t||255&m<<8-h)throw new SyntaxError("Unexpected end of data");return y},encode$d=(r,e,t)=>{const n=e[e.length-1]==="=",o=(1<<t)-1;let f="",y=0,h=0;for(let m=0;m<r.length;++m)for(h=h<<8|r[m],y+=8;y>t;)y-=t,f+=e[o&h>>y];if(y&&(f+=e[o&h<<t-y]),n)for(;f.length*t&7;)f+="=";return f},rfc4648$2=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>from$5({prefix:e,name:r,encode(o){return encode$d(o,n,t)},decode(o){return decode$b(o,n,t,r)}}),identity$9=from$5({prefix:"\0",name:"identity",encode:r=>toString$7(r),decode:r=>fromString$5(r)}),identityBase$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$9},Symbol.toStringTag,{value:"Module"})),base2$4=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$5=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$4},Symbol.toStringTag,{value:"Module"})),base8$4=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$5=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$4},Symbol.toStringTag,{value:"Module"})),base10$4=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$5=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$4},Symbol.toStringTag,{value:"Module"})),base16$4=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$2=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$5=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$4,base16upper:base16upper$2},Symbol.toStringTag,{value:"Module"})),base32$3=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$4=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$3,base32upper:base32upper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32hex:base32hex$1,base32hexupper:base32hexupper$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"})),base36$4=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$2=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$5=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$4,base36upper:base36upper$2},Symbol.toStringTag,{value:"Module"})),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base64$8=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$2=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$2=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$2=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$9=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$8,base64pad:base64pad$2,base64url:base64url$2,base64urlpad:base64urlpad$2},Symbol.toStringTag,{value:"Module"})),alphabet$2=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars$2=alphabet$2.reduce((r,e,t)=>(r[t]=e,r),[]),alphabetCharsToBytes$2=alphabet$2.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function encode$c(r){return r.reduce((e,t)=>(e+=alphabetBytesToChars$2[t],e),"")}function decode$a(r){const e=[];for(const t of r){const n=alphabetCharsToBytes$2[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const base256emoji$4=from$5({prefix:"\u{1F680}",name:"base256emoji",encode:encode$c,decode:decode$a}),base256emoji$5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$4},Symbol.toStringTag,{value:"Module"}));var encode_1$1=encode$b,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$b(r,e,t){e=e||[],t=t||0;for(var n=t;r>=INT$1;)e[t++]=r&255|MSB$2,r/=128;for(;r&MSBALL$1;)e[t++]=r&255|MSB$2,r>>>=7;return e[t]=r|0,encode$b.bytes=t-n+1,e}var decode$9=read$1,MSB$1$1=128,REST$1$1=127;function read$1(r,n){var t=0,n=n||0,o=0,f=n,y,h=r.length;do{if(f>=h)throw read$1.bytes=0,new RangeError("Could not decode varint");y=r[f++],t+=o<28?(y&REST$1$1)<<o:(y&REST$1$1)*Math.pow(2,o),o+=7}while(y>=MSB$1$1);return read$1.bytes=f-n,t}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$2=function(r){return r<N1$1?1:r<N2$1?2:r<N3$1?3:r<N4$1?4:r<N5$1?5:r<N6$1?6:r<N7$1?7:r<N8$1?8:r<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$9,encodingLength:length$2},_brrp_varint$1=varint$1;const encodeTo$1=(r,e,t=0)=>(_brrp_varint$1.encode(r,e,t),e),encodingLength$1=r=>_brrp_varint$1.encodingLength(r),create$3=(r,e)=>{const t=e.byteLength,n=encodingLength$1(r),o=n+encodingLength$1(t),f=new Uint8Array(o+t);return encodeTo$1(r,f,0),encodeTo$1(t,f,n),f.set(e,o),new Digest$1(r,t,e,f)};class Digest$1{constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}}const from$4=({name:r,code:e,encode:t})=>new Hasher$1(r,e,t);class Hasher$1{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create$3(this.code,t):t.then(n=>create$3(this.code,n))}else throw Error("Unknown type, must be binary type")}}const sha$1=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),sha256$1=from$4({name:"sha2-256",code:18,encode:sha$1("SHA-256")}),sha512$1=from$4({name:"sha2-512",code:19,encode:sha$1("SHA-512")}),sha2$1=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$1,sha512:sha512$1},Symbol.toStringTag,{value:"Module"})),code$4=0,name$2="identity",encode$a=coerce$2,digest$2=r=>create$3(code$4,encode$a(r)),identity$7={code:code$4,name:name$2,encode:encode$a,digest:digest$2},identity$8=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$7},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$2={...identityBase$2,...base2$5,...base8$5,...base10$5,...base16$5,...base32$4,...base36$5,...base58$1,...base64$9,...base256emoji$5};({...sha2$1,...identity$8});function asUint8Array$1(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function allocUnsafe$2(r=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function createCodec$2(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const string$2=createCodec$2("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ascii$2=createCodec$2("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=allocUnsafe$2(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases$2.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases$2};function toString$6(r,e="utf8"){const t=BASES$2[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function fromString$4(r,e="utf8"){const t=BASES$2[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0];class Key{constructor(e,t){if(typeof e=="string")this._buf=fromString$4(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(e="utf8"){return toString$6(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Key(e.join(pathSepS))}static random(){return new Key(nanoid().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Key(e):typeof e.uint8Array=="function"?new Key(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const e=new Uint8Array(this._buf.byteLength+1);e.fill(pathSep,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),n=e.list();for(let o=0;o<t.length;o++){if(n.length<o+1)return!1;const f=t[o],y=n[o];if(f<y)return!0;if(f>y)return!1}return t.length<n.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(e){return new Key(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pathSepS)||(e+=pathSepS),e+=this.type(),new Key(e)}parent(){const e=this.list();return e.length===1?new Key(pathSepS):new Key(e.slice(0,-1).join(pathSepS))}child(e){return this.toString()===pathSepS?e:e.toString()===pathSepS?this:new Key(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Key.withNamespaces([...this.namespaces(),...flatten(e.map(t=>t.namespaces()))])}}function namespaceType(r){const e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function namespaceValue(r){const e=r.split(":");return e[e.length-1]}function flatten(r){return[].concat(...r)}const length$1=async r=>{let e=0;for await(const t of r)e++;return e};var itLength=length$1;const log=debug("ipfs:repo:migrator:migration-8");function unwrap$1(r){return r.child?unwrap$1(r.child):r}function keyToMultihash(r){try{const e=base32$5.decode(`b${r.toString().toLowerCase().slice(1)}`),t=CID$1.decode(e).multihash.bytes,n=base32$5.encode(t).slice(1).toUpperCase();return new Key(`/${n}`,!1)}catch{return r}}function keyToCid(r){try{const e=base32$5.decode(`b${r.toString().toLowerCase().slice(1)}`),t=decode$g(e),n=base32$5.encode(CID$1.createV1(code$5,t).bytes).slice(1);return new Key(`/${n.toUpperCase()}`,!1)}catch{return r}}async function process$3(r,e,t){const n=r.blocks;await n.open();const o=unwrap$1(n),f=await itLength(o.queryKeys({filters:[y=>t(y).toString()!==y.toString()]}));try{let y=0;for await(const h of o.query({})){const m=t(h.key);m.toString()!==h.key.toString()&&(y+=1,log(`Migrating Block from ${h.key} to ${m}`,await o.has(h.key)),await o.delete(h.key),await o.put(m,h.value),e(y/f*100,`Migrated Block from ${h.key} to ${m}`))}}finally{await n.close()}}const migration$4={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>process$3(r,e,keyToMultihash),revert:(r,e=()=>{})=>process$3(r,e,keyToCid)},textDecoder$1=new TextDecoder;function decodeVarint(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");const o=r[e++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,e]}function decodeBytes(r,e){let t;[t,e]=decodeVarint(r,e);const n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function decodeKey(r,e){let t;return[t,e]=decodeVarint(r,e),[t&7,t>>3,e]}function decodeLink(r){const e={},t=r.length;let n=0;for(;n<t;){let o,f;if([o,f,n]=decodeKey(r,n),f===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=decodeBytes(r,n)}else if(f===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let y;[y,n]=decodeBytes(r,n),e.Name=textDecoder$1.decode(y)}else if(f===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=decodeVarint(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${f}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(r){const e=r.length;let t=0,n,o=!1,f;for(;t<e;){let h,m;if([h,m,t]=decodeKey(r,t),h!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${h}`);if(m===1){if(f)throw new Error("protobuf: (PBNode) duplicate Data section");[f,t]=decodeBytes(r,t),n&&(o=!0)}else if(m===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let $;[$,t]=decodeBytes(r,t),n.push(decodeLink($))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${m}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");const y={};return f&&(y.Data=f),y.Links=n||[],y}const textEncoder$3=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=encodeVarint(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){const n=textEncoder$3.encode(r.Name);t-=n.length,e.set(n,t),t=encodeVarint(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=encodeVarint(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function encodeNode(r){const e=sizeNode(r),t=new Uint8Array(e);let n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=encodeVarint(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let o=r.Links.length-1;o>=0;o--){const f=encodeLink(r.Links[o],t.subarray(0,n));n-=f,n=encodeVarint(t,n,f)-1,t[n]=18}return t}function sizeLink(r){let e=0;if(r.Hash){const t=r.Hash.length;e+=1+t+sov(t)}if(typeof r.Name=="string"){const t=textEncoder$3.encode(r.Name).length;e+=1+t+sov(t)}return typeof r.Tsize=="number"&&(e+=1+sov(r.Tsize)),e}function sizeNode(r){let e=0;if(r.Data){const t=r.Data.length;e+=1+t+sov(t)}if(r.Links)for(const t of r.Links){const n=sizeLink(t);e+=1+n+sov(n)}return e}function encodeVarint(r,e,t){e-=sov(t);const n=e;for(;t>=maxUInt32;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function sov(r){return r%2===0&&r++,Math.floor((len64(r)+6)/7)}function len64(r){let e=0;return r>=maxInt32&&(r=Math.floor(r/maxInt32),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+len8tab[r]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$2=new TextEncoder;function linkComparator(r,e){if(r===e)return 0;const t=r.Name?textEncoder$2.encode(r.Name):[],n=e.Name?textEncoder$2.encode(e.Name):[];let o=t.length,f=n.length;for(let y=0,h=Math.min(o,f);y<h;++y)if(t[y]!==n[y]){o=t[y],f=n[y];break}return o<f?-1:f<o?1:0}function hasOnlyProperties(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function validate(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(r,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){const t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(t,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&linkComparator(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}const code$3=112;function encode$9(r){validate(r);const e={};return r.Links&&(e.Links=r.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),encodeNode(e)}function decode$8(r){const e=decodeNode(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{const o={};try{o.Hash=CID$1.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),t}var minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(r,e){for(var t=new Array(arguments.length-1),n=0,o=2,f=!0;o<arguments.length;)t[n++]=arguments[o++];return new Promise(function(h,m){t[n]=function(E){if(f)if(f=!1,E)m(E);else{for(var v=new Array(arguments.length-1),D=0;D<v.length;)v[D++]=arguments[D];h.apply(null,v)}};try{r.apply(e||null,t)}catch($){f&&(f=!1,m($))}})}var base64$7={};(function(r){var e=r;e.length=function(h){var m=h.length;if(!m)return 0;for(var $=0;--m%4>1&&h.charAt(m)==="=";)++$;return Math.ceil(h.length*3)/4-$};for(var t=new Array(64),n=new Array(123),o=0;o<64;)n[t[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(h,m,$){for(var E=null,v=[],D=0,I=0,A;m<$;){var k=h[m++];switch(I){case 0:v[D++]=t[k>>2],A=(k&3)<<4,I=1;break;case 1:v[D++]=t[A|k>>4],A=(k&15)<<2,I=2;break;case 2:v[D++]=t[A|k>>6],v[D++]=t[k&63],I=0;break}D>8191&&((E||(E=[])).push(String.fromCharCode.apply(String,v)),D=0)}return I&&(v[D++]=t[A],v[D++]=61,I===1&&(v[D++]=61)),E?(D&&E.push(String.fromCharCode.apply(String,v.slice(0,D))),E.join("")):String.fromCharCode.apply(String,v.slice(0,D))};var f="invalid encoding";e.decode=function(h,m,$){for(var E=$,v=0,D,I=0;I<h.length;){var A=h.charCodeAt(I++);if(A===61&&v>1)break;if((A=n[A])===void 0)throw Error(f);switch(v){case 0:D=A,v=1;break;case 1:m[$++]=D<<2|(A&48)>>4,D=A,v=2;break;case 2:m[$++]=(D&15)<<4|(A&60)>>2,D=A,v=3;break;case 3:m[$++]=(D&3)<<6|A,v=0;break}}if(v===1)throw Error(f);return $-E},e.test=function(h){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(h)}})(base64$7);var eventemitter=EventEmitter$3;function EventEmitter$3(){this._listeners={}}EventEmitter$3.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};EventEmitter$3.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===t?n.splice(o,1):++o;return this};EventEmitter$3.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,n)}return this};var float=factory(factory);function factory(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function o(m,$,E){e[0]=m,$[E]=t[0],$[E+1]=t[1],$[E+2]=t[2],$[E+3]=t[3]}function f(m,$,E){e[0]=m,$[E]=t[3],$[E+1]=t[2],$[E+2]=t[1],$[E+3]=t[0]}r.writeFloatLE=n?o:f,r.writeFloatBE=n?f:o;function y(m,$){return t[0]=m[$],t[1]=m[$+1],t[2]=m[$+2],t[3]=m[$+3],e[0]}function h(m,$){return t[3]=m[$],t[2]=m[$+1],t[1]=m[$+2],t[0]=m[$+3],e[0]}r.readFloatLE=n?y:h,r.readFloatBE=n?h:y}():function(){function e(n,o,f,y){var h=o<0?1:0;if(h&&(o=-o),o===0)n(1/o>0?0:2147483648,f,y);else if(isNaN(o))n(2143289344,f,y);else if(o>34028234663852886e22)n((h<<31|2139095040)>>>0,f,y);else if(o<11754943508222875e-54)n((h<<31|Math.round(o/1401298464324817e-60))>>>0,f,y);else{var m=Math.floor(Math.log(o)/Math.LN2),$=Math.round(o*Math.pow(2,-m)*8388608)&8388607;n((h<<31|m+127<<23|$)>>>0,f,y)}}r.writeFloatLE=e.bind(null,writeUintLE),r.writeFloatBE=e.bind(null,writeUintBE);function t(n,o,f){var y=n(o,f),h=(y>>31)*2+1,m=y>>>23&255,$=y&8388607;return m===255?$?NaN:h*(1/0):m===0?h*1401298464324817e-60*$:h*Math.pow(2,m-150)*($+8388608)}r.readFloatLE=t.bind(null,readUintLE),r.readFloatBE=t.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function o(m,$,E){e[0]=m,$[E]=t[0],$[E+1]=t[1],$[E+2]=t[2],$[E+3]=t[3],$[E+4]=t[4],$[E+5]=t[5],$[E+6]=t[6],$[E+7]=t[7]}function f(m,$,E){e[0]=m,$[E]=t[7],$[E+1]=t[6],$[E+2]=t[5],$[E+3]=t[4],$[E+4]=t[3],$[E+5]=t[2],$[E+6]=t[1],$[E+7]=t[0]}r.writeDoubleLE=n?o:f,r.writeDoubleBE=n?f:o;function y(m,$){return t[0]=m[$],t[1]=m[$+1],t[2]=m[$+2],t[3]=m[$+3],t[4]=m[$+4],t[5]=m[$+5],t[6]=m[$+6],t[7]=m[$+7],e[0]}function h(m,$){return t[7]=m[$],t[6]=m[$+1],t[5]=m[$+2],t[4]=m[$+3],t[3]=m[$+4],t[2]=m[$+5],t[1]=m[$+6],t[0]=m[$+7],e[0]}r.readDoubleLE=n?y:h,r.readDoubleBE=n?h:y}():function(){function e(n,o,f,y,h,m){var $=y<0?1:0;if($&&(y=-y),y===0)n(0,h,m+o),n(1/y>0?0:2147483648,h,m+f);else if(isNaN(y))n(0,h,m+o),n(2146959360,h,m+f);else if(y>17976931348623157e292)n(0,h,m+o),n(($<<31|2146435072)>>>0,h,m+f);else{var E;if(y<22250738585072014e-324)E=y/5e-324,n(E>>>0,h,m+o),n(($<<31|E/4294967296)>>>0,h,m+f);else{var v=Math.floor(Math.log(y)/Math.LN2);v===1024&&(v=1023),E=y*Math.pow(2,-v),n(E*4503599627370496>>>0,h,m+o),n(($<<31|v+1023<<20|E*1048576&1048575)>>>0,h,m+f)}}}r.writeDoubleLE=e.bind(null,writeUintLE,0,4),r.writeDoubleBE=e.bind(null,writeUintBE,4,0);function t(n,o,f,y,h){var m=n(y,h+o),$=n(y,h+f),E=($>>31)*2+1,v=$>>>20&2047,D=4294967296*($&1048575)+m;return v===2047?D?NaN:E*(1/0):v===0?E*5e-324*D:E*Math.pow(2,v-1075)*(D+4503599627370496)}r.readDoubleLE=t.bind(null,readUintLE,0,4),r.readDoubleBE=t.bind(null,readUintBE,4,0)}(),r}function writeUintLE(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function writeUintBE(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function readUintLE(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function readUintBE(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}var utf8$2={};(function(r){var e=r;e.length=function(n){for(var o=0,f=0,y=0;y<n.length;++y)f=n.charCodeAt(y),f<128?o+=1:f<2048?o+=2:(f&64512)===55296&&(n.charCodeAt(y+1)&64512)===56320?(++y,o+=4):o+=3;return o},e.read=function(n,o,f){var y=f-o;if(y<1)return"";for(var h=null,m=[],$=0,E;o<f;)E=n[o++],E<128?m[$++]=E:E>191&&E<224?m[$++]=(E&31)<<6|n[o++]&63:E>239&&E<365?(E=((E&7)<<18|(n[o++]&63)<<12|(n[o++]&63)<<6|n[o++]&63)-65536,m[$++]=55296+(E>>10),m[$++]=56320+(E&1023)):m[$++]=(E&15)<<12|(n[o++]&63)<<6|n[o++]&63,$>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,m)),$=0);return h?($&&h.push(String.fromCharCode.apply(String,m.slice(0,$))),h.join("")):String.fromCharCode.apply(String,m.slice(0,$))},e.write=function(n,o,f){for(var y=f,h,m,$=0;$<n.length;++$)h=n.charCodeAt($),h<128?o[f++]=h:h<2048?(o[f++]=h>>6|192,o[f++]=h&63|128):(h&64512)===55296&&((m=n.charCodeAt($+1))&64512)===56320?(h=65536+((h&1023)<<10)+(m&1023),++$,o[f++]=h>>18|240,o[f++]=h>>12&63|128,o[f++]=h>>6&63|128,o[f++]=h&63|128):(o[f++]=h>>12|224,o[f++]=h>>6&63|128,o[f++]=h&63|128);return f-y}})(utf8$2);var pool_1=pool;function pool(r,e,t){var n=t||8192,o=n>>>1,f=null,y=n;return function(m){if(m<1||m>o)return r(m);y+m>n&&(f=r(n),y=0);var $=e.call(f,y,y+=m);return y&7&&(y=(y|7)+1),$}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var r=requireMinimal();function e(f,y){this.lo=f>>>0,this.hi=y>>>0}var t=e.zero=new e(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var n=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(y){if(y===0)return t;var h=y<0;h&&(y=-y);var m=y>>>0,$=(y-m)/4294967296>>>0;return h&&($=~$>>>0,m=~m>>>0,++m>4294967295&&(m=0,++$>4294967295&&($=0))),new e(m,$)},e.from=function(y){if(typeof y=="number")return e.fromNumber(y);if(r.isString(y))if(r.Long)y=r.Long.fromString(y);else return e.fromNumber(parseInt(y,10));return y.low||y.high?new e(y.low>>>0,y.high>>>0):t},e.prototype.toNumber=function(y){if(!y&&this.hi>>>31){var h=~this.lo+1>>>0,m=~this.hi>>>0;return h||(m=m+1>>>0),-(h+m*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(y){return r.Long?new r.Long(this.lo|0,this.hi|0,Boolean(y)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(y)}};var o=String.prototype.charCodeAt;return e.fromHash=function(y){return y===n?t:new e((o.call(y,0)|o.call(y,1)<<8|o.call(y,2)<<16|o.call(y,3)<<24)>>>0,(o.call(y,4)|o.call(y,5)<<8|o.call(y,6)<<16|o.call(y,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var y=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^y)>>>0,this.lo=(this.lo<<1^y)>>>0,this},e.prototype.zzDecode=function(){var y=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^y)>>>0,this.hi=(this.hi>>>1^y)>>>0,this},e.prototype.length=function(){var y=this.lo,h=(this.lo>>>28|this.hi<<4)>>>0,m=this.hi>>>24;return m===0?h===0?y<16384?y<128?1:2:y<2097152?3:4:h<16384?h<128?5:6:h<2097152?7:8:m<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(r){var e=r;e.asPromise=aspromise,e.base64=base64$7,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f},e.isString=function(f){return typeof f=="string"||f instanceof String},e.isObject=function(f){return f&&typeof f=="object"},e.isset=e.isSet=function(f,y){var h=f[y];return h!=null&&f.hasOwnProperty(y)?typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(f){return typeof f=="number"?e.Buffer?e._Buffer_allocUnsafe(f):new e.Array(f):e.Buffer?e._Buffer_from(f):typeof Uint8Array>"u"?f:new Uint8Array(f)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(f){return f?e.LongBits.from(f).toHash():e.LongBits.zeroHash},e.longFromHash=function(f,y){var h=e.LongBits.fromHash(f);return e.Long?e.Long.fromBits(h.lo,h.hi,y):h.toNumber(Boolean(y))};function t(o,f,y){for(var h=Object.keys(f),m=0;m<h.length;++m)(o[h[m]]===void 0||!y)&&(o[h[m]]=f[h[m]]);return o}e.merge=t,e.lcFirst=function(f){return f.charAt(0).toLowerCase()+f.substring(1)};function n(o){function f(y,h){if(!(this instanceof f))return new f(y,h);Object.defineProperty(this,"message",{get:function(){return y}}),Error.captureStackTrace?Error.captureStackTrace(this,f):Object.defineProperty(this,"stack",{value:new Error().stack||""}),h&&t(this,h)}return f.prototype=Object.create(Error.prototype,{constructor:{value:f,writable:!0,enumerable:!1,configurable:!0},name:{get(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),f}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(f){for(var y={},h=0;h<f.length;++h)y[f[h]]=1;return function(){for(var m=Object.keys(this),$=m.length-1;$>-1;--$)if(y[m[$]]===1&&this[m[$]]!==void 0&&this[m[$]]!==null)return m[$]}},e.oneOfSetter=function(f){return function(y){for(var h=0;h<f.length;++h)f[h]!==y&&delete this[f[h]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(y,h){return new o(y,h)},e._Buffer_allocUnsafe=o.allocUnsafe||function(y){return new o(y)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64$6=util$4.base64,utf8$1=util$4.utf8;function Op(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function noop$2(){}function State(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$2=function r(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function r(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function r(e,t,n){return this.tail=this.tail.next=new Op(e,t,n),this.len+=t,this};function writeByte(r,e,t){e[t]=r&255}function writeVarint32(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function VarintOp(r,e){this.len=r,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function r(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function r(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function r(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}Writer$1.prototype.uint64=function r(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function r(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function r(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}Writer$1.prototype.fixed32=function r(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function r(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function r(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function r(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function r(e,t,n){t.set(e,n)}:function r(e,t,n){for(var o=0;o<e.length;++o)t[n+o]=e[o]};Writer$1.prototype.bytes=function r(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var n=Writer$1.alloc(t=base64$6.length(e));base64$6.decode(e,n,0),e=n}return this.uint32(t)._push(writeBytes,t,e)};Writer$1.prototype.string=function r(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function r(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function r(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function r(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};Writer$1.prototype.finish=function r(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};Writer$1._configure=function(r){BufferWriter$1=r,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var o=0;o<e.length;)t[n++]=e[o++]}};BufferWriter.prototype.bytes=function r(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this};function writeStringBuffer(r,e,t){r.length<40?util$3.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}BufferWriter.prototype.string=function r(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function Reader$1(r){this.buf=r,this.pos=0,this.len=r.length}var create_array=typeof Uint8Array<"u"?function r(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function r(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$1=function r(){return util$2.Buffer?function(t){return(Reader$1.create=function(o){return util$2.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(t)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function r(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function r(){return this.uint32()|0};Reader$1.prototype.sint32=function r(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var r=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function r(){return this.uint32()!==0};function readFixed32_end(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function r(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function r(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};Reader$1.prototype.string=function r(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function r(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Reader$1._configure=function(r){BufferReader$1=r,Reader$1.create=create$1(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(r){Reader.call(this,r)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function r(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Service.prototype.rpcCall=function r(e,t,n,o,f){if(!o)throw TypeError("request must be specified");var y=this;if(!f)return util.asPromise(r,y,e,t,n,o);if(!y.rpcImpl){setTimeout(function(){f(Error("already ended"))},0);return}try{return y.rpcImpl(e,t[y.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(m,$){if(m)return y.emit("error",m,e),f(m);if($===null){y.end(!0);return}if(!($ instanceof n))try{$=n[y.responseDelimited?"decodeDelimited":"decode"]($)}catch(E){return y.emit("error",E,e),f(E)}return y.emit("data",$,e),f(null,$)})}catch(h){y.emit("error",h,e),setTimeout(function(){f(h)},0);return}};Service.prototype.end=function r(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(r){var e=r;e.Service=service})(rpc);var roots={};(function(r){var e=r;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=t;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}t()})(indexMinimal);(function(r){r.exports=indexMinimal})(minimal$1);const $protobuf=getDefaultExportFromCjs(minimal$1.exports),$Reader$5=$protobuf.Reader,$Writer$5=$protobuf.Writer;$protobuf.util;const $root$5=$protobuf.roots.default||($protobuf.roots.default={}),ipfs=$root$5.ipfs=(()=>{const r={};return r.pin=function(){const e={};return e.Set=function(){function t(n){if(n)for(var o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(o,f){return f||(f=$Writer$5.create()),o.version!=null&&Object.hasOwnProperty.call(o,"version")&&f.uint32(8).uint32(o.version),o.fanout!=null&&Object.hasOwnProperty.call(o,"fanout")&&f.uint32(16).uint32(o.fanout),o.seed!=null&&Object.hasOwnProperty.call(o,"seed")&&f.uint32(29).fixed32(o.seed),f},t.decode=function(o,f){o instanceof $Reader$5||(o=$Reader$5.create(o));for(var y=f===void 0?o.len:o.pos+f,h=new $root$5.ipfs.pin.Set;o.pos<y;){var m=o.uint32();switch(m>>>3){case 1:h.version=o.uint32();break;case 2:h.fanout=o.uint32();break;case 3:h.seed=o.fixed32();break;default:o.skipType(m&7);break}}return h},t.fromObject=function(o){if(o instanceof $root$5.ipfs.pin.Set)return o;var f=new $root$5.ipfs.pin.Set;return o.version!=null&&(f.version=o.version>>>0),o.fanout!=null&&(f.fanout=o.fanout>>>0),o.seed!=null&&(f.seed=o.seed>>>0),f},t.toObject=function(o,f){f||(f={});var y={};return f.defaults&&(y.version=0,y.fanout=0,y.seed=0),o.version!=null&&o.hasOwnProperty("version")&&(y.version=o.version),o.fanout!=null&&o.hasOwnProperty("fanout")&&(y.fanout=o.fanout),o.seed!=null&&o.hasOwnProperty("seed")&&(y.seed=o.seed),y},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t}(),e}(),r})();var fnv1a$1={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),t.BASE=2166136261;function t(n,o=t.BASE){const f=n.length;for(let y=0;y<f;y++)o^=n.charCodeAt(y),o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24);return o>>>0}e.default=t,r.exports=t})(fnv1a$1,fnv1a$1.exports);const fnv1a=getDefaultExportFromCjs(fnv1a$1.exports),PIN_DS_KEY=new Key("/local/pins"),DEFAULT_FANOUT=256,MAX_ITEMS=8192,EMPTY_KEY=CID$1.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),PinTypes={direct:"direct",recursive:"recursive"};function cidToKey(r){return new Key(`/${base32$5.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}function allocUnsafe$1(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function concat$1(r,e){e||(e=r.reduce((o,f)=>o+f.length,0));const t=allocUnsafe$1(e);let n=0;for(const o of r)t.set(o,n),n+=o.length;return t}function compare(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}const identity$6=from$7({prefix:"\0",name:"identity",encode:r=>toString$8(r),decode:r=>fromString$6(r)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$6},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$3({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$3({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),base10$2=baseX$3({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$3({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$3({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$3({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$3({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base64$4=rfc4648$3({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$3({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$3({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$3({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$5=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$4,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars$1=alphabet$1.reduce((r,e,t)=>(r[t]=e,r),[]),alphabetCharsToBytes$1=alphabet$1.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function encode$8(r){return r.reduce((e,t)=>(e+=alphabetBytesToChars$1[t],e),"")}function decode$7(r){const e=[];for(const t of r){const n=alphabetCharsToBytes$1[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const base256emoji$2=from$7({prefix:"\u{1F680}",name:"base256emoji",encode:encode$8,decode:decode$7}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"})),code$2=0,name$1="identity",encode$7=coerce$3,digest$1=r=>create$5(code$2,encode$7(r)),identity$4={code:code$2,name:name$1,encode:encode$7,digest:digest$1},identity$5=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$4},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$6,...base36$3,...base58$2,...base64$5,...base256emoji$3};({...sha2$2,...identity$5});function createCodec$1(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const string$1=createCodec$1("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ascii$1=createCodec$1("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=allocUnsafe$1(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function toString$5(r,e="utf8"){const t=BASES$1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function fromString$3(r,e="utf8"){const t=BASES$1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}const PinSet=ipfs.pin.Set;function readHeader(r){const e=r.Data;if(!e)throw new Error("No data present");const t=varint$3.decode(e),n=varint$3.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");const o=e.slice(n,t+n),f=PinSet.toObject(PinSet.decode(o),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(f.version!==1)throw new Error(`Unsupported Set version: ${f.version}`);if(f.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:f,data:e.slice(t+n)}}function hash(r,e){const t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);const o=fromString$3(e.toString()),f=concat$1([t,o],t.byteLength+o.byteLength);return fnv1a(toString$5(f))}async function*walkItems(r,e){const t=readHeader(e);let n=0;for(const o of e.Links){if(n<t.header.fanout){const f=o.Hash;if(!EMPTY_KEY.equals(f)){const y=await r.get(f),h=decode$8(y);yield*walkItems(r,h)}}else yield o.Hash;n++}}async function*loadSet(r,e,t){const n=e.Links.find(y=>y.Name===t);if(!n)throw new Error("No link found with name "+t);const o=await r.get(n.Hash),f=decode$8(o);yield*walkItems(r,f)}function storeItems(r,e){return t(e,0);async function t(n,o){const f=PinSet.encode({version:1,fanout:DEFAULT_FANOUT,seed:o}).finish(),y=varint$3.encode(f.length),h=concat$1([y,f]),m=[];for(let E=0;E<DEFAULT_FANOUT;E++)m.push({Name:"",Tsize:1,Hash:EMPTY_KEY});if(n.length<=MAX_ITEMS){const E=n.map(I=>({link:{Name:"",Tsize:1,Hash:I.key},data:I.data||new Uint8Array})).sort((I,A)=>compare(I.link.Hash.bytes,A.link.Hash.bytes)),v=m.concat(E.map(I=>I.link));return{Data:concat$1([h,...E.map(I=>I.data)]),Links:v}}else{const E=n.reduce((D,I)=>{const A=hash(o,I.key)%DEFAULT_FANOUT;return D[A]=A in D?D[A].concat([I]):[I],D},[]);let v=0;for(const D of E){const I=await t(D,o+1);await $(I,v),v++}return{Data:h,Links:m}}async function $(E,v){const D=encode$9(E),I=await sha256$2.digest(D),A=CID$1.createV0(I);await r.put(A,D);const k=E.Links.reduce((O,U)=>O+(U.Tsize||0),0)+D.length;m[v]={Name:"",Tsize:k,Hash:A}}}}async function storeSet(r,e,t){const n=await storeItems(r,t.map(m=>({key:m}))),o=encode$9(n),f=await sha256$2.digest(o),y=CID$1.createV0(f);await r.put(y,o);const h=n.Links.reduce((m,$)=>m+$.Tsize,0)+o.length;return{Name:e,Tsize:h,Hash:y}}async function pinsToDatastore(r,e,t,n){if(!await e.has(PIN_DS_KEY))return;const o=await e.get(PIN_DS_KEY),f=CID$1.decode(o),y=await r.get(f),h=decode$8(y);let m=0;const $=await itLength(loadSet(r,h,PinTypes.recursive))+await itLength(loadSet(r,h,PinTypes.direct));for await(const E of loadSet(r,h,PinTypes.recursive)){m++;const v={depth:1/0};E.version!==0&&(v.version=E.version),E.code!==code$3&&(v.codec=E.code),await t.put(cidToKey(E),encode$k(v)),n(m/$*100,`Migrated recursive pin ${E}`)}for await(const E of loadSet(r,h,PinTypes.direct)){m++;const v={depth:0};E.version!==0&&(v.version=E.version),E.code!==code$3&&(v.codec=E.code),await t.put(cidToKey(E),encode$k(v)),n(m/$*100,`Migrated direct pin ${E}`)}await r.delete(f),await e.delete(PIN_DS_KEY)}async function pinsToDAG(r,e,t,n){const o=[],f=[];let y=0;const h=await itLength(t.queryKeys({}));for await(const{key:D,value:I}of t.query({})){y++;const A=decode$j(I),k=CID$1.create(A.version||0,A.codec||code$3,decode$g(base32$5.decode("b"+D.toString().toLowerCase().split("/").pop())));A.depth===0?(n(y/h*100,`Reverted direct pin ${k}`),f.push(k)):(n(y/h*100,`Reverted recursive pin ${k}`),o.push(k))}n(100,"Updating pin root");const m={Links:[await storeSet(r,PinTypes.direct,f),await storeSet(r,PinTypes.recursive,o)]},$=encode$9(m),E=await sha256$2.digest($),v=CID$1.createV0(E);await r.put(v,$),await e.put(PIN_DS_KEY,v.bytes)}async function process$2(r,e,t){const n=r.blocks,o=r.datastore,f=r.pins;await n.open(),await o.open(),await f.open();try{await t(n,o,f,e)}finally{await f.close(),await o.close(),await n.close()}}const migration$3={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>process$2(r,e,pinsToDatastore),revert:(r,e=()=>{})=>process$2(r,e,pinsToDAG)};function notFoundError(r){return r=r||new Error("Not Found"),errCode(r,"ERR_NOT_FOUND")}new Key("/config");new Key("/version");function findLevelJs(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function keysToBinary(r,e,t=()=>{}){const n=findLevelJs(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await withEach(n,(f,y)=>[{type:"del",key:f},{type:"put",key:fromString$3(f),value:y}])}async function keysToStrings(r,e,t=()=>{}){const n=findLevelJs(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await withEach(n,(f,y)=>[{type:"del",key:f},{type:"put",key:toString$5(f),value:y}])}function unwrap(r){return r.child?unwrap(r.child):r}async function process$1(r,e,t){const n=Object.entries(r).map(([y,h])=>({key:y,backend:unwrap(h)})).filter(({key:y,backend:h})=>h.constructor.name==="LevelDatastore").map(({key:y,backend:h})=>({name:y,store:h}));e(0,`Migrating ${n.length} dbs`);let o=0;const f=y=>{e(Math.round(o/n.length*100),y)};for(const{name:y,store:h}of n){await h.open();try{await t(y,h,f)}finally{o++,await h.close()}}e(100,`Migrated ${n.length} dbs`)}const migration$2={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>process$1(r,e,keysToBinary),revert:(r,e=()=>{})=>process$1(r,e,keysToStrings)};function withEach(r,e){function t(n,o){const f=r.store("readwrite"),y=f.transaction;let h=0,m;y.onabort=()=>o(m||y.error||new Error("aborted by user")),y.oncomplete=()=>o();function $(){const E=n[h++],v=E.key;let D;try{D=E.type==="del"?f.delete(v):f.put(E.value,v)}catch(I){m=I,y.abort();return}h<n.length&&(D.onsuccess=$)}$()}return new Promise((n,o)=>{const f=r.iterator(),y=m=>m;f._deserializeKey=f._deserializeValue=y,h();function h(){const m=($,E,v)=>{if($||E===void 0){const D=I=>{if(I){o(I);return}n()};f.end(D);return}t(e(E,v),h)};f.next(m)}})}const MFS_ROOT_KEY=new Key("/local/filesroot");async function storeMfsRootInDatastore(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(MFS_ROOT_KEY)){const t=await r.root.get(MFS_ROOT_KEY);await r.datastore.put(MFS_ROOT_KEY,t),await r.root.delete(MFS_ROOT_KEY)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function storeMfsRootInRoot(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(MFS_ROOT_KEY)){const t=await r.datastore.get(MFS_ROOT_KEY);await r.root.put(MFS_ROOT_KEY,t),await r.datastore.delete(MFS_ROOT_KEY)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}const migration$1={version:11,description:"Store mfs root in the datastore",migrate:storeMfsRootInDatastore,revert:storeMfsRootInRoot},$Reader$4=$protobuf.Reader,$Writer$4=$protobuf.Writer,$util$4=$protobuf.util,$root$4=$protobuf.roots.default||($protobuf.roots.default={}),Protocols=$root$4.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=$util$4.emptyArray,r.encode=function(t,n){if(n||(n=$Writer$4.create()),t.protocols!=null&&t.protocols.length)for(var o=0;o<t.protocols.length;++o)n.uint32(10).string(t.protocols[o]);return n},r.decode=function(t,n){t instanceof $Reader$4||(t=$Reader$4.create(t));for(var o=n===void 0?t.len:t.pos+n,f=new $root$4.Protocols;t.pos<o;){var y=t.uint32();switch(y>>>3){case 1:f.protocols&&f.protocols.length||(f.protocols=[]),f.protocols.push(t.string());break;default:t.skipType(y&7);break}}return f},r.fromObject=function(t){if(t instanceof $root$4.Protocols)return t;var n=new $root$4.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var o=0;o<t.protocols.length;++o)n.protocols[o]=String(t.protocols[o])}return n},r.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.protocols=[]),t.protocols&&t.protocols.length){o.protocols=[];for(var f=0;f<t.protocols.length;++f)o.protocols[f]=t.protocols[f]}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})(),$Reader$3=$protobuf.Reader,$Writer$3=$protobuf.Writer,$util$3=$protobuf.util,$root$3=$protobuf.roots.default||($protobuf.roots.default={}),Addresses=$root$3.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=$util$3.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=$Writer$3.create()),t.addrs!=null&&t.addrs.length)for(var o=0;o<t.addrs.length;++o)$root$3.Addresses.Address.encode(t.addrs[o],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&$root$3.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof $Reader$3||(t=$Reader$3.create(t));for(var o=n===void 0?t.len:t.pos+n,f=new $root$3.Addresses;t.pos<o;){var y=t.uint32();switch(y>>>3){case 1:f.addrs&&f.addrs.length||(f.addrs=[]),f.addrs.push($root$3.Addresses.Address.decode(t,t.uint32()));break;case 2:f.certifiedRecord=$root$3.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(y&7);break}}return f},r.fromObject=function(t){if(t instanceof $root$3.Addresses)return t;var n=new $root$3.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var o=0;o<t.addrs.length;++o){if(typeof t.addrs[o]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[o]=$root$3.Addresses.Address.fromObject(t.addrs[o])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=$root$3.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addrs=[]),n.defaults&&(o.certifiedRecord=null),t.addrs&&t.addrs.length){o.addrs=[];for(var f=0;f<t.addrs.length;++f)o.addrs[f]=$root$3.Addresses.Address.toObject(t.addrs[f],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(o.certifiedRecord=$root$3.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var o=Object.keys(n),f=0;f<o.length;++f)n[o[f]]!=null&&(this[o[f]]=n[o[f]])}e.prototype.multiaddr=$util$3.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:$util$3.oneOfGetter(t=["isCertified"]),set:$util$3.oneOfSetter(t)}),e.encode=function(o,f){return f||(f=$Writer$3.create()),o.multiaddr!=null&&Object.hasOwnProperty.call(o,"multiaddr")&&f.uint32(10).bytes(o.multiaddr),o.isCertified!=null&&Object.hasOwnProperty.call(o,"isCertified")&&f.uint32(16).bool(o.isCertified),f},e.decode=function(o,f){o instanceof $Reader$3||(o=$Reader$3.create(o));for(var y=f===void 0?o.len:o.pos+f,h=new $root$3.Addresses.Address;o.pos<y;){var m=o.uint32();switch(m>>>3){case 1:h.multiaddr=o.bytes();break;case 2:h.isCertified=o.bool();break;default:o.skipType(m&7);break}}return h},e.fromObject=function(o){if(o instanceof $root$3.Addresses.Address)return o;var f=new $root$3.Addresses.Address;return o.multiaddr!=null&&(typeof o.multiaddr=="string"?$util$3.base64.decode(o.multiaddr,f.multiaddr=$util$3.newBuffer($util$3.base64.length(o.multiaddr)),0):o.multiaddr.length&&(f.multiaddr=o.multiaddr)),o.isCertified!=null&&(f.isCertified=Boolean(o.isCertified)),f},e.toObject=function(o,f){f||(f={});var y={};return f.defaults&&(f.bytes===String?y.multiaddr="":(y.multiaddr=[],f.bytes!==Array&&(y.multiaddr=$util$3.newBuffer(y.multiaddr)))),o.multiaddr!=null&&o.hasOwnProperty("multiaddr")&&(y.multiaddr=f.bytes===String?$util$3.base64.encode(o.multiaddr,0,o.multiaddr.length):f.bytes===Array?Array.prototype.slice.call(o.multiaddr):o.multiaddr),o.isCertified!=null&&o.hasOwnProperty("isCertified")&&(y.isCertified=o.isCertified,f.oneofs&&(y._isCertified="isCertified")),y},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}return e.prototype.seq=$util$3.Long?$util$3.Long.fromBits(0,0,!0):0,e.prototype.raw=$util$3.newBuffer([]),e.encode=function(n,o){return o||(o=$Writer$3.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&o.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&o.uint32(18).bytes(n.raw),o},e.decode=function(n,o){n instanceof $Reader$3||(n=$Reader$3.create(n));for(var f=o===void 0?n.len:n.pos+o,y=new $root$3.Addresses.CertifiedRecord;n.pos<f;){var h=n.uint32();switch(h>>>3){case 1:y.seq=n.uint64();break;case 2:y.raw=n.bytes();break;default:n.skipType(h&7);break}}return y},e.fromObject=function(n){if(n instanceof $root$3.Addresses.CertifiedRecord)return n;var o=new $root$3.Addresses.CertifiedRecord;return n.seq!=null&&($util$3.Long?(o.seq=$util$3.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?o.seq=parseInt(n.seq,10):typeof n.seq=="number"?o.seq=n.seq:typeof n.seq=="object"&&(o.seq=new $util$3.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?$util$3.base64.decode(n.raw,o.raw=$util$3.newBuffer($util$3.base64.length(n.raw)),0):n.raw.length&&(o.raw=n.raw)),o},e.toObject=function(n,o){o||(o={});var f={};if(o.defaults){if($util$3.Long){var y=new $util$3.Long(0,0,!0);f.seq=o.longs===String?y.toString():o.longs===Number?y.toNumber():y}else f.seq=o.longs===String?"0":0;o.bytes===String?f.raw="":(f.raw=[],o.bytes!==Array&&(f.raw=$util$3.newBuffer(f.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?f.seq=o.longs===String?String(n.seq):n.seq:f.seq=o.longs===String?$util$3.Long.prototype.toString.call(n.seq):o.longs===Number?new $util$3.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(f.raw=o.bytes===String?$util$3.base64.encode(n.raw,0,n.raw.length):o.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),f},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),r})(),$Reader$2=$protobuf.Reader,$Writer$2=$protobuf.Writer,$util$2=$protobuf.util,$root$2=$protobuf.roots.default||($protobuf.roots.default={}),Peer=$root$2.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}r.prototype.addresses=$util$2.emptyArray,r.prototype.protocols=$util$2.emptyArray,r.prototype.metadata=$util$2.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:$util$2.oneOfGetter(e=["pubKey"]),set:$util$2.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:$util$2.oneOfGetter(e=["peerRecordEnvelope"]),set:$util$2.oneOfSetter(e)}),r.encode=function(n,o){if(o||(o=$Writer$2.create()),n.addresses!=null&&n.addresses.length)for(var f=0;f<n.addresses.length;++f)$root$2.Address.encode(n.addresses[f],o.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var f=0;f<n.protocols.length;++f)o.uint32(18).string(n.protocols[f]);if(n.metadata!=null&&n.metadata.length)for(var f=0;f<n.metadata.length;++f)$root$2.Metadata.encode(n.metadata[f],o.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&o.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&o.uint32(42).bytes(n.peerRecordEnvelope),o},r.decode=function(n,o){n instanceof $Reader$2||(n=$Reader$2.create(n));for(var f=o===void 0?n.len:n.pos+o,y=new $root$2.Peer;n.pos<f;){var h=n.uint32();switch(h>>>3){case 1:y.addresses&&y.addresses.length||(y.addresses=[]),y.addresses.push($root$2.Address.decode(n,n.uint32()));break;case 2:y.protocols&&y.protocols.length||(y.protocols=[]),y.protocols.push(n.string());break;case 3:y.metadata&&y.metadata.length||(y.metadata=[]),y.metadata.push($root$2.Metadata.decode(n,n.uint32()));break;case 4:y.pubKey=n.bytes();break;case 5:y.peerRecordEnvelope=n.bytes();break;default:n.skipType(h&7);break}}return y},r.fromObject=function(n){if(n instanceof $root$2.Peer)return n;var o=new $root$2.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");o.addresses=[];for(var f=0;f<n.addresses.length;++f){if(typeof n.addresses[f]!="object")throw TypeError(".Peer.addresses: object expected");o.addresses[f]=$root$2.Address.fromObject(n.addresses[f])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");o.protocols=[];for(var f=0;f<n.protocols.length;++f)o.protocols[f]=String(n.protocols[f])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");o.metadata=[];for(var f=0;f<n.metadata.length;++f){if(typeof n.metadata[f]!="object")throw TypeError(".Peer.metadata: object expected");o.metadata[f]=$root$2.Metadata.fromObject(n.metadata[f])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?$util$2.base64.decode(n.pubKey,o.pubKey=$util$2.newBuffer($util$2.base64.length(n.pubKey)),0):n.pubKey.length&&(o.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?$util$2.base64.decode(n.peerRecordEnvelope,o.peerRecordEnvelope=$util$2.newBuffer($util$2.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(o.peerRecordEnvelope=n.peerRecordEnvelope)),o},r.toObject=function(n,o){o||(o={});var f={};if((o.arrays||o.defaults)&&(f.addresses=[],f.protocols=[],f.metadata=[]),n.addresses&&n.addresses.length){f.addresses=[];for(var y=0;y<n.addresses.length;++y)f.addresses[y]=$root$2.Address.toObject(n.addresses[y],o)}if(n.protocols&&n.protocols.length){f.protocols=[];for(var y=0;y<n.protocols.length;++y)f.protocols[y]=n.protocols[y]}if(n.metadata&&n.metadata.length){f.metadata=[];for(var y=0;y<n.metadata.length;++y)f.metadata[y]=$root$2.Metadata.toObject(n.metadata[y],o)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(f.pubKey=o.bytes===String?$util$2.base64.encode(n.pubKey,0,n.pubKey.length):o.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,o.oneofs&&(f._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(f.peerRecordEnvelope=o.bytes===String?$util$2.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):o.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,o.oneofs&&(f._peerRecordEnvelope="peerRecordEnvelope")),f},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})();$root$2.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}r.prototype.multiaddr=$util$2.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:$util$2.oneOfGetter(e=["isCertified"]),set:$util$2.oneOfSetter(e)}),r.encode=function(n,o){return o||(o=$Writer$2.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&o.uint32(16).bool(n.isCertified),o},r.decode=function(n,o){n instanceof $Reader$2||(n=$Reader$2.create(n));for(var f=o===void 0?n.len:n.pos+o,y=new $root$2.Address;n.pos<f;){var h=n.uint32();switch(h>>>3){case 1:y.multiaddr=n.bytes();break;case 2:y.isCertified=n.bool();break;default:n.skipType(h&7);break}}return y},r.fromObject=function(n){if(n instanceof $root$2.Address)return n;var o=new $root$2.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$util$2.base64.decode(n.multiaddr,o.multiaddr=$util$2.newBuffer($util$2.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),n.isCertified!=null&&(o.isCertified=Boolean(n.isCertified)),o},r.toObject=function(n,o){o||(o={});var f={};return o.defaults&&(o.bytes===String?f.multiaddr="":(f.multiaddr=[],o.bytes!==Array&&(f.multiaddr=$util$2.newBuffer(f.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(f.multiaddr=o.bytes===String?$util$2.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(f.isCertified=n.isCertified,o.oneofs&&(f._isCertified="isCertified")),f},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})();$root$2.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=$util$2.newBuffer([]),r.encode=function(t,n){return n||(n=$Writer$2.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof $Reader$2||(t=$Reader$2.create(t));for(var o=n===void 0?t.len:t.pos+n,f=new $root$2.Metadata;t.pos<o;){var y=t.uint32();switch(y>>>3){case 1:f.key=t.string();break;case 2:f.value=t.bytes();break;default:t.skipType(y&7);break}}return f},r.fromObject=function(t){if(t instanceof $root$2.Metadata)return t;var n=new $root$2.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?$util$2.base64.decode(t.value,n.value=$util$2.newBuffer($util$2.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var o={};return n.defaults&&(o.key="",n.bytes===String?o.value="":(o.value=[],n.bytes!==Array&&(o.value=$util$2.newBuffer(o.value)))),t.key!=null&&t.hasOwnProperty("key")&&(o.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(o.value=n.bytes===String?$util$2.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})();const $Reader$1=$protobuf.Reader,$Writer$1=$protobuf.Writer,$util$1=$protobuf.util,$root$1=$protobuf.roots.default||($protobuf.roots.default={}),Envelope=$root$1.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=$util$1.newBuffer([]),r.prototype.payloadType=$util$1.newBuffer([]),r.prototype.payload=$util$1.newBuffer([]),r.prototype.signature=$util$1.newBuffer([]),r.encode=function(t,n){return n||(n=$Writer$1.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof $Reader$1||(t=$Reader$1.create(t));for(var o=n===void 0?t.len:t.pos+n,f=new $root$1.Envelope;t.pos<o;){var y=t.uint32();switch(y>>>3){case 1:f.publicKey=t.bytes();break;case 2:f.payloadType=t.bytes();break;case 3:f.payload=t.bytes();break;case 5:f.signature=t.bytes();break;default:t.skipType(y&7);break}}return f},r.fromObject=function(t){if(t instanceof $root$1.Envelope)return t;var n=new $root$1.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?$util$1.base64.decode(t.publicKey,n.publicKey=$util$1.newBuffer($util$1.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?$util$1.base64.decode(t.payloadType,n.payloadType=$util$1.newBuffer($util$1.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?$util$1.base64.decode(t.payload,n.payload=$util$1.newBuffer($util$1.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?$util$1.base64.decode(t.signature,n.signature=$util$1.newBuffer($util$1.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var o={};return n.defaults&&(n.bytes===String?o.publicKey="":(o.publicKey=[],n.bytes!==Array&&(o.publicKey=$util$1.newBuffer(o.publicKey))),n.bytes===String?o.payloadType="":(o.payloadType=[],n.bytes!==Array&&(o.payloadType=$util$1.newBuffer(o.payloadType))),n.bytes===String?o.payload="":(o.payload=[],n.bytes!==Array&&(o.payload=$util$1.newBuffer(o.payload))),n.bytes===String?o.signature="":(o.signature=[],n.bytes!==Array&&(o.signature=$util$1.newBuffer(o.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(o.publicKey=n.bytes===String?$util$1.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(o.payloadType=n.bytes===String?$util$1.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(o.payload=n.bytes===String?$util$1.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(o.signature=n.bytes===String?$util$1.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})(),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={}),PeerRecord=$root.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=$util.newBuffer([]),r.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,r.prototype.addresses=$util.emptyArray,r.encode=function(t,n){if(n||(n=$Writer.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var o=0;o<t.addresses.length;++o)$root.PeerRecord.AddressInfo.encode(t.addresses[o],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));for(var o=n===void 0?t.len:t.pos+n,f=new $root.PeerRecord;t.pos<o;){var y=t.uint32();switch(y>>>3){case 1:f.peerId=t.bytes();break;case 2:f.seq=t.uint64();break;case 3:f.addresses&&f.addresses.length||(f.addresses=[]),f.addresses.push($root.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(y&7);break}}return f},r.fromObject=function(t){if(t instanceof $root.PeerRecord)return t;var n=new $root.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?$util.base64.decode(t.peerId,n.peerId=$util.newBuffer($util.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&($util.Long?(n.seq=$util.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new $util.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var o=0;o<t.addresses.length;++o){if(typeof t.addresses[o]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[o]=$root.PeerRecord.AddressInfo.fromObject(t.addresses[o])}}return n},r.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addresses=[]),n.defaults)if(n.bytes===String?o.peerId="":(o.peerId=[],n.bytes!==Array&&(o.peerId=$util.newBuffer(o.peerId))),$util.Long){var f=new $util.Long(0,0,!0);o.seq=n.longs===String?f.toString():n.longs===Number?f.toNumber():f}else o.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(o.peerId=n.bytes===String?$util.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?o.seq=n.longs===String?String(t.seq):t.seq:o.seq=n.longs===String?$util.Long.prototype.toString.call(t.seq):n.longs===Number?new $util.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){o.addresses=[];for(var y=0;y<t.addresses.length;++y)o.addresses[y]=$root.PeerRecord.AddressInfo.toObject(t.addresses[y],n)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}return e.prototype.multiaddr=$util.newBuffer([]),e.encode=function(n,o){return o||(o=$Writer.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),o},e.decode=function(n,o){n instanceof $Reader||(n=$Reader.create(n));for(var f=o===void 0?n.len:n.pos+o,y=new $root.PeerRecord.AddressInfo;n.pos<f;){var h=n.uint32();switch(h>>>3){case 1:y.multiaddr=n.bytes();break;default:n.skipType(h&7);break}}return y},e.fromObject=function(n){if(n instanceof $root.PeerRecord.AddressInfo)return n;var o=new $root.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$util.base64.decode(n.multiaddr,o.multiaddr=$util.newBuffer($util.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),o},e.toObject=function(n,o){o||(o={});var f={};return o.defaults&&(o.bytes===String?f.multiaddr="":(f.multiaddr=[],o.bytes!==Array&&(f.multiaddr=$util.newBuffer(f.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(f.multiaddr=o.bytes===String?$util.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),f},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),r})(),word="[a-fA-F\\d:]",boundry=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6segment="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6segment}:){6}(?:${v4}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6segment}:){5}(?::${v4}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6segment}){0,5}:${v4}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ipRegex=r=>r&&r.exact?v46Exact:new RegExp(`(?:${boundry(r)}${v4}${boundry(r)})|(?:${boundry(r)}${v6}${boundry(r)})`,"g");ipRegex.v4=r=>r&&r.exact?v4exact:new RegExp(`${boundry(r)}${v4}${boundry(r)}`,"g");ipRegex.v6=r=>r&&r.exact?v6exact:new RegExp(`${boundry(r)}${v6}${boundry(r)}`,"g");function functionTimeout(r){const e=(...t)=>r(...t);return Object.defineProperty(e,"name",{value:`functionTimeout(${r.name||"<anonymous>"})`,configurable:!0}),e}const{toString:toString$4}=Object.prototype;function isRegexp(r){return toString$4.call(r)==="[object RegExp]"}const flagMap={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function clonedRegexp(r,e={}){if(!isRegexp(r))throw new TypeError("Expected a RegExp instance");const t=Object.keys(flagMap).map(o=>(typeof e[o]=="boolean"?e[o]:r[o])?flagMap[o]:"").join(""),n=new RegExp(e.source||r.source,t);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:r.lastIndex,n}function isMatch(r,e,{timeout:t}={}){try{return functionTimeout(()=>clonedRegexp(r).test(e),{timeout:t})()}catch(n){throw n}}const maxIPv4Length=15,maxIPv6Length=45,options={timeout:400};function isIP(r){return isMatch(ipRegex({exact:!0}),r.slice(0,maxIPv6Length),options)}function isIPv6(r){return isMatch(ipRegex.v6({exact:!0}),r.slice(0,maxIPv6Length),options)}function isIPv4(r){return isMatch(ipRegex.v4({exact:!0}),r.slice(0,maxIPv4Length),options)}function base$1(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var f=r.charAt(o),y=f.charCodeAt(0);if(t[y]!==255)throw new TypeError(f+" is ambiguous");t[y]=o}var h=r.length,m=r.charAt(0),$=Math.log(h)/Math.log(256),E=Math.log(256)/Math.log(h);function v(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var k=0,O=0,U=0,q=A.length;U!==q&&A[U]===0;)U++,k++;for(var j=(q-U)*E+1>>>0,P=new Uint8Array(j);U!==q;){for(var L=A[U],X=0,K=j-1;(L!==0||X<O)&&K!==-1;K--,X++)L+=256*P[K]>>>0,P[K]=L%h>>>0,L=L/h>>>0;if(L!==0)throw new Error("Non-zero carry");O=X,U++}for(var N=j-O;N!==j&&P[N]===0;)N++;for(var W=m.repeat(k);N<j;++N)W+=r.charAt(P[N]);return W}function D(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var k=0;if(A[k]!==" "){for(var O=0,U=0;A[k]===m;)O++,k++;for(var q=(A.length-k)*$+1>>>0,j=new Uint8Array(q);A[k];){var P=t[A.charCodeAt(k)];if(P===255)return;for(var L=0,X=q-1;(P!==0||L<U)&&X!==-1;X--,L++)P+=h*j[X]>>>0,j[X]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");U=L,k++}if(A[k]!==" "){for(var K=q-U;K!==q&&j[K]===0;)K++;for(var N=new Uint8Array(O+(q-K)),W=O;K!==q;)N[W++]=j[K++];return N}}}function I(A){var k=D(A);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:D,decode:I}}var src$1=base$1,_brrp__multiformats_scope_baseX$1=src$1;const equals$2=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},coerce$1=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},fromString$2=r=>new TextEncoder().encode(r),toString$3=r=>new TextDecoder().decode(r);class Encoder$1{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$1{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$1(this,e)}}class ComposedDecoder$1{constructor(e){this.decoders=e}or(e){return or$1(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$1=(r,e)=>new ComposedDecoder$1({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Codec$1{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$1(e,t,n),this.decoder=new Decoder$1(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$3=({name:r,prefix:e,encode:t,decode:n})=>new Codec$1(r,e,t,n),baseX$1=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$1(t,e);return from$3({prefix:r,name:e,encode:n,decode:f=>coerce$1(o(f))})},decode$6=(r,e,t,n)=>{const o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let f=r.length;for(;r[f-1]==="=";)--f;const y=new Uint8Array(f*t/8|0);let h=0,m=0,$=0;for(let E=0;E<f;++E){const v=o[r[E]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<t|v,h+=t,h>=8&&(h-=8,y[$++]=255&m>>h)}if(h>=t||255&m<<8-h)throw new SyntaxError("Unexpected end of data");return y},encode$6=(r,e,t)=>{const n=e[e.length-1]==="=",o=(1<<t)-1;let f="",y=0,h=0;for(let m=0;m<r.length;++m)for(h=h<<8|r[m],y+=8;y>t;)y-=t,f+=e[o&h>>y];if(y&&(f+=e[o&h<<t-y]),n)for(;f.length*t&7;)f+="=";return f},rfc4648$1=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>from$3({prefix:e,name:r,encode(o){return encode$6(o,n,t)},decode(o){return decode$6(o,n,t,r)}}),identity$3=from$3({prefix:"\0",name:"identity",encode:r=>toString$3(r),decode:r=>fromString$2(r)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$3},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base32$1=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$2=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$1,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z},Symbol.toStringTag,{value:"Module"})),base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"})),base64$2=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$3=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$2,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars=alphabet.reduce((r,e,t)=>(r[t]=e,r),[]),alphabetCharsToBytes=alphabet.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function encode$5(r){return r.reduce((e,t)=>(e+=alphabetBytesToChars[t],e),"")}function decode$5(r){const e=[];for(const t of r){const n=alphabetCharsToBytes[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const base256emoji=from$3({prefix:"\u{1F680}",name:"base256emoji",encode:encode$5,decode:decode$5}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"}));var encode_1=encode$4,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$4(r,e,t){e=e||[],t=t||0;for(var n=t;r>=INT;)e[t++]=r&255|MSB,r/=128;for(;r&MSBALL;)e[t++]=r&255|MSB,r>>>=7;return e[t]=r|0,encode$4.bytes=t-n+1,e}var decode$4=read,MSB$1=128,REST$1=127;function read(r,n){var t=0,n=n||0,o=0,f=n,y,h=r.length;do{if(f>=h)throw read.bytes=0,new RangeError("Could not decode varint");y=r[f++],t+=o<28?(y&REST$1)<<o:(y&REST$1)*Math.pow(2,o),o+=7}while(y>=MSB$1);return read.bytes=f-n,t}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(r){return r<N1?1:r<N2?2:r<N3?3:r<N4?4:r<N5?5:r<N6?6:r<N7?7:r<N8?8:r<N9?9:10},varint={encode:encode_1,decode:decode$4,encodingLength:length},_brrp_varint=varint;const decode$3=(r,e=0)=>[_brrp_varint.decode(r,e),_brrp_varint.decode.bytes],encodeTo=(r,e,t=0)=>(_brrp_varint.encode(r,e,t),e),encodingLength=r=>_brrp_varint.encodingLength(r),create=(r,e)=>{const t=e.byteLength,n=encodingLength(r),o=n+encodingLength(t),f=new Uint8Array(o+t);return encodeTo(r,f,0),encodeTo(t,f,n),f.set(e,o),new Digest(r,t,e,f)},decode$2=r=>{const e=coerce$1(r),[t,n]=decode$3(e),[o,f]=decode$3(e.subarray(n)),y=e.subarray(n+f);if(y.byteLength!==o)throw new Error("Incorrect length");return new Digest(t,o,y,e)},equals$1=(r,e)=>{if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&equals$2(r.bytes,t.bytes)}};class Digest{constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}}const from$2=({name:r,code:e,encode:t})=>new Hasher(r,e,t);class Hasher{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create(this.code,t):t.then(n=>create(this.code,n))}else throw Error("Unknown type, must be binary type")}}const sha=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),sha256=from$2({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from$2({name:"sha2-512",code:19,encode:sha("SHA-512")}),sha2=Object.freeze(Object.defineProperty({__proto__:null,sha256,sha512},Symbol.toStringTag,{value:"Module"})),code$1=0,name="identity",encode$3=coerce$1,digest=r=>create(code$1,encode$3(r)),identity$1={code:code$1,name,encode:encode$3,digest},identity$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const format$1=(r,e)=>{const{bytes:t,version:n}=r;switch(n){case 0:return toStringV0(t,baseCache(r),e||base58btc$1.encoder);default:return toStringV1(t,baseCache(r),e||base32$1.encoder)}},cache=new WeakMap,baseCache=r=>{const e=cache.get(r);if(e==null){const t=new Map;return cache.set(r,t),t}return e};class CID{constructor(e,t,n,o){this.code=t,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=create(e,t);return CID.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,t){const n=t;return n&&e.code===n.code&&e.version===n.version&&equals$1(e.multihash,n.multihash)}toString(e){return format$1(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const t=e;if(t instanceof CID)return t;if(t!=null&&t.asCID===t){const{version:n,code:o,multihash:f,bytes:y}=t;return new CID(n,o,f,y||encodeCID(n,o,f.bytes))}else if(t!=null&&t[cidSymbol]===!0){const{version:n,multihash:o,code:f}=t,y=decode$2(o);return CID.create(n,f,y)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,t,n,n.bytes)}case 1:{const o=encodeCID(e,t,n.bytes);return new CID(e,t,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,t){return CID.create(1,e,t)}static decode(e){const[t,n]=CID.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID.inspectBytes(e),n=t.size-t.multihashSize,o=coerce$1(e.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const f=o.subarray(t.multihashSize-t.digestSize),y=new Digest(t.multihashCode,t.digestSize,f,o);return[t.version===0?CID.createV0(y):CID.createV1(t.codec,y),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[v,D]=decode$3(e.subarray(t));return t+=D,v};let o=n(),f=DAG_PB_CODE;if(o===18?(o=0,t=0):f=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const y=t,h=n(),m=n(),$=t+m,E=$-y;return{version:o,codec:f,multihashCode:h,digestSize:m,multihashSize:E,size:$}}static parse(e,t){const[n,o]=parseCIDtoBytes(e,t),f=CID.decode(o);return baseCache(f).set(n,e),f}}const parseCIDtoBytes=(r,e)=>{switch(r[0]){case"Q":{const t=e||base58btc$1;return[base58btc$1.prefix,t.decode(`${base58btc$1.prefix}${r}`)]}case base58btc$1.prefix:{const t=e||base58btc$1;return[base58btc$1.prefix,t.decode(r)]}case base32$1.prefix:{const t=e||base32$1;return[base32$1.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},toStringV0=(r,e,t)=>{const{prefix:n}=t;if(n!==base58btc$1.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=e.get(n);if(o==null){const f=t.encode(r).slice(1);return e.set(n,f),f}else return o},toStringV1=(r,e,t)=>{const{prefix:n}=t,o=e.get(n);if(o==null){const f=t.encode(r);return e.set(n,f),f}else return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(r,e,t)=>{const n=encodingLength(r),o=n+encodingLength(e),f=new Uint8Array(o+t.byteLength);return encodeTo(r,f,0),encodeTo(e,f,n),f.set(t,o),f},cidSymbol=Symbol.for("@ipld/js-cid/CID"),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$2,...base36$1,...base58,...base64$3,...base256emoji$1};({...sha2,...identity$2});function asUint8Array(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function allocUnsafe(r=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?asUint8Array(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function createCodec(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const string=createCodec("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ascii=createCodec("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=allocUnsafe(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$2(r,e="utf8"){const t=BASES[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}const isV4=isIPv4,isV6=isIPv6,toBytes=function(r){let e=0;if(r=r.toString().trim(),isV4(r)){const t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(isV6(r)){const t=r.split(":",8);let n;for(n=0;n<t.length;n++){const f=isV4(t[n]);let y;f&&(y=toBytes(t[n]),t[n]=toString$2(y.slice(0,2),"base16")),y!=null&&++n<8&&t.splice(n,0,toString$2(y.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);const f=[n,1];for(n=9-t.length;n>0;n--)f.push("0");t.splice.apply(t,f)}const o=new Uint8Array(e+16);for(n=0;n<t.length;n++){const f=parseInt(t[n],16);o[e++]=f>>8&255,o[e++]=f&255}return o}throw new Error("invalid ip address")},toString$1=function(r,e=0,t){e=~~e,t=t!=null?t:r.length-e;const n=new DataView(r.buffer);if(t===4){const o=[];for(let f=0;f<t;f++)o.push(r[e+f]);return o.join(".")}if(t===16){const o=[];for(let f=0;f<t;f+=2)o.push(n.getUint16(e+f).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(r=>{const e=createProtocol(...r);codes[e.code]=e,names[e.name]=e});function createProtocol(r,e,t,n,o){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(o)}}function getProtocol(r){if(typeof r=="number"){if(codes[r]!=null)return codes[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(names[r]!=null)return names[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}function fromString$1(r,e="utf8"){const t=BASES[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function concat(r,e){e==null&&(e=r.reduce((o,f)=>o+f.length,0));const t=allocUnsafe(e);let n=0;for(const o of r)t.set(o,n),n+=o.length;return asUint8Array(t)}function convertToString(r,e){switch(getProtocol(r).code){case 4:case 41:return bytes2ip(e);case 6:case 273:case 33:case 132:return bytes2port(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(e);case 421:return bytes2mh(e);case 444:return bytes2onion(e);case 445:return bytes2onion(e);case 466:return bytes2mb(e);default:return toString$2(e,"base16")}}function convertToBytes(r,e){switch(getProtocol(r).code){case 4:return ip2bytes(e);case 41:return ip2bytes(e);case 6:case 273:case 33:case 132:return port2bytes(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(e);case 421:return mh2bytes(e);case 444:return onion2bytes(e);case 445:return onion32bytes(e);case 466:return mb2bytes(e);default:return fromString$1(e,"base16")}}const decoders=Object.values(bases).map(r=>r.decoder),anybaseDecoder=function(){let r=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(e=>r=r.or(e)),r}();function ip2bytes(r){if(!isIP(r))throw new Error("invalid ip address");return toBytes(r)}function bytes2ip(r){const e=toString$1(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!isIP(e))throw new Error("invalid ip address");return e}function port2bytes(r){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function bytes2port(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function str2bytes(r){const e=fromString$1(r),t=Uint8Array.from(varint$3.encode(e.length));return concat([t,e],t.length+e.length)}function bytes2str(r){const e=varint$3.decode(r);if(r=r.slice(varint$3.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return toString$2(r)}function mh2bytes(r){let e;r[0]==="Q"||r[0]==="1"?e=decode$2(base58btc$1.decode(`z${r}`)).bytes:e=CID.parse(r).multihash.bytes;const t=Uint8Array.from(varint$3.encode(e.length));return concat([t,e],t.length+e.length)}function mb2bytes(r){const e=anybaseDecoder.decode(r),t=Uint8Array.from(varint$3.encode(e.length));return concat([t,e],t.length+e.length)}function bytes2mb(r){const e=varint$3.decode(r),t=r.slice(varint$3.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+toString$2(t,"base64url")}function bytes2mh(r){const e=varint$3.decode(r),t=r.slice(varint$3.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return toString$2(t,"base58btc")}function onion2bytes(r){const e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const t=base32$1.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return concat([t,o],t.length+o.length)}function onion32bytes(r){const e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const t=base32$1.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return concat([t,o],t.length+o.length)}function bytes2onion(r){const e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=toString$2(e,"base32"),o=bytes2port(t);return`${n}:${o}`}function stringToStringTuples(r){const e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){const o=t[n],f=getProtocol(o);if(f.size===0){e.push([o]);continue}if(n++,n>=t.length)throw ParseError("invalid address: "+r);if(f.path===!0){e.push([o,cleanPath(t.slice(n).join("/"))]);break}e.push([o,t[n]])}return e}function stringTuplesToString(r){const e=[];return r.map(t=>{const n=protoFromTuple(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(r){return r.map(e=>{Array.isArray(e)||(e=[e]);const t=protoFromTuple(e);return e.length>1?[t.code,convertToBytes(t.code,e[1])]:[t.code]})}function tuplesToStringTuples(r){return r.map(e=>{const t=protoFromTuple(e);return e[1]!=null?[t.code,convertToString(t.code,e[1])]:[t.code]})}function tuplesToBytes(r){return fromBytes(concat(r.map(e=>{const t=protoFromTuple(e);let n=Uint8Array.from(varint$3.encode(t.code));return e.length>1&&e[1]!=null&&(n=concat([n,e[1]])),n})))}function sizeForAddr(r,e){return r.size>0?r.size/8:r.size===0?0:varint$3.decode(e)+varint$3.decode.bytes}function bytesToTuples(r){const e=[];let t=0;for(;t<r.length;){const n=varint$3.decode(r,t),o=varint$3.decode.bytes,f=getProtocol(n),y=sizeForAddr(f,r.slice(t+o));if(y===0){e.push([n]),t+=o;continue}const h=r.slice(t+o,t+o+y);if(t+=y+o,t>r.length)throw ParseError("Invalid address Uint8Array: "+toString$2(r,"base16"));e.push([n,h])}return e}function bytesToString(r){const e=bytesToTuples(r),t=tuplesToStringTuples(e);return stringTuplesToString(t)}function stringToBytes(r){r=cleanPath(r);const e=stringToStringTuples(r),t=stringTuplesToTuples(e);return tuplesToBytes(t)}function fromString(r){return stringToBytes(r)}function fromBytes(r){const e=validateBytes(r);if(e!=null)throw e;return Uint8Array.from(r)}function validateBytes(r){try{bytesToTuples(r)}catch(e){return e}}function cleanPath(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function ParseError(r){return new Error("Error parsing address: "+r)}function protoFromTuple(r){return getProtocol(r[0])}function equals(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var __classPrivateFieldGet$2=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},__classPrivateFieldSet$1=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(r,t):o?o.value=t:e.set(r,t),t},_DefaultMultiaddr_string,_DefaultMultiaddr_tuples,_DefaultMultiaddr_stringTuples,_a$1;const inspect=Symbol.for("nodejs.util.inspect.custom"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code],P2P_CODES=[getProtocol("p2p").code,getProtocol("ipfs").code],resolvers=new Map,symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr");function isMultiaddr(r){return Boolean(r==null?void 0:r[symbol])}class DefaultMultiaddr{constructor(e){if(_DefaultMultiaddr_string.set(this,void 0),_DefaultMultiaddr_tuples.set(this,void 0),_DefaultMultiaddr_stringTuples.set(this,void 0),this[_a$1]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=fromString(e)}else if(isMultiaddr(e))this.bytes=fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_string,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_string,bytesToString(this.bytes),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_string,"f")}toJSON(){return this.toString()}toOptions(){const e=this.protoCodes(),t=this.toString().split("/").slice(1);let n,o;if(t.length>2)DNS_CODES.includes(e[0])&&P2P_CODES.includes(e[1])?(n=getProtocol("tcp").name,o=443):(n=getProtocol(t[2]).name,o=parseInt(t[3]));else if(DNS_CODES.includes(e[0]))n=getProtocol("tcp").name,o=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:o}}protos(){return this.protoCodes().map(e=>Object.assign({},getProtocol(e)))}protoCodes(){const e=[],t=this.bytes;let n=0;for(;n<t.length;){const o=varint$3.decode(t,n),f=varint$3.decode.bytes,y=getProtocol(o),h=sizeForAddr(y,t.slice(n+f));n+=h+f,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_tuples,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_tuples,bytesToTuples(this.bytes),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_tuples,"f")}stringTuples(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_stringTuples,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_stringTuples,tuplesToStringTuples(this.tuples()),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_stringTuples,"f")}encapsulate(e){return e=new DefaultMultiaddr(e),new DefaultMultiaddr(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new DefaultMultiaddr(n.slice(0,o))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new DefaultMultiaddr(tuplesToBytes(t.slice(0,n)));return this}getPeerId(){try{const t=this.stringTuples().filter(n=>n[0]===names.ipfs.code).pop();if((t==null?void 0:t[1])!=null){const n=t[1];return n[0]==="Q"||n[0]==="1"?toString$2(base58btc$1.decode(`z${n}`),"base58btc"):toString$2(CID.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>getProtocol(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return equals(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find(f=>f.resolvable);if(t==null)return[this];const n=resolvers.get(t.name);if(n==null)throw errCode(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(f=>new DefaultMultiaddr(f))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e!=null?e:this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(_DefaultMultiaddr_string=new WeakMap,_DefaultMultiaddr_tuples=new WeakMap,_DefaultMultiaddr_stringTuples=new WeakMap,_a$1=symbol,inspect)](){return this.inspect()}inspect(){return"<Multiaddr "+toString$2(this.bytes,"base16")+" - "+bytesToString(this.bytes)+">"}}function multiaddr(r){return new DefaultMultiaddr(r)}$protobuf.util.Long=void 0;$protobuf.configure();async function storePeerUnderSingleDatastoreKey(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();const t={},n=[];for await(const{key:o,value:f}of r.datastore.query({prefix:"/peers"})){n.push(o);const y=o.toString(),[h,m,$,E,v]=y.split("/");if(m==="peers"&&!!["protos","addrs","metadata","keys"].includes($)&&!!E)if(t[E]=t[E]||{addresses:[],protocols:[],metadata:[]},$==="protos"){const D=Protocols.decode(f);t[E].protocols=D.protocols.sort()}else if($==="addrs"){const D=Addresses.decode(f);t[E].addresses=D.addrs.sort((I,A)=>multiaddr(I.multiaddr).toString().localeCompare(multiaddr(A.multiaddr).toString())),D.certifiedRecord&&D.certifiedRecord.raw&&(t[E].peerRecordEnvelope=D.certifiedRecord.raw)}else $==="metadata"?t[E].metadata.push({key:v,value:f}):$==="keys"&&(t[E].pubKey=f)}e(33,"Read peer data from store");for(const o of n)await r.datastore.delete(o);e(66,"Removed existing peer data from store");for(const o of Object.keys(t)){const f=t[o];f.metadata=f.metadata.sort((h,m)=>h.key.localeCompare(m.key));const y=Peer.encode(f).finish();await r.datastore.put(new Key(`/peers/${o}`),y)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function storePeerUnderMultipleDatastoreKeys(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();const t={},n=[];for await(const{key:o,value:f}of r.datastore.query({prefix:"/peers"})){n.push(o);const y=o.toString(),[h,m,$]=y.split("/");t[$]=Peer.decode(f)}e(33,"Read peer data from store");for(const o of n)await r.datastore.delete(o);e(66,"Removed existing peer data from store");for(const[o,f]of Object.entries(t)){if(f.protocols&&f.protocols.length>0&&await r.datastore.put(new Key(`/peers/protos/${o}`),Protocols.encode({protocols:f.protocols}).finish()),f.addresses&&f.addresses.length>0){const y=f.peerRecordEnvelope;let h;if(y){const m=Envelope.decode(y),$=PeerRecord.decode(m.payload);h={raw:y,seq:$.seq}}await r.datastore.put(new Key(`/peers/addrs/${o}`),Addresses.encode({addrs:f.addresses,certifiedRecord:h}).finish())}if(f.metadata&&f.metadata.length>0)for(const{key:y,value:h}of f.metadata)await r.datastore.put(new Key(`/peers/metadata/${o}/${y}`),h);f.pubKey&&await r.datastore.put(new Key(`/peers/keys/${o}`),f.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}const migration={version:12,description:"Store each peerstore peer under a single datastore key",migrate:storePeerUnderSingleDatastoreKey,revert:storePeerUnderMultipleDatastoreKeys},emptyMigration={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0};Object.assign({version:1},emptyMigration),Object.assign({version:2},emptyMigration),Object.assign({version:3},emptyMigration),Object.assign({version:4},emptyMigration),Object.assign({version:5},emptyMigration),Object.assign({version:6},emptyMigration),Object.assign({version:7},emptyMigration);class NonReversibleMigrationError extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=NonReversibleMigrationError.code,this.message=e}}NonReversibleMigrationError.code="ERR_NON_REVERSIBLE_MIGRATION";class NotInitializedRepoError extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=NotInitializedRepoError.code,this.message=e}}NotInitializedRepoError.code="ERR_NOT_INITIALIZED_REPO";class RequiredParameterError extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=RequiredParameterError.code,this.message=e}}RequiredParameterError.code="ERR_REQUIRED_PARAMETER";class InvalidValueError extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=InvalidValueError.code,this.message=e}}InvalidValueError.code="ERR_INVALID_VALUE";class MissingRepoOptionsError extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=MissingRepoOptionsError.code,this.message=e}}MissingRepoOptionsError.code="ERR_MISSING_REPO_OPTIONS";debug("ipfs:repo:migrator:repo:init");debug("ipfs:repo:migrator");var bytes$1={exports:{}};/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */bytes$1.exports=bytes;bytes$1.exports.format=format;bytes$1.exports.parse=parse;var formatThousandsRegExp=/\B(?=(\d{3})+(?!\d))/g,formatDecimalsRegExp=/(?:\.0*|(\.[^0]+)0+)$/,map={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},parseRegExp=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function bytes(r,e){return typeof r=="string"?parse(r):typeof r=="number"?format(r,e):null}function format(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",o=e&&e.unitSeparator||"",f=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,y=Boolean(e&&e.fixedDecimals),h=e&&e.unit||"";(!h||!map[h.toLowerCase()])&&(t>=map.pb?h="PB":t>=map.tb?h="TB":t>=map.gb?h="GB":t>=map.mb?h="MB":t>=map.kb?h="KB":h="B");var m=r/map[h.toLowerCase()],$=m.toFixed(f);return y||($=$.replace(formatDecimalsRegExp,"$1")),n&&($=$.split(".").map(function(E,v){return v===0?E.replace(formatThousandsRegExp,n):E}).join(".")),$+o+h}function parse(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=parseRegExp.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(map[n]*t)}class LockExistsError extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=LockExistsError.code}}LockExistsError.code="ERR_LOCK_EXISTS";class NotFoundError extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=NotFoundError.code}}NotFoundError.code="ERR_NOT_FOUND";class InvalidRepoVersionError extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=InvalidRepoVersionError.code}}InvalidRepoVersionError.code="ERR_INVALID_REPO_VERSION";debug("ipfs:repo:version");new Key("version");var eventemitter3={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function o(m,$,E){this.fn=m,this.context=$,this.once=E||!1}function f(m,$,E,v,D){if(typeof E!="function")throw new TypeError("The listener must be a function");var I=new o(E,v||m,D),A=t?t+$:$;return m._events[A]?m._events[A].fn?m._events[A]=[m._events[A],I]:m._events[A].push(I):(m._events[A]=I,m._eventsCount++),m}function y(m,$){--m._eventsCount===0?m._events=new n:delete m._events[$]}function h(){this._events=new n,this._eventsCount=0}h.prototype.eventNames=function(){var $=[],E,v;if(this._eventsCount===0)return $;for(v in E=this._events)e.call(E,v)&&$.push(t?v.slice(1):v);return Object.getOwnPropertySymbols?$.concat(Object.getOwnPropertySymbols(E)):$},h.prototype.listeners=function($){var E=t?t+$:$,v=this._events[E];if(!v)return[];if(v.fn)return[v.fn];for(var D=0,I=v.length,A=new Array(I);D<I;D++)A[D]=v[D].fn;return A},h.prototype.listenerCount=function($){var E=t?t+$:$,v=this._events[E];return v?v.fn?1:v.length:0},h.prototype.emit=function($,E,v,D,I,A){var k=t?t+$:$;if(!this._events[k])return!1;var O=this._events[k],U=arguments.length,q,j;if(O.fn){switch(O.once&&this.removeListener($,O.fn,void 0,!0),U){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,E),!0;case 3:return O.fn.call(O.context,E,v),!0;case 4:return O.fn.call(O.context,E,v,D),!0;case 5:return O.fn.call(O.context,E,v,D,I),!0;case 6:return O.fn.call(O.context,E,v,D,I,A),!0}for(j=1,q=new Array(U-1);j<U;j++)q[j-1]=arguments[j];O.fn.apply(O.context,q)}else{var P=O.length,L;for(j=0;j<P;j++)switch(O[j].once&&this.removeListener($,O[j].fn,void 0,!0),U){case 1:O[j].fn.call(O[j].context);break;case 2:O[j].fn.call(O[j].context,E);break;case 3:O[j].fn.call(O[j].context,E,v);break;case 4:O[j].fn.call(O[j].context,E,v,D);break;default:if(!q)for(L=1,q=new Array(U-1);L<U;L++)q[L-1]=arguments[L];O[j].fn.apply(O[j].context,q)}}return!0},h.prototype.on=function($,E,v){return f(this,$,E,v,!1)},h.prototype.once=function($,E,v){return f(this,$,E,v,!0)},h.prototype.removeListener=function($,E,v,D){var I=t?t+$:$;if(!this._events[I])return this;if(!E)return y(this,I),this;var A=this._events[I];if(A.fn)A.fn===E&&(!D||A.once)&&(!v||A.context===v)&&y(this,I);else{for(var k=0,O=[],U=A.length;k<U;k++)(A[k].fn!==E||D&&!A[k].once||v&&A[k].context!==v)&&O.push(A[k]);O.length?this._events[I]=O.length===1?O[0]:O:y(this,I)}return this},h.prototype.removeAllListeners=function($){var E;return $?(E=t?t+$:$,this._events[E]&&y(this,E)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,r.exports=h})(eventemitter3);const EventEmitter$2=eventemitter3.exports;class TimeoutError extends Error{constructor(e){super(e),this.name="TimeoutError"}}class AbortError$1 extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const getDOMException=r=>globalThis.DOMException===void 0?new AbortError$1(r):new DOMException(r),getAbortedReason=r=>{const e=r.reason===void 0?getDOMException("This operation was aborted."):r.reason;return e instanceof Error?e:getDOMException(e)};function pTimeout(r,e,t,n){let o;const f=new Promise((y,h)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){y(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){const{signal:m}=n;m.aborted&&h(getAbortedReason(m)),m.addEventListener("abort",()=>{h(getAbortedReason(m))})}o=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{y(t())}catch(E){h(E)}return}const m=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,$=t instanceof Error?t:new TimeoutError(m);typeof r.cancel=="function"&&r.cancel(),h($)},e),(async()=>{try{y(await r)}catch(m){h(m)}finally{n.customTimers.clearTimeout.call(void 0,o)}})()});return f.clear=()=>{clearTimeout(o),o=void 0},f}function lowerBound(r,e,t){let n=0,o=r.length;for(;o>0;){const f=Math.trunc(o/2);let y=n+f;t(r[y],e)<=0?(n=++y,o-=f+1):o=f}return n}var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(e,t){t={priority:0,...t};const n={priority:t.priority,run:e};if(this.size&&__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f")[this.size-1].priority>=t.priority){__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").push(n);return}const o=lowerBound(__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f"),n,(f,y)=>y.priority-f.priority);__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").splice(o,0,n)}dequeue(){const e=__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").shift();return e==null?void 0:e.run}filter(e){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(r,t):o?o.value=t:e.set(r,t),t},__classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pendingCount,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_emitEvents,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_onEvent;const timeoutError=new TimeoutError;class AbortError extends Error{}class PQueue extends EventEmitter$2{constructor(e){var t,n,o,f;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pendingCount.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(f=(o=e.interval)===null||o===void 0?void 0:o.toString())!==null&&f!==void 0?f:""}\` (${typeof e.interval})`);__classPrivateFieldSet(this,_PQueue_carryoverConcurrencyCount,e.carryoverConcurrencyCount,"f"),__classPrivateFieldSet(this,_PQueue_isIntervalIgnored,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),__classPrivateFieldSet(this,_PQueue_intervalCap,e.intervalCap,"f"),__classPrivateFieldSet(this,_PQueue_interval,e.interval,"f"),__classPrivateFieldSet(this,_PQueue_queue,new e.queueClass,"f"),__classPrivateFieldSet(this,_PQueue_queueClass,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,__classPrivateFieldSet(this,_PQueue_throwOnTimeout,e.throwOnTimeout===!0,"f"),__classPrivateFieldSet(this,_PQueue_isPaused,e.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet(this,_PQueue_concurrency,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);__classPrivateFieldSet(this,_PQueue_concurrency,e,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(e,t={}){return new Promise((n,o)=>{const f=async()=>{var y,h,m;__classPrivateFieldSet(this,_PQueue_pendingCount,(h=__classPrivateFieldGet(this,_PQueue_pendingCount,"f"),h++,h),"f"),__classPrivateFieldSet(this,_PQueue_intervalCount,(m=__classPrivateFieldGet(this,_PQueue_intervalCount,"f"),m++,m),"f");try{if(!((y=t.signal)===null||y===void 0)&&y.aborted){o(new AbortError("The task was aborted."));return}const E=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):pTimeout(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?__classPrivateFieldGet(this,_PQueue_throwOnTimeout,"f"):t.throwOnTimeout)&&o(timeoutError)}));n(E),this.emit("completed",E)}catch($){o($),this.emit("error",$)}__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_next).call(this)};__classPrivateFieldGet(this,_PQueue_queue,"f").enqueue(f,t),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet(this,_PQueue_queue,new(__classPrivateFieldGet(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(e){__classPrivateFieldGet(this,_PQueue_queue,"f").size<e||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet(this,_PQueue_queue,"f").size<e)}async onIdle(){__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet(this,_PQueue_queue,"f").size}sizeBy(e){return __classPrivateFieldGet(this,_PQueue_queue,"f").filter(e).length}get pending(){return __classPrivateFieldGet(this,_PQueue_pendingCount,"f")}get isPaused(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pendingCount=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function r(){return __classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function r(){return __classPrivateFieldGet(this,_PQueue_pendingCount,"f")<__classPrivateFieldGet(this,_PQueue_concurrency,"f")},_PQueue_next=function r(){var e;__classPrivateFieldSet(this,_PQueue_pendingCount,(e=__classPrivateFieldGet(this,_PQueue_pendingCount,"f"),e--,e),"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_emitEvents=function r(){this.emit("empty"),__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&this.emit("idle")},_PQueue_onResumeInterval=function r(){__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function r(){const e=Date.now();if(__classPrivateFieldGet(this,_PQueue_intervalId,"f")===void 0){const t=__classPrivateFieldGet(this,_PQueue_intervalEnd,"f")-e;if(t<0)__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pendingCount,"f"):0,"f");else return __classPrivateFieldGet(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},t),"f"),!0}return!1},_PQueue_tryToStartAnother=function r(){if(__classPrivateFieldGet(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_emitEvents).call(this),!1;if(!__classPrivateFieldGet(this,_PQueue_isPaused,"f")){const e=!__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const t=__classPrivateFieldGet(this,_PQueue_queue,"f").dequeue();return t?(this.emit("active"),t(),e&&__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function r(){__classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function r(){__classPrivateFieldGet(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pendingCount,"f"):0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function r(){for(;__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_onEvent=async function r(e,t){return new Promise(n=>{const o=()=>{t&&!t()||(this.off(e,o),n())};this.on(e,o)})};PQueue.default&&PQueue.default;new Key("config");new Key("datastore_spec");new Key("api");debug("ipfs:repo:lock:memory");debug("ipfs:repo:utils:walk-dag");debug("ipfs:repo:gc");notFoundError().code;new Key("/local/filesroot");debug("ipfs:repo");const SHARDING_FN="SHARDING",README_FN="_README",all$1=async r=>{const e=[];for await(const t of r)e.push(t);return e};var itAll=all$1;new Key(SHARDING_FN);new Key(README_FN);function base(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var f=r.charAt(o),y=f.charCodeAt(0);if(t[y]!==255)throw new TypeError(f+" is ambiguous");t[y]=o}var h=r.length,m=r.charAt(0),$=Math.log(h)/Math.log(256),E=Math.log(256)/Math.log(h);function v(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var k=0,O=0,U=0,q=A.length;U!==q&&A[U]===0;)U++,k++;for(var j=(q-U)*E+1>>>0,P=new Uint8Array(j);U!==q;){for(var L=A[U],X=0,K=j-1;(L!==0||X<O)&&K!==-1;K--,X++)L+=256*P[K]>>>0,P[K]=L%h>>>0,L=L/h>>>0;if(L!==0)throw new Error("Non-zero carry");O=X,U++}for(var N=j-O;N!==j&&P[N]===0;)N++;for(var W=m.repeat(k);N<j;++N)W+=r.charAt(P[N]);return W}function D(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var k=0;if(A[k]!==" "){for(var O=0,U=0;A[k]===m;)O++,k++;for(var q=(A.length-k)*$+1>>>0,j=new Uint8Array(q);A[k];){var P=t[A.charCodeAt(k)];if(P===255)return;for(var L=0,X=q-1;(P!==0||L<U)&&X!==-1;X--,L++)P+=h*j[X]>>>0,j[X]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");U=L,k++}if(A[k]!==" "){for(var K=q-U;K!==q&&j[K]===0;)K++;for(var N=new Uint8Array(O+(q-K)),W=O;K!==q;)N[W++]=j[K++];return N}}}function I(A){var k=D(A);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:D,decode:I}}var src=base,_brrp__multiformats_scope_baseX=src;const coerce=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class Encoder{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(r,e)=>new ComposedDecoder({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder(e,t,n),this.decoder=new Decoder(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$1=({name:r,prefix:e,encode:t,decode:n})=>new Codec(r,e,t,n),baseX=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX(t,e);return from$1({prefix:r,name:e,encode:n,decode:f=>coerce(o(f))})},decode$1=(r,e,t,n)=>{const o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let f=r.length;for(;r[f-1]==="=";)--f;const y=new Uint8Array(f*t/8|0);let h=0,m=0,$=0;for(let E=0;E<f;++E){const v=o[r[E]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<t|v,h+=t,h>=8&&(h-=8,y[$++]=255&m>>h)}if(h>=t||255&m<<8-h)throw new SyntaxError("Unexpected end of data");return y},encode$2=(r,e,t)=>{const n=e[e.length-1]==="=",o=(1<<t)-1;let f="",y=0,h=0;for(let m=0;m<r.length;++m)for(h=h<<8|r[m],y+=8;y>t;)y-=t,f+=e[o&h>>y];if(y&&(f+=e[o&h<<t-y]),n)for(;f.length*t&7;)f+="=";return f},rfc4648=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>from$1({prefix:e,name:r,encode(o){return encode$2(o,n,t)},decode(o){return decode$1(o,n,t,r)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base64$1=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});debug.formatters.b=r=>r==null?"undefined":base58btc.baseEncode(r);debug.formatters.t=r=>r==null?"undefined":base32.baseEncode(r);debug.formatters.m=r=>r==null?"undefined":base64$1.baseEncode(r);debug.formatters.p=r=>r==null?"undefined":r.toString();debug.formatters.c=r=>r==null?"undefined":r.toString();debug.formatters.k=r=>r==null?"undefined":r.toString();function logger(r){return Object.assign(debug(r),{error:debug(`${r}:error`),trace:debug(`${r}:trace`)})}logger("datastore:core:tiered");var abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function r(...e){const t=e.reduce((n,o)=>Object.assign(n,o),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={},buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup$1[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function byteLength(r){var e=getLens(r),t=e[0],n=e[1];return(t+n)*3/4-n}function _byteLength(r,e,t){return(e+t)*3/4-t}function toByteArray(r){var e,t=getLens(r),n=t[0],o=t[1],f=new Arr(_byteLength(r,n,o)),y=0,h=o>0?n-4:n,m;for(m=0;m<h;m+=4)e=revLookup[r.charCodeAt(m)]<<18|revLookup[r.charCodeAt(m+1)]<<12|revLookup[r.charCodeAt(m+2)]<<6|revLookup[r.charCodeAt(m+3)],f[y++]=e>>16&255,f[y++]=e>>8&255,f[y++]=e&255;return o===2&&(e=revLookup[r.charCodeAt(m)]<<2|revLookup[r.charCodeAt(m+1)]>>4,f[y++]=e&255),o===1&&(e=revLookup[r.charCodeAt(m)]<<10|revLookup[r.charCodeAt(m+1)]<<4|revLookup[r.charCodeAt(m+2)]>>2,f[y++]=e>>8&255,f[y++]=e&255),f}function tripletToBase64(r){return lookup$1[r>>18&63]+lookup$1[r>>12&63]+lookup$1[r>>6&63]+lookup$1[r&63]}function encodeChunk(r,e,t){for(var n,o=[],f=e;f<t;f+=3)n=(r[f]<<16&16711680)+(r[f+1]<<8&65280)+(r[f+2]&255),o.push(tripletToBase64(n));return o.join("")}function fromByteArray(r){for(var e,t=r.length,n=t%3,o=[],f=16383,y=0,h=t-n;y<h;y+=f)o.push(encodeChunk(r,y,y+f>h?h:y+f));return n===1?(e=r[t-1],o.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],o.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),o.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(r,e,t,n,o){var f,y,h=o*8-n-1,m=(1<<h)-1,$=m>>1,E=-7,v=t?o-1:0,D=t?-1:1,I=r[e+v];for(v+=D,f=I&(1<<-E)-1,I>>=-E,E+=h;E>0;f=f*256+r[e+v],v+=D,E-=8);for(y=f&(1<<-E)-1,f>>=-E,E+=n;E>0;y=y*256+r[e+v],v+=D,E-=8);if(f===0)f=1-$;else{if(f===m)return y?NaN:(I?-1:1)*(1/0);y=y+Math.pow(2,n),f=f-$}return(I?-1:1)*y*Math.pow(2,f-n)};ieee754.write=function(r,e,t,n,o,f){var y,h,m,$=f*8-o-1,E=(1<<$)-1,v=E>>1,D=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=n?0:f-1,A=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,y=E):(y=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-y))<1&&(y--,m*=2),y+v>=1?e+=D/m:e+=D*Math.pow(2,1-v),e*m>=2&&(y++,m/=2),y+v>=E?(h=0,y=E):y+v>=1?(h=(e*m-1)*Math.pow(2,o),y=y+v):(h=e*Math.pow(2,v-1)*Math.pow(2,o),y=0));o>=8;r[t+I]=h&255,I+=A,h/=256,o-=8);for(y=y<<o|h,$+=o;$>0;r[t+I]=y&255,I+=A,y/=256,$-=8);r[t+I-A]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=base64Js,t=ieee754,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=q,r.INSPECT_MAX_BYTES=50;const o=2147483647;r.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=f(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const c=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(c,s),c.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.byteOffset}});function y(c){if(c>o)throw new RangeError('The value "'+c+'" is invalid for option "size"');const s=new Uint8Array(c);return Object.setPrototypeOf(s,h.prototype),s}function h(c,s,u){if(typeof c=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(c)}return m(c,s,u)}h.poolSize=8192;function m(c,s,u){if(typeof c=="string")return D(c,s);if(ArrayBuffer.isView(c))return A(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(ye(c,ArrayBuffer)||c&&ye(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(c,SharedArrayBuffer)||c&&ye(c.buffer,SharedArrayBuffer)))return k(c,s,u);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=c.valueOf&&c.valueOf();if(g!=null&&g!==c)return h.from(g,s,u);const w=O(c);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return h.from(c[Symbol.toPrimitive]("string"),s,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}h.from=function(c,s,u){return m(c,s,u)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function $(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function E(c,s,u){return $(c),c<=0?y(c):s!==void 0?typeof u=="string"?y(c).fill(s,u):y(c).fill(s):y(c)}h.alloc=function(c,s,u){return E(c,s,u)};function v(c){return $(c),y(c<0?0:U(c)|0)}h.allocUnsafe=function(c){return v(c)},h.allocUnsafeSlow=function(c){return v(c)};function D(c,s){if((typeof s!="string"||s==="")&&(s="utf8"),!h.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const u=j(c,s)|0;let g=y(u);const w=g.write(c,s);return w!==u&&(g=g.slice(0,w)),g}function I(c){const s=c.length<0?0:U(c.length)|0,u=y(s);for(let g=0;g<s;g+=1)u[g]=c[g]&255;return u}function A(c){if(ye(c,Uint8Array)){const s=new Uint8Array(c);return k(s.buffer,s.byteOffset,s.byteLength)}return I(c)}function k(c,s,u){if(s<0||c.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<s+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return s===void 0&&u===void 0?g=new Uint8Array(c):u===void 0?g=new Uint8Array(c,s):g=new Uint8Array(c,s,u),Object.setPrototypeOf(g,h.prototype),g}function O(c){if(h.isBuffer(c)){const s=U(c.length)|0,u=y(s);return u.length===0||c.copy(u,0,0,s),u}if(c.length!==void 0)return typeof c.length!="number"||qe(c.length)?y(0):I(c);if(c.type==="Buffer"&&Array.isArray(c.data))return I(c.data)}function U(c){if(c>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return c|0}function q(c){return+c!=c&&(c=0),h.alloc(+c)}h.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==h.prototype},h.compare=function(s,u){if(ye(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),ye(u,Uint8Array)&&(u=h.from(u,u.offset,u.byteLength)),!h.isBuffer(s)||!h.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===u)return 0;let g=s.length,w=u.length;for(let T=0,B=Math.min(g,w);T<B;++T)if(s[T]!==u[T]){g=s[T],w=u[T];break}return g<w?-1:w<g?1:0},h.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(s,u){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return h.alloc(0);let g;if(u===void 0)for(u=0,g=0;g<s.length;++g)u+=s[g].length;const w=h.allocUnsafe(u);let T=0;for(g=0;g<s.length;++g){let B=s[g];if(ye(B,Uint8Array))T+B.length>w.length?(h.isBuffer(B)||(B=h.from(B)),B.copy(w,T)):Uint8Array.prototype.set.call(w,B,T);else if(h.isBuffer(B))B.copy(w,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=B.length}return w};function j(c,s){if(h.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||ye(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const u=c.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let w=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return Ve(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return Ye(c).length;default:if(w)return g?-1:Ve(c).length;s=(""+s).toLowerCase(),w=!0}}h.byteLength=j;function P(c,s,u){let g=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,s>>>=0,u<=s))return"";for(c||(c="utf8");;)switch(c){case"hex":return xe(this,s,u);case"utf8":case"utf-8":return he(this,s,u);case"ascii":return Ee(this,s,u);case"latin1":case"binary":return ee(this,s,u);case"base64":return ie(this,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,s,u);default:if(g)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),g=!0}}h.prototype._isBuffer=!0;function L(c,s,u){const g=c[s];c[s]=c[u],c[u]=g}h.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<s;u+=2)L(this,u,u+1);return this},h.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<s;u+=4)L(this,u,u+3),L(this,u+1,u+2);return this},h.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<s;u+=8)L(this,u,u+7),L(this,u+1,u+6),L(this,u+2,u+5),L(this,u+3,u+4);return this},h.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?he(this,0,s):P.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(s){if(!h.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:h.compare(this,s)===0},h.prototype.inspect=function(){let s="";const u=r.INSPECT_MAX_BYTES;return s=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(s+=" ... "),"<Buffer "+s+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(s,u,g,w,T){if(ye(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(u===void 0&&(u=0),g===void 0&&(g=s?s.length:0),w===void 0&&(w=0),T===void 0&&(T=this.length),u<0||g>s.length||w<0||T>this.length)throw new RangeError("out of range index");if(w>=T&&u>=g)return 0;if(w>=T)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,w>>>=0,T>>>=0,this===s)return 0;let B=T-w,Z=g-u;const se=Math.min(B,Z),ne=this.slice(w,T),oe=s.slice(u,g);for(let re=0;re<se;++re)if(ne[re]!==oe[re]){B=ne[re],Z=oe[re];break}return B<Z?-1:Z<B?1:0};function X(c,s,u,g,w){if(c.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,qe(u)&&(u=w?0:c.length-1),u<0&&(u=c.length+u),u>=c.length){if(w)return-1;u=c.length-1}else if(u<0)if(w)u=0;else return-1;if(typeof s=="string"&&(s=h.from(s,g)),h.isBuffer(s))return s.length===0?-1:K(c,s,u,g,w);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(c,s,u):Uint8Array.prototype.lastIndexOf.call(c,s,u):K(c,[s],u,g,w);throw new TypeError("val must be string, number or Buffer")}function K(c,s,u,g,w){let T=1,B=c.length,Z=s.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(c.length<2||s.length<2)return-1;T=2,B/=2,Z/=2,u/=2}function se(oe,re){return T===1?oe[re]:oe.readUInt16BE(re*T)}let ne;if(w){let oe=-1;for(ne=u;ne<B;ne++)if(se(c,ne)===se(s,oe===-1?0:ne-oe)){if(oe===-1&&(oe=ne),ne-oe+1===Z)return oe*T}else oe!==-1&&(ne-=ne-oe),oe=-1}else for(u+Z>B&&(u=B-Z),ne=u;ne>=0;ne--){let oe=!0;for(let re=0;re<Z;re++)if(se(c,ne+re)!==se(s,re)){oe=!1;break}if(oe)return ne}return-1}h.prototype.includes=function(s,u,g){return this.indexOf(s,u,g)!==-1},h.prototype.indexOf=function(s,u,g){return X(this,s,u,g,!0)},h.prototype.lastIndexOf=function(s,u,g){return X(this,s,u,g,!1)};function N(c,s,u,g){u=Number(u)||0;const w=c.length-u;g?(g=Number(g),g>w&&(g=w)):g=w;const T=s.length;g>T/2&&(g=T/2);let B;for(B=0;B<g;++B){const Z=parseInt(s.substr(B*2,2),16);if(qe(Z))return B;c[u+B]=Z}return B}function W(c,s,u,g){return Ie(Ve(s,c.length-u),c,u,g)}function ue(c,s,u,g){return Ie(rt(s),c,u,g)}function te(c,s,u,g){return Ie(Ye(s),c,u,g)}function le(c,s,u,g){return Ie(nt(s,c.length-u),c,u,g)}h.prototype.write=function(s,u,g,w){if(u===void 0)w="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")w=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,w===void 0&&(w="utf8")):(w=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-u;if((g===void 0||g>T)&&(g=T),s.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let B=!1;for(;;)switch(w){case"hex":return N(this,s,u,g);case"utf8":case"utf-8":return W(this,s,u,g);case"ascii":case"latin1":case"binary":return ue(this,s,u,g);case"base64":return te(this,s,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,s,u,g);default:if(B)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),B=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(c,s,u){return s===0&&u===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(s,u))}function he(c,s,u){u=Math.min(c.length,u);const g=[];let w=s;for(;w<u;){const T=c[w];let B=null,Z=T>239?4:T>223?3:T>191?2:1;if(w+Z<=u){let se,ne,oe,re;switch(Z){case 1:T<128&&(B=T);break;case 2:se=c[w+1],(se&192)===128&&(re=(T&31)<<6|se&63,re>127&&(B=re));break;case 3:se=c[w+1],ne=c[w+2],(se&192)===128&&(ne&192)===128&&(re=(T&15)<<12|(se&63)<<6|ne&63,re>2047&&(re<55296||re>57343)&&(B=re));break;case 4:se=c[w+1],ne=c[w+2],oe=c[w+3],(se&192)===128&&(ne&192)===128&&(oe&192)===128&&(re=(T&15)<<18|(se&63)<<12|(ne&63)<<6|oe&63,re>65535&&re<1114112&&(B=re))}}B===null?(B=65533,Z=1):B>65535&&(B-=65536,g.push(B>>>10&1023|55296),B=56320|B&1023),g.push(B),w+=Z}return ge(g)}const we=4096;function ge(c){const s=c.length;if(s<=we)return String.fromCharCode.apply(String,c);let u="",g=0;for(;g<s;)u+=String.fromCharCode.apply(String,c.slice(g,g+=we));return u}function Ee(c,s,u){let g="";u=Math.min(c.length,u);for(let w=s;w<u;++w)g+=String.fromCharCode(c[w]&127);return g}function ee(c,s,u){let g="";u=Math.min(c.length,u);for(let w=s;w<u;++w)g+=String.fromCharCode(c[w]);return g}function xe(c,s,u){const g=c.length;(!s||s<0)&&(s=0),(!u||u<0||u>g)&&(u=g);let w="";for(let T=s;T<u;++T)w+=it[c[T]];return w}function Fe(c,s,u){const g=c.slice(s,u);let w="";for(let T=0;T<g.length-1;T+=2)w+=String.fromCharCode(g[T]+g[T+1]*256);return w}h.prototype.slice=function(s,u){const g=this.length;s=~~s,u=u===void 0?g:~~u,s<0?(s+=g,s<0&&(s=0)):s>g&&(s=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<s&&(u=s);const w=this.subarray(s,u);return Object.setPrototypeOf(w,h.prototype),w};function ae(c,s,u){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+s>u)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(s,u,g){s=s>>>0,u=u>>>0,g||ae(s,u,this.length);let w=this[s],T=1,B=0;for(;++B<u&&(T*=256);)w+=this[s+B]*T;return w},h.prototype.readUintBE=h.prototype.readUIntBE=function(s,u,g){s=s>>>0,u=u>>>0,g||ae(s,u,this.length);let w=this[s+--u],T=1;for(;u>0&&(T*=256);)w+=this[s+--u]*T;return w},h.prototype.readUint8=h.prototype.readUInt8=function(s,u){return s=s>>>0,u||ae(s,1,this.length),this[s]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(s,u){return s=s>>>0,u||ae(s,2,this.length),this[s]|this[s+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(s,u){return s=s>>>0,u||ae(s,2,this.length),this[s]<<8|this[s+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},h.prototype.readBigUInt64LE=be(function(s){s=s>>>0,Te(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&Ae(s,this.length-8);const w=u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,T=this[++s]+this[++s]*2**8+this[++s]*2**16+g*2**24;return BigInt(w)+(BigInt(T)<<BigInt(32))}),h.prototype.readBigUInt64BE=be(function(s){s=s>>>0,Te(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&Ae(s,this.length-8);const w=u*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],T=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g;return(BigInt(w)<<BigInt(32))+BigInt(T)}),h.prototype.readIntLE=function(s,u,g){s=s>>>0,u=u>>>0,g||ae(s,u,this.length);let w=this[s],T=1,B=0;for(;++B<u&&(T*=256);)w+=this[s+B]*T;return T*=128,w>=T&&(w-=Math.pow(2,8*u)),w},h.prototype.readIntBE=function(s,u,g){s=s>>>0,u=u>>>0,g||ae(s,u,this.length);let w=u,T=1,B=this[s+--w];for(;w>0&&(T*=256);)B+=this[s+--w]*T;return T*=128,B>=T&&(B-=Math.pow(2,8*u)),B},h.prototype.readInt8=function(s,u){return s=s>>>0,u||ae(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},h.prototype.readInt16LE=function(s,u){s=s>>>0,u||ae(s,2,this.length);const g=this[s]|this[s+1]<<8;return g&32768?g|4294901760:g},h.prototype.readInt16BE=function(s,u){s=s>>>0,u||ae(s,2,this.length);const g=this[s+1]|this[s]<<8;return g&32768?g|4294901760:g},h.prototype.readInt32LE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},h.prototype.readInt32BE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},h.prototype.readBigInt64LE=be(function(s){s=s>>>0,Te(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&Ae(s,this.length-8);const w=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(g<<24);return(BigInt(w)<<BigInt(32))+BigInt(u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),h.prototype.readBigInt64BE=be(function(s){s=s>>>0,Te(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&Ae(s,this.length-8);const w=(u<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(w)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g)}),h.prototype.readFloatLE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),t.read(this,s,!0,23,4)},h.prototype.readFloatBE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),t.read(this,s,!1,23,4)},h.prototype.readDoubleLE=function(s,u){return s=s>>>0,u||ae(s,8,this.length),t.read(this,s,!0,52,8)},h.prototype.readDoubleBE=function(s,u){return s=s>>>0,u||ae(s,8,this.length),t.read(this,s,!1,52,8)};function de(c,s,u,g,w,T){if(!h.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>w||s<T)throw new RangeError('"value" argument is out of bounds');if(u+g>c.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(s,u,g,w){if(s=+s,u=u>>>0,g=g>>>0,!w){const Z=Math.pow(2,8*g)-1;de(this,s,u,g,Z,0)}let T=1,B=0;for(this[u]=s&255;++B<g&&(T*=256);)this[u+B]=s/T&255;return u+g},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(s,u,g,w){if(s=+s,u=u>>>0,g=g>>>0,!w){const Z=Math.pow(2,8*g)-1;de(this,s,u,g,Z,0)}let T=g-1,B=1;for(this[u+T]=s&255;--T>=0&&(B*=256);)this[u+T]=s/B&255;return u+g},h.prototype.writeUint8=h.prototype.writeUInt8=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,1,255,0),this[u]=s&255,u+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,2,65535,0),this[u]=s&255,this[u+1]=s>>>8,u+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,2,65535,0),this[u]=s>>>8,this[u+1]=s&255,u+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,4,4294967295,0),this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255,u+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,4,4294967295,0),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};function De(c,s,u,g,w){Je(s,g,w,c,u,7);let T=Number(s&BigInt(4294967295));c[u++]=T,T=T>>8,c[u++]=T,T=T>>8,c[u++]=T,T=T>>8,c[u++]=T;let B=Number(s>>BigInt(32)&BigInt(4294967295));return c[u++]=B,B=B>>8,c[u++]=B,B=B>>8,c[u++]=B,B=B>>8,c[u++]=B,u}function _e(c,s,u,g,w){Je(s,g,w,c,u,7);let T=Number(s&BigInt(4294967295));c[u+7]=T,T=T>>8,c[u+6]=T,T=T>>8,c[u+5]=T,T=T>>8,c[u+4]=T;let B=Number(s>>BigInt(32)&BigInt(4294967295));return c[u+3]=B,B=B>>8,c[u+2]=B,B=B>>8,c[u+1]=B,B=B>>8,c[u]=B,u+8}h.prototype.writeBigUInt64LE=be(function(s,u=0){return De(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=be(function(s,u=0){return _e(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(s,u,g,w){if(s=+s,u=u>>>0,!w){const se=Math.pow(2,8*g-1);de(this,s,u,g,se-1,-se)}let T=0,B=1,Z=0;for(this[u]=s&255;++T<g&&(B*=256);)s<0&&Z===0&&this[u+T-1]!==0&&(Z=1),this[u+T]=(s/B>>0)-Z&255;return u+g},h.prototype.writeIntBE=function(s,u,g,w){if(s=+s,u=u>>>0,!w){const se=Math.pow(2,8*g-1);de(this,s,u,g,se-1,-se)}let T=g-1,B=1,Z=0;for(this[u+T]=s&255;--T>=0&&(B*=256);)s<0&&Z===0&&this[u+T+1]!==0&&(Z=1),this[u+T]=(s/B>>0)-Z&255;return u+g},h.prototype.writeInt8=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,1,127,-128),s<0&&(s=255+s+1),this[u]=s&255,u+1},h.prototype.writeInt16LE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,2,32767,-32768),this[u]=s&255,this[u+1]=s>>>8,u+2},h.prototype.writeInt16BE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,2,32767,-32768),this[u]=s>>>8,this[u+1]=s&255,u+2},h.prototype.writeInt32LE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,4,2147483647,-2147483648),this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24,u+4},h.prototype.writeInt32BE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4},h.prototype.writeBigInt64LE=be(function(s,u=0){return De(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=be(function(s,u=0){return _e(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Qe(c,s,u,g,w,T){if(u+g>c.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Ge(c,s,u,g,w){return s=+s,u=u>>>0,w||Qe(c,s,u,4),t.write(c,s,u,g,23,4),u+4}h.prototype.writeFloatLE=function(s,u,g){return Ge(this,s,u,!0,g)},h.prototype.writeFloatBE=function(s,u,g){return Ge(this,s,u,!1,g)};function He(c,s,u,g,w){return s=+s,u=u>>>0,w||Qe(c,s,u,8),t.write(c,s,u,g,52,8),u+8}h.prototype.writeDoubleLE=function(s,u,g){return He(this,s,u,!0,g)},h.prototype.writeDoubleBE=function(s,u,g){return He(this,s,u,!1,g)},h.prototype.copy=function(s,u,g,w){if(!h.isBuffer(s))throw new TypeError("argument should be a Buffer");if(g||(g=0),!w&&w!==0&&(w=this.length),u>=s.length&&(u=s.length),u||(u=0),w>0&&w<g&&(w=g),w===g||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),s.length-u<w-g&&(w=s.length-u+g);const T=w-g;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,w):Uint8Array.prototype.set.call(s,this.subarray(g,w),u),T},h.prototype.fill=function(s,u,g,w){if(typeof s=="string"){if(typeof u=="string"?(w=u,u=0,g=this.length):typeof g=="string"&&(w=g,g=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!h.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(s.length===1){const B=s.charCodeAt(0);(w==="utf8"&&B<128||w==="latin1")&&(s=B)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,s||(s=0);let T;if(typeof s=="number")for(T=u;T<g;++T)this[T]=s;else{const B=h.isBuffer(s)?s:h.from(s,w),Z=B.length;if(Z===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(T=0;T<g-u;++T)this[T+u]=B[T%Z]}return this};const Ce={};function je(c,s,u){Ce[c]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}je("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),je("ERR_INVALID_ARG_TYPE",function(c,s){return`The "${c}" argument must be of type number. Received type ${typeof s}`},TypeError),je("ERR_OUT_OF_RANGE",function(c,s,u){let g=`The value of "${c}" is out of range.`,w=u;return Number.isInteger(u)&&Math.abs(u)>2**32?w=We(String(u)):typeof u=="bigint"&&(w=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(w=We(w)),w+="n"),g+=` It must be ${s}. Received ${w}`,g},RangeError);function We(c){let s="",u=c.length;const g=c[0]==="-"?1:0;for(;u>=g+4;u-=3)s=`_${c.slice(u-3,u)}${s}`;return`${c.slice(0,u)}${s}`}function Ze(c,s,u){Te(s,"offset"),(c[s]===void 0||c[s+u]===void 0)&&Ae(s,c.length-(u+1))}function Je(c,s,u,g,w,T){if(c>u||c<s){const B=typeof s=="bigint"?"n":"";let Z;throw T>3?s===0||s===BigInt(0)?Z=`>= 0${B} and < 2${B} ** ${(T+1)*8}${B}`:Z=`>= -(2${B} ** ${(T+1)*8-1}${B}) and < 2 ** ${(T+1)*8-1}${B}`:Z=`>= ${s}${B} and <= ${u}${B}`,new Ce.ERR_OUT_OF_RANGE("value",Z,c)}Ze(g,w,T)}function Te(c,s){if(typeof c!="number")throw new Ce.ERR_INVALID_ARG_TYPE(s,"number",c)}function Ae(c,s,u){throw Math.floor(c)!==c?(Te(c,u),new Ce.ERR_OUT_OF_RANGE(u||"offset","an integer",c)):s<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${s}`,c)}const et=/[^+/0-9A-Za-z-_]/g;function tt(c){if(c=c.split("=")[0],c=c.trim().replace(et,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function Ve(c,s){s=s||1/0;let u;const g=c.length;let w=null;const T=[];for(let B=0;B<g;++B){if(u=c.charCodeAt(B),u>55295&&u<57344){if(!w){if(u>56319){(s-=3)>-1&&T.push(239,191,189);continue}else if(B+1===g){(s-=3)>-1&&T.push(239,191,189);continue}w=u;continue}if(u<56320){(s-=3)>-1&&T.push(239,191,189),w=u;continue}u=(w-55296<<10|u-56320)+65536}else w&&(s-=3)>-1&&T.push(239,191,189);if(w=null,u<128){if((s-=1)<0)break;T.push(u)}else if(u<2048){if((s-=2)<0)break;T.push(u>>6|192,u&63|128)}else if(u<65536){if((s-=3)<0)break;T.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((s-=4)<0)break;T.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return T}function rt(c){const s=[];for(let u=0;u<c.length;++u)s.push(c.charCodeAt(u)&255);return s}function nt(c,s){let u,g,w;const T=[];for(let B=0;B<c.length&&!((s-=2)<0);++B)u=c.charCodeAt(B),g=u>>8,w=u%256,T.push(w),T.push(g);return T}function Ye(c){return e.toByteArray(tt(c))}function Ie(c,s,u,g){let w;for(w=0;w<g&&!(w+u>=s.length||w>=c.length);++w)s[w+u]=c[w];return w}function ye(c,s){return c instanceof s||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===s.name}function qe(c){return c!==c}const it=function(){const c="0123456789abcdef",s=new Array(256);for(let u=0;u<16;++u){const g=u*16;for(let w=0;w<16;++w)s[g+w]=c[u]+c[w]}return s}();function be(c){return typeof BigInt>"u"?ot:c}function ot(){throw new Error("BigInt not supported")}})(buffer$1);let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);class Encoding$2{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}encoding.Encoding=Encoding$2;const{Buffer:Buffer$2}=buffer$1||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;class BufferFormat$2 extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$2.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class ViewFormat$2 extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const t=this.encode(e);return Buffer$2.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class UTF8Format$2 extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$2.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:t}=textEndec();return new ViewFormat$2({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$1}=buffer$1||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$1,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity=r=>r;encodings$1.utf8=new UTF8Format$1({encode:function(r){return Buffer$1.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?textDecoder.decode(r):String(r)},decode:identity,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(r){return ArrayBuffer.isView(r)?r:textEncoder$1.encode(r)},decode:function(r){return textDecoder.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(r){return Buffer$1.isBuffer(r)?r:ArrayBuffer.isView(r)?Buffer$1.from(r.buffer,r.byteOffset,r.byteLength):Buffer$1.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(r){return Buffer$1.isBuffer(r)?r:ArrayBuffer.isView(r)?Buffer$1.from(r.buffer,r.byteOffset,r.byteLength):Buffer$1.from(String(r),"utf8")},decode:identity,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(r){return ArrayBuffer.isView(r)?r:Buffer$1.from(String(r),"utf8")},decode:function(r){return Buffer$1.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(r){return ArrayBuffer.isView(r)?r:textEncoder$1.encode(r)},decode:identity,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(r){return Buffer$1.isBuffer(r)?r:ArrayBuffer.isView(r)?Buffer$1.from(r.buffer,r.byteOffset,r.byteLength):Buffer$1.from(String(r),"utf8")},decode:identity,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(r){return Buffer$1.isBuffer(r)?r:Buffer$1.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(r){return Buffer$1.isBuffer(r)?r:Buffer$1.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);class Transcoder$1{constructor(e){if(Array.isArray(e)){if(!e.every(t=>validFormats.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const t in encodings)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let t=this[kEncodings].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=lookup[e],!t)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=from(e)}const{name:n,format:o}=t;if(!this[kFormats].has(o))if(this[kFormats].has("view"))t=t.createViewTranscoder();else if(this[kFormats].has("buffer"))t=t.createBufferTranscoder();else if(this[kFormats].has("utf8"))t=t.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const f of[e,n,t.name,t.commonName])this[kEncodings].set(f,t)}return t}}levelTranscoder.Transcoder=Transcoder$1;function from(r){if(r instanceof Encoding)return r;const e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(r)){case"view":return new ViewFormat({...r,name:t});case"utf8":return new UTF8Format({...r,name:t});case"buffer":return new BufferFormat({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup={...encodings,...aliases};let anonymousCount=0;var events={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function r(e,t,n){return Function.prototype.apply.call(e,t,n)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(r){console&&console.warn&&console.warn(r)}var NumberIsNaN=Number.isNaN||function r(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;events.exports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(r){if(typeof r!="number"||r<0||NumberIsNaN(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");defaultMaxListeners=r}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function r(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(r){return r._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:r._maxListeners}EventEmitter$1.prototype.getMaxListeners=function r(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function r(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o=e==="error",f=this._events;if(f!==void 0)o=o&&f.error===void 0;else if(!o)return!1;if(o){var y;if(t.length>0&&(y=t[0]),y instanceof Error)throw y;var h=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw h.context=y,h}var m=f[e];if(m===void 0)return!1;if(typeof m=="function")ReflectApply(m,this,t);else for(var $=m.length,E=arrayClone(m,$),n=0;n<$;++n)ReflectApply(E[n],this,t);return!0};function _addListener(r,e,t,n){var o,f,y;if(checkListener(t),f=r._events,f===void 0?(f=r._events=Object.create(null),r._eventsCount=0):(f.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),f=r._events),y=f[e]),y===void 0)y=f[e]=t,++r._eventsCount;else if(typeof y=="function"?y=f[e]=n?[t,y]:[y,t]:n?y.unshift(t):y.push(t),o=_getMaxListeners(r),o>0&&y.length>o&&!y.warned){y.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=r,h.type=e,h.count=y.length,ProcessEmitWarning(h)}return r}EventEmitter$1.prototype.addListener=function r(e,t){return _addListener(this,e,t,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function r(e,t){return _addListener(this,e,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},o=onceWrapper.bind(n);return o.listener=t,n.wrapFn=o,o}EventEmitter$1.prototype.once=function r(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this};EventEmitter$1.prototype.prependOnceListener=function r(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this};EventEmitter$1.prototype.removeListener=function r(e,t){var n,o,f,y,h;if(checkListener(t),o=this._events,o===void 0)return this;if(n=o[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(f=-1,y=n.length-1;y>=0;y--)if(n[y]===t||n[y].listener===t){h=n[y].listener,f=y;break}if(f<0)return this;f===0?n.shift():spliceOne(n,f),n.length===1&&(o[e]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",e,h||t)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function r(e){var t,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var f=Object.keys(n),y;for(o=0;o<f.length;++o)y=f[o],y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function _listeners(r,e,t){var n=r._events;if(n===void 0)return[];var o=n[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter$1.prototype.listeners=function r(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function r(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):listenerCount.call(r,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter$1.prototype.eventNames=function r(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function spliceOne(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function unwrapListeners(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function once(r,e){return new Promise(function(t,n){function o(y){r.removeListener(e,f),n(y)}function f(){typeof r.removeListener=="function"&&r.removeListener("error",o),t([].slice.call(arguments))}eventTargetAgnosticAddListener(r,e,f,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(r,o,{once:!0})})}function addErrorHandlerIfEventEmitter(r,e,t){typeof r.on=="function"&&eventTargetAgnosticAddListener(r,"error",e,t)}function eventTargetAgnosticAddListener(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function o(f){n.once&&r.removeEventListener(e,o),t(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r),nextTick=nextTickBrowser$1;catering.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,o){r=function(f,y){f?o(f):n(y)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};catering.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){nextTick(()=>e(null,t))}).catch(function(t){nextTick(()=>e(t))})};var abstractIterator={},common={};common.getCallback=function(r,e){return typeof r=="function"?r:e};common.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$1=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,t,n){if(typeof e!="object"||e===null){const o=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${o}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=t[kKeyEncoding$1],this[kValueEncoding$1]=t[kValueEncoding$1],this[kLegacy]=n,this[kLimit]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let t;if(e===void 0)t=new Promise((n,o)=>{e=(f,y,h)=>{f?o(f):this[kLegacy]?y===void 0&&h===void 0?n():n([y,h]):n(y)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=getCallback$2(t,n),n=fromCallback$3(n,kPromise$3),t=getOptions$2(t,emptyOptions$1),Number.isInteger(e)?(this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=n,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,t,this[kHandleMany$1])),n[kPromise$3]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[kPromise$3])}_nextv(e,t,n){const o=[],f=(y,h,m)=>{if(y)return n(y);if(this[kLegacy]?h===void 0&&m===void 0:h===void 0)return n(null,o);o.push(this[kLegacy]?[h,m]:h),o.length===e?n(null,o):this._next(f)};this._next(f)}all(e,t){return t=getCallback$2(e,t),t=fromCallback$3(t,kPromise$3),e=getOptions$2(e,emptyOptions$1),this[kClosing]?this.nextTick(t,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(t,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=t,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),t[kPromise$3]}_all(e,t){let n=this[kCount];const o=[],f=()=>{const h=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-n):1e3;h<=0?this.nextTick(t,null,o):this._nextv(h,emptyOptions$1,y)},y=(h,m)=>{h?t(h):m.length===0?t(null,o):(o.push.apply(o,m),n+=m.length,f())};f()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$1:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,t,n){this[kAutoClose]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=getOptions$2(t,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(t.keyEncoding||this[kKeyEncoding$1]),o=n.format;t.keyEncoding!==o&&(t={...t,keyEncoding:o});const f=this.db.prefixKey(n.encode(e),o);this._seek(f,t)}}}_seek(e,t){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$3(e,kPromise$3),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$3]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}class AbstractIterator$3 extends CommonIterator{constructor(e,t){super(e,t,!0),this[kKeys]=t.keys!==!1,this[kValues]=t.values!==!1}[kHandleOne$1](e,t,n){const o=this[kFinishWork]();if(e)return o(e);try{t=this[kKeys]&&t!==void 0?this[kKeyEncoding$1].decode(t):void 0,n=this[kValues]&&n!==void 0?this[kValueEncoding$1].decode(n):void 0}catch(f){return o(new IteratorDecodeError("entry",f))}t===void 0&&n===void 0||this[kCount]++,o(null,t,n)}[kHandleMany$1](e,t){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(const o of t){const f=o[0],y=o[1];o[0]=this[kKeys]&&f!==void 0?this[kKeyEncoding$1].decode(f):void 0,o[1]=this[kValues]&&y!==void 0?this[kValueEncoding$1].decode(y):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("entries",o))}this[kCount]+=t.length,this[kReturnMany](n,null,t)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}class AbstractKeyIterator$2 extends CommonIterator{constructor(e,t){super(e,t,!1)}[kHandleOne$1](e,t){const n=this[kFinishWork]();if(e)return n(e);try{t=t!==void 0?this[kKeyEncoding$1].decode(t):void 0}catch(o){return n(new IteratorDecodeError("key",o))}t!==void 0&&this[kCount]++,n(null,t)}[kHandleMany$1](e,t){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(let o=0;o<t.length;o++){const f=t[o];t[o]=f!==void 0?this[kKeyEncoding$1].decode(f):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("keys",o))}this[kCount]+=t.length,this[kReturnMany](n,null,t)}}class AbstractValueIterator$2 extends CommonIterator{constructor(e,t){super(e,t,!1)}[kHandleOne$1](e,t){const n=this[kFinishWork]();if(e)return n(e);try{t=t!==void 0?this[kValueEncoding$1].decode(t):void 0}catch(o){return n(new IteratorDecodeError("value",o))}t!==void 0&&this[kCount]++,n(null,t)}[kHandleMany$1](e,t){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(let o=0;o<t.length;o++){const f=t[o];t[o]=f!==void 0?this[kValueEncoding$1].decode(f):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("values",o))}this[kCount]+=t.length,this[kReturnMany](n,null,t)}}class IteratorDecodeError extends ModuleError$6{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}}for(const r of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,r.split(" ")[0],{get(){throw new ModuleError$6(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");class DefaultKeyIterator$1 extends AbstractKeyIterator$1{constructor(e,t){super(e,t),this[kIterator]=e.iterator({...t,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}}class DefaultValueIterator$1 extends AbstractValueIterator$1{constructor(e,t){super(e,t),this[kIterator]=e.iterator({...t,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}}for(const r of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=r===DefaultKeyIterator$1,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[kCallback]=n,this[kIterator].next(this[kHandleOne])},r.prototype[kHandleOne]=function(n,o,f){const y=this[kCallback];n?y(n):y(null,e?o:f)},r.prototype._nextv=function(n,o,f){this[kCallback]=f,this[kIterator].nextv(n,o,this[kHandleMany])},r.prototype._all=function(n,o){this[kCallback]=o,this[kIterator].all(n,this[kHandleMany])},r.prototype[kHandleMany]=function(n,o){const f=this[kCallback];n?f(n):f(null,o.map(t))},r.prototype._seek=function(n,o){this[kIterator].seek(n,o)},r.prototype._close=function(n){this[kIterator].close(n)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");class DeferredIterator$1 extends AbstractIterator$2{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.iterator(t),this.db.defer(()=>this[kUndefer$1]())}}class DeferredKeyIterator$1 extends AbstractKeyIterator{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.keys(t),this.db.defer(()=>this[kUndefer$1]())}}class DeferredValueIterator$1 extends AbstractValueIterator{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.values(t),this.db.defer(()=>this[kUndefer$1]())}}for(const r of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])r.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},r.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[kNut]!==null?this[kNut].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[kNut]!==null?this[kNut].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[kNut]!==null?this[kNut]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");class AbstractChainedBatch$1{constructor(e){if(typeof e!="object"||e===null){const t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,t,n){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e)||this.db._checkValue(t);if(o)throw o;const f=n&&n.sublevel!=null?n.sublevel:this.db,y=n,h=f.keyEncoding(n&&n.keyEncoding),m=f.valueEncoding(n&&n.valueEncoding),$=h.format;n={...n,keyEncoding:$,valueEncoding:m.format},f!==this.db&&(n.sublevel=null);const E=f.prefixKey(h.encode(e),$),v=m.encode(t);return this._put(E,v,n),this[kOperations$1].push({...y,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e);if(n)throw n;const o=t&&t.sublevel!=null?t.sublevel:this.db,f=t,y=o.keyEncoding(t&&t.keyEncoding),h=y.format;return t={...t,keyEncoding:h},o!==this.db&&(t.sublevel=null),this._del(o.prefixKey(y.encode(e),h),t),this[kOperations$1].push({...f,type:"del",key:e}),this}_del(e,t){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,t){return t=getCallback$1(e,t),t=fromCallback$2(t,kPromise$2),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(t,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[kStatus$1]="writing",this._write(e,n=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>t(n)),n||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),t[kPromise$2]}_write(e,t){}close(e){return e=fromCallback$2(e,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$2]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const t of e)t()}}abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");class DefaultChainedBatch$1 extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,t,n){this[kEncoded].push({...n,type:"put",key:e,value:t})}_del(e,t){this[kEncoded].push({...t,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(t):this.db._batch(this[kEncoded],e,t):this.nextTick(t,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(r,e){const t={};for(const n in r)if(!!hasOwnProperty.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new ModuleError$2(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):r=>(promise||(promise=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const r=queueMicrotask_1;return nextTickBrowser=function(e,...t){t.length===0?r(e):r(()=>e(...t))},nextTickBrowser}var buffer={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(r){const e=base64Js,t=ieee754,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=q,r.INSPECT_MAX_BYTES=50;const o=2147483647;r.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=f(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const c=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(c,s),c.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.byteOffset}});function y(c){if(c>o)throw new RangeError('The value "'+c+'" is invalid for option "size"');const s=new Uint8Array(c);return Object.setPrototypeOf(s,h.prototype),s}function h(c,s,u){if(typeof c=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(c)}return m(c,s,u)}h.poolSize=8192;function m(c,s,u){if(typeof c=="string")return D(c,s);if(ArrayBuffer.isView(c))return A(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(ye(c,ArrayBuffer)||c&&ye(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(c,SharedArrayBuffer)||c&&ye(c.buffer,SharedArrayBuffer)))return k(c,s,u);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=c.valueOf&&c.valueOf();if(g!=null&&g!==c)return h.from(g,s,u);const w=O(c);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return h.from(c[Symbol.toPrimitive]("string"),s,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}h.from=function(c,s,u){return m(c,s,u)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function $(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function E(c,s,u){return $(c),c<=0?y(c):s!==void 0?typeof u=="string"?y(c).fill(s,u):y(c).fill(s):y(c)}h.alloc=function(c,s,u){return E(c,s,u)};function v(c){return $(c),y(c<0?0:U(c)|0)}h.allocUnsafe=function(c){return v(c)},h.allocUnsafeSlow=function(c){return v(c)};function D(c,s){if((typeof s!="string"||s==="")&&(s="utf8"),!h.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const u=j(c,s)|0;let g=y(u);const w=g.write(c,s);return w!==u&&(g=g.slice(0,w)),g}function I(c){const s=c.length<0?0:U(c.length)|0,u=y(s);for(let g=0;g<s;g+=1)u[g]=c[g]&255;return u}function A(c){if(ye(c,Uint8Array)){const s=new Uint8Array(c);return k(s.buffer,s.byteOffset,s.byteLength)}return I(c)}function k(c,s,u){if(s<0||c.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<s+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return s===void 0&&u===void 0?g=new Uint8Array(c):u===void 0?g=new Uint8Array(c,s):g=new Uint8Array(c,s,u),Object.setPrototypeOf(g,h.prototype),g}function O(c){if(h.isBuffer(c)){const s=U(c.length)|0,u=y(s);return u.length===0||c.copy(u,0,0,s),u}if(c.length!==void 0)return typeof c.length!="number"||qe(c.length)?y(0):I(c);if(c.type==="Buffer"&&Array.isArray(c.data))return I(c.data)}function U(c){if(c>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return c|0}function q(c){return+c!=c&&(c=0),h.alloc(+c)}h.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==h.prototype},h.compare=function(s,u){if(ye(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),ye(u,Uint8Array)&&(u=h.from(u,u.offset,u.byteLength)),!h.isBuffer(s)||!h.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===u)return 0;let g=s.length,w=u.length;for(let T=0,B=Math.min(g,w);T<B;++T)if(s[T]!==u[T]){g=s[T],w=u[T];break}return g<w?-1:w<g?1:0},h.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(s,u){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return h.alloc(0);let g;if(u===void 0)for(u=0,g=0;g<s.length;++g)u+=s[g].length;const w=h.allocUnsafe(u);let T=0;for(g=0;g<s.length;++g){let B=s[g];if(ye(B,Uint8Array))T+B.length>w.length?(h.isBuffer(B)||(B=h.from(B)),B.copy(w,T)):Uint8Array.prototype.set.call(w,B,T);else if(h.isBuffer(B))B.copy(w,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=B.length}return w};function j(c,s){if(h.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||ye(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const u=c.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let w=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return Ve(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return Ye(c).length;default:if(w)return g?-1:Ve(c).length;s=(""+s).toLowerCase(),w=!0}}h.byteLength=j;function P(c,s,u){let g=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,s>>>=0,u<=s))return"";for(c||(c="utf8");;)switch(c){case"hex":return xe(this,s,u);case"utf8":case"utf-8":return he(this,s,u);case"ascii":return Ee(this,s,u);case"latin1":case"binary":return ee(this,s,u);case"base64":return ie(this,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,s,u);default:if(g)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),g=!0}}h.prototype._isBuffer=!0;function L(c,s,u){const g=c[s];c[s]=c[u],c[u]=g}h.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<s;u+=2)L(this,u,u+1);return this},h.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<s;u+=4)L(this,u,u+3),L(this,u+1,u+2);return this},h.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<s;u+=8)L(this,u,u+7),L(this,u+1,u+6),L(this,u+2,u+5),L(this,u+3,u+4);return this},h.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?he(this,0,s):P.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(s){if(!h.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:h.compare(this,s)===0},h.prototype.inspect=function(){let s="";const u=r.INSPECT_MAX_BYTES;return s=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(s+=" ... "),"<Buffer "+s+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(s,u,g,w,T){if(ye(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(u===void 0&&(u=0),g===void 0&&(g=s?s.length:0),w===void 0&&(w=0),T===void 0&&(T=this.length),u<0||g>s.length||w<0||T>this.length)throw new RangeError("out of range index");if(w>=T&&u>=g)return 0;if(w>=T)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,w>>>=0,T>>>=0,this===s)return 0;let B=T-w,Z=g-u;const se=Math.min(B,Z),ne=this.slice(w,T),oe=s.slice(u,g);for(let re=0;re<se;++re)if(ne[re]!==oe[re]){B=ne[re],Z=oe[re];break}return B<Z?-1:Z<B?1:0};function X(c,s,u,g,w){if(c.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,qe(u)&&(u=w?0:c.length-1),u<0&&(u=c.length+u),u>=c.length){if(w)return-1;u=c.length-1}else if(u<0)if(w)u=0;else return-1;if(typeof s=="string"&&(s=h.from(s,g)),h.isBuffer(s))return s.length===0?-1:K(c,s,u,g,w);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(c,s,u):Uint8Array.prototype.lastIndexOf.call(c,s,u):K(c,[s],u,g,w);throw new TypeError("val must be string, number or Buffer")}function K(c,s,u,g,w){let T=1,B=c.length,Z=s.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(c.length<2||s.length<2)return-1;T=2,B/=2,Z/=2,u/=2}function se(oe,re){return T===1?oe[re]:oe.readUInt16BE(re*T)}let ne;if(w){let oe=-1;for(ne=u;ne<B;ne++)if(se(c,ne)===se(s,oe===-1?0:ne-oe)){if(oe===-1&&(oe=ne),ne-oe+1===Z)return oe*T}else oe!==-1&&(ne-=ne-oe),oe=-1}else for(u+Z>B&&(u=B-Z),ne=u;ne>=0;ne--){let oe=!0;for(let re=0;re<Z;re++)if(se(c,ne+re)!==se(s,re)){oe=!1;break}if(oe)return ne}return-1}h.prototype.includes=function(s,u,g){return this.indexOf(s,u,g)!==-1},h.prototype.indexOf=function(s,u,g){return X(this,s,u,g,!0)},h.prototype.lastIndexOf=function(s,u,g){return X(this,s,u,g,!1)};function N(c,s,u,g){u=Number(u)||0;const w=c.length-u;g?(g=Number(g),g>w&&(g=w)):g=w;const T=s.length;g>T/2&&(g=T/2);let B;for(B=0;B<g;++B){const Z=parseInt(s.substr(B*2,2),16);if(qe(Z))return B;c[u+B]=Z}return B}function W(c,s,u,g){return Ie(Ve(s,c.length-u),c,u,g)}function ue(c,s,u,g){return Ie(rt(s),c,u,g)}function te(c,s,u,g){return Ie(Ye(s),c,u,g)}function le(c,s,u,g){return Ie(nt(s,c.length-u),c,u,g)}h.prototype.write=function(s,u,g,w){if(u===void 0)w="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")w=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,w===void 0&&(w="utf8")):(w=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-u;if((g===void 0||g>T)&&(g=T),s.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let B=!1;for(;;)switch(w){case"hex":return N(this,s,u,g);case"utf8":case"utf-8":return W(this,s,u,g);case"ascii":case"latin1":case"binary":return ue(this,s,u,g);case"base64":return te(this,s,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,s,u,g);default:if(B)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),B=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(c,s,u){return s===0&&u===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(s,u))}function he(c,s,u){u=Math.min(c.length,u);const g=[];let w=s;for(;w<u;){const T=c[w];let B=null,Z=T>239?4:T>223?3:T>191?2:1;if(w+Z<=u){let se,ne,oe,re;switch(Z){case 1:T<128&&(B=T);break;case 2:se=c[w+1],(se&192)===128&&(re=(T&31)<<6|se&63,re>127&&(B=re));break;case 3:se=c[w+1],ne=c[w+2],(se&192)===128&&(ne&192)===128&&(re=(T&15)<<12|(se&63)<<6|ne&63,re>2047&&(re<55296||re>57343)&&(B=re));break;case 4:se=c[w+1],ne=c[w+2],oe=c[w+3],(se&192)===128&&(ne&192)===128&&(oe&192)===128&&(re=(T&15)<<18|(se&63)<<12|(ne&63)<<6|oe&63,re>65535&&re<1114112&&(B=re))}}B===null?(B=65533,Z=1):B>65535&&(B-=65536,g.push(B>>>10&1023|55296),B=56320|B&1023),g.push(B),w+=Z}return ge(g)}const we=4096;function ge(c){const s=c.length;if(s<=we)return String.fromCharCode.apply(String,c);let u="",g=0;for(;g<s;)u+=String.fromCharCode.apply(String,c.slice(g,g+=we));return u}function Ee(c,s,u){let g="";u=Math.min(c.length,u);for(let w=s;w<u;++w)g+=String.fromCharCode(c[w]&127);return g}function ee(c,s,u){let g="";u=Math.min(c.length,u);for(let w=s;w<u;++w)g+=String.fromCharCode(c[w]);return g}function xe(c,s,u){const g=c.length;(!s||s<0)&&(s=0),(!u||u<0||u>g)&&(u=g);let w="";for(let T=s;T<u;++T)w+=it[c[T]];return w}function Fe(c,s,u){const g=c.slice(s,u);let w="";for(let T=0;T<g.length-1;T+=2)w+=String.fromCharCode(g[T]+g[T+1]*256);return w}h.prototype.slice=function(s,u){const g=this.length;s=~~s,u=u===void 0?g:~~u,s<0?(s+=g,s<0&&(s=0)):s>g&&(s=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<s&&(u=s);const w=this.subarray(s,u);return Object.setPrototypeOf(w,h.prototype),w};function ae(c,s,u){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+s>u)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(s,u,g){s=s>>>0,u=u>>>0,g||ae(s,u,this.length);let w=this[s],T=1,B=0;for(;++B<u&&(T*=256);)w+=this[s+B]*T;return w},h.prototype.readUintBE=h.prototype.readUIntBE=function(s,u,g){s=s>>>0,u=u>>>0,g||ae(s,u,this.length);let w=this[s+--u],T=1;for(;u>0&&(T*=256);)w+=this[s+--u]*T;return w},h.prototype.readUint8=h.prototype.readUInt8=function(s,u){return s=s>>>0,u||ae(s,1,this.length),this[s]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(s,u){return s=s>>>0,u||ae(s,2,this.length),this[s]|this[s+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(s,u){return s=s>>>0,u||ae(s,2,this.length),this[s]<<8|this[s+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},h.prototype.readBigUInt64LE=be(function(s){s=s>>>0,Te(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&Ae(s,this.length-8);const w=u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,T=this[++s]+this[++s]*2**8+this[++s]*2**16+g*2**24;return BigInt(w)+(BigInt(T)<<BigInt(32))}),h.prototype.readBigUInt64BE=be(function(s){s=s>>>0,Te(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&Ae(s,this.length-8);const w=u*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],T=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g;return(BigInt(w)<<BigInt(32))+BigInt(T)}),h.prototype.readIntLE=function(s,u,g){s=s>>>0,u=u>>>0,g||ae(s,u,this.length);let w=this[s],T=1,B=0;for(;++B<u&&(T*=256);)w+=this[s+B]*T;return T*=128,w>=T&&(w-=Math.pow(2,8*u)),w},h.prototype.readIntBE=function(s,u,g){s=s>>>0,u=u>>>0,g||ae(s,u,this.length);let w=u,T=1,B=this[s+--w];for(;w>0&&(T*=256);)B+=this[s+--w]*T;return T*=128,B>=T&&(B-=Math.pow(2,8*u)),B},h.prototype.readInt8=function(s,u){return s=s>>>0,u||ae(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},h.prototype.readInt16LE=function(s,u){s=s>>>0,u||ae(s,2,this.length);const g=this[s]|this[s+1]<<8;return g&32768?g|4294901760:g},h.prototype.readInt16BE=function(s,u){s=s>>>0,u||ae(s,2,this.length);const g=this[s+1]|this[s]<<8;return g&32768?g|4294901760:g},h.prototype.readInt32LE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},h.prototype.readInt32BE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},h.prototype.readBigInt64LE=be(function(s){s=s>>>0,Te(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&Ae(s,this.length-8);const w=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(g<<24);return(BigInt(w)<<BigInt(32))+BigInt(u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),h.prototype.readBigInt64BE=be(function(s){s=s>>>0,Te(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&Ae(s,this.length-8);const w=(u<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(w)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g)}),h.prototype.readFloatLE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),t.read(this,s,!0,23,4)},h.prototype.readFloatBE=function(s,u){return s=s>>>0,u||ae(s,4,this.length),t.read(this,s,!1,23,4)},h.prototype.readDoubleLE=function(s,u){return s=s>>>0,u||ae(s,8,this.length),t.read(this,s,!0,52,8)},h.prototype.readDoubleBE=function(s,u){return s=s>>>0,u||ae(s,8,this.length),t.read(this,s,!1,52,8)};function de(c,s,u,g,w,T){if(!h.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>w||s<T)throw new RangeError('"value" argument is out of bounds');if(u+g>c.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(s,u,g,w){if(s=+s,u=u>>>0,g=g>>>0,!w){const Z=Math.pow(2,8*g)-1;de(this,s,u,g,Z,0)}let T=1,B=0;for(this[u]=s&255;++B<g&&(T*=256);)this[u+B]=s/T&255;return u+g},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(s,u,g,w){if(s=+s,u=u>>>0,g=g>>>0,!w){const Z=Math.pow(2,8*g)-1;de(this,s,u,g,Z,0)}let T=g-1,B=1;for(this[u+T]=s&255;--T>=0&&(B*=256);)this[u+T]=s/B&255;return u+g},h.prototype.writeUint8=h.prototype.writeUInt8=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,1,255,0),this[u]=s&255,u+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,2,65535,0),this[u]=s&255,this[u+1]=s>>>8,u+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,2,65535,0),this[u]=s>>>8,this[u+1]=s&255,u+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,4,4294967295,0),this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255,u+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,4,4294967295,0),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};function De(c,s,u,g,w){Je(s,g,w,c,u,7);let T=Number(s&BigInt(4294967295));c[u++]=T,T=T>>8,c[u++]=T,T=T>>8,c[u++]=T,T=T>>8,c[u++]=T;let B=Number(s>>BigInt(32)&BigInt(4294967295));return c[u++]=B,B=B>>8,c[u++]=B,B=B>>8,c[u++]=B,B=B>>8,c[u++]=B,u}function _e(c,s,u,g,w){Je(s,g,w,c,u,7);let T=Number(s&BigInt(4294967295));c[u+7]=T,T=T>>8,c[u+6]=T,T=T>>8,c[u+5]=T,T=T>>8,c[u+4]=T;let B=Number(s>>BigInt(32)&BigInt(4294967295));return c[u+3]=B,B=B>>8,c[u+2]=B,B=B>>8,c[u+1]=B,B=B>>8,c[u]=B,u+8}h.prototype.writeBigUInt64LE=be(function(s,u=0){return De(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=be(function(s,u=0){return _e(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(s,u,g,w){if(s=+s,u=u>>>0,!w){const se=Math.pow(2,8*g-1);de(this,s,u,g,se-1,-se)}let T=0,B=1,Z=0;for(this[u]=s&255;++T<g&&(B*=256);)s<0&&Z===0&&this[u+T-1]!==0&&(Z=1),this[u+T]=(s/B>>0)-Z&255;return u+g},h.prototype.writeIntBE=function(s,u,g,w){if(s=+s,u=u>>>0,!w){const se=Math.pow(2,8*g-1);de(this,s,u,g,se-1,-se)}let T=g-1,B=1,Z=0;for(this[u+T]=s&255;--T>=0&&(B*=256);)s<0&&Z===0&&this[u+T+1]!==0&&(Z=1),this[u+T]=(s/B>>0)-Z&255;return u+g},h.prototype.writeInt8=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,1,127,-128),s<0&&(s=255+s+1),this[u]=s&255,u+1},h.prototype.writeInt16LE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,2,32767,-32768),this[u]=s&255,this[u+1]=s>>>8,u+2},h.prototype.writeInt16BE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,2,32767,-32768),this[u]=s>>>8,this[u+1]=s&255,u+2},h.prototype.writeInt32LE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,4,2147483647,-2147483648),this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24,u+4},h.prototype.writeInt32BE=function(s,u,g){return s=+s,u=u>>>0,g||de(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4},h.prototype.writeBigInt64LE=be(function(s,u=0){return De(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=be(function(s,u=0){return _e(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Qe(c,s,u,g,w,T){if(u+g>c.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Ge(c,s,u,g,w){return s=+s,u=u>>>0,w||Qe(c,s,u,4),t.write(c,s,u,g,23,4),u+4}h.prototype.writeFloatLE=function(s,u,g){return Ge(this,s,u,!0,g)},h.prototype.writeFloatBE=function(s,u,g){return Ge(this,s,u,!1,g)};function He(c,s,u,g,w){return s=+s,u=u>>>0,w||Qe(c,s,u,8),t.write(c,s,u,g,52,8),u+8}h.prototype.writeDoubleLE=function(s,u,g){return He(this,s,u,!0,g)},h.prototype.writeDoubleBE=function(s,u,g){return He(this,s,u,!1,g)},h.prototype.copy=function(s,u,g,w){if(!h.isBuffer(s))throw new TypeError("argument should be a Buffer");if(g||(g=0),!w&&w!==0&&(w=this.length),u>=s.length&&(u=s.length),u||(u=0),w>0&&w<g&&(w=g),w===g||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),s.length-u<w-g&&(w=s.length-u+g);const T=w-g;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,w):Uint8Array.prototype.set.call(s,this.subarray(g,w),u),T},h.prototype.fill=function(s,u,g,w){if(typeof s=="string"){if(typeof u=="string"?(w=u,u=0,g=this.length):typeof g=="string"&&(w=g,g=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!h.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(s.length===1){const B=s.charCodeAt(0);(w==="utf8"&&B<128||w==="latin1")&&(s=B)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,s||(s=0);let T;if(typeof s=="number")for(T=u;T<g;++T)this[T]=s;else{const B=h.isBuffer(s)?s:h.from(s,w),Z=B.length;if(Z===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(T=0;T<g-u;++T)this[T+u]=B[T%Z]}return this};const Ce={};function je(c,s,u){Ce[c]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}je("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),je("ERR_INVALID_ARG_TYPE",function(c,s){return`The "${c}" argument must be of type number. Received type ${typeof s}`},TypeError),je("ERR_OUT_OF_RANGE",function(c,s,u){let g=`The value of "${c}" is out of range.`,w=u;return Number.isInteger(u)&&Math.abs(u)>2**32?w=We(String(u)):typeof u=="bigint"&&(w=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(w=We(w)),w+="n"),g+=` It must be ${s}. Received ${w}`,g},RangeError);function We(c){let s="",u=c.length;const g=c[0]==="-"?1:0;for(;u>=g+4;u-=3)s=`_${c.slice(u-3,u)}${s}`;return`${c.slice(0,u)}${s}`}function Ze(c,s,u){Te(s,"offset"),(c[s]===void 0||c[s+u]===void 0)&&Ae(s,c.length-(u+1))}function Je(c,s,u,g,w,T){if(c>u||c<s){const B=typeof s=="bigint"?"n":"";let Z;throw T>3?s===0||s===BigInt(0)?Z=`>= 0${B} and < 2${B} ** ${(T+1)*8}${B}`:Z=`>= -(2${B} ** ${(T+1)*8-1}${B}) and < 2 ** ${(T+1)*8-1}${B}`:Z=`>= ${s}${B} and <= ${u}${B}`,new Ce.ERR_OUT_OF_RANGE("value",Z,c)}Ze(g,w,T)}function Te(c,s){if(typeof c!="number")throw new Ce.ERR_INVALID_ARG_TYPE(s,"number",c)}function Ae(c,s,u){throw Math.floor(c)!==c?(Te(c,u),new Ce.ERR_OUT_OF_RANGE(u||"offset","an integer",c)):s<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${s}`,c)}const et=/[^+/0-9A-Za-z-_]/g;function tt(c){if(c=c.split("=")[0],c=c.trim().replace(et,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function Ve(c,s){s=s||1/0;let u;const g=c.length;let w=null;const T=[];for(let B=0;B<g;++B){if(u=c.charCodeAt(B),u>55295&&u<57344){if(!w){if(u>56319){(s-=3)>-1&&T.push(239,191,189);continue}else if(B+1===g){(s-=3)>-1&&T.push(239,191,189);continue}w=u;continue}if(u<56320){(s-=3)>-1&&T.push(239,191,189),w=u;continue}u=(w-55296<<10|u-56320)+65536}else w&&(s-=3)>-1&&T.push(239,191,189);if(w=null,u<128){if((s-=1)<0)break;T.push(u)}else if(u<2048){if((s-=2)<0)break;T.push(u>>6|192,u&63|128)}else if(u<65536){if((s-=3)<0)break;T.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((s-=4)<0)break;T.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return T}function rt(c){const s=[];for(let u=0;u<c.length;++u)s.push(c.charCodeAt(u)&255);return s}function nt(c,s){let u,g,w;const T=[];for(let B=0;B<c.length&&!((s-=2)<0);++B)u=c.charCodeAt(B),g=u>>8,w=u%256,T.push(w),T.push(g);return T}function Ye(c){return e.toByteArray(tt(c))}function Ie(c,s,u,g){let w;for(w=0;w<g&&!(w+u>=s.length||w>=c.length);++w)s[w+u]=c[w];return w}function ye(c,s){return c instanceof s||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===s.name}function qe(c){return c!==c}const it=function(){const c="0123456789abcdef",s=new Array(256);for(let u=0;u<16;++u){const g=u*16;for(let w=0;w<16;++w)s[g+w]=c[u]+c[w]}return s}();function be(c){return typeof BigInt>"u"?ot:c}function ot(){throw new Error("BigInt not supported")}}(buffer)),buffer}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:r,AbstractKeyIterator:e,AbstractValueIterator:t}=abstractIterator,n=Symbol("unfix"),o=Symbol("iterator"),f=Symbol("handleOne"),y=Symbol("handleMany"),h=Symbol("callback");class m extends r{constructor(D,I,A,k){super(D,I),this[o]=A,this[n]=k,this[f]=this[f].bind(this),this[y]=this[y].bind(this),this[h]=null}[f](D,I,A){const k=this[h];if(D)return k(D);I!==void 0&&(I=this[n](I)),k(D,I,A)}[y](D,I){const A=this[h];if(D)return A(D);for(const k of I){const O=k[0];O!==void 0&&(k[0]=this[n](O))}A(D,I)}}class $ extends e{constructor(D,I,A,k){super(D,I),this[o]=A,this[n]=k,this[f]=this[f].bind(this),this[y]=this[y].bind(this),this[h]=null}[f](D,I){const A=this[h];if(D)return A(D);I!==void 0&&(I=this[n](I)),A(D,I)}[y](D,I){const A=this[h];if(D)return A(D);for(let k=0;k<I.length;k++){const O=I[k];O!==void 0&&(I[k]=this[n](O))}A(D,I)}}class E extends t{constructor(D,I,A){super(D,I),this[o]=A}}for(const v of[m,$])v.prototype._next=function(D){this[h]=D,this[o].next(this[f])},v.prototype._nextv=function(D,I,A){this[h]=A,this[o].nextv(D,I,this[y])},v.prototype._all=function(D,I){this[h]=I,this[o].all(D,this[y])};for(const v of[E])v.prototype._next=function(D){this[o].next(D)},v.prototype._nextv=function(D,I,A){this[o].nextv(D,I,A)},v.prototype._all=function(D,I){this[o].all(D,I)};for(const v of[m,$,E])v.prototype._seek=function(D,I){this[o].seek(D,I)},v.prototype._close=function(D){this[o].close(D)};return abstractSublevelIterator.AbstractSublevelIterator=m,abstractSublevelIterator.AbstractSublevelKeyIterator=$,abstractSublevelIterator.AbstractSublevelValueIterator=E,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const r=moduleError,{Buffer:e}=requireBuffer()||{},{AbstractSublevelIterator:t,AbstractSublevelKeyIterator:n,AbstractSublevelValueIterator:o}=requireAbstractSublevelIterator(),f=Symbol("prefix"),y=Symbol("upperBound"),h=Symbol("prefixRange"),m=Symbol("parent"),$=Symbol("unfix"),E=new TextEncoder,v={separator:"!"};abstractSublevel=function({AbstractLevel:U}){class q extends U{static defaults(P){if(typeof P=="string")throw new r("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(P&&P.open)throw new r("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return P==null?v:P.separator?P:{...P,separator:"!"}}constructor(P,L,X){const{separator:K,manifest:N,...W}=q.defaults(X);L=O(L,K);const ue=K.charCodeAt(0)+1,te=P[m]||P;if(!E.encode(L).every(he=>he>ue&&he<127))throw new r(`Prefix must use bytes > ${ue} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(D(te,N),W);const le=(P.prefix||"")+K+L+K,ie=le.slice(0,-1)+String.fromCharCode(ue);this[m]=te,this[f]=new A(le),this[y]=new A(ie),this[$]=new k,this.nextTick=te.nextTick}prefixKey(P,L){if(L==="utf8")return this[f].utf8+P;if(P.byteLength===0)return this[f][L];if(L==="view"){const X=this[f].view,K=new Uint8Array(X.byteLength+P.byteLength);return K.set(X,0),K.set(P,X.byteLength),K}else{const X=this[f].buffer;return e.concat([X,P],X.byteLength+P.byteLength)}}[h](P,L){P.gte!==void 0?P.gte=this.prefixKey(P.gte,L):P.gt!==void 0?P.gt=this.prefixKey(P.gt,L):P.gte=this[f][L],P.lte!==void 0?P.lte=this.prefixKey(P.lte,L):P.lt!==void 0?P.lt=this.prefixKey(P.lt,L):P.lte=this[y][L]}get prefix(){return this[f].utf8}get db(){return this[m]}_open(P,L){this[m].open({passive:!0},L)}_put(P,L,X,K){this[m].put(P,L,X,K)}_get(P,L,X){this[m].get(P,L,X)}_getMany(P,L,X){this[m].getMany(P,L,X)}_del(P,L,X){this[m].del(P,L,X)}_batch(P,L,X){this[m].batch(P,L,X)}_clear(P,L){this[h](P,P.keyEncoding),this[m].clear(P,L)}_iterator(P){this[h](P,P.keyEncoding);const L=this[m].iterator(P),X=this[$].get(this[f].utf8.length,P.keyEncoding);return new t(this,P,L,X)}_keys(P){this[h](P,P.keyEncoding);const L=this[m].keys(P),X=this[$].get(this[f].utf8.length,P.keyEncoding);return new n(this,P,L,X)}_values(P){this[h](P,P.keyEncoding);const L=this[m].values(P);return new o(this,P,L)}}return{AbstractSublevel:q}};const D=function(U,q){return{...U.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...q,encodings:{utf8:I(U,"utf8"),buffer:I(U,"buffer"),view:I(U,"view")}}},I=function(U,q){return U.supports.encodings[q]?U.keyEncoding(q).name===q:!1};class A{constructor(q){this.utf8=q,this.view=E.encode(q),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class k{constructor(){this.cache=new Map}get(q,j){let P=this.cache.get(j);return P===void 0&&(j==="view"?P=function(L,X){return X.subarray(L)}.bind(null,q):P=function(L,X){return X.slice(L)}.bind(null,q),this.cache.set(j,P)),P}}const O=function(U,q){let j=0,P=U.length;for(;j<P&&U[j]===q;)j++;for(;P>j&&U[P-1]===q;)P--;return U.slice(j,P)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter}=events.exports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop=()=>{};class AbstractLevel$1 extends EventEmitter{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=getOptions(t);const{keyEncoding:n,valueEncoding:o,passive:f,...y}=t;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=y,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(n||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(o||"utf8");for(const h of this[kTranscoder].encodings())this.supports.encodings[h.commonName]||(this.supports.encodings[h.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e!=null?e:this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e!=null?e:this[kValueEncoding])}open(e,t){t=getCallback(e,t),t=fromCallback$1(t,kPromise$1),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const n=o=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,o?()=>n(o):n):this[kStatus]!=="open"?t(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:o})):t()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,n):this.nextTick(n):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,o=>{if(o){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),n(o)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),n()})):this[kStatus]==="open"?this.nextTick(n):this.once(kLanded,()=>this.open(e,t)),t[kPromise$1]}_open(e,t){this.nextTick(t)}close(e){e=fromCallback$1(e,kPromise$1);const t=n=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,n?t(n):t):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const n=o=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),t(o)};this[kCloseResources](()=>{this._close(o=>{if(o)return n(o);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),t()})})}else this[kStatus]==="closed"?this.nextTick(t):this.once(kLanded,()=>this.close(e));return e[kPromise$1]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let t=this[kResources].size,n=!0;const o=()=>{--t===0&&(n?this.nextTick(e):e())};for(const f of this[kResources])f.close(o);n=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=getCallback(t,n),n=fromCallback$1(n,kPromise$1),t=getOptions(t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,t,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(n,o),n[kPromise$1];const f=this.keyEncoding(t.keyEncoding),y=this.valueEncoding(t.valueEncoding),h=f.format,m=y.format;return(t.keyEncoding!==h||t.valueEncoding!==m)&&(t=Object.assign({},t,{keyEncoding:h,valueEncoding:m})),this._get(this.prefixKey(f.encode(e),h),t,($,E)=>{if($)return($.code==="LEVEL_NOT_FOUND"||$.notFound||/NotFound/i.test($))&&($.code||($.code="LEVEL_NOT_FOUND"),$.notFound||($.notFound=!0),$.status||($.status=404)),n($);try{E=y.decode(E)}catch(v){return n(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:v}))}n(null,E)}),n[kPromise$1]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=getCallback(t,n),n=fromCallback$1(n,kPromise$1),t=getOptions(t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[kPromise$1];if(e.length===0)return this.nextTick(n,null,[]),n[kPromise$1];const o=this.keyEncoding(t.keyEncoding),f=this.valueEncoding(t.valueEncoding),y=o.format,h=f.format;(t.keyEncoding!==y||t.valueEncoding!==h)&&(t=Object.assign({},t,{keyEncoding:y,valueEncoding:h}));const m=new Array(e.length);for(let $=0;$<e.length;$++){const E=e[$],v=this._checkKey(E);if(v)return this.nextTick(n,v),n[kPromise$1];m[$]=this.prefixKey(o.encode(E),y)}return this._getMany(m,t,($,E)=>{if($)return n($);try{for(let v=0;v<E.length;v++)E[v]!==void 0&&(E[v]=f.decode(E[v]))}catch(v){return n(new ModuleError$1(`Could not decode one or more of ${E.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:v}))}n(null,E)}),n[kPromise$1]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,o){if(o=getCallback(n,o),o=fromCallback$1(o,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,t,n,o)),o[kPromise$1];if(maybeError(this,o))return o[kPromise$1];const f=this._checkKey(e)||this._checkValue(t);if(f)return this.nextTick(o,f),o[kPromise$1];const y=this.keyEncoding(n.keyEncoding),h=this.valueEncoding(n.valueEncoding),m=y.format,$=h.format;(n.keyEncoding!==m||n.valueEncoding!==$)&&(n=Object.assign({},n,{keyEncoding:m,valueEncoding:$}));const E=this.prefixKey(y.encode(e),m),v=h.encode(t);return this._put(E,v,n,D=>{if(D)return o(D);this.emit("put",e,t),o()}),o[kPromise$1]}_put(e,t,n,o){this.nextTick(o)}del(e,t,n){if(n=getCallback(t,n),n=fromCallback$1(n,kPromise$1),t=getOptions(t,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,t,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(n,o),n[kPromise$1];const f=this.keyEncoding(t.keyEncoding),y=f.format;return t.keyEncoding!==y&&(t=Object.assign({},t,{keyEncoding:y})),this._del(this.prefixKey(f.encode(e),y),t,h=>{if(h)return n(h);this.emit("del",e),n()}),n[kPromise$1]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=getCallback(t,n),n=fromCallback$1(n,kPromise$1),t=getOptions(t,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,t,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[kPromise$1];if(e.length===0)return this.nextTick(n),n[kPromise$1];const o=new Array(e.length),{keyEncoding:f,valueEncoding:y,...h}=t;for(let m=0;m<e.length;m++){if(typeof e[m]!="object"||e[m]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[kPromise$1];const $=Object.assign({},e[m]);if($.type!=="put"&&$.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[kPromise$1];const E=this._checkKey($.key);if(E)return this.nextTick(n,E),n[kPromise$1];const v=$.sublevel!=null?$.sublevel:this,D=v.keyEncoding($.keyEncoding||f),I=D.format;if($.key=v.prefixKey(D.encode($.key),I),$.keyEncoding=I,$.type==="put"){const A=this._checkValue($.value);if(A)return this.nextTick(n,A),n[kPromise$1];const k=v.valueEncoding($.valueEncoding||y);$.value=k.encode($.value),$.valueEncoding=k.format}v!==this&&($.sublevel=null),o[m]=$}return this._batch(o,h,m=>{if(m)return n(m);this.emit("batch",e),n()}),n[kPromise$1]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,AbstractSublevel.defaults(t))}_sublevel(e,t){return new AbstractSublevel(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=getCallback(e,t),t=fromCallback$1(t,kPromise$1),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,t)),t[kPromise$1];if(maybeError(this,t))return t[kPromise$1];const n=e,o=this.keyEncoding(e.keyEncoding);return e=rangeOptions(e,o),e.keyEncoding=o.format,e.limit===0?this.nextTick(t):this._clear(e,f=>{if(f)return t(f);this.emit("clear",n),t()}),t[kPromise$1]}_clear(e,t){this.nextTick(t)}iterator(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,t),e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,t),e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(r,e){return r[kStatus]!=="open"?(r.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,o,f,y,h,m=!0,$;Array.isArray(r)?(n=[],f=o=r.length):(y=Object.keys(r),n={},f=o=y.length);function E(D){function I(){t&&t(D,n),t=null}m?queueMicrotask$1(I):I()}function v(D,I,A){if(n[D]=A,I&&(h=!0),--f===0||I)E(I);else if(!h&&$<o){let k;y?(k=y[$],$+=1,r[k](function(O,U){v(k,O,U)})):(k=$,$+=1,r[k](function(O,U){v(k,O,U)}))}}$=e,f?y?y.some(function(D,I){return r[D](function(A,k){v(D,A,k)}),I===e-1}):r.some(function(D,I){return D(function(A,k){v(I,A,k)}),I===e-1}):E(null),m=!1}var iterator={},keyRange=function r(e){const t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,o=e.gte===void 0,f=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,o,f):t!==void 0?IDBKeyRange.lowerBound(t,o):n!==void 0?IDBKeyRange.upperBound(n,f):null};const textEncoder=new TextEncoder;var deserialize$2=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):textEncoder.encode(r)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};class Iterator$1 extends AbstractIterator{constructor(e,t,n){super(e,n),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=n,this[kCurrentOptions]={...n},this[kPosition]=void 0,this[kLocation$1]=t,this[kFirst]=!0}_nextv(e,t,n){if(this[kFirst]=!1,this[kFinished])return this.nextTick(n,null,[]);if(this[kCache].length>0)return e=Math.min(e,this[kCache].length),this.nextTick(n,null,this[kCache].splice(0,e));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let o;try{o=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(n,null,[])}const f=this.db.db.transaction([this[kLocation$1]],"readonly"),y=f.objectStore(this[kLocation$1]),h=[];if(this[kOptions].reverse){const m=!this[kOptions].values&&y.openKeyCursor?"openKeyCursor":"openCursor";y[m](o,"prev").onsuccess=$=>{const E=$.target.result;if(E){const{key:v,value:D}=E;this[kPosition]=v,h.push([this[kOptions].keys&&v!==void 0?deserialize$1(v):void 0,this[kOptions].values&&D!==void 0?deserialize$1(D):void 0]),h.length<e?E.continue():maybeCommit(f)}else this[kFinished]=!0}}else{let m,$;const E=()=>{if(m===void 0||$===void 0)return;const v=Math.max(m.length,$.length);v===0||e===1/0?this[kFinished]=!0:this[kPosition]=m[v-1],h.length=v;for(let D=0;D<v;D++){const I=m[D],A=$[D];h[D]=[this[kOptions].keys&&I!==void 0?deserialize$1(I):void 0,this[kOptions].values&&A!==void 0?deserialize$1(A):void 0]}maybeCommit(f)};this[kOptions].keys||e<1/0?y.getAllKeys(o,e<1/0?e:void 0).onsuccess=v=>{m=v.target.result,E()}:(m=[],this.nextTick(E)),this[kOptions].values?y.getAll(o,e<1/0?e:void 0).onsuccess=v=>{$=v.target.result,E()}:($=[],this.nextTick(E))}f.onabort=()=>{n(f.error||new Error("aborted by user")),n=null},f.oncomplete=()=>{n(null,h),n=null}}_next(e){if(this[kCache].length>0){const[t,n]=this[kCache].shift();this.nextTick(e,null,t,n)}else if(this[kFinished])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,t=1),this._nextv(t,emptyOptions,(n,o)=>{if(n)return e(n);this[kCache]=o,this._next(e)})}}_all(e,t){this[kFirst]=!1;const n=this[kCache].splice(0,this[kCache].length),o=this.limit-this.count-n.length;if(o<=0)return this.nextTick(t,null,n);this._nextv(o,emptyOptions,(f,y)=>{if(f)return t(f);n.length>0&&(y=n.concat(y)),t(null,y)})}_seek(e,t){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let n;try{n=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}n!==null&&!n.includes(e)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=e:this[kCurrentOptions].gte=e}}iterator.Iterator=Iterator$1;function maybeCommit(r){typeof r.commit=="function"&&r.commit()}var clear$1=function r(e,t,n,o,f){if(o.limit===0)return e.nextTick(f);const y=e.db.transaction([t],"readwrite"),h=y.objectStore(t);let m=0;y.oncomplete=function(){f()},y.onabort=function(){f(y.error||new Error("aborted by user"))};const $=h.openKeyCursor?"openKeyCursor":"openCursor",E=o.reverse?"prev":"next";h[$](n,E).onsuccess=function(v){const D=v.target.result;D&&(h.delete(D.key).onsuccess=function(){(o.limit<=0||++m<o.limit)&&D.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:o,version:f,...y}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},y),typeof e!="string")throw new Error("constructor requires a location string argument");this[kLocation]=e,this[kNamePrefix]=o==null?DEFAULT_PREFIX:o,this[kVersion]=parseInt(f||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(e,t){const n=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[kIDB]=n.result,t()},n.onupgradeneeded=o=>{const f=o.target.result;f.objectStoreNames.contains(this[kLocation])||f.createObjectStore(this[kLocation])}}[kStore](e){return this[kIDB].transaction([this[kLocation]],e).objectStore(this[kLocation])}[kOnComplete](e,t){const n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){const o=this[kStore]("readonly");let f;try{f=o.get(e)}catch(y){return this.nextTick(n,y)}this[kOnComplete](f,function(y,h){if(y)return n(y);if(h===void 0)return n(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,deserialize(h))})}_getMany(e,t,n){const o=this[kStore]("readonly"),f=e.map(y=>h=>{let m;try{m=o.get(y)}catch($){return h($)}m.onsuccess=()=>{const $=m.result;h(null,$===void 0?$:deserialize($))},m.onerror=$=>{$.stopPropagation(),h(m.error)}});parallel(f,16,n)}_del(e,t,n){const o=this[kStore]("readwrite");let f;try{f=o.delete(e)}catch(y){return this.nextTick(n,y)}this[kOnComplete](f,n)}_put(e,t,n,o){const f=this[kStore]("readwrite");let y;try{y=f.put(t,e)}catch(h){return this.nextTick(o,h)}this[kOnComplete](y,o)}_iterator(e){return new Iterator(this,this[kLocation],e)}_batch(e,t,n){const o=this[kStore]("readwrite"),f=o.transaction;let y=0,h;f.onabort=function(){n(h||f.error||new Error("aborted by user"))},f.oncomplete=function(){n()};function m(){const $=e[y++],E=$.key;let v;try{v=$.type==="del"?o.delete(E):o.put($.value,E)}catch(D){h=D,f.abort();return}y<e.length?v.onsuccess=m:typeof f.commit=="function"&&f.commit()}m()}_clear(e,t){let n,o;try{n=createKeyRange(e)}catch{return this.nextTick(t)}if(e.limit>=0)return clear(this,this[kLocation],n,e,t);try{const f=this[kStore]("readwrite");o=n?f.delete(n):f.clear()}catch(f){return this.nextTick(t,f)}this[kOnComplete](o,t)}_close(e){this[kIDB].close(),this.nextTick(e)}}BrowserLevel.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=DEFAULT_PREFIX),t=fromCallback(t,kPromise);const n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(o){t(o)},t[kPromise]};var Tc=Object.create,nr=Object.defineProperty,Ic=Object.getOwnPropertyDescriptor,Sc=Object.getOwnPropertyNames,Uc=Object.getPrototypeOf,Fc=Object.prototype.hasOwnProperty,F=(r,e)=>()=>(r&&(e=r(r=0)),e),S=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),M=(r,e)=>{for(var t in e)nr(r,t,{get:e[t],enumerable:!0})},No=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Sc(e))!Fc.call(r,o)&&o!==t&&nr(r,o,{get:()=>e[o],enumerable:!(n=Ic(e,o))||n.enumerable});return r},J=(r,e,t)=>(t=r!=null?Tc(Uc(r)):{},No(e||!r||!r.__esModule?nr(t,"default",{value:r,enumerable:!0}):t,r)),R=r=>No(nr({},"__esModule",{value:!0}),r),Po=S(r=>{a(),r.byteLength=m,r.toByteArray=E,r.fromByteArray=I;var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(f=0,y=o.length;f<y;++f)e[f]=o[f],t[o.charCodeAt(f)]=f;var f,y;t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;function h(A){var k=A.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=A.indexOf("=");O===-1&&(O=k);var U=O===k?0:4-O%4;return[O,U]}function m(A){var k=h(A),O=k[0],U=k[1];return(O+U)*3/4-U}function $(A,k,O){return(k+O)*3/4-O}function E(A){var k,O=h(A),U=O[0],q=O[1],j=new n($(A,U,q)),P=0,L=q>0?U-4:U,X;for(X=0;X<L;X+=4)k=t[A.charCodeAt(X)]<<18|t[A.charCodeAt(X+1)]<<12|t[A.charCodeAt(X+2)]<<6|t[A.charCodeAt(X+3)],j[P++]=k>>16&255,j[P++]=k>>8&255,j[P++]=k&255;return q===2&&(k=t[A.charCodeAt(X)]<<2|t[A.charCodeAt(X+1)]>>4,j[P++]=k&255),q===1&&(k=t[A.charCodeAt(X)]<<10|t[A.charCodeAt(X+1)]<<4|t[A.charCodeAt(X+2)]>>2,j[P++]=k>>8&255,j[P++]=k&255),j}function v(A){return e[A>>18&63]+e[A>>12&63]+e[A>>6&63]+e[A&63]}function D(A,k,O){for(var U,q=[],j=k;j<O;j+=3)U=(A[j]<<16&16711680)+(A[j+1]<<8&65280)+(A[j+2]&255),q.push(v(U));return q.join("")}function I(A){for(var k,O=A.length,U=O%3,q=[],j=16383,P=0,L=O-U;P<L;P+=j)q.push(D(A,P,P+j>L?L:P+j));return U===1?(k=A[O-1],q.push(e[k>>2]+e[k<<4&63]+"==")):U===2&&(k=(A[O-2]<<8)+A[O-1],q.push(e[k>>10]+e[k>>4&63]+e[k<<2&63]+"=")),q.join("")}}),Ro=S(r=>{a(),r.read=function(e,t,n,o,f){var y,h,m=f*8-o-1,$=(1<<m)-1,E=$>>1,v=-7,D=n?f-1:0,I=n?-1:1,A=e[t+D];for(D+=I,y=A&(1<<-v)-1,A>>=-v,v+=m;v>0;y=y*256+e[t+D],D+=I,v-=8);for(h=y&(1<<-v)-1,y>>=-v,v+=o;v>0;h=h*256+e[t+D],D+=I,v-=8);if(y===0)y=1-E;else{if(y===$)return h?NaN:(A?-1:1)*(1/0);h=h+Math.pow(2,o),y=y-E}return(A?-1:1)*h*Math.pow(2,y-o)},r.write=function(e,t,n,o,f,y){var h,m,$,E=y*8-f-1,v=(1<<E)-1,D=v>>1,I=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=o?0:y-1,k=o?1:-1,O=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(m=isNaN(t)?1:0,h=v):(h=Math.floor(Math.log(t)/Math.LN2),t*($=Math.pow(2,-h))<1&&(h--,$*=2),h+D>=1?t+=I/$:t+=I*Math.pow(2,1-D),t*$>=2&&(h++,$/=2),h+D>=v?(m=0,h=v):h+D>=1?(m=(t*$-1)*Math.pow(2,f),h=h+D):(m=t*Math.pow(2,D-1)*Math.pow(2,f),h=0));f>=8;e[n+A]=m&255,A+=k,m/=256,f-=8);for(h=h<<f|m,E+=f;E>0;e[n+A]=h&255,A+=k,h/=256,E-=8);e[n+A-k]|=O*128}}),ti=S(r=>{a();var e=Po(),t=Ro(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=q,r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=f(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{let c=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(c,s),c.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function y(c){if(c>o)throw new RangeError('The value "'+c+'" is invalid for option "size"');let s=new Uint8Array(c);return Object.setPrototypeOf(s,h.prototype),s}function h(c,s,u){if(typeof c=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(c)}return m(c,s,u)}h.poolSize=8192;function m(c,s,u){if(typeof c=="string")return D(c,s);if(ArrayBuffer.isView(c))return A(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(ye(c,ArrayBuffer)||c&&ye(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(c,SharedArrayBuffer)||c&&ye(c.buffer,SharedArrayBuffer)))return k(c,s,u);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let g=c.valueOf&&c.valueOf();if(g!=null&&g!==c)return h.from(g,s,u);let w=O(c);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return h.from(c[Symbol.toPrimitive]("string"),s,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}h.from=function(c,s,u){return m(c,s,u)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function $(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function E(c,s,u){return $(c),c<=0?y(c):s!==void 0?typeof u=="string"?y(c).fill(s,u):y(c).fill(s):y(c)}h.alloc=function(c,s,u){return E(c,s,u)};function v(c){return $(c),y(c<0?0:U(c)|0)}h.allocUnsafe=function(c){return v(c)},h.allocUnsafeSlow=function(c){return v(c)};function D(c,s){if((typeof s!="string"||s==="")&&(s="utf8"),!h.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let u=j(c,s)|0,g=y(u),w=g.write(c,s);return w!==u&&(g=g.slice(0,w)),g}function I(c){let s=c.length<0?0:U(c.length)|0,u=y(s);for(let g=0;g<s;g+=1)u[g]=c[g]&255;return u}function A(c){if(ye(c,Uint8Array)){let s=new Uint8Array(c);return k(s.buffer,s.byteOffset,s.byteLength)}return I(c)}function k(c,s,u){if(s<0||c.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<s+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return s===void 0&&u===void 0?g=new Uint8Array(c):u===void 0?g=new Uint8Array(c,s):g=new Uint8Array(c,s,u),Object.setPrototypeOf(g,h.prototype),g}function O(c){if(h.isBuffer(c)){let s=U(c.length)|0,u=y(s);return u.length===0||c.copy(u,0,0,s),u}if(c.length!==void 0)return typeof c.length!="number"||qe(c.length)?y(0):I(c);if(c.type==="Buffer"&&Array.isArray(c.data))return I(c.data)}function U(c){if(c>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return c|0}function q(c){return+c!=c&&(c=0),h.alloc(+c)}h.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==h.prototype},h.compare=function(c,s){if(ye(c,Uint8Array)&&(c=h.from(c,c.offset,c.byteLength)),ye(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(c)||!h.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===s)return 0;let u=c.length,g=s.length;for(let w=0,T=Math.min(u,g);w<T;++w)if(c[w]!==s[w]){u=c[w],g=s[w];break}return u<g?-1:g<u?1:0},h.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(c,s){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return h.alloc(0);let u;if(s===void 0)for(s=0,u=0;u<c.length;++u)s+=c[u].length;let g=h.allocUnsafe(s),w=0;for(u=0;u<c.length;++u){let T=c[u];if(ye(T,Uint8Array))w+T.length>g.length?(h.isBuffer(T)||(T=h.from(T)),T.copy(g,w)):Uint8Array.prototype.set.call(g,T,w);else if(h.isBuffer(T))T.copy(g,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=T.length}return g};function j(c,s){if(h.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||ye(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);let u=c.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let w=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return Ve(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return Ye(c).length;default:if(w)return g?-1:Ve(c).length;s=(""+s).toLowerCase(),w=!0}}h.byteLength=j;function P(c,s,u){let g=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,s>>>=0,u<=s))return"";for(c||(c="utf8");;)switch(c){case"hex":return xe(this,s,u);case"utf8":case"utf-8":return he(this,s,u);case"ascii":return Ee(this,s,u);case"latin1":case"binary":return ee(this,s,u);case"base64":return ie(this,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,s,u);default:if(g)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),g=!0}}h.prototype._isBuffer=!0;function L(c,s,u){let g=c[s];c[s]=c[u],c[u]=g}h.prototype.swap16=function(){let c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<c;s+=2)L(this,s,s+1);return this},h.prototype.swap32=function(){let c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<c;s+=4)L(this,s,s+3),L(this,s+1,s+2);return this},h.prototype.swap64=function(){let c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<c;s+=8)L(this,s,s+7),L(this,s+1,s+6),L(this,s+2,s+5),L(this,s+3,s+4);return this},h.prototype.toString=function(){let c=this.length;return c===0?"":arguments.length===0?he(this,0,c):P.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(c){if(!h.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:h.compare(this,c)===0},h.prototype.inspect=function(){let c="",s=r.INSPECT_MAX_BYTES;return c=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(c+=" ... "),"<Buffer "+c+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(c,s,u,g,w){if(ye(c,Uint8Array)&&(c=h.from(c,c.offset,c.byteLength)),!h.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(s===void 0&&(s=0),u===void 0&&(u=c?c.length:0),g===void 0&&(g=0),w===void 0&&(w=this.length),s<0||u>c.length||g<0||w>this.length)throw new RangeError("out of range index");if(g>=w&&s>=u)return 0;if(g>=w)return-1;if(s>=u)return 1;if(s>>>=0,u>>>=0,g>>>=0,w>>>=0,this===c)return 0;let T=w-g,B=u-s,Z=Math.min(T,B),se=this.slice(g,w),ne=c.slice(s,u);for(let oe=0;oe<Z;++oe)if(se[oe]!==ne[oe]){T=se[oe],B=ne[oe];break}return T<B?-1:B<T?1:0};function X(c,s,u,g,w){if(c.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,qe(u)&&(u=w?0:c.length-1),u<0&&(u=c.length+u),u>=c.length){if(w)return-1;u=c.length-1}else if(u<0)if(w)u=0;else return-1;if(typeof s=="string"&&(s=h.from(s,g)),h.isBuffer(s))return s.length===0?-1:K(c,s,u,g,w);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(c,s,u):Uint8Array.prototype.lastIndexOf.call(c,s,u):K(c,[s],u,g,w);throw new TypeError("val must be string, number or Buffer")}function K(c,s,u,g,w){let T=1,B=c.length,Z=s.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(c.length<2||s.length<2)return-1;T=2,B/=2,Z/=2,u/=2}function se(oe,re){return T===1?oe[re]:oe.readUInt16BE(re*T)}let ne;if(w){let oe=-1;for(ne=u;ne<B;ne++)if(se(c,ne)===se(s,oe===-1?0:ne-oe)){if(oe===-1&&(oe=ne),ne-oe+1===Z)return oe*T}else oe!==-1&&(ne-=ne-oe),oe=-1}else for(u+Z>B&&(u=B-Z),ne=u;ne>=0;ne--){let oe=!0;for(let re=0;re<Z;re++)if(se(c,ne+re)!==se(s,re)){oe=!1;break}if(oe)return ne}return-1}h.prototype.includes=function(c,s,u){return this.indexOf(c,s,u)!==-1},h.prototype.indexOf=function(c,s,u){return X(this,c,s,u,!0)},h.prototype.lastIndexOf=function(c,s,u){return X(this,c,s,u,!1)};function N(c,s,u,g){u=Number(u)||0;let w=c.length-u;g?(g=Number(g),g>w&&(g=w)):g=w;let T=s.length;g>T/2&&(g=T/2);let B;for(B=0;B<g;++B){let Z=parseInt(s.substr(B*2,2),16);if(qe(Z))return B;c[u+B]=Z}return B}function W(c,s,u,g){return Ie(Ve(s,c.length-u),c,u,g)}function ue(c,s,u,g){return Ie(rt(s),c,u,g)}function te(c,s,u,g){return Ie(Ye(s),c,u,g)}function le(c,s,u,g){return Ie(nt(s,c.length-u),c,u,g)}h.prototype.write=function(c,s,u,g){if(s===void 0)g="utf8",u=this.length,s=0;else if(u===void 0&&typeof s=="string")g=s,u=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(u)?(u=u>>>0,g===void 0&&(g="utf8")):(g=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let w=this.length-s;if((u===void 0||u>w)&&(u=w),c.length>0&&(u<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let T=!1;for(;;)switch(g){case"hex":return N(this,c,s,u);case"utf8":case"utf-8":return W(this,c,s,u);case"ascii":case"latin1":case"binary":return ue(this,c,s,u);case"base64":return te(this,c,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,c,s,u);default:if(T)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),T=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(c,s,u){return s===0&&u===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(s,u))}function he(c,s,u){u=Math.min(c.length,u);let g=[],w=s;for(;w<u;){let T=c[w],B=null,Z=T>239?4:T>223?3:T>191?2:1;if(w+Z<=u){let se,ne,oe,re;switch(Z){case 1:T<128&&(B=T);break;case 2:se=c[w+1],(se&192)===128&&(re=(T&31)<<6|se&63,re>127&&(B=re));break;case 3:se=c[w+1],ne=c[w+2],(se&192)===128&&(ne&192)===128&&(re=(T&15)<<12|(se&63)<<6|ne&63,re>2047&&(re<55296||re>57343)&&(B=re));break;case 4:se=c[w+1],ne=c[w+2],oe=c[w+3],(se&192)===128&&(ne&192)===128&&(oe&192)===128&&(re=(T&15)<<18|(se&63)<<12|(ne&63)<<6|oe&63,re>65535&&re<1114112&&(B=re))}}B===null?(B=65533,Z=1):B>65535&&(B-=65536,g.push(B>>>10&1023|55296),B=56320|B&1023),g.push(B),w+=Z}return ge(g)}var we=4096;function ge(c){let s=c.length;if(s<=we)return String.fromCharCode.apply(String,c);let u="",g=0;for(;g<s;)u+=String.fromCharCode.apply(String,c.slice(g,g+=we));return u}function Ee(c,s,u){let g="";u=Math.min(c.length,u);for(let w=s;w<u;++w)g+=String.fromCharCode(c[w]&127);return g}function ee(c,s,u){let g="";u=Math.min(c.length,u);for(let w=s;w<u;++w)g+=String.fromCharCode(c[w]);return g}function xe(c,s,u){let g=c.length;(!s||s<0)&&(s=0),(!u||u<0||u>g)&&(u=g);let w="";for(let T=s;T<u;++T)w+=it[c[T]];return w}function Fe(c,s,u){let g=c.slice(s,u),w="";for(let T=0;T<g.length-1;T+=2)w+=String.fromCharCode(g[T]+g[T+1]*256);return w}h.prototype.slice=function(c,s){let u=this.length;c=~~c,s=s===void 0?u:~~s,c<0?(c+=u,c<0&&(c=0)):c>u&&(c=u),s<0?(s+=u,s<0&&(s=0)):s>u&&(s=u),s<c&&(s=c);let g=this.subarray(c,s);return Object.setPrototypeOf(g,h.prototype),g};function ae(c,s,u){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+s>u)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(c,s,u){c=c>>>0,s=s>>>0,u||ae(c,s,this.length);let g=this[c],w=1,T=0;for(;++T<s&&(w*=256);)g+=this[c+T]*w;return g},h.prototype.readUintBE=h.prototype.readUIntBE=function(c,s,u){c=c>>>0,s=s>>>0,u||ae(c,s,this.length);let g=this[c+--s],w=1;for(;s>0&&(w*=256);)g+=this[c+--s]*w;return g},h.prototype.readUint8=h.prototype.readUInt8=function(c,s){return c=c>>>0,s||ae(c,1,this.length),this[c]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(c,s){return c=c>>>0,s||ae(c,2,this.length),this[c]|this[c+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(c,s){return c=c>>>0,s||ae(c,2,this.length),this[c]<<8|this[c+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(c,s){return c=c>>>0,s||ae(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(c,s){return c=c>>>0,s||ae(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},h.prototype.readBigUInt64LE=be(function(c){c=c>>>0,Te(c,"offset");let s=this[c],u=this[c+7];(s===void 0||u===void 0)&&Ae(c,this.length-8);let g=s+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,w=this[++c]+this[++c]*2**8+this[++c]*2**16+u*2**24;return BigInt(g)+(BigInt(w)<<BigInt(32))}),h.prototype.readBigUInt64BE=be(function(c){c=c>>>0,Te(c,"offset");let s=this[c],u=this[c+7];(s===void 0||u===void 0)&&Ae(c,this.length-8);let g=s*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],w=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+u;return(BigInt(g)<<BigInt(32))+BigInt(w)}),h.prototype.readIntLE=function(c,s,u){c=c>>>0,s=s>>>0,u||ae(c,s,this.length);let g=this[c],w=1,T=0;for(;++T<s&&(w*=256);)g+=this[c+T]*w;return w*=128,g>=w&&(g-=Math.pow(2,8*s)),g},h.prototype.readIntBE=function(c,s,u){c=c>>>0,s=s>>>0,u||ae(c,s,this.length);let g=s,w=1,T=this[c+--g];for(;g>0&&(w*=256);)T+=this[c+--g]*w;return w*=128,T>=w&&(T-=Math.pow(2,8*s)),T},h.prototype.readInt8=function(c,s){return c=c>>>0,s||ae(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},h.prototype.readInt16LE=function(c,s){c=c>>>0,s||ae(c,2,this.length);let u=this[c]|this[c+1]<<8;return u&32768?u|4294901760:u},h.prototype.readInt16BE=function(c,s){c=c>>>0,s||ae(c,2,this.length);let u=this[c+1]|this[c]<<8;return u&32768?u|4294901760:u},h.prototype.readInt32LE=function(c,s){return c=c>>>0,s||ae(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},h.prototype.readInt32BE=function(c,s){return c=c>>>0,s||ae(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},h.prototype.readBigInt64LE=be(function(c){c=c>>>0,Te(c,"offset");let s=this[c],u=this[c+7];(s===void 0||u===void 0)&&Ae(c,this.length-8);let g=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(u<<24);return(BigInt(g)<<BigInt(32))+BigInt(s+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),h.prototype.readBigInt64BE=be(function(c){c=c>>>0,Te(c,"offset");let s=this[c],u=this[c+7];(s===void 0||u===void 0)&&Ae(c,this.length-8);let g=(s<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(g)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+u)}),h.prototype.readFloatLE=function(c,s){return c=c>>>0,s||ae(c,4,this.length),t.read(this,c,!0,23,4)},h.prototype.readFloatBE=function(c,s){return c=c>>>0,s||ae(c,4,this.length),t.read(this,c,!1,23,4)},h.prototype.readDoubleLE=function(c,s){return c=c>>>0,s||ae(c,8,this.length),t.read(this,c,!0,52,8)},h.prototype.readDoubleBE=function(c,s){return c=c>>>0,s||ae(c,8,this.length),t.read(this,c,!1,52,8)};function de(c,s,u,g,w,T){if(!h.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>w||s<T)throw new RangeError('"value" argument is out of bounds');if(u+g>c.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(c,s,u,g){if(c=+c,s=s>>>0,u=u>>>0,!g){let B=Math.pow(2,8*u)-1;de(this,c,s,u,B,0)}let w=1,T=0;for(this[s]=c&255;++T<u&&(w*=256);)this[s+T]=c/w&255;return s+u},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(c,s,u,g){if(c=+c,s=s>>>0,u=u>>>0,!g){let B=Math.pow(2,8*u)-1;de(this,c,s,u,B,0)}let w=u-1,T=1;for(this[s+w]=c&255;--w>=0&&(T*=256);)this[s+w]=c/T&255;return s+u},h.prototype.writeUint8=h.prototype.writeUInt8=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,1,255,0),this[s]=c&255,s+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,2,65535,0),this[s]=c&255,this[s+1]=c>>>8,s+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,2,65535,0),this[s]=c>>>8,this[s+1]=c&255,s+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,4,4294967295,0),this[s+3]=c>>>24,this[s+2]=c>>>16,this[s+1]=c>>>8,this[s]=c&255,s+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,4,4294967295,0),this[s]=c>>>24,this[s+1]=c>>>16,this[s+2]=c>>>8,this[s+3]=c&255,s+4};function De(c,s,u,g,w){Je(s,g,w,c,u,7);let T=Number(s&BigInt(4294967295));c[u++]=T,T=T>>8,c[u++]=T,T=T>>8,c[u++]=T,T=T>>8,c[u++]=T;let B=Number(s>>BigInt(32)&BigInt(4294967295));return c[u++]=B,B=B>>8,c[u++]=B,B=B>>8,c[u++]=B,B=B>>8,c[u++]=B,u}function _e(c,s,u,g,w){Je(s,g,w,c,u,7);let T=Number(s&BigInt(4294967295));c[u+7]=T,T=T>>8,c[u+6]=T,T=T>>8,c[u+5]=T,T=T>>8,c[u+4]=T;let B=Number(s>>BigInt(32)&BigInt(4294967295));return c[u+3]=B,B=B>>8,c[u+2]=B,B=B>>8,c[u+1]=B,B=B>>8,c[u]=B,u+8}h.prototype.writeBigUInt64LE=be(function(c,s=0){return De(this,c,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=be(function(c,s=0){return _e(this,c,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(c,s,u,g){if(c=+c,s=s>>>0,!g){let Z=Math.pow(2,8*u-1);de(this,c,s,u,Z-1,-Z)}let w=0,T=1,B=0;for(this[s]=c&255;++w<u&&(T*=256);)c<0&&B===0&&this[s+w-1]!==0&&(B=1),this[s+w]=(c/T>>0)-B&255;return s+u},h.prototype.writeIntBE=function(c,s,u,g){if(c=+c,s=s>>>0,!g){let Z=Math.pow(2,8*u-1);de(this,c,s,u,Z-1,-Z)}let w=u-1,T=1,B=0;for(this[s+w]=c&255;--w>=0&&(T*=256);)c<0&&B===0&&this[s+w+1]!==0&&(B=1),this[s+w]=(c/T>>0)-B&255;return s+u},h.prototype.writeInt8=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,1,127,-128),c<0&&(c=255+c+1),this[s]=c&255,s+1},h.prototype.writeInt16LE=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,2,32767,-32768),this[s]=c&255,this[s+1]=c>>>8,s+2},h.prototype.writeInt16BE=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,2,32767,-32768),this[s]=c>>>8,this[s+1]=c&255,s+2},h.prototype.writeInt32LE=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,4,2147483647,-2147483648),this[s]=c&255,this[s+1]=c>>>8,this[s+2]=c>>>16,this[s+3]=c>>>24,s+4},h.prototype.writeInt32BE=function(c,s,u){return c=+c,s=s>>>0,u||de(this,c,s,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[s]=c>>>24,this[s+1]=c>>>16,this[s+2]=c>>>8,this[s+3]=c&255,s+4},h.prototype.writeBigInt64LE=be(function(c,s=0){return De(this,c,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=be(function(c,s=0){return _e(this,c,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Qe(c,s,u,g,w,T){if(u+g>c.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Ge(c,s,u,g,w){return s=+s,u=u>>>0,w||Qe(c,s,u,4),t.write(c,s,u,g,23,4),u+4}h.prototype.writeFloatLE=function(c,s,u){return Ge(this,c,s,!0,u)},h.prototype.writeFloatBE=function(c,s,u){return Ge(this,c,s,!1,u)};function He(c,s,u,g,w){return s=+s,u=u>>>0,w||Qe(c,s,u,8),t.write(c,s,u,g,52,8),u+8}h.prototype.writeDoubleLE=function(c,s,u){return He(this,c,s,!0,u)},h.prototype.writeDoubleBE=function(c,s,u){return He(this,c,s,!1,u)},h.prototype.copy=function(c,s,u,g){if(!h.isBuffer(c))throw new TypeError("argument should be a Buffer");if(u||(u=0),!g&&g!==0&&(g=this.length),s>=c.length&&(s=c.length),s||(s=0),g>0&&g<u&&(g=u),g===u||c.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),c.length-s<g-u&&(g=c.length-s+u);let w=g-u;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,u,g):Uint8Array.prototype.set.call(c,this.subarray(u,g),s),w},h.prototype.fill=function(c,s,u,g){if(typeof c=="string"){if(typeof s=="string"?(g=s,s=0,u=this.length):typeof u=="string"&&(g=u,u=this.length),g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!h.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(c.length===1){let T=c.charCodeAt(0);(g==="utf8"&&T<128||g==="latin1")&&(c=T)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(s<0||this.length<s||this.length<u)throw new RangeError("Out of range index");if(u<=s)return this;s=s>>>0,u=u===void 0?this.length:u>>>0,c||(c=0);let w;if(typeof c=="number")for(w=s;w<u;++w)this[w]=c;else{let T=h.isBuffer(c)?c:h.from(c,g),B=T.length;if(B===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(w=0;w<u-s;++w)this[w+s]=T[w%B]}return this};var Ce={};function je(c,s,u){Ce[c]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}je("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),je("ERR_INVALID_ARG_TYPE",function(c,s){return`The "${c}" argument must be of type number. Received type ${typeof s}`},TypeError),je("ERR_OUT_OF_RANGE",function(c,s,u){let g=`The value of "${c}" is out of range.`,w=u;return Number.isInteger(u)&&Math.abs(u)>2**32?w=We(String(u)):typeof u=="bigint"&&(w=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(w=We(w)),w+="n"),g+=` It must be ${s}. Received ${w}`,g},RangeError);function We(c){let s="",u=c.length,g=c[0]==="-"?1:0;for(;u>=g+4;u-=3)s=`_${c.slice(u-3,u)}${s}`;return`${c.slice(0,u)}${s}`}function Ze(c,s,u){Te(s,"offset"),(c[s]===void 0||c[s+u]===void 0)&&Ae(s,c.length-(u+1))}function Je(c,s,u,g,w,T){if(c>u||c<s){let B=typeof s=="bigint"?"n":"",Z;throw T>3?s===0||s===BigInt(0)?Z=`>= 0${B} and < 2${B} ** ${(T+1)*8}${B}`:Z=`>= -(2${B} ** ${(T+1)*8-1}${B}) and < 2 ** ${(T+1)*8-1}${B}`:Z=`>= ${s}${B} and <= ${u}${B}`,new Ce.ERR_OUT_OF_RANGE("value",Z,c)}Ze(g,w,T)}function Te(c,s){if(typeof c!="number")throw new Ce.ERR_INVALID_ARG_TYPE(s,"number",c)}function Ae(c,s,u){throw Math.floor(c)!==c?(Te(c,u),new Ce.ERR_OUT_OF_RANGE(u||"offset","an integer",c)):s<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${s}`,c)}var et=/[^+/0-9A-Za-z-_]/g;function tt(c){if(c=c.split("=")[0],c=c.trim().replace(et,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function Ve(c,s){s=s||1/0;let u,g=c.length,w=null,T=[];for(let B=0;B<g;++B){if(u=c.charCodeAt(B),u>55295&&u<57344){if(!w){if(u>56319){(s-=3)>-1&&T.push(239,191,189);continue}else if(B+1===g){(s-=3)>-1&&T.push(239,191,189);continue}w=u;continue}if(u<56320){(s-=3)>-1&&T.push(239,191,189),w=u;continue}u=(w-55296<<10|u-56320)+65536}else w&&(s-=3)>-1&&T.push(239,191,189);if(w=null,u<128){if((s-=1)<0)break;T.push(u)}else if(u<2048){if((s-=2)<0)break;T.push(u>>6|192,u&63|128)}else if(u<65536){if((s-=3)<0)break;T.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((s-=4)<0)break;T.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return T}function rt(c){let s=[];for(let u=0;u<c.length;++u)s.push(c.charCodeAt(u)&255);return s}function nt(c,s){let u,g,w,T=[];for(let B=0;B<c.length&&!((s-=2)<0);++B)u=c.charCodeAt(B),g=u>>8,w=u%256,T.push(w),T.push(g);return T}function Ye(c){return e.toByteArray(tt(c))}function Ie(c,s,u,g){let w;for(w=0;w<g&&!(w+u>=s.length||w>=c.length);++w)s[w+u]=c[w];return w}function ye(c,s){return c instanceof s||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===s.name}function qe(c){return c!==c}var it=function(){let c="0123456789abcdef",s=new Array(256);for(let u=0;u<16;++u){let g=u*16;for(let w=0;w<16;++w)s[g+w]=c[u]+c[w]}return s}();function be(c){return typeof BigInt>"u"?ot:c}function ot(){throw new Error("BigInt not supported")}}),si=S((r,e)=>{a();var t=e.exports={},n,o;function f(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=f}catch{n=f}try{typeof clearTimeout=="function"?o=clearTimeout:o=y}catch{o=y}})();function h(U){if(n===setTimeout)return setTimeout(U,0);if((n===f||!n)&&setTimeout)return n=setTimeout,setTimeout(U,0);try{return n(U,0)}catch{try{return n.call(null,U,0)}catch{return n.call(this,U,0)}}}function m(U){if(o===clearTimeout)return clearTimeout(U);if((o===y||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(U);try{return o(U)}catch{try{return o.call(null,U)}catch{return o.call(this,U)}}}var $=[],E=!1,v,D=-1;function I(){!E||!v||(E=!1,v.length?$=v.concat($):D=-1,$.length&&A())}function A(){if(!E){var U=h(I);E=!0;for(var q=$.length;q;){for(v=$,$=[];++D<q;)v&&v[D].run();D=-1,q=$.length}v=null,E=!1,m(U)}}t.nextTick=function(U){var q=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)q[j-1]=arguments[j];$.push(new k(U,q)),$.length===1&&!E&&h(A)};function k(U,q){this.fun=U,this.array=q}k.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function O(){}t.on=O,t.addListener=O,t.once=O,t.off=O,t.removeListener=O,t.removeAllListeners=O,t.emit=O,t.prependListener=O,t.prependOnceListener=O,t.listeners=function(U){return[]},t.binding=function(U){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(U){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),p,d,a=F(()=>{ti().Buffer,p=si(),d=globalThis,globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)});function ci(r,e,t){e=e||[],t=t||0;for(var n=t;r>=mf;)e[t++]=r&255|ai,r/=128;for(;r&pf;)e[t++]=r&255|ai,r>>>=7;return e[t]=r|0,ci.bytes=t-n+1,e}function un(r,n){var t=0,n=n||0,o=0,f=n,y,h=r.length;do{if(f>=h)throw un.bytes=0,new RangeError("Could not decode varint");y=r[f++],t+=o<28?(y&ui)<<o:(y&ui)*Math.pow(2,o),o+=7}while(y>=wf);return un.bytes=f-n,t}var df,ai,hf,pf,mf,yf,wf,ui,gf,Df,bf,Ef,xf,Cf,Bf,Af,Tf,If,Sf,Uf,Lt,fi=F(()=>{a(),df=ci,ai=128,hf=127,pf=~hf,mf=Math.pow(2,31),yf=un,wf=128,ui=127,gf=Math.pow(2,7),Df=Math.pow(2,14),bf=Math.pow(2,21),Ef=Math.pow(2,28),xf=Math.pow(2,35),Cf=Math.pow(2,42),Bf=Math.pow(2,49),Af=Math.pow(2,56),Tf=Math.pow(2,63),If=function(r){return r<gf?1:r<Df?2:r<bf?3:r<Ef?4:r<xf?5:r<Cf?6:r<Bf?7:r<Af?8:r<Tf?9:10},Sf={encode:df,decode:yf,encodingLength:If},Uf=Sf,Lt=Uf}),Pt,ut,ct,cr=F(()=>{a(),fi(),Pt=r=>[Lt.decode(r),Lt.decode.bytes],ut=(r,e,t=0)=>(Lt.encode(r,e,t),e),ct=r=>Lt.encodingLength(r)}),li,Se,di,hi,Ne=F(()=>{a(),li=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Se=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},di=r=>new TextEncoder().encode(r),hi=r=>new TextDecoder().decode(r)}),Ue={};M(Ue,{Digest:()=>Xe,create:()=>$e,decode:()=>ft,equals:()=>fn});var $e,ft,fn,Xe,Le=F(()=>{a(),Ne(),cr(),$e=(r,e)=>{let t=e.byteLength,n=ct(r),o=n+ct(t),f=new Uint8Array(o+t);return ut(r,f,0),ut(t,f,n),f.set(e,o),new Xe(r,t,e,f)},ft=r=>{let e=Se(r),[t,n]=Pt(e),[o,f]=Pt(e.subarray(n)),y=e.subarray(n+f);if(y.byteLength!==o)throw new Error("Incorrect length");return new Xe(t,o,y,e)},fn=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&li(r.bytes,e.bytes),Xe=class{constructor(r,e,t,n){this.code=r,this.size=e,this.digest=t,this.bytes=n}}});function Ff(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var f=r.charAt(o),y=f.charCodeAt(0);if(t[y]!==255)throw new TypeError(f+" is ambiguous");t[y]=o}var h=r.length,m=r.charAt(0),$=Math.log(h)/Math.log(256),E=Math.log(256)/Math.log(h);function v(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var k=0,O=0,U=0,q=A.length;U!==q&&A[U]===0;)U++,k++;for(var j=(q-U)*E+1>>>0,P=new Uint8Array(j);U!==q;){for(var L=A[U],X=0,K=j-1;(L!==0||X<O)&&K!==-1;K--,X++)L+=256*P[K]>>>0,P[K]=L%h>>>0,L=L/h>>>0;if(L!==0)throw new Error("Non-zero carry");O=X,U++}for(var N=j-O;N!==j&&P[N]===0;)N++;for(var W=m.repeat(k);N<j;++N)W+=r.charAt(P[N]);return W}function D(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var k=0;if(A[k]!==" "){for(var O=0,U=0;A[k]===m;)O++,k++;for(var q=(A.length-k)*$+1>>>0,j=new Uint8Array(q);A[k];){var P=t[A.charCodeAt(k)];if(P===255)return;for(var L=0,X=q-1;(P!==0||L<U)&&X!==-1;X--,L++)P+=h*j[X]>>>0,j[X]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");U=L,k++}if(A[k]!==" "){for(var K=q-U;K!==q&&j[K]===0;)K++;for(var N=new Uint8Array(O+(q-K)),W=O;K!==q;)N[W++]=j[K++];return N}}}function I(A){var k=D(A);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:D,decode:I}}var vf,kf,pi,mi=F(()=>{a(),vf=Ff,kf=vf,pi=kf}),ln,dn,hn,yi,pn,lt,Pe,_f,Nf,_,pe=F(()=>{a(),mi(),Ne(),ln=class{constructor(r,e,t){this.name=r,this.prefix=e,this.baseEncode=t}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},dn=class{constructor(r,e,t){if(this.name=r,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=t}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return yi(this,r)}},hn=class{constructor(r){this.decoders=r}or(r){return yi(this,r)}decode(r){let e=r[0],t=this.decoders[e];if(t)return t.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},yi=(r,e)=>new hn({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),pn=class{constructor(r,e,t,n){this.name=r,this.prefix=e,this.baseEncode=t,this.baseDecode=n,this.encoder=new ln(r,e,t),this.decoder=new dn(r,e,n)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}},lt=({name:r,prefix:e,encode:t,decode:n})=>new pn(r,e,t,n),Pe=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:o}=pi(t,e);return lt({prefix:r,name:e,encode:n,decode:f=>Se(o(f))})},_f=(r,e,t,n)=>{let o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let f=r.length;for(;r[f-1]==="=";)--f;let y=new Uint8Array(f*t/8|0),h=0,m=0,$=0;for(let E=0;E<f;++E){let v=o[r[E]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<t|v,h+=t,h>=8&&(h-=8,y[$++]=255&m>>h)}if(h>=t||255&m<<8-h)throw new SyntaxError("Unexpected end of data");return y},Nf=(r,e,t)=>{let n=e[e.length-1]==="=",o=(1<<t)-1,f="",y=0,h=0;for(let m=0;m<r.length;++m)for(h=h<<8|r[m],y+=8;y>t;)y-=t,f+=e[o&h>>y];if(y&&(f+=e[o&h<<t-y]),n)for(;f.length*t&7;)f+="=";return f},_=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>lt({prefix:e,name:r,encode(o){return Nf(o,n,t)},decode(o){return _f(o,n,t,r)}})}),dt={};M(dt,{base58btc:()=>Y,base58flickr:()=>$f});var Y,$f,Re=F(()=>{a(),pe(),Y=Pe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$f=Pe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),Rt={};M(Rt,{base32:()=>Me,base32hex:()=>Mf,base32hexpad:()=>zf,base32hexpadupper:()=>qf,base32hexupper:()=>Of,base32pad:()=>Pf,base32padupper:()=>Rf,base32upper:()=>Lf,base32z:()=>Hf});var Me,Lf,Pf,Rf,Mf,Of,zf,qf,Hf,ht=F(()=>{a(),pe(),Me=_({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lf=_({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pf=_({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rf=_({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mf=_({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Of=_({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zf=_({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qf=_({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hf=_({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),dr={};M(dr,{CID:()=>x});var x,jf,Vf,Gf,Mt,Wf,wi,gi,fr,lr,Jf,Xf,Yf,Q=F(()=>{a(),cr(),Le(),Re(),ht(),Ne(),x=class{constructor(r,e,t,n){this.code=e,this.version=r,this.multihash=t,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:lr,byteLength:lr,code:fr,version:fr,multihash:fr,bytes:fr,_baseCache:lr,asCID:lr})}toV0(){switch(this.version){case 0:return this;default:{let{code:r,multihash:e}=this;if(r!==Mt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==Wf)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return x.createV0(e)}}}toV1(){switch(this.version){case 0:{let{code:r,digest:e}=this.multihash,t=$e(r,e);return x.createV1(this.code,t)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(r){return r&&this.code===r.code&&this.version===r.version&&fn(this.multihash,r.multihash)}toString(r){let{bytes:e,version:t,_baseCache:n}=this;switch(t){case 0:return Vf(e,n,r||Y.encoder);default:return Gf(e,n,r||Me.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(r){return Xf(/^0\.0/,Yf),!!(r&&(r[gi]||r.asCID===r))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(r){if(r instanceof x)return r;if(r!=null&&r.asCID===r){let{version:e,code:t,multihash:n,bytes:o}=r;return new x(e,t,n,o||wi(e,t,n.bytes))}else if(r!=null&&r[gi]===!0){let{version:e,multihash:t,code:n}=r,o=ft(t);return x.create(e,n,o)}else return null}static create(r,e,t){if(typeof e!="number")throw new Error("String codecs are no longer supported");switch(r){case 0:{if(e!==Mt)throw new Error(`Version 0 CID must use dag-pb (code: ${Mt}) block encoding`);return new x(r,e,t,t.bytes)}case 1:{let n=wi(r,e,t.bytes);return new x(r,e,t,n)}default:throw new Error("Invalid version")}}static createV0(r){return x.create(0,Mt,r)}static createV1(r,e){return x.create(1,r,e)}static decode(r){let[e,t]=x.decodeFirst(r);if(t.length)throw new Error("Incorrect length");return e}static decodeFirst(r){let e=x.inspectBytes(r),t=e.size-e.multihashSize,n=Se(r.subarray(t,t+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");let o=n.subarray(e.multihashSize-e.digestSize),f=new Xe(e.multihashCode,e.digestSize,o,n);return[e.version===0?x.createV0(f):x.createV1(e.codec,f),r.subarray(e.size)]}static inspectBytes(r){let e=0,t=()=>{let[E,v]=Pt(r.subarray(e));return e+=v,E},n=t(),o=Mt;if(n===18?(n=0,e=0):n===1&&(o=t()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let f=e,y=t(),h=t(),m=e+h,$=m-f;return{version:n,codec:o,multihashCode:y,digestSize:h,multihashSize:$,size:m}}static parse(r,e){let[t,n]=jf(r,e),o=x.decode(n);return o._baseCache.set(t,r),o}},jf=(r,e)=>{switch(r[0]){case"Q":{let t=e||Y;return[Y.prefix,t.decode(`${Y.prefix}${r}`)]}case Y.prefix:{let t=e||Y;return[Y.prefix,t.decode(r)]}case Me.prefix:{let t=e||Me;return[Me.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},Vf=(r,e,t)=>{let{prefix:n}=t;if(n!==Y.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let o=e.get(n);if(o==null){let f=t.encode(r).slice(1);return e.set(n,f),f}else return o},Gf=(r,e,t)=>{let{prefix:n}=t,o=e.get(n);if(o==null){let f=t.encode(r);return e.set(n,f),f}else return o},Mt=112,Wf=18,wi=(r,e,t)=>{let n=ct(r),o=n+ct(e),f=new Uint8Array(o+t.byteLength);return ut(r,f,0),ut(e,f,n),f.set(t,o),f},gi=Symbol.for("@ipld/js-cid/CID"),fr={writable:!1,configurable:!1,enumerable:!0},lr={writable:!1,enumerable:!1,configurable:!1},Jf="0.0.0-dev",Xf=(r,e)=>{if(r.test(Jf))console.warn(e);else throw new Error(e)},Yf=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`}),yn,mn,wn=F(()=>{a(),Le(),yn=({name:r,code:e,encode:t})=>new mn(r,e,t),mn=class{constructor(r,e,t){this.name=r,this.code=e,this.encode=t}digest(r){if(r instanceof Uint8Array){let e=this.encode(r);return e instanceof Uint8Array?$e(this.code,e):e.then(t=>$e(this.code,t))}else throw Error("Unknown type, must be binary type")}}}),gn=F(()=>{a(),Q(),cr(),Ne(),wn(),Le()}),Ci=S((r,e)=>{a(),e.exports=y;var t=128,n=127,o=~n,f=Math.pow(2,31);function y(h,m,$){if(Number.MAX_SAFE_INTEGER&&h>Number.MAX_SAFE_INTEGER)throw y.bytes=0,new RangeError("Could not encode varint");m=m||[],$=$||0;for(var E=$;h>=f;)m[$++]=h&255|t,h/=128;for(;h&o;)m[$++]=h&255|t,h>>>=7;return m[$]=h|0,y.bytes=$-E+1,m}}),Ti=S((r,e)=>{a(),e.exports=o;var t=128,n=127;function o(f,m){var h=0,m=m||0,$=0,E=m,v,D=f.length;do{if(E>=D||$>49)throw o.bytes=0,new RangeError("Could not decode varint");v=f[E++],h+=$<28?(v&n)<<$:(v&n)*Math.pow(2,$),$+=7}while(v>=t);return o.bytes=E-m,h}}),Si=S((r,e)=>{a();var t=Math.pow(2,7),n=Math.pow(2,14),o=Math.pow(2,21),f=Math.pow(2,28),y=Math.pow(2,35),h=Math.pow(2,42),m=Math.pow(2,49),$=Math.pow(2,56),E=Math.pow(2,63);e.exports=function(v){return v<t?1:v<n?2:v<o?3:v<f?4:v<y?5:v<h?6:v<m?7:v<$?8:v<E?9:10}}),pt=S((r,e)=>{a(),e.exports={encode:Ci(),decode:Ti(),encodingLength:Si()}}),Ws=S((r,e)=>{a(),e.exports=function(){return Date.now()}}),Xs=S((r,e)=>{a();var t=Ws(),n=class{constructor(f,y,h){let m=this;this._started=t(),this._rescheduled=0,this._scheduled=y,this._args=h,this._triggered=!1,this._timerWrapper=()=>{m._rescheduled>0?(m._scheduled=m._rescheduled-(t()-m._started),m._schedule(m._scheduled)):(m._triggered=!0,f.apply(null,m._args))},this._timer=setTimeout(this._timerWrapper,y)}reschedule(f){f||(f=this._scheduled);let y=t();y+f-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(f)):this._triggered?this._schedule(f):(this._started=y,this._rescheduled=f)}_schedule(f){this._triggered=!1,this._started=t(),this._rescheduled=0,this._scheduled=f,this._timer=setTimeout(this._timerWrapper,f)}clear(){clearTimeout(this._timer)}};function o(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let f;if(arguments.length>0){f=new Array(arguments.length-2);for(var y=0;y<f.length;y++)f[y]=arguments[y+2]}return new n(arguments[0],arguments[1],f)}e.exports=o}),Zs=S((r,e)=>{a();var{AbortController:t}=globalThis,n=Xs(),o=class extends t{constructor(f){super(),this._ms=f,this._timer=n(()=>this.abort(),f),Object.setPrototypeOf(this,o.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=n(()=>this.abort(),this._ms)}};e.exports={TimeoutController:o}}),ea=S((r,e)=>{a();function t(n){let o=new globalThis.AbortController;function f(){o.abort();for(let y of n)!y||!y.removeEventListener||y.removeEventListener("abort",f)}for(let y of n)if(!(!y||!y.addEventListener)){if(y.aborted){f();break}y.addEventListener("abort",f)}return o.signal}e.exports=t,e.exports.anySignal=t}),sa=S((r,e)=>{a();var t=1e3,n=t*60,o=n*60,f=o*24,y=f*7,h=f*365.25;e.exports=function(D,I){I=I||{};var A=typeof D;if(A==="string"&&D.length>0)return m(D);if(A==="number"&&isFinite(D))return I.long?E(D):$(D);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(D))};function m(D){if(D=String(D),!(D.length>100)){var I=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(D);if(I){var A=parseFloat(I[1]),k=(I[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return A*h;case"weeks":case"week":case"w":return A*y;case"days":case"day":case"d":return A*f;case"hours":case"hour":case"hrs":case"hr":case"h":return A*o;case"minutes":case"minute":case"mins":case"min":case"m":return A*n;case"seconds":case"second":case"secs":case"sec":case"s":return A*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}}}function $(D){var I=Math.abs(D);return I>=f?Math.round(D/f)+"d":I>=o?Math.round(D/o)+"h":I>=n?Math.round(D/n)+"m":I>=t?Math.round(D/t)+"s":D+"ms"}function E(D){var I=Math.abs(D);return I>=f?v(D,I,f,"day"):I>=o?v(D,I,o,"hour"):I>=n?v(D,I,n,"minute"):I>=t?v(D,I,t,"second"):D+" ms"}function v(D,I,A,k){var O=I>=A*1.5;return Math.round(D/A)+" "+k+(O?"s":"")}}),ua=S((r,e)=>{a();function t(n){f.debug=f,f.default=f,f.coerce=v,f.disable=m,f.enable=h,f.enabled=$,f.humanize=sa(),f.destroy=D,Object.keys(n).forEach(I=>{f[I]=n[I]}),f.names=[],f.skips=[],f.formatters={};function o(I){let A=0;for(let k=0;k<I.length;k++)A=(A<<5)-A+I.charCodeAt(k),A|=0;return f.colors[Math.abs(A)%f.colors.length]}f.selectColor=o;function f(I){let A,k=null,O,U;function q(...j){if(!q.enabled)return;let P=q,L=Number(new Date),X=L-(A||L);P.diff=X,P.prev=A,P.curr=L,A=L,j[0]=f.coerce(j[0]),typeof j[0]!="string"&&j.unshift("%O");let K=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(N,W)=>{if(N==="%%")return"%";K++;let ue=f.formatters[W];if(typeof ue=="function"){let te=j[K];N=ue.call(P,te),j.splice(K,1),K--}return N}),f.formatArgs.call(P,j),(P.log||f.log).apply(P,j)}return q.namespace=I,q.useColors=f.useColors(),q.color=f.selectColor(I),q.extend=y,q.destroy=f.destroy,Object.defineProperty(q,"enabled",{enumerable:!0,configurable:!1,get:()=>k!==null?k:(O!==f.namespaces&&(O=f.namespaces,U=f.enabled(I)),U),set:j=>{k=j}}),typeof f.init=="function"&&f.init(q),q}function y(I,A){let k=f(this.namespace+(typeof A>"u"?":":A)+I);return k.log=this.log,k}function h(I){f.save(I),f.namespaces=I,f.names=[],f.skips=[];let A,k=(typeof I=="string"?I:"").split(/[\s,]+/),O=k.length;for(A=0;A<O;A++)!k[A]||(I=k[A].replace(/\*/g,".*?"),I[0]==="-"?f.skips.push(new RegExp("^"+I.slice(1)+"$")):f.names.push(new RegExp("^"+I+"$")))}function m(){let I=[...f.names.map(E),...f.skips.map(E).map(A=>"-"+A)].join(",");return f.enable(""),I}function $(I){if(I[I.length-1]==="*")return!0;let A,k;for(A=0,k=f.skips.length;A<k;A++)if(f.skips[A].test(I))return!1;for(A=0,k=f.names.length;A<k;A++)if(f.names[A].test(I))return!0;return!1}function E(I){return I.toString().substring(2,I.toString().length-2).replace(/\.\*\?$/,"*")}function v(I){return I instanceof Error?I.stack||I.message:I}function D(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return f.enable(f.load()),f}e.exports=t}),ca=S((r,e)=>{a(),r.formatArgs=n,r.save=o,r.load=f,r.useColors=t,r.storage=y(),r.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let $="color: "+this.color;m.splice(1,0,$,"color: inherit");let E=0,v=0;m[0].replace(/%[a-zA-Z%]/g,D=>{D!=="%%"&&(E++,D==="%c"&&(v=E))}),m.splice(v,0,$)}r.log=console.debug||console.log||(()=>{});function o(m){try{m?r.storage.setItem("debug",m):r.storage.removeItem("debug")}catch{}}function f(){let m;try{m=r.storage.getItem("debug")}catch{}return!m&&typeof p<"u"&&"env"in p&&(m=p.env.DEBUG),m}function y(){try{return localStorage}catch{}}e.exports=ua()(r);var{formatters:h}=e.exports;h.j=function(m){try{return JSON.stringify(m)}catch($){return"[UnexpectedJSONParseError]: "+$.message}}}),On={};M(On,{base64:()=>Mn,base64pad:()=>md,base64url:()=>yd,base64urlpad:()=>wd});var Mn,md,yd,wd,zn=F(()=>{a(),pe(),Mn=_({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),md=_({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yd=_({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wd=_({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}),qn=F(()=>{a(),Ne()}),Hn=F(()=>{a(),new TextEncoder,new TextDecoder}),wa=S((r,e)=>{a();var t=async n=>{for await(let o of n)return o};e.exports=t}),Da=S((r,e)=>{a();var t=async n=>{let o;for await(let f of n)o=f;return o};e.exports=t}),xa=S((r,e)=>{a();var t="[a-fA-F\\d:]",n=v=>v&&v.includeBoundaries?`(?:(?<=\\s|^)(?=${t})|(?<=${t})(?=\\s|$))`:"",o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",f="[a-fA-F\\d]{1,4}",y=`
(?:
(?:${f}:){7}(?:${f}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${f}:){6}(?:${o}|:${f}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${f}:){5}(?::${o}|(?::${f}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${f}:){4}(?:(?::${f}){0,1}:${o}|(?::${f}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${f}:){3}(?:(?::${f}){0,2}:${o}|(?::${f}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${f}:){2}(?:(?::${f}){0,3}:${o}|(?::${f}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${f}:){1}(?:(?::${f}){0,4}:${o}|(?::${f}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${f}){0,5}:${o}|(?::${f}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),h=new RegExp(`(?:^${o}$)|(?:^${y}$)`),m=new RegExp(`^${o}$`),$=new RegExp(`^${y}$`),E=v=>v&&v.exact?h:new RegExp(`(?:${n(v)}${o}${n(v)})|(?:${n(v)}${y}${n(v)})`,"g");E.v4=v=>v&&v.exact?m:new RegExp(`${n(v)}${o}${n(v)}`,"g"),E.v6=v=>v&&v.exact?$:new RegExp(`${n(v)}${y}${n(v)}`,"g"),e.exports=E}),Ba=S((r,e)=>{a();var t=xa(),n=o=>t({exact:!0}).test(o);n.v4=o=>t.v4({exact:!0}).test(o),n.v6=o=>t.v6({exact:!0}).test(o),n.version=o=>n(o)?n.v4(o)?4:6:void 0,e.exports=n}),Wn={};M(Wn,{identity:()=>Ad});var Ad,Aa=F(()=>{a(),pe(),Ne(),Ad=lt({prefix:"\0",name:"identity",encode:r=>hi(r),decode:r=>di(r)})}),Jn={};M(Jn,{base2:()=>Td});var Td,Ta=F(()=>{a(),pe(),Td=_({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),Xn={};M(Xn,{base8:()=>Id});var Id,Ia=F(()=>{a(),pe(),Id=_({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),Yn={};M(Yn,{base10:()=>Sd});var Sd,Sa=F(()=>{a(),pe(),Sd=Pe({prefix:"9",name:"base10",alphabet:"0123456789"})}),Qn={};M(Qn,{base16:()=>Ud,base16upper:()=>Fd});var Ud,Fd,Ua=F(()=>{a(),pe(),Ud=_({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fd=_({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),Zn={};M(Zn,{base36:()=>vd,base36upper:()=>kd});var vd,kd,Fa=F(()=>{a(),pe(),vd=Pe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),kd=Pe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),Kn={};M(Kn,{base256emoji:()=>Pd});function $d(r){return r.reduce((e,t)=>(e+=_d[t],e),"")}function Ld(r){let e=[];for(let t of r){let n=Nd[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var va,_d,Nd,Pd,ka=F(()=>{a(),pe(),va=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_d=va.reduce((r,e,t)=>(r[t]=e,r),[]),Nd=va.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]),Pd=lt({prefix:"\u{1F680}",name:"base256emoji",encode:$d,decode:Ld})}),eo={};M(eo,{sha256:()=>Rd,sha512:()=>Md});var _a,Rd,Md,Na=F(()=>{a(),wn(),_a=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Rd=yn({name:"sha2-256",code:18,encode:_a("SHA-256")}),Md=yn({name:"sha2-512",code:19,encode:_a("SHA-512")})}),to={};M(to,{identity:()=>qd});var $a,Od,La,zd,qd,Pa=F(()=>{a(),Ne(),Le(),$a=0,Od="identity",La=Se,zd=r=>$e($a,La(r)),qd={code:$a,name:Od,encode:La,digest:zd}}),ro,Ra=F(()=>{a(),Aa(),Ta(),Ia(),Sa(),Ua(),ht(),Fa(),Re(),zn(),ka(),Na(),Pa(),qn(),Hn(),gn(),ro={...Wn,...Jn,...Xn,...Yn,...Qn,...Rt,...Zn,...dt,...On,...Kn},{...eo,...to}});function Nr(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}var no=F(()=>{a()});function Oa(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var Ma,oo,Hd,$r,io=F(()=>{a(),Ra(),no(),Ma=Oa("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),oo=Oa("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Nr(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Hd={utf8:Ma,"utf-8":Ma,hex:ro.base16,latin1:oo,ascii:oo,binary:oo,...ro},$r=Hd}),Tt={};M(Tt,{toString:()=>so});function so(r,e="utf8"){let t=$r[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Ke=F(()=>{a(),io()}),Va=S((r,e)=>{a();var t=Ba(),{toString:n}=(Ke(),R(Tt)),o=t,f=t.v4,y=t.v6,h=function($,E,v){v=~~v;let D;if(f($))D=E||new Uint8Array(v+4),$.split(/\./g).map(function(I){D[v++]=parseInt(I,10)&255});else if(y($)){let I=$.split(":",8),A;for(A=0;A<I.length;A++){let k=f(I[A]),O;k&&(O=h(I[A]),I[A]=n(O.slice(0,2),"base16")),O&&++A<8&&I.splice(A,0,n(O.slice(2,4),"base16"))}if(I[0]==="")for(;I.length<8;)I.unshift("0");else if(I[I.length-1]==="")for(;I.length<8;)I.push("0");else if(I.length<8){for(A=0;A<I.length&&I[A]!=="";A++);let k=[A,"1"];for(A=9-I.length;A>0;A--)k.push("0");I.splice.apply(I,k)}for(D=E||new Uint8Array(v+16),A=0;A<I.length;A++){let k=parseInt(I[A],16);D[v++]=k>>8&255,D[v++]=k&255}}if(!D)throw Error("Invalid ip address: "+$);return D},m=function($,E,v){E=~~E,v=v||$.length-E;let D=[],I,A=new DataView($.buffer);if(v===4){for(let k=0;k<v;k++)D.push($[E+k]);I=D.join(".")}else if(v===16){for(let k=0;k<v;k+=2)D.push(A.getUint16(E+k).toString(16));I=D.join(":"),I=I.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),I=I.replace(/:{3,4}/,"::")}return I};e.exports={isIP:o,isV4:f,isV6:y,toBytes:h,toString:m}}),Lr=S((r,e)=>{a();function t(f){if(typeof f=="number"){if(t.codes[f])return t.codes[f];throw new Error("no protocol with code: "+f)}else if(typeof f=="string"){if(t.names[f])return t.names[f];throw new Error("no protocol with name: "+f)}throw new Error("invalid protocol id type: "+f)}var n=-1;t.lengthPrefixedVarSize=n,t.V=n,t.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns","resolvable"],[54,n,"dns4","resolvable"],[55,n,"dns6","resolvable"],[56,n,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,"path"],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]],t.names={},t.codes={},t.table.map(f=>{let y=o.apply(null,f);return t.codes[y.code]=y,t.names[y.name]=y,null}),t.object=o;function o(f,y,h,m,$){return{code:f,size:y,name:h,resolvable:Boolean(m),path:Boolean($)}}e.exports=t}),Ja={};M(Ja,{fromString:()=>co});function co(r,e="utf8"){let t=$r[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var fo=F(()=>{a(),io()}),lo={};M(lo,{concat:()=>Gd});function Gd(r,e){e||(e=r.reduce((o,f)=>o+f.length,0));let t=Nr(e),n=0;for(let o of r)t.set(o,n),n+=o.length;return t}var ho=F(()=>{a(),no()}),ru=S((r,e)=>{a();var t=Va(),n=Lr(),{CID:o}=(Q(),R(dr)),{base32:f}=(ht(),R(Rt)),{base58btc:y}=(Re(),R(dt)),h=(Le(),R(Ue)),m=pt(),{toString:$}=(Ke(),R(Tt)),{fromString:E}=(fo(),R(Ja)),{concat:v}=(ho(),R(lo));e.exports=D;function D(N,W){return W instanceof Uint8Array?D.toString(N,W):D.toBytes(N,W)}D.toString=function(N,W){switch(n(N).code){case 4:case 41:return A(W);case 6:case 273:case 33:case 132:return O(W).toString();case 53:case 54:case 55:case 56:case 400:case 777:return q(W);case 421:return P(W);case 444:return K(W);case 445:return K(W);default:return $(W,"base16")}},D.toBytes=function(N,W){switch(n(N).code){case 4:return I(W);case 41:return I(W);case 6:case 273:case 33:case 132:return k(parseInt(W,10));case 53:case 54:case 55:case 56:case 400:case 777:return U(W);case 421:return j(W);case 444:return L(W);case 445:return X(W);default:return E(W,"base16")}};function I(N){if(!t.isIP(N))throw new Error("invalid ip address");return t.toBytes(N)}function A(N){let W=t.toString(N);if(!W||!t.isIP(W))throw new Error("invalid ip address");return W}function k(N){let W=new ArrayBuffer(2);return new DataView(W).setUint16(0,N),new Uint8Array(W)}function O(N){return new DataView(N.buffer).getUint16(N.byteOffset)}function U(N){let W=E(N),ue=Uint8Array.from(m.encode(W.length));return v([ue,W],ue.length+W.length)}function q(N){let W=m.decode(N);if(N=N.slice(m.decode.bytes),N.length!==W)throw new Error("inconsistent lengths");return $(N)}function j(N){let W;N[0]==="Q"||N[0]==="1"?W=h.decode(y.decode(`z${N}`)).bytes:W=o.parse(N).multihash.bytes;let ue=Uint8Array.from(m.encode(W.length));return v([ue,W],ue.length+W.length)}function P(N){let W=m.decode(N),ue=N.slice(m.decode.bytes);if(ue.length!==W)throw new Error("inconsistent lengths");return $(ue,"base58btc")}function L(N){let W=N.split(":");if(W.length!==2)throw new Error("failed to parse onion addr: "+W+" does not contain a port number");if(W[0].length!==16)throw new Error("failed to parse onion addr: "+W[0]+" not a Tor onion address.");let ue=f.decode("b"+W[0]),te=parseInt(W[1],10);if(te<1||te>65536)throw new Error("Port number is not in range(1, 65536)");let le=k(te);return v([ue,le],ue.length+le.length)}function X(N){let W=N.split(":");if(W.length!==2)throw new Error("failed to parse onion addr: "+W+" does not contain a port number");if(W[0].length!==56)throw new Error("failed to parse onion addr: "+W[0]+" not a Tor onion3 address.");let ue=f.decode("b"+W[0]),te=parseInt(W[1],10);if(te<1||te>65536)throw new Error("Port number is not in range(1, 65536)");let le=k(te);return v([ue,le],ue.length+le.length)}function K(N){let W=N.slice(0,N.length-2),ue=N.slice(N.length-2),te=$(W,"base32"),le=O(ue);return te+":"+le}}),pu=S((r,e)=>{a();var t=ru(),n=Lr(),o=pt(),{concat:f}=(ho(),R(lo)),{toString:y}=(Ke(),R(Tt));e.exports={stringToStringTuples:h,stringTuplesToString:m,tuplesToStringTuples:E,stringTuplesToTuples:$,bytesToTuples:I,tuplesToBytes:v,bytesToString:A,stringToBytes:k,fromString:O,fromBytes:U,validateBytes:q,isValidBytes:j,cleanPath:P,ParseError:L,protoFromTuple:X,sizeForAddr:D};function h(K){let N=[],W=K.split("/").slice(1);if(W.length===1&&W[0]==="")return[];for(let ue=0;ue<W.length;ue++){let te=W[ue],le=n(te);if(le.size===0){N.push([te]);continue}if(ue++,ue>=W.length)throw L("invalid address: "+K);if(le.path){N.push([te,P(W.slice(ue).join("/"))]);break}N.push([te,W[ue]])}return N}function m(K){let N=[];return K.map(W=>{let ue=X(W);return N.push(ue.name),W.length>1&&N.push(W[1]),null}),P(N.join("/"))}function $(K){return K.map(N=>{Array.isArray(N)||(N=[N]);let W=X(N);return N.length>1?[W.code,t.toBytes(W.code,N[1])]:[W.code]})}function E(K){return K.map(N=>{let W=X(N);return N[1]?[W.code,t.toString(W.code,N[1])]:[W.code]})}function v(K){return U(f(K.map(N=>{let W=X(N),ue=Uint8Array.from(o.encode(W.code));return N.length>1&&(ue=f([ue,N[1]])),ue})))}function D(K,N){return K.size>0?K.size/8:K.size===0?0:o.decode(N)+o.decode.bytes}function I(K){let N=[],W=0;for(;W<K.length;){let ue=o.decode(K,W),te=o.decode.bytes,le=n(ue),ie=D(le,K.slice(W+te));if(ie===0){N.push([ue]),W+=te;continue}let he=K.slice(W+te,W+te+ie);if(W+=ie+te,W>K.length)throw L("Invalid address Uint8Array: "+y(K,"base16"));N.push([ue,he])}return N}function A(K){let N=I(K),W=E(N);return m(W)}function k(K){K=P(K);let N=h(K),W=$(N);return v(W)}function O(K){return k(K)}function U(K){let N=q(K);if(N)throw N;return Uint8Array.from(K)}function q(K){try{I(K)}catch(N){return N}}function j(K){return q(K)===void 0}function P(K){return"/"+K.trim().split("/").filter(N=>N).join("/")}function L(K){return new Error("Error parsing address: "+K)}function X(K){return n(K[0])}}),Yt=S((r,e)=>{a();function t(o,f){for(let y in f)Object.defineProperty(o,y,{value:f[y],enumerable:!0,configurable:!0});return o}function n(o,f,y){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");y||(y={}),typeof f=="object"&&(y=f,f=""),f&&(y.code=f);try{return t(o,y)}catch{y.message=o.message,y.stack=o.stack;let h=function(){};return h.prototype=Object.create(Object.getPrototypeOf(o)),t(new h,y)}}e.exports=n}),wu={};M(wu,{equals:()=>uh});function uh(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var gu=F(()=>{a()}),bo=S((r,e)=>{a();var t=pu(),n=Lr(),o=pt(),{CID:f}=(Q(),R(dr)),{base58btc:y}=(Re(),R(dt)),h=Yt(),m=Symbol.for("nodejs.util.inspect.custom"),{toString:$}=(Ke(),R(Tt)),{equals:E}=(gu(),R(wu)),v=new Map,D=Symbol.for("@multiformats/js-multiaddr/multiaddr"),I=class{constructor(k){if(k==null&&(k=""),Object.defineProperty(this,D,{value:!0}),k instanceof Uint8Array)this.bytes=t.fromBytes(k);else if(typeof k=="string"){if(k.length>0&&k.charAt(0)!=="/")throw new Error(`multiaddr "${k}" must start with a "/"`);this.bytes=t.fromString(k)}else if(I.isMultiaddr(k))this.bytes=t.fromBytes(k.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return t.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let k={},O=this.toString().split("/");return k.family=O[1]==="ip4"?4:6,k.host=O[2],k.transport=O[3],k.port=parseInt(O[4]),k}protos(){return this.protoCodes().map(k=>Object.assign({},n(k)))}protoCodes(){let k=[],O=this.bytes,U=0;for(;U<O.length;){let q=o.decode(O,U),j=o.decode.bytes,P=n(q);U+=t.sizeForAddr(P,O.slice(U+j))+j,k.push(q)}return k}protoNames(){return this.protos().map(k=>k.name)}tuples(){return t.bytesToTuples(this.bytes)}stringTuples(){let k=t.bytesToTuples(this.bytes);return t.tuplesToStringTuples(k)}encapsulate(k){return k=new I(k),new I(this.toString()+k.toString())}decapsulate(k){let O=k.toString(),U=this.toString(),q=U.lastIndexOf(O);if(q<0)throw new Error("Address "+this+" does not contain subaddress: "+k);return new I(U.slice(0,q))}decapsulateCode(k){let O=this.tuples();for(let U=O.length-1;U>=0;U--)if(O[U][0]===k)return new I(t.tuplesToBytes(O.slice(0,U)));return this}getPeerId(){try{let k=this.stringTuples().filter(O=>O[0]===n.names.ipfs.code).pop();if(k&&k[1]){let O=k[1];return O[0]==="Q"||O[0]==="1"?$(y.decode(`z${O}`),"base58btc"):$(f.parse(O).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let k=null;try{k=this.stringTuples().filter(O=>!!n(O[0]).path)[0][1],k||(k=null)}catch{k=null}return k}equals(k){return E(this.bytes,k.bytes)}async resolve(){let k=this.protos().find(U=>U.resolvable);if(!k)return[this];let O=v.get(k.name);if(!O)throw h(new Error(`no available resolver for ${k.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await O(this)).map(U=>new I(U))}nodeAddress(){let k=this.protoCodes(),O=this.protoNames(),U=this.toString().split("/").slice(1);if(U.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(k[0]!==4&&k[0]!==41&&k[0]!==54&&k[0]!==55)throw new Error(`no protocol with name: "'${O[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(U[2]!=="tcp"&&U[2]!=="udp")throw new Error(`no protocol with name: "'${O[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:k[0]===41||k[0]===55?6:4,address:U[1],port:parseInt(U[3])}}isThinWaistAddress(k){let O=(k||this).protos();return!(O.length!==2||O[0].code!==4&&O[0].code!==41||O[1].code!==6&&O[1].code!==273)}static fromNodeAddress(k,O){if(!k)throw new Error("requires node address object");if(!O)throw new Error("requires transport protocol");let U;switch(k.family){case 4:U="ip4";break;case 6:U="ip6";break;default:throw Error(`Invalid addr family. Got '${k.family}' instead of 4 or 6`)}return new I("/"+[U,k.address,O,k.port].join("/"))}static isName(k){return I.isMultiaddr(k)?k.protos().some(O=>O.resolvable):!1}static isMultiaddr(k){return k instanceof I||Boolean(k&&k[D])}[m](){return"<Multiaddr "+$(this.bytes,"base16")+" - "+t.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+$(this.bytes,"base16")+" - "+t.bytesToString(this.bytes)+">"}};I.protocols=n,I.resolvers=v;function A(k){return new I(k)}e.exports={Multiaddr:I,multiaddr:A,protocols:n,resolvers:v}}),ku=S((r,e)=>{a();var{Multiaddr:t}=bo(),n=ie("dns4"),o=ie("dns6"),f=ie("dnsaddr"),y=le(ie("dns"),f,n,o),h=le(ie("ip4"),ie("ip6")),m=le(te(h,ie("tcp")),te(y,ie("tcp"))),$=te(h,ie("udp")),E=te($,ie("utp")),v=te($,ie("quic")),D=le(te(m,ie("ws")),te(y,ie("ws"))),I=le(te(m,ie("wss")),te(y,ie("wss"))),A=le(te(m,ie("http")),te(h,ie("http")),te(y,ie("http"))),k=le(te(m,ie("https")),te(h,ie("https")),te(y,ie("https"))),O=le(te(D,ie("p2p-webrtc-star"),ie("p2p")),te(I,ie("p2p-webrtc-star"),ie("p2p")),te(D,ie("p2p-webrtc-star")),te(I,ie("p2p-webrtc-star"))),U=le(te(D,ie("p2p-websocket-star"),ie("p2p")),te(I,ie("p2p-websocket-star"),ie("p2p")),te(D,ie("p2p-websocket-star")),te(I,ie("p2p-websocket-star"))),q=le(te(A,ie("p2p-webrtc-direct"),ie("p2p")),te(k,ie("p2p-webrtc-direct"),ie("p2p")),te(A,ie("p2p-webrtc-direct")),te(k,ie("p2p-webrtc-direct"))),j=le(D,I,A,k,O,q,m,E,v,y),P=le(te(j,ie("p2p-stardust"),ie("p2p")),te(j,ie("p2p-stardust"))),L=le(te(j,ie("p2p")),O,q,ie("p2p")),X=le(te(L,ie("p2p-circuit"),L),te(L,ie("p2p-circuit")),te(ie("p2p-circuit"),L),te(j,ie("p2p-circuit")),te(ie("p2p-circuit"),j),ie("p2p-circuit")),K=()=>le(te(X,K),X),N=K(),W=le(te(N,L,N),te(L,N),te(N,L),N,L);e.exports={DNS:y,DNS4:n,DNS6:o,DNSADDR:f,IP:h,TCP:m,UDP:$,QUIC:v,UTP:E,HTTP:A,HTTPS:k,WebSockets:D,WebSocketsSecure:I,WebSocketStar:U,WebRTCStar:O,WebRTCDirect:q,Reliable:j,Stardust:P,Circuit:N,P2P:W,IPFS:W};function ue(he){function we(ge){if(!t.isMultiaddr(ge))try{ge=new t(ge)}catch{return!1}let Ee=he(ge.protoNames());return Ee===null?!1:Ee===!0||Ee===!1?Ee:Ee.length===0}return we}function te(...he){function we(ge){if(ge.length<he.length)return null;let Ee=ge;return he.some(ee=>(Ee=typeof ee=="function"?ee().partialMatch(ge):ee.partialMatch(ge),Array.isArray(Ee)&&(ge=Ee),Ee===null)),Ee}return{toString:function(){return"{ "+he.join(" ")+" }"},input:he,matches:ue(we),partialMatch:we}}function le(...he){function we(ge){let Ee=null;return he.some(ee=>{let xe=typeof ee=="function"?ee().partialMatch(ge):ee.partialMatch(ge);return xe?(Ee=xe,!0):!1}),Ee}return{toString:function(){return"{ "+he.join(" ")+" }"},input:he,matches:ue(we),partialMatch:we}}function ie(he){let we=he;function ge(ee){let xe;if(typeof ee=="string"||ee instanceof Uint8Array)try{xe=new t(ee)}catch{return!1}else xe=ee;let Fe=xe.protoNames();return Fe.length===1&&Fe[0]===we}function Ee(ee){return ee.length===0?null:ee[0]===we?ee.slice(1):null}return{toString:function(){return we},matches:ge,partialMatch:Ee}}}),To=S((r,e)=>{a();var t=typeof navigator<"u"&&navigator.product==="ReactNative";function n(){return t?"http://localhost":d.location?d.location.protocol+"//"+d.location.host:""}var o=d.URL,f=n(),y=class{constructor(m="",$=f){this.super=new o(m,$),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(m){this.super.hash=m}set host(m){this.super.host=m}set hostname(m){this.super.hostname=m}set href(m){this.super.href=m}set password(m){this.super.password=m}set pathname(m){this.super.pathname=m}set port(m){this.super.port=m}set protocol(m){this.super.protocol=m}set search(m){this.super.search=m}set username(m){this.super.username=m}static createObjectURL(m){return o.createObjectURL(m)}static revokeObjectURL(m){o.revokeObjectURL(m)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function h(m){if(typeof m=="string")return new o(m).toString();if(!(m instanceof o)){let $=m.username&&m.password?`${m.username}:${m.password}@`:"",E=m.auth?m.auth+"@":"",v=m.port?":"+m.port:"",D=m.protocol?m.protocol+"//":"",I=m.host||"",A=m.hostname||"",k=m.search||(m.query?"?"+m.query:""),O=m.hash||"",U=m.pathname||"",q=m.path||U+k;return`${D}${$||E}${I||A+v}${q}${O}`}}e.exports={URLWithLegacySupport:y,URLSearchParams:d.URLSearchParams,defaultBase:f,format:h}}),Pu=S((r,e)=>{a();var{URLWithLegacySupport:t,format:n}=To();e.exports=(o,f={},y={},h)=>{let m=f.protocol?f.protocol.replace(":",""):"http";m=(y[m]||h||m)+":";let $;try{$=new t(o)}catch{$={}}let E=Object.assign({},f,{protocol:m||$.protocol,host:f.host||$.host});return new t(o,n(E)).toString()}}),Mu=S((r,e)=>{a();var{URLWithLegacySupport:t,format:n,URLSearchParams:o,defaultBase:f}=To(),y=Pu();e.exports={URL:t,URLSearchParams:o,format:n,relative:y,defaultBase:f}}),Ku=S((r,e)=>{a();var{base58btc:t}=(Re(),R(dt)),{base32:n}=(ht(),R(Rt)),o=(Le(),R(Ue)),{Multiaddr:f}=bo(),y=ku(),{CID:h}=(Q(),R(dr)),{URL:m}=Mu(),{toString:$}=(Ke(),R(Tt)),E=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,v=/^\/(ip[fn]s)\/([^/?#]+)/,D=1,I=2,A=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,k=1,O=2,U=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function q(ee){let xe=ue(ee);try{o.decode(t.decode("z"+xe))}catch{return!1}return!0}function j(ee){try{n.decode(ee)}catch{return!1}return!0}function P(ee){try{return typeof ee=="string"?Boolean(h.parse(ee)):ee instanceof Uint8Array?Boolean(h.decode(ee)):Boolean(h.asCID(ee))}catch{return!1}}function L(ee){if(!ee)return!1;if(f.isMultiaddr(ee))return!0;try{return new f(ee),!0}catch{return!1}}function X(ee){return L(ee)&&y.P2P.matches(ee)}function K(ee,xe,Fe=D,ae=I){let de=ue(ee);if(!de)return!1;let De=de.match(xe);if(!De||De[Fe]!=="ipfs")return!1;let _e=De[ae];return _e&&xe===A&&(_e=_e.toLowerCase()),P(_e)}function N(ee,xe,Fe=D,ae=I){let de=ue(ee);if(!de)return!1;let De=de.match(xe);if(!De||De[Fe]!=="ipns")return!1;let _e=De[ae];if(_e&&xe===A){if(_e=_e.toLowerCase(),P(_e))return!0;try{!_e.includes(".")&&_e.includes("-")&&(_e=_e.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:Qe}=new m(`http://${_e}`);return U.test(Qe)}catch{return!1}}return!0}function W(ee){return typeof ee=="string"}function ue(ee){return ee instanceof Uint8Array?$(ee,"base58btc"):W(ee)?ee:!1}var te=ee=>K(ee,A,O,k),le=ee=>N(ee,A,O,k),ie=ee=>te(ee)||le(ee),he=ee=>K(ee,E)||te(ee),we=ee=>N(ee,E)||le(ee),ge=ee=>he(ee)||we(ee)||ie(ee),Ee=ee=>K(ee,v)||N(ee,v);e.exports={multihash:q,multiaddr:L,peerMultiaddr:X,cid:P,base32cid:ee=>j(ee)&&P(ee),ipfsSubdomain:te,ipnsSubdomain:le,subdomain:ie,subdomainGatewayPattern:A,ipfsUrl:he,ipnsUrl:we,url:ge,pathGatewayPattern:E,ipfsPath:ee=>K(ee,v),ipnsPath:ee=>N(ee,v),path:Ee,pathPattern:v,urlOrPath:ee=>ge(ee)||Ee(ee),cidPath:ee=>W(ee)&&!P(ee)&&K(`/ipfs/${ee}`,v)}}),hc=S((r,e)=>{a();function t(n){let[o,f]=n[Symbol.asyncIterator]?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],y=[];return{peek:()=>o.next(),push:h=>{y.push(h)},next:()=>y.length?{done:!1,value:y.shift()}:o.next(),[f](){return this}}}e.exports=t}),mc=S((r,e)=>{a();var t=async n=>{for await(let o of n);};e.exports=t}),wc=S((r,e)=>{a();var t=async function*(n,o){for await(let f of n)yield o(f)};e.exports=t});a();a();Q();a();gn();a();Q();a();J(pt(),1);a();a();a();a();var ll=["string","number","bigint","symbol"],dl=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Fi(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;return ll.includes(e)?e:e==="function"?"Function":Array.isArray(r)?"Array":hl(r)?"Buffer":pl(r)||"Object"}function hl(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function pl(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(dl.includes(e))return e}a();var l=class{constructor(r,e,t){this.major=r,this.majorEncoded=r<<5,this.name=e,this.terminal=t}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}};l.uint=new l(0,"uint",!0);l.negint=new l(1,"negint",!0);l.bytes=new l(2,"bytes",!0);l.string=new l(3,"string",!0);l.array=new l(4,"array",!1);l.map=new l(5,"map",!1);l.tag=new l(6,"tag",!1);l.float=new l(7,"float",!0);l.false=new l(7,"false",!0);l.true=new l(7,"true",!0);l.null=new l(7,"null",!0);l.undefined=new l(7,"undefined",!0);l.break=new l(7,"break",!0);var b=class{constructor(r,e,t){this.type=r,this.value=e,this.encodedLength=t,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};a();a();var mt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function";new TextDecoder;var yl=new TextEncoder;function pr(r){return mt&&globalThis.Buffer.isBuffer(r)}var $i=mt?r=>r.length>64?globalThis.Buffer.from(r):vi(r):r=>r.length>64?yl.encode(r):vi(r);function Ri(r,e){if(pr(r)&&pr(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function vi(r,e=1/0){let t,n=r.length,o=null,f=[];for(let y=0;y<n;++y){if(t=r.charCodeAt(y),t>55295&&t<57344){if(!o){if(t>56319){(e-=3)>-1&&f.push(239,191,189);continue}else if(y+1===n){(e-=3)>-1&&f.push(239,191,189);continue}o=t;continue}if(t<56320){(e-=3)>-1&&f.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(e-=3)>-1&&f.push(239,191,189);if(o=null,t<128){if((e-=1)<0)break;f.push(t)}else if(t<2048){if((e-=2)<0)break;f.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;f.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;f.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return f}a();var C="CBOR decode error:",An="CBOR encode error:";a();a();var z=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ce(r,e){return H(r,0,e.value)}function H(r,e,t){if(t<z[0]){let n=Number(t);r.push([e|n])}else if(t<z[1]){let n=Number(t);r.push([e|24,n])}else if(t<z[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<z[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<z[4]){let o=[e|27,0,0,0,0,0,0,0],f=Number(n&BigInt(4294967295)),y=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=f&255,f=f>>8,o[7]=f&255,f=f>>8,o[6]=f&255,f=f>>8,o[5]=f&255,o[4]=y&255,y=y>>8,o[3]=y&255,y=y>>8,o[2]=y&255,y=y>>8,o[1]=y&255,r.push(o)}else throw new Error(`${C} encountered BigInt larger than allowable range`)}}ce.encodedSize=function(r){return H.encodedSize(r.value)};H.encodedSize=function(r){return r<z[0]?1:r<z[1]?2:r<z[2]?3:r<z[3]?5:9};ce.compareTokens=function(r,e){return r.value<e.value?-1:r.value>e.value?1:0};a();var Tn=BigInt(-1),Gi=BigInt(1);function mr(r,e){let t=e.value,n=typeof t=="bigint"?t*Tn-Gi:t*-1-1;H(r,e.type.majorEncoded,n)}mr.encodedSize=function(r){let e=r.value,t=typeof e=="bigint"?e*Tn-Gi:e*-1-1;return t<z[0]?1:t<z[1]?2:t<z[2]?3:t<z[3]?5:9};mr.compareTokens=function(r,e){return r.value<e.value?1:r.value>e.value?-1:0};a();function yr(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===l.string?$i(r.value):r.value),r.encodedBytes}function wt(r,e){let t=yr(e);H(r,e.type.majorEncoded,t.length),r.push(t)}wt.encodedSize=function(r){let e=yr(r);return H.encodedSize(e.length)+e.length};wt.compareTokens=function(r,e){return bl(yr(r),yr(e))};function bl(r,e){return r.length<e.length?-1:r.length>e.length?1:Ri(r,e)}a();var os=wt;a();function wr(r,e){H(r,l.array.majorEncoded,e.value)}wr.compareTokens=ce.compareTokens;wr.encodedSize=function(r){return H.encodedSize(r.value)};a();function gr(r,e){H(r,l.map.majorEncoded,e.value)}gr.compareTokens=ce.compareTokens;gr.encodedSize=function(r){return H.encodedSize(r.value)};a();function Dr(r,e){H(r,l.tag.majorEncoded,e.value)}Dr.compareTokens=ce.compareTokens;Dr.encodedSize=function(r){return H.encodedSize(r.value)};a();var Tl=20,Il=21,Sl=22,Ul=23;function br(r,e,t){let n=e.value;if(n===!1)r.push([l.float.majorEncoded|Tl]);else if(n===!0)r.push([l.float.majorEncoded|Il]);else if(n===null)r.push([l.float.majorEncoded|Sl]);else if(n===void 0)r.push([l.float.majorEncoded|Ul]);else{let o,f=!1;(!t||t.float64!==!0)&&(Ss(n),o=Sn(me,1),n===o||Number.isNaN(n)?(me[0]=249,r.push(me.slice(0,3)),f=!0):(Us(n),o=Un(me,1),n===o&&(me[0]=250,r.push(me.slice(0,5)),f=!0))),f||(Fl(n),o=Fs(me,1),me[0]=251,r.push(me.slice(0,9)))}}br.encodedSize=function(r,e){let t=r.value;if(t===!1||t===!0||t===null||t===void 0)return 1;if(!e||e.float64!==!0){Ss(t);let n=Sn(me,1);if(t===n||Number.isNaN(t))return 3;if(Us(t),n=Un(me,1),t===n)return 5}return 9};var Is=new ArrayBuffer(9),fe=new DataView(Is,1),me=new Uint8Array(Is,0);function Ss(r){if(r===1/0)fe.setUint16(0,31744,!1);else if(r===-1/0)fe.setUint16(0,64512,!1);else if(Number.isNaN(r))fe.setUint16(0,32256,!1);else{fe.setFloat32(0,r);let e=fe.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)fe.setUint16(0,31744,!1);else if(t===0)fe.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let o=t-127;o<-24?fe.setUint16(0,0):o<-14?fe.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):fe.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Sn(r,e){if(r.length-e<2)throw new Error(`${C} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,o=t&1023,f;return n===0?f=o*2**-24:n!==31?f=(o+1024)*2**(n-25):f=o===0?1/0:NaN,t&32768?-f:f}function Us(r){fe.setFloat32(0,r,!1)}function Un(r,e){if(r.length-e<4)throw new Error(`${C} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function Fl(r){fe.setFloat64(0,r,!1)}function Fs(r,e){if(r.length-e<8)throw new Error(`${C} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}br.compareTokens=ce.compareTokens;for(let r=0;r<24;r++)new b(l.uint,r,1);for(let r=-1;r>=-24;r--)new b(l.negint,r,1);new b(l.bytes,new Uint8Array(0),1);new b(l.string,"",1);new b(l.array,0,1);new b(l.map,0,1);new b(l.false,!1,1);new b(l.true,!0,1);new b(l.null,null,1);function _l(){let r=[];return r[l.uint.major]=ce,r[l.negint.major]=mr,r[l.bytes.major]=wt,r[l.string.major]=os,r[l.array.major]=wr,r[l.map.major]=gr,r[l.tag.major]=Dr,r[l.float.major]=br,r}_l();var bt=class{constructor(r,e){this.obj=r,this.parent=e}includes(r){let e=this;do if(e.obj===r)return!0;while(e=e.parent);return!1}static createCheck(r,e){if(r&&r.includes(e))throw new Error(`${An} object contains circular references`);return new bt(e,r)}},Oe={null:new b(l.null,null),undefined:new b(l.undefined,void 0),true:new b(l.true,!0),false:new b(l.false,!1),emptyArray:new b(l.array,0),emptyMap:new b(l.map,0)},ze={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new b(l.float,r):r>=0?new b(l.uint,r):new b(l.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new b(l.uint,r):new b(l.negint,r)},Uint8Array(r,e,t,n){return new b(l.bytes,r)},string(r,e,t,n){return new b(l.string,r)},boolean(r,e,t,n){return r?Oe.true:Oe.false},null(r,e,t,n){return Oe.null},undefined(r,e,t,n){return Oe.undefined},ArrayBuffer(r,e,t,n){return new b(l.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new b(l.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Oe.emptyArray,new b(l.break)]:Oe.emptyArray;n=bt.createCheck(n,r);let o=[],f=0;for(let y of r)o[f++]=xr(y,t,n);return t.addBreakTokens?[new b(l.array,r.length),o,new b(l.break)]:[new b(l.array,r.length),o]},Object(r,e,t,n){let o=e!=="Object",f=o?r.keys():Object.keys(r),y=o?r.size:f.length;if(!y)return t.addBreakTokens===!0?[Oe.emptyMap,new b(l.break)]:Oe.emptyMap;n=bt.createCheck(n,r);let h=[],m=0;for(let $ of f)h[m++]=[xr($,t,n),xr(o?r.get($):r[$],t,n)];return Nl(h,t),t.addBreakTokens?[new b(l.map,y),h,new b(l.break)]:[new b(l.map,y),h]}};ze.Map=ze.Object;ze.Buffer=ze.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ze[`${r}Array`]=ze.DataView;function xr(r,e={},t){let n=Fi(r),o=e&&e.typeEncoders&&e.typeEncoders[n]||ze[n];if(typeof o=="function"){let y=o(r,n,e,t);if(y!=null)return y}let f=ze[n];if(!f)throw new Error(`${An} unsupported type: ${n}`);return f(r,n,e,t)}function Nl(r,e){e.mapSorter&&r.sort(e.mapSorter)}a();Q();a();a();J(pt(),1);Q();Le();a();a();J(Zs(),1);J(ea(),1);a();a();var ve=class extends Error{constructor(r="request timed out"){super(r),this.name="TimeoutError",this.code=ve.code}};ve.code="ERR_TIMEOUT";a();var Be=J(ca(),1);Re();ht();zn();Be.default.formatters.b=r=>r==null?"undefined":Y.baseEncode(r);Be.default.formatters.t=r=>r==null?"undefined":Me.baseEncode(r);Be.default.formatters.m=r=>r==null?"undefined":Mn.baseEncode(r);Be.default.formatters.p=r=>r==null?"undefined":r.toString();Be.default.formatters.c=r=>r==null?"undefined":r.toString();Be.default.formatters.k=r=>r==null?"undefined":r.toString();function kr(r){return Object.assign((0,Be.default)(r),{error:(0,Be.default)(`${r}:error`),trace:(0,Be.default)(`${r}:trace`)})}qn();Hn();a();Re();kr("ipfs:components:dag:import");a();J(wa(),1);J(Da(),1);a();J(Ku(),1);Q();a();a();a();var ec=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");Ke();fo();var ke="/",tc=new TextEncoder().encode(ke),Vr=tc[0],G=class{constructor(r,e){if(typeof r=="string")this._buf=co(r);else if(r instanceof Uint8Array)this._buf=r;else throw new Error("Invalid key, should be String of Uint8Array");if(e==null&&(e=!0),e&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Vr)throw new Error("Invalid key")}toString(r="utf8"){return so(this._buf,r)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(r){return new G(r.join(ke))}static random(){return new G(ec().replace(/-/g,""))}static asKey(r){return r instanceof Uint8Array||typeof r=="string"?new G(r):r.uint8Array?new G(r.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=tc),this._buf[0]!==Vr){let r=new Uint8Array(this._buf.byteLength+1);r.fill(Vr,0,1),r.set(this._buf,1),this._buf=r}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Vr;)this._buf=this._buf.subarray(0,-1)}less(r){let e=this.list(),t=r.list();for(let n=0;n<e.length;n++){if(t.length<n+1)return!1;let o=e[n],f=t[n];if(o<f)return!0;if(o>f)return!1}return e.length<t.length}reverse(){return G.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let r=this.namespaces();return r[r.length-1]}list(){return this.toString().split(ke).slice(1)}type(){return Lh(this.baseNamespace())}name(){return Ph(this.baseNamespace())}instance(r){return new G(this.toString()+":"+r)}path(){let r=this.parent().toString();return r.endsWith(ke)||(r+=ke),r+=this.type(),new G(r)}parent(){let r=this.list();return r.length===1?new G(ke):new G(r.slice(0,-1).join(ke))}child(r){return this.toString()===ke?r:r.toString()===ke?this:new G(this.toString()+r.toString(),!1)}isAncestorOf(r){return r.toString()===this.toString()?!1:r.toString().startsWith(this.toString())}isDecendantOf(r){return r.toString()===this.toString()?!1:this.toString().startsWith(r.toString())}isTopLevel(){return this.list().length===1}concat(...r){return G.withNamespaces([...this.namespaces(),...Rh(r.map(e=>e.namespaces()))])}};function Lh(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function Ph(r){let e=r.split(":");return e[e.length-1]}function Rh(r){return[].concat(...r)}J(Yt(),1);a();Q();J(Yt(),1);a();Q();a();new TextDecoder;a();new TextEncoder;a();Q();new TextEncoder;new G("/local/filesroot");J(Yt(),1);a();a();J(hc(),1);J(mc(),1);J(wc(),1);kr("ipfs:components:dag:import");a();Q();a();/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Type.array&&(t.elements++,t.elements!==1&&e.push([44])),t.type===Type.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?e.push([44]):e.push([58]))))}[Type.uint.major](e,t){this.prefix(e);const n=String(t.value),o=[];for(let f=0;f<n.length;f++)o[f]=n.charCodeAt(f);e.push(o)}[Type.negint.major](e,t){this[Type.uint.major](e,t)}[Type.bytes.major](e,t){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,t){this.prefix(e);const n=fromString$7(JSON.stringify(t.value));e.push(n.length>32?asU8A(n):n)}[Type.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,t){}[Type.float.major](e,t){if(t.type.name==="break"){const y=this.inRecursive.pop();if(y){if(y.type===Type.array)e.push([93]);else if(y.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),t.type.name==="true"){e.push([116,114,117,101]);return}else if(t.type.name==="false"){e.push([102,97,108,115,101]);return}else if(t.type.name==="null"){e.push([110,117,108,108]);return}const n=String(t.value),o=[];let f=!1;for(let y=0;y<n.length;y++)o[y]=n.charCodeAt(y),!f&&(o[y]===46||o[y]===101||o[y]===69)&&(f=!0);f||(o.push(46),o.push(48)),e.push(o)}}CID$1.parse;async function*makeIterable(r){let e=0;for(;e<r.length;)yield r[e++]}async function importBuffer(r,e){const t=await makeIterable([e]),[{root:n}]=await itAll(r.import(t));return n.cid}var base64={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var f in o)o.hasOwnProperty(f)&&(n[f]=o[f])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(base64,"__esModule",{value:!0});var INVALID_BYTE=256,Coder=function(){function r(e){e===void 0&&(e="="),this._paddingCharacter=e}return r.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(e*8+5)/6|0},r.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var o=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(o>>>3*6&63),t+=this._encodeByte(o>>>2*6&63),t+=this._encodeByte(o>>>1*6&63),t+=this._encodeByte(o>>>0*6&63)}var f=e.length-n;if(f>0){var o=e[n]<<16|(f===2?e[n+1]<<8:0);t+=this._encodeByte(o>>>3*6&63),t+=this._encodeByte(o>>>2*6&63),f===2?t+=this._encodeByte(o>>>1*6&63):t+=this._paddingCharacter||"",t+=this._paddingCharacter||""}return t},r.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(e*6+7)/8|0},r.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},r.prototype.decode=function(e){if(e.length===0)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,o=new Uint8Array(this.maxDecodedLength(n)),f=0,y=0,h=0,m=0,$=0,E=0,v=0;y<n-4;y+=4)m=this._decodeChar(e.charCodeAt(y+0)),$=this._decodeChar(e.charCodeAt(y+1)),E=this._decodeChar(e.charCodeAt(y+2)),v=this._decodeChar(e.charCodeAt(y+3)),o[f++]=m<<2|$>>>4,o[f++]=$<<4|E>>>2,o[f++]=E<<6|v,h|=m&INVALID_BYTE,h|=$&INVALID_BYTE,h|=E&INVALID_BYTE,h|=v&INVALID_BYTE;if(y<n-1&&(m=this._decodeChar(e.charCodeAt(y)),$=this._decodeChar(e.charCodeAt(y+1)),o[f++]=m<<2|$>>>4,h|=m&INVALID_BYTE,h|=$&INVALID_BYTE),y<n-2&&(E=this._decodeChar(e.charCodeAt(y+2)),o[f++]=$<<4|E>>>2,h|=E&INVALID_BYTE),y<n-3&&(v=this._decodeChar(e.charCodeAt(y+3)),o[f++]=E<<6|v,h|=v&INVALID_BYTE),h!==0)throw new Error("Base64Coder: incorrect characters for decoding");return o},r.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&0-65-26+97,t+=51-e>>>8&26-97-52+48,t+=61-e>>>8&52-48-62+43,t+=62-e>>>8&62-43-63+47,String.fromCharCode(t)},r.prototype._decodeChar=function(e){var t=INVALID_BYTE;return t+=(42-e&e-44)>>>8&-INVALID_BYTE+e-43+62,t+=(46-e&e-48)>>>8&-INVALID_BYTE+e-47+63,t+=(47-e&e-58)>>>8&-INVALID_BYTE+e-48+52,t+=(64-e&e-91)>>>8&-INVALID_BYTE+e-65+0,t+=(96-e&e-123)>>>8&-INVALID_BYTE+e-97+26,t},r.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw new Error("Base64Coder: incorrect padding")}return t},r}();base64.Coder=Coder;var stdCoder=new Coder;function encode$1(r){return stdCoder.encode(r)}base64.encode=encode$1;function decode(r){return stdCoder.decode(r)}base64.decode=decode;var URLSafeCoder=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._encodeByte=function(t){var n=t;return n+=65,n+=25-t>>>8&0-65-26+97,n+=51-t>>>8&26-97-52+48,n+=61-t>>>8&52-48-62+45,n+=62-t>>>8&62-45-63+95,String.fromCharCode(n)},e.prototype._decodeChar=function(t){var n=INVALID_BYTE;return n+=(44-t&t-46)>>>8&-INVALID_BYTE+t-45+62,n+=(94-t&t-96)>>>8&-INVALID_BYTE+t-95+63,n+=(47-t&t-58)>>>8&-INVALID_BYTE+t-48+52,n+=(64-t&t-91)>>>8&-INVALID_BYTE+t-65+0,n+=(96-t&t-123)>>>8&-INVALID_BYTE+t-97+26,n},e}(Coder);base64.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(r){return urlSafeCoder.encode(r)}base64.encodeURLSafe=encodeURLSafe;function decodeURLSafe(r){return urlSafeCoder.decode(r)}base64.decodeURLSafe=decodeURLSafe;base64.encodedLength=function(r){return stdCoder.encodedLength(r)};base64.maxDecodedLength=function(r){return stdCoder.maxDecodedLength(r)};base64.decodedLength=function(r){return stdCoder.decodedLength(r)};var axios$3={exports:{}},axios$2={exports:{}},bind$2=function r(e,t){return function(){for(var o=new Array(arguments.length),f=0;f<o.length;f++)o[f]=arguments[f];return e.apply(t,o)}},bind$1=bind$2,toString=Object.prototype.toString,kindOf=function(r){return function(e){var t=toString.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(r){return r=r.toLowerCase(),function(t){return kindOf(t)===r}}function isArray(r){return Array.isArray(r)}function isUndefined(r){return typeof r>"u"}function isBuffer(r){return r!==null&&!isUndefined(r)&&r.constructor!==null&&!isUndefined(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&isArrayBuffer(r.buffer),e}function isString(r){return typeof r=="string"}function isNumber(r){return typeof r=="number"}function isObject(r){return r!==null&&typeof r=="object"}function isPlainObject(r){if(kindOf(r)!=="object")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}var isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(r){return toString.call(r)==="[object Function]"}function isStream(r){return isObject(r)&&isFunction(r.pipe)}function isFormData(r){var e="[object FormData]";return r&&(typeof FormData=="function"&&r instanceof FormData||toString.call(r)===e||isFunction(r.toString)&&r.toString()===e)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),isArray(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.call(null,r[o],o,r)}function merge(){var r={};function e(o,f){isPlainObject(r[f])&&isPlainObject(o)?r[f]=merge(r[f],o):isPlainObject(o)?r[f]=merge({},o):isArray(o)?r[f]=o.slice():r[f]=o}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],e);return r}function extend(r,e,t){return forEach(e,function(o,f){t&&typeof o=="function"?r[f]=bind$1(o,t):r[f]=o}),r}function stripBOM(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}function inherits(r,e,t,n){r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,t&&Object.assign(r.prototype,t)}function toFlatObject(r,e,t){var n,o,f,y={};e=e||{};do{for(n=Object.getOwnPropertyNames(r),o=n.length;o-- >0;)f=n[o],y[f]||(e[f]=r[f],y[f]=!0);r=Object.getPrototypeOf(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e}function endsWith(r,e,t){r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return n!==-1&&n===t}function toArray(r){if(!r)return null;var e=r.length;if(isUndefined(e))return null;for(var t=new Array(e);e-- >0;)t[e]=r[e];return t}var isTypedArray=function(r){return function(e){return r&&e instanceof r}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$b={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$a=utils$b;function encode(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function r(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(utils$a.isURLSearchParams(t))o=t.toString();else{var f=[];utils$a.forEach(t,function(m,$){m===null||typeof m>"u"||(utils$a.isArray(m)?$=$+"[]":m=[m],utils$a.forEach(m,function(v){utils$a.isDate(v)?v=v.toISOString():utils$a.isObject(v)&&(v=JSON.stringify(v)),f.push(encode($)+"="+encode(v))}))}),o=f.join("&")}if(o){var y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},utils$9=utils$b;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function r(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function r(e){this.handlers[e]&&(this.handlers[e]=null)};InterceptorManager$1.prototype.forEach=function r(e){utils$9.forEach(this.handlers,function(n){n!==null&&e(n)})};var InterceptorManager_1=InterceptorManager$1,utils$8=utils$b,normalizeHeaderName$1=function r(e,t){utils$8.forEach(e,function(o,f){f!==t&&f.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[f])})},utils$7=utils$b;function AxiosError$2(r,e,t,n,o){Error.call(this),this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),o&&(this.response=o)}utils$7.inherits(AxiosError$2,Error,{toJSON:function r(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(r){descriptors[r]={value:r}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(r,e,t,n,o,f){var y=Object.create(prototype);return utils$7.toFlatObject(r,y,function(m){return m!==Error.prototype}),AxiosError$2.call(y,r.message,e,t,n,o),y.name=r.name,f&&Object.assign(y,f),y};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$6=utils$b;function toFormData$1(r,e){e=e||new FormData;var t=[];function n(f){return f===null?"":utils$6.isDate(f)?f.toISOString():utils$6.isArrayBuffer(f)||utils$6.isTypedArray(f)?typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function o(f,y){if(utils$6.isPlainObject(f)||utils$6.isArray(f)){if(t.indexOf(f)!==-1)throw Error("Circular reference detected in "+y);t.push(f),utils$6.forEach(f,function(m,$){if(!utils$6.isUndefined(m)){var E=y?y+"."+$:$,v;if(m&&!y&&typeof m=="object"){if(utils$6.endsWith($,"{}"))m=JSON.stringify(m);else if(utils$6.endsWith($,"[]")&&(v=utils$6.toArray(m))){v.forEach(function(D){!utils$6.isUndefined(D)&&e.append(E,n(D))});return}}o(m,E)}}),t.pop()}else e.append(y,n(f))}return o(r),e}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var r=AxiosError_1;return settle=function(t,n,o){var f=o.config.validateStatus;!o.status||!f||f(o.status)?t(o):n(new r("Request failed with status code "+o.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var r=utils$b;return cookies=r.isStandardBrowserEnv()?function(){return{write:function(n,o,f,y,h,m){var $=[];$.push(n+"="+encodeURIComponent(o)),r.isNumber(f)&&$.push("expires="+new Date(f).toGMTString()),r.isString(y)&&$.push("path="+y),r.isString(h)&&$.push("domain="+h),m===!0&&$.push("secure"),document.cookie=$.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function r(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},combineURLs$1=function r(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function r(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var r=utils$b,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(n){var o={},f,y,h;return n&&r.forEach(n.split(`
`),function($){if(h=$.indexOf(":"),f=r.trim($.substr(0,h)).toLowerCase(),y=r.trim($.substr(h+1)),f){if(o[f]&&e.indexOf(f)>=0)return;f==="set-cookie"?o[f]=(o[f]?o[f]:[]).concat([y]):o[f]=o[f]?o[f]+", "+y:y}}),o},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var r=utils$b;return isURLSameOrigin=r.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function f(y){var h=y;return t&&(n.setAttribute("href",h),h=n.href),n.setAttribute("href",h),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=f(window.location.href),function(h){var m=r.isString(h)?f(h):h;return m.protocol===o.protocol&&m.host===o.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var r=AxiosError_1,e=utils$b;function t(n){r.call(this,n==null?"canceled":n,r.ERR_CANCELED),this.name="CanceledError"}return e.inherits(t,r,{__CANCEL__:!0}),CanceledError_1=t,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var r=utils$b,e=requireSettle(),t=requireCookies(),n=buildURL$1,o=buildFullPath$1,f=requireParseHeaders(),y=requireIsURLSameOrigin(),h=transitional,m=AxiosError_1,$=requireCanceledError(),E=requireParseProtocol();return xhr=function(D){return new Promise(function(A,k){var O=D.data,U=D.headers,q=D.responseType,j;function P(){D.cancelToken&&D.cancelToken.unsubscribe(j),D.signal&&D.signal.removeEventListener("abort",j)}r.isFormData(O)&&r.isStandardBrowserEnv()&&delete U["Content-Type"];var L=new XMLHttpRequest;if(D.auth){var X=D.auth.username||"",K=D.auth.password?unescape(encodeURIComponent(D.auth.password)):"";U.Authorization="Basic "+btoa(X+":"+K)}var N=o(D.baseURL,D.url);L.open(D.method.toUpperCase(),n(N,D.params,D.paramsSerializer),!0),L.timeout=D.timeout;function W(){if(!!L){var le="getAllResponseHeaders"in L?f(L.getAllResponseHeaders()):null,ie=!q||q==="text"||q==="json"?L.responseText:L.response,he={data:ie,status:L.status,statusText:L.statusText,headers:le,config:D,request:L};e(function(ge){A(ge),P()},function(ge){k(ge),P()},he),L=null}}if("onloadend"in L?L.onloadend=W:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(W)},L.onabort=function(){!L||(k(new m("Request aborted",m.ECONNABORTED,D,L)),L=null)},L.onerror=function(){k(new m("Network Error",m.ERR_NETWORK,D,L,L)),L=null},L.ontimeout=function(){var ie=D.timeout?"timeout of "+D.timeout+"ms exceeded":"timeout exceeded",he=D.transitional||h;D.timeoutErrorMessage&&(ie=D.timeoutErrorMessage),k(new m(ie,he.clarifyTimeoutError?m.ETIMEDOUT:m.ECONNABORTED,D,L)),L=null},r.isStandardBrowserEnv()){var ue=(D.withCredentials||y(N))&&D.xsrfCookieName?t.read(D.xsrfCookieName):void 0;ue&&(U[D.xsrfHeaderName]=ue)}"setRequestHeader"in L&&r.forEach(U,function(ie,he){typeof O>"u"&&he.toLowerCase()==="content-type"?delete U[he]:L.setRequestHeader(he,ie)}),r.isUndefined(D.withCredentials)||(L.withCredentials=!!D.withCredentials),q&&q!=="json"&&(L.responseType=D.responseType),typeof D.onDownloadProgress=="function"&&L.addEventListener("progress",D.onDownloadProgress),typeof D.onUploadProgress=="function"&&L.upload&&L.upload.addEventListener("progress",D.onUploadProgress),(D.cancelToken||D.signal)&&(j=function(le){!L||(k(!le||le&&le.type?new $:le),L.abort(),L=null)},D.cancelToken&&D.cancelToken.subscribe(j),D.signal&&(D.signal.aborted?j():D.signal.addEventListener("abort",j))),O||(O=null);var te=E(N);if(te&&["http","https","file"].indexOf(te)===-1){k(new m("Unsupported protocol "+te+":",m.ERR_BAD_REQUEST,D));return}L.send(O)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$5=utils$b,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(r,e){!utils$5.isUndefined(r)&&utils$5.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function getDefaultAdapter(){var r;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(r=requireXhr()),r}function stringifySafely(r,e,t){if(utils$5.isString(r))try{return(e||JSON.parse)(r),utils$5.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function r(e,t){if(normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils$5.isFormData(e)||utils$5.isArrayBuffer(e)||utils$5.isBuffer(e)||utils$5.isStream(e)||utils$5.isFile(e)||utils$5.isBlob(e))return e;if(utils$5.isArrayBufferView(e))return e.buffer;if(utils$5.isURLSearchParams(e))return setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=utils$5.isObject(e),o=t&&t["Content-Type"],f;if((f=utils$5.isFileList(e))||n&&o==="multipart/form-data"){var y=this.env&&this.env.FormData;return toFormData(f?{"files[]":e}:e,y&&new y)}else if(n||o==="application/json")return setContentTypeIfUnset(t,"application/json"),stringifySafely(e);return e}],transformResponse:[function r(e){var t=this.transitional||defaults$3.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,f=!n&&this.responseType==="json";if(f||o&&utils$5.isString(e)&&e.length)try{return JSON.parse(e)}catch(y){if(f)throw y.name==="SyntaxError"?AxiosError$1.from(y,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):y}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function r(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function r(e){defaults$3.headers[e]={}});utils$5.forEach(["post","put","patch"],function r(e){defaults$3.headers[e]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$b,defaults$2=defaults_1,transformData$1=function r(e,t,n){var o=this||defaults$2;return utils$4.forEach(n,function(y){e=y.call(o,e,t)}),e},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(e){return!!(e&&e.__CANCEL__)}),isCancel$1}var utils$3=utils$b,transformData=transformData$1,isCancel=requireIsCancel(),defaults$1=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new CanceledError}var dispatchRequest$1=function r(e){throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData.call(e,e.data,e.headers,e.transformRequest),e.headers=utils$3.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var t=e.adapter||defaults$1.adapter;return t(e).then(function(o){return throwIfCancellationRequested(e),o.data=transformData.call(e,o.data,o.headers,e.transformResponse),o},function(o){return isCancel(o)||(throwIfCancellationRequested(e),o&&o.response&&(o.response.data=transformData.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},utils$2=utils$b,mergeConfig$2=function r(e,t){t=t||{};var n={};function o(E,v){return utils$2.isPlainObject(E)&&utils$2.isPlainObject(v)?utils$2.merge(E,v):utils$2.isPlainObject(v)?utils$2.merge({},v):utils$2.isArray(v)?v.slice():v}function f(E){if(utils$2.isUndefined(t[E])){if(!utils$2.isUndefined(e[E]))return o(void 0,e[E])}else return o(e[E],t[E])}function y(E){if(!utils$2.isUndefined(t[E]))return o(void 0,t[E])}function h(E){if(utils$2.isUndefined(t[E])){if(!utils$2.isUndefined(e[E]))return o(void 0,e[E])}else return o(void 0,t[E])}function m(E){if(E in t)return o(e[E],t[E]);if(E in e)return o(void 0,e[E])}var $={url:y,method:y,data:y,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:m};return utils$2.forEach(Object.keys(e).concat(Object.keys(t)),function(v){var D=$[v]||f,I=D(v);utils$2.isUndefined(I)&&D!==m||(n[v]=I)}),n},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){validators$1[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var deprecatedWarnings={};validators$1.transitional=function r(e,t,n){function o(f,y){return"[Axios v"+VERSION+"] Transitional option '"+f+"'"+y+(n?". "+n:"")}return function(f,y,h){if(e===!1)throw new AxiosError(o(y," has been removed"+(t?" in "+t:"")),AxiosError.ERR_DEPRECATED);return t&&!deprecatedWarnings[y]&&(deprecatedWarnings[y]=!0,console.warn(o(y," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(f,y,h):!0}};function assertOptions(r,e,t){if(typeof r!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(r),o=n.length;o-- >0;){var f=n[o],y=e[f];if(y){var h=r[f],m=h===void 0||y(h,f,r);if(m!==!0)throw new AxiosError("option "+f+" must be "+m,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError("Unknown option "+f,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$b,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(r){this.defaults=r,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function r(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mergeConfig$1(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var o=[],f=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(t)===!1||(f=f&&I.synchronous,o.unshift(I.fulfilled,I.rejected))});var y=[];this.interceptors.response.forEach(function(I){y.push(I.fulfilled,I.rejected)});var h;if(!f){var m=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(m,o),m=m.concat(y),h=Promise.resolve(t);m.length;)h=h.then(m.shift(),m.shift());return h}for(var $=t;o.length;){var E=o.shift(),v=o.shift();try{$=E($)}catch(D){v(D);break}}try{h=dispatchRequest($)}catch(D){return Promise.reject(D)}for(;y.length;)h=h.then(y.shift(),y.shift());return h};Axios$1.prototype.getUri=function r(e){e=mergeConfig$1(this.defaults,e);var t=buildFullPath(e.baseURL,e.url);return buildURL(t,e.params,e.paramsSerializer)};utils$1.forEach(["delete","get","head","options"],function r(e){Axios$1.prototype[e]=function(t,n){return this.request(mergeConfig$1(n||{},{method:e,url:t,data:(n||{}).data}))}});utils$1.forEach(["post","put","patch"],function r(e){function t(n){return function(f,y,h){return this.request(mergeConfig$1(h||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:f,data:y}))}}Axios$1.prototype[e]=t(),Axios$1.prototype[e+"Form"]=t(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var r=requireCanceledError();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(y){n=y});var o=this;this.promise.then(function(f){if(!!o._listeners){var y,h=o._listeners.length;for(y=0;y<h;y++)o._listeners[y](f);o._listeners=null}}),this.promise.then=function(f){var y,h=new Promise(function(m){o.subscribe(m),y=m}).then(f);return h.cancel=function(){o.unsubscribe(y)},h},t(function(y){o.reason||(o.reason=new r(y),n(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(!!this._listeners){var o=this._listeners.indexOf(n);o!==-1&&this._listeners.splice(o,1)}},e.source=function(){var n,o=new e(function(y){n=y});return{token:o,cancel:n}},CancelToken_1=e,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(e){return function(n){return e.apply(null,n)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var r=utils$b;return isAxiosError=function(t){return r.isObject(t)&&t.isAxiosError===!0},isAxiosError}var utils=utils$b,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(r){var e=new Axios(r),t=bind(Axios.prototype.request,e);return utils.extend(t,Axios.prototype,e),utils.extend(t,e),t.create=function(o){return createInstance(mergeConfig(r,o))},t}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function r(e){return Promise.all(e)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(r){r.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports);let GQL_ENDPOINT="https://arweave.net/graphql";const setEndpointUrl=r=>GQL_ENDPOINT=r,run=async(r,e)=>{const t=JSON.stringify({query:r,variables:e}),{data:n}=await axios.post(GQL_ENDPOINT,t,{headers:{"content-type":"application/json"}});return n},all=async(r,e)=>{let t=!0,n=[],o="";for(;t;){const f=(await run(r,{...e,cursor:o})).data.transactions;f.edges&&f.edges.length&&(n=n.concat(f.edges),o=f.edges[f.edges.length-1].cursor),t=f.pageInfo.hasNextPage}return n},backupEndpoint="https://arweave-search.goldsky.com/graphql";async function getOwnerArDag({arweave:r,searchTags:e,dagOwner:t}){const{host:n,port:o,protocol:f}=r.api.config,y=`${f}://${n}:${o}/graphql`;setEndpointUrl(y);const h=`query($cursor: String) {
    transactions(
    owners: ["${t}"]
    tags: [{ name: "App-Name", values: ["ArDag"] }]
    after: $cursor
    first: 100
  ) {
    pageInfo {
      hasNextPage
    }
    edges {
      cursor
      node {
        id
      }
    }
  }
}`;try{return(await all(h)).map($=>$.node)}catch(m){console.log("ArGQL failed",m),setEndpointUrl(backupEndpoint)}try{return(await all(h)).map($=>$.node)}catch(m){console.log("ArGQL failed, both gateways down",m)}}const AR_DAG="ArDag";async function persist({buffer:r=null,arweave:e=null,wallet:t=null,tags:n=[]}){if(!r)throw new Error("buffer is required");if(!e){if(!this.arweave)throw new Error("Arweave is required");e=this.arweave}t||this.wallet&&(t=this.wallet);const{root:o}=await Transaction.load(r),{cid:f}=await encode$e(r);let y=await e.createTransaction({data:r});if(n.push({name:"App-Name",value:[AR_DAG]}),n.push({name:"Root-CID",value:[o.toString()]}),n.push({name:"CAR-CID",value:[f.toString()]}),n&&n.length)for(const h of n)y.addTag(h.name.toString(),h.value.toString());return await e.transactions.sign(y,t),await this.post(y),o}async function load({dagOwner:r,dag:e,arweave:t=null}){if(!r)throw new Error("dagOwner is required");if(!e){if(!this.dag)throw new Error("DagRepo is required");e=this.dag}if(!t){if(!this.arweave)throw new Error("Arweave is required");t=this.arweave}const n=[{name:"App-Name",values:[AR_DAG]}];let o=null;try{o=await getOwnerArDag({arweave:t,searchTags:n,dagOwner:r})}catch(h){console.log("ArDag get failed",h)}let f;const y=async(h,m)=>{try{const $=await getData({arweave:t,txid:m.id}),E=await importBuffer(h,$);f||(f=E),h.hasOwnProperty("rootCID")&&!(h!=null&&h.rootCID)&&(h.rootCID=E)}catch($){console.log("Import failed",$)}};for(const h of o)await y(e,h);return f}async function get({dagOwner:r,tag:e=null,arweave:t=null,cid:n=null}){if(!r)throw new Error("dagOwner is required");t||(this.arweave?t=this.arweave:t=require("arweave").default.init({host:"arweave.net",port:443,protocol:"https",timeout:2e4,logging:!1}));const o=[{name:"App-Name",values:[AR_DAG]}];let f=null;try{f=await getOwnerArDag({arweave:t,searchTags:o,dagOwner:r})}catch(m){console.log("ArDag get failed",m)}if(!f)return null;let y,h=n;for(;!y&&f.length;){let m,$=f.shift().id;try{m=await getData({arweave:t,txid:$})}catch(I){if(console.log("get Data txid failed",{txid:$},I),!m)continue}const{root:E,get:v}=await Transaction.load(m),D=await v(E);if(!e&&!n)return D;e&&D.hasOwnProperty(e)&&!h&&(h=D[e].obj);try{y=await v(h)}catch{}}return y}async function latest(r){return(await this.dag.get(this.rootCID,{path:`/${r}/obj`})).value}async function getInstance({dag:r,wallet:e=null,dagOwner:t=!1}){if(!r)throw new Error("Supply a DagRepo from https://github.com/DougAnderson444/ipld-car-txs");return t?this.rootCID=await this.load({dag:r,dagOwner:t}):t=await this.arweave.wallets.jwkToAddress(e),{arweave:this.arweave,post:this.post,dagOwner:t,wallet:e,dag:r,load,rootCID:this.rootCID||null,latest,persist,async save(n,o,{tags:f}={tags:[]}){const y=await this.dag.tx.add(n,o);this.rootCID=y;const h=await this.dag.tx.commit();return await this.persist({buffer:h,tags:f}),y}}}function initializeArDag({arweave:r,post:e=null}){if(!r)throw new Error("Arweave instance must be provided");const n=r.transactions.post.bind(r.transactions);return{arweave:r,post:e||n,getData,getInstance,persist,get,load}}async function getData({arweave:r=null,txid:e}){if(!e)throw new Error("txid is required");if(!r){if(!this.arweave)throw new Error("Arweave is required");r=this.arweave}try{let t=await r.api.get(`/${e}`,{responseType:"arraybuffer"});if(t.status>=200&&t.status<300)return new Uint8Array(t.data)}catch(t){console.log("get Data failed",{txid:e},t)}}export{get,initializeArDag,load,persist};
